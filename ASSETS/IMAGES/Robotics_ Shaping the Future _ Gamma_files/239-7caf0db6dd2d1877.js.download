(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[239],{89644:function(e,t,n){e.exports=n(25644)},70353:function(e,t,n){"use strict";var i=n(93044),r=n(86955),s=n(92233),o=n(68030),l=n(97948),a=n(51875),c=n(60842),d=n(88618);e.exports=function(e){return new Promise(function(t,n){var u=e.data,h=e.headers,x=e.responseType;i.isFormData(u)&&delete h["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var m=e.auth.username||"",f=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";h.Authorization="Basic "+btoa(m+":"+f)}var g=l(e.baseURL,e.url);function j(){if(p){var i="getAllResponseHeaders"in p?a(p.getAllResponseHeaders()):null;r(t,n,{data:x&&"text"!==x&&"json"!==x?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:i,config:e,request:p}),p=null}}if(p.open(e.method.toUpperCase(),o(g,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,"onloadend"in p?p.onloadend=j:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(j)},p.onabort=function(){p&&(n(d("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){n(d("Network Error",e,null,p)),p=null},p.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(d(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",p)),p=null},i.isStandardBrowserEnv()){var v=(e.withCredentials||c(g))&&e.xsrfCookieName?s.read(e.xsrfCookieName):void 0;v&&(h[e.xsrfHeaderName]=v)}"setRequestHeader"in p&&i.forEach(h,function(e,t){void 0===u&&"content-type"===t.toLowerCase()?delete h[t]:p.setRequestHeader(t,e)}),i.isUndefined(e.withCredentials)||(p.withCredentials=!!e.withCredentials),x&&"json"!==x&&(p.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){p&&(p.abort(),n(e),p=null)}),u||(u=null),p.send(u)})}},25644:function(e,t,n){"use strict";var i=n(93044),r=n(73644),s=n(62215),o=n(92937);function l(e){var t=new s(e),n=r(s.prototype.request,t);return i.extend(n,s.prototype,t),i.extend(n,t),n}var a=l(n(1439));a.Axios=s,a.create=function(e){return l(o(a.defaults,e))},a.Cancel=n(13148),a.CancelToken=n(34089),a.isCancel=n(98041),a.all=function(e){return Promise.all(e)},a.spread=n(70783),a.isAxiosError=n(65587),e.exports=a,e.exports.default=a},13148:function(e){"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},34089:function(e,t,n){"use strict";var i=n(13148);function r(e){if("function"!=typeof e)throw TypeError("executor must be a function.");this.promise=new Promise(function(e){t=e});var t,n=this;e(function(e){n.reason||(n.reason=new i(e),t(n.reason))})}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r(function(t){e=t}),cancel:e}},e.exports=r},98041:function(e){"use strict";e.exports=function(e){return!!(e&&e.__CANCEL__)}},62215:function(e,t,n){"use strict";var i=n(93044),r=n(68030),s=n(946),o=n(6895),l=n(92937),a=n(17525),c=a.validators;function d(e){this.defaults=e,this.interceptors={request:new s,response:new s}}d.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{},e.url=arguments[0]):e=e||{},(e=l(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t,n=e.transitional;void 0!==n&&a.assertOptions(n,{silentJSONParsing:c.transitional(c.boolean,"1.0.0"),forcedJSONParsing:c.transitional(c.boolean,"1.0.0"),clarifyTimeoutError:c.transitional(c.boolean,"1.0.0")},!1);var i=[],r=!0;this.interceptors.request.forEach(function(t){("function"!=typeof t.runWhen||!1!==t.runWhen(e))&&(r=r&&t.synchronous,i.unshift(t.fulfilled,t.rejected))});var s=[];if(this.interceptors.response.forEach(function(e){s.push(e.fulfilled,e.rejected)}),!r){var d=[o,void 0];for(Array.prototype.unshift.apply(d,i),d=d.concat(s),t=Promise.resolve(e);d.length;)t=t.then(d.shift(),d.shift());return t}for(var u=e;i.length;){var h=i.shift(),x=i.shift();try{u=h(u)}catch(e){x(e);break}}try{t=o(u)}catch(e){return Promise.reject(e)}for(;s.length;)t=t.then(s.shift(),s.shift());return t},d.prototype.getUri=function(e){return r((e=l(this.defaults,e)).url,e.params,e.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],function(e){d.prototype[e]=function(t,n){return this.request(l(n||{},{method:e,url:t,data:(n||{}).data}))}}),i.forEach(["post","put","patch"],function(e){d.prototype[e]=function(t,n,i){return this.request(l(i||{},{method:e,url:t,data:n}))}}),e.exports=d},946:function(e,t,n){"use strict";var i=n(93044);function r(){this.handlers=[]}r.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},97948:function(e,t,n){"use strict";var i=n(99192),r=n(48762);e.exports=function(e,t){return e&&!i(t)?r(e,t):t}},88618:function(e,t,n){"use strict";var i=n(11935);e.exports=function(e,t,n,r,s){return i(Error(e),t,n,r,s)}},6895:function(e,t,n){"use strict";var i=n(93044),r=n(38556),s=n(98041),o=n(1439);function l(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return l(e),e.headers=e.headers||{},e.data=r.call(e,e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),i.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||o.adapter)(e).then(function(t){return l(e),t.data=r.call(e,t.data,t.headers,e.transformResponse),t},function(t){return!s(t)&&(l(e),t&&t.response&&(t.response.data=r.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},11935:function(e){"use strict";e.exports=function(e,t,n,i,r){return e.config=t,n&&(e.code=n),e.request=i,e.response=r,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},92937:function(e,t,n){"use strict";var i=n(93044);e.exports=function(e,t){t=t||{};var n={},r=["url","method","data"],s=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],l=["validateStatus"];function a(e,t){return i.isPlainObject(e)&&i.isPlainObject(t)?i.merge(e,t):i.isPlainObject(t)?i.merge({},t):i.isArray(t)?t.slice():t}function c(r){i.isUndefined(t[r])?i.isUndefined(e[r])||(n[r]=a(void 0,e[r])):n[r]=a(e[r],t[r])}i.forEach(r,function(e){i.isUndefined(t[e])||(n[e]=a(void 0,t[e]))}),i.forEach(s,c),i.forEach(o,function(r){i.isUndefined(t[r])?i.isUndefined(e[r])||(n[r]=a(void 0,e[r])):n[r]=a(void 0,t[r])}),i.forEach(l,function(i){i in t?n[i]=a(e[i],t[i]):i in e&&(n[i]=a(void 0,e[i]))});var d=r.concat(s).concat(o).concat(l),u=Object.keys(e).concat(Object.keys(t)).filter(function(e){return -1===d.indexOf(e)});return i.forEach(u,c),n}},86955:function(e,t,n){"use strict";var i=n(88618);e.exports=function(e,t,n){var r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(i("Request failed with status code "+n.status,n.config,null,n.request,n))}},38556:function(e,t,n){"use strict";var i=n(93044),r=n(1439);e.exports=function(e,t,n){var s=this||r;return i.forEach(n,function(n){e=n.call(s,e,t)}),e}},1439:function(e,t,n){"use strict";var i,r=n(34406),s=n(93044),o=n(98868),l=n(11935),a={"Content-Type":"application/x-www-form-urlencoded"};function c(e,t){!s.isUndefined(e)&&s.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var d={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:("undefined"!=typeof XMLHttpRequest?i=n(70353):void 0!==r&&"[object process]"===Object.prototype.toString.call(r)&&(i=n(70353)),i),transformRequest:[function(e,t){return(o(t,"Accept"),o(t,"Content-Type"),s.isFormData(e)||s.isArrayBuffer(e)||s.isBuffer(e)||s.isStream(e)||s.isFile(e)||s.isBlob(e))?e:s.isArrayBufferView(e)?e.buffer:s.isURLSearchParams(e)?(c(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):s.isObject(e)||t&&"application/json"===t["Content-Type"]?(c(t,"application/json"),function(e,t,n){if(s.isString(e))try{return(0,JSON.parse)(e),s.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,r=!n&&"json"===this.responseType;if(r||i&&s.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(r){if("SyntaxError"===e.name)throw l(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};d.headers={common:{Accept:"application/json, text/plain, */*"}},s.forEach(["delete","get","head"],function(e){d.headers[e]={}}),s.forEach(["post","put","patch"],function(e){d.headers[e]=s.merge(a)}),e.exports=d},73644:function(e){"use strict";e.exports=function(e,t){return function(){for(var n=Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return e.apply(t,n)}}},68030:function(e,t,n){"use strict";var i=n(93044);function r(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;if(n)s=n(t);else if(i.isURLSearchParams(t))s=t.toString();else{var s,o=[];i.forEach(t,function(e,t){null!=e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),o.push(r(t)+"="+r(e))}))}),s=o.join("&")}if(s){var l=e.indexOf("#");-1!==l&&(e=e.slice(0,l)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},48762:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},92233:function(e,t,n){"use strict";var i=n(93044);e.exports=i.isStandardBrowserEnv()?{write:function(e,t,n,r,s,o){var l=[];l.push(e+"="+encodeURIComponent(t)),i.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),i.isString(r)&&l.push("path="+r),i.isString(s)&&l.push("domain="+s),!0===o&&l.push("secure"),document.cookie=l.join("; ")},read:function(e){var t=document.cookie.match(RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},99192:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},65587:function(e){"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},60842:function(e,t,n){"use strict";var i=n(93044);e.exports=i.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var i=e;return t&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=i.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},98868:function(e,t,n){"use strict";var i=n(93044);e.exports=function(e,t){i.forEach(e,function(n,i){i!==t&&i.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[i])})}},51875:function(e,t,n){"use strict";var i=n(93044),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,s,o={};return e&&i.forEach(e.split("\n"),function(e){s=e.indexOf(":"),t=i.trim(e.substr(0,s)).toLowerCase(),n=i.trim(e.substr(s+1)),t&&!(o[t]&&r.indexOf(t)>=0)&&("set-cookie"===t?o[t]=(o[t]?o[t]:[]).concat([n]):o[t]=o[t]?o[t]+", "+n:n)}),o}},70783:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},17525:function(e,t,n){"use strict";var i=n(19521),r={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){r[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var s={},o=i.version.split(".");function l(e,t){for(var n=t?t.split("."):o,i=e.split("."),r=0;r<3;r++){if(n[r]>i[r])return!0;if(n[r]<i[r])break}return!1}r.transitional=function(e,t,n){var r=t&&l(t);function o(e,t){return"[Axios v"+i.version+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,l){if(!1===e)throw Error(o(i," has been removed in "+t));return r&&!s[i]&&(s[i]=!0,console.warn(o(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,l)}},e.exports={isOlderVersion:l,assertOptions:function(e,t,n){if("object"!=typeof e)throw TypeError("options must be an object");for(var i=Object.keys(e),r=i.length;r-- >0;){var s=i[r],o=t[s];if(o){var l=e[s],a=void 0===l||o(l,s,e);if(!0!==a)throw TypeError("option "+s+" must be "+a);continue}if(!0!==n)throw Error("Unknown option "+s)}},validators:r}},93044:function(e,t,n){"use strict";var i=n(73644),r=Object.prototype.toString;function s(e){return"[object Array]"===r.call(e)}function o(e){return void 0===e}function l(e){return null!==e&&"object"==typeof e}function a(e){if("[object Object]"!==r.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function c(e){return"[object Function]"===r.call(e)}function d(e,t){if(null!=e){if("object"!=typeof e&&(e=[e]),s(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}}e.exports={isArray:s,isArrayBuffer:function(e){return"[object ArrayBuffer]"===r.call(e)},isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:l,isPlainObject:a,isUndefined:o,isDate:function(e){return"[object Date]"===r.call(e)},isFile:function(e){return"[object File]"===r.call(e)},isBlob:function(e){return"[object Blob]"===r.call(e)},isFunction:c,isStream:function(e){return l(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:d,merge:function e(){var t={};function n(n,i){a(t[i])&&a(n)?t[i]=e(t[i],n):a(n)?t[i]=e({},n):s(n)?t[i]=n.slice():t[i]=n}for(var i=0,r=arguments.length;i<r;i++)d(arguments[i],n);return t},extend:function(e,t,n){return d(t,function(t,r){n&&"function"==typeof t?e[r]=i(t,n):e[r]=t}),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},6185:function(e){var t="function"==typeof Float32Array;function n(e,t,n){return(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e}function i(e,t,n){return 3*(1-3*n+3*t)*e*e+2*(3*n-6*t)*e+3*t}function r(e){return e}e.exports=function(e,s,o,l){if(!(0<=e&&e<=1&&0<=o&&o<=1))throw Error("bezier x values must be in [0, 1] range");if(e===s&&o===l)return r;for(var a=t?new Float32Array(11):Array(11),c=0;c<11;++c)a[c]=n(.1*c,e,o);return function(t){return 0===t?0:1===t?1:n(function(t){for(var r=0,s=1;10!==s&&a[s]<=t;++s)r+=.1;var l=r+(t-a[--s])/(a[s+1]-a[s])*.1,c=i(l,e,o);return c>=.001?function(e,t,r,s){for(var o=0;o<4;++o){var l=i(t,r,s);if(0===l)break;var a=n(t,r,s)-e;t-=a/l}return t}(t,l,e,o):0===c?l:function(e,t,i,r,s){var o,l,a=0;do(o=n(l=t+(i-t)/2,r,s)-e)>0?i=l:t=l;while(Math.abs(o)>1e-7&&++a<10);return l}(t,r,r+.1,e,o)}(t),s,l)}}},10161:function(e){"use strict";var t=Object.prototype.hasOwnProperty,n="~";function i(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,i,s,o){if("function"!=typeof i)throw TypeError("The listener must be a function");var l=new r(i,s||e,o),a=n?n+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],l]:e._events[a].push(l):(e._events[a]=l,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function l(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1)),l.prototype.eventNames=function(){var e,i,r=[];if(0===this._eventsCount)return r;for(i in e=this._events)t.call(e,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},l.prototype.listeners=function(e){var t=n?n+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,s=i.length,o=Array(s);r<s;r++)o[r]=i[r].fn;return o},l.prototype.listenerCount=function(e){var t=n?n+e:e,i=this._events[t];return i?i.fn?1:i.length:0},l.prototype.emit=function(e,t,i,r,s,o){var l=n?n+e:e;if(!this._events[l])return!1;var a,c,d=this._events[l],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,i),!0;case 4:return d.fn.call(d.context,t,i,r),!0;case 5:return d.fn.call(d.context,t,i,r,s),!0;case 6:return d.fn.call(d.context,t,i,r,s,o),!0}for(c=1,a=Array(u-1);c<u;c++)a[c-1]=arguments[c];d.fn.apply(d.context,a)}else{var h,x=d.length;for(c=0;c<x;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,i);break;case 4:d[c].fn.call(d[c].context,t,i,r);break;default:if(!a)for(h=1,a=Array(u-1);h<u;h++)a[h-1]=arguments[h];d[c].fn.apply(d[c].context,a)}}return!0},l.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},l.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},l.prototype.removeListener=function(e,t,i,r){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return o(this,s),this;var l=this._events[s];if(l.fn)l.fn!==t||r&&!l.once||i&&l.context!==i||o(this,s);else{for(var a=0,c=[],d=l.length;a<d;a++)(l[a].fn!==t||r&&!l[a].once||i&&l[a].context!==i)&&c.push(l[a]);c.length?this._events[s]=1===c.length?c[0]:c:o(this,s)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l},41857:function(e){"use strict";let t=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);e.exports=e=>!t.has(e&&e.code)},68642:function(e,t){(function(){(null!==t?t:this).Lethargy=function(){function e(e,t,n,i){this.stability=null!=e?Math.abs(e):8,this.sensitivity=null!=t?1+Math.abs(t):100,this.tolerance=null!=n?1+Math.abs(n):1.1,this.delay=null!=i?i:150,this.lastUpDeltas=(function(){var e,t,n;for(e=1,n=[],t=2*this.stability;1<=t?e<=t:e>=t;1<=t?e++:e--)n.push(null);return n}).call(this),this.lastDownDeltas=(function(){var e,t,n;for(e=1,n=[],t=2*this.stability;1<=t?e<=t:e>=t;1<=t?e++:e--)n.push(null);return n}).call(this),this.deltasTimestamp=(function(){var e,t,n;for(e=1,n=[],t=2*this.stability;1<=t?e<=t:e>=t;1<=t?e++:e--)n.push(null);return n}).call(this)}return e.prototype.check=function(e){var t;return(null!=(e=e.originalEvent||e).wheelDelta?t=e.wheelDelta:null!=e.deltaY?t=-40*e.deltaY:(null!=e.detail||0===e.detail)&&(t=-40*e.detail),this.deltasTimestamp.push(Date.now()),this.deltasTimestamp.shift(),t>0)?(this.lastUpDeltas.push(t),this.lastUpDeltas.shift(),this.isInertia(1)):(this.lastDownDeltas.push(t),this.lastDownDeltas.shift(),this.isInertia(-1))},e.prototype.isInertia=function(e){var t,n,i,r,s,o;return null===(t=-1===e?this.lastDownDeltas:this.lastUpDeltas)[0]?e:(!(this.deltasTimestamp[2*this.stability-2]+this.delay>Date.now())||t[0]!==t[2*this.stability-1])&&(i=t.slice(0,this.stability),n=t.slice(this.stability,2*this.stability),o=i.reduce(function(e,t){return e+t}),s=n.reduce(function(e,t){return e+t}),!!(Math.abs(o/i.length)<Math.abs((r=s/n.length)*this.tolerance)&&this.sensitivity<Math.abs(r))&&e)},e.prototype.showLastUpDeltas=function(){return this.lastUpDeltas},e.prototype.showLastDownDeltas=function(){return this.lastDownDeltas},e}()}).call(this)},84538:function(e,t,n){"use strict";n.d(t,{N:function(){return eg}});var i=n(52322),r=n(69251),s=n(30523),o=n(28535),l=n(42946),a=n(5879),c=n(2784),d=n(46692),u=n(51535),h=n(13867),x=n(91309),p=n(71383),m=n(93199),f=n(17993),g=n(5740),j=n(43297),v=n(29117),C=n(77533),b=n(54933),y=n(49929),k=n(78456),w=n(95647),S=n(43574);let E=(0,c.memo)(()=>{let[e]=(0,w.Ns)("editorMode"),t=(0,k.A)(S.c);return(0,i.jsxs)(f.g,{spacing:3,align:"stretch",children:[(0,i.jsx)(o.xu,{fontSize:"sm",children:(0,i.jsx)(a.cC,{id:"x4f8pZ"})}),"freeform"===e?(0,i.jsx)(I,{title:t.freeform.label(),icon:t.freeform.icon,children:(0,i.jsx)(a.cC,{id:"ELg7Zs",values:{0:t.freeform.label()}})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(I,{title:t.structured.label(),icon:t.structured.icon,children:(0,i.jsx)(a.cC,{id:"iKG7iK",values:{0:t.structured.label()}})}),(0,i.jsx)(I,{title:(0,i.jsx)(a.cC,{id:"+mgW41"}),icon:l.Yai,children:(0,i.jsx)(a.cC,{id:"oGNrqw",components:{0:(0,i.jsx)(g.T,{})}})}),(0,i.jsx)(I,{title:(0,i.jsx)(a.cC,{id:"1Nr9Bi"}),icon:b.BDt,children:(0,i.jsx)(a.cC,{id:"5cPTto",components:{0:(0,i.jsx)(g.T,{})}})})]})]})});E.displayName="AIGeneratorTips";let I=e=>{let{icon:t,title:n,children:r}=e;return(0,i.jsx)(o.xu,{p:4,borderRadius:"md",bg:"whiteAlpha.700",children:(0,i.jsxs)(j.K,{color:"gray.700",spacing:"1",children:[(0,i.jsxs)(v.U,{spacing:"1",fontSize:"sm",children:[null!==t&&(0,i.jsx)(y.G,{icon:t}),(0,i.jsx)(C.x,{fontWeight:"600",color:"gray.800",children:n})]}),(0,i.jsx)(C.x,{fontSize:"sm",children:r})]})})};var A=n(96023),_=n(15550),T=n(74090),O=n(87651),D=n(62614);let R=(0,c.memo)(()=>{let e=(0,p.TL)(),t=(0,p.qr)(),n=(0,p.CG)(m.Zm),r=(0,p.CG)(m.d_),s=(0,p.CG)(m.Vn),d=(0,w.o7)(),u=(0,c.useCallback)(()=>{let n=(0,m.jj)(t.getState()).find(e=>e.isDraft);n&&e((0,m.J7)({num:n.num}))},[e,t]);return(0,i.jsx)(o.xu,{children:n&&(0,i.jsx)(O.U,{in:s,children:(0,i.jsxs)(j.K,{direction:{base:"column",md:"row"},alignItems:{base:"stretch",md:"center"},spacing:4,bg:"white",p:"4",borderRadius:"lg",boxShadow:"sm",children:[(0,i.jsxs)(v.U,{flex:"1",children:[(0,i.jsx)(y.G,{icon:l.On6}),(0,i.jsxs)(j.K,{spacing:0,children:[(0,i.jsx)(C.x,{fontWeight:"600",fontSize:"lg",children:(0,i.jsx)(a.cC,{id:"YU/AK+",values:{0:null==r?void 0:r.num}})}),(0,i.jsx)(C.x,{children:(0,i.jsx)(a.cC,{id:"J4c0Rh"})})]})]}),(0,i.jsx)(D.z,{variant:"solid",colorScheme:"primary",onClick:d,children:(0,i.jsx)(a.cC,{id:"u52q7m"})}),(0,i.jsx)(D.z,{onClick:u,variant:"plain",children:(0,i.jsx)(a.cC,{id:"dEgA5A"})})]})})})});R.displayName="OverrideDraftWarning";var P=n(75768),L=n(32899),z=n(10625),G=n(67046),N=n(332),M=n(99058),U=n(44035),F=n(39237),W=n(27599),H=n(64253),q=n(18149),B=n.n(q);let V={size:"sm",variant:"ghost",colorScheme:"gray",color:"gray.800"},K=(0,c.memo)(()=>{let e=(0,p.qr)(),t=(0,p.TL)(),n=(0,w.vS)(),r=(0,p.CG)(m.jj,(e,t)=>B()(e,t)),{hideTooltips:s,GammaTooltipHiderContext:d}=(0,H.o5)(),u=(0,p.CG)(m.Zm),h=(0,c.useCallback)(()=>{t((0,m.ly)()),n((0,m.au)(e.getState()),!1)},[t,n,e]),x=(0,c.useCallback)(()=>{t((0,m.np)()),n((0,m.au)(e.getState()),!1)},[t,n,e]),f=(0,c.useCallback)(i=>{t((0,m.J7)({num:i})),n((0,m.au)(e.getState()),!1)},[t,n,e]);if(0===r.length)return null;let g=r.findIndex(e=>e.isCurrent),j=r[g],v=g<r.length-1;return u?(0,i.jsxs)(P.h,{isAttached:!0,bg:"whiteAlpha.500",borderRadius:"md",children:[(0,i.jsx)(L.h,{display:{base:"none",md:"inline-flex"},isDisabled:!(g>0),"aria-label":"previous version",onClick:x,...V,icon:(0,i.jsx)(y.G,{icon:l.A35,fixedWidth:!0})}),(0,i.jsxs)(z.v,{closeOnSelect:!0,children:[(0,i.jsx)(d,{children:(0,i.jsx)(H.kH,{label:"Version ".concat(j.num," ").concat(j.isDraft?"(current draft)":""),closeOnClick:!1,children:(0,i.jsx)(G.j,{colorScheme:"gray",minW:"10",size:"sm",as:D.z,variant:"ghost",onClick:()=>{s()},children:j.num})})}),(0,i.jsx)(N.h,{children:(0,i.jsxs)(M.q,{maxW:"260px",children:[(0,i.jsx)(U._,{title:"Version history",type:"radio",value:String(j.num),children:[...r].reverse().map((e,t)=>(0,i.jsx)(F.i,{value:String(e.num),onClick:()=>{f(e.num),setTimeout(()=>{s()},0)},children:(0,i.jsxs)(C.x,{children:["Version ",e.num," ",e.isDraft&&"(current draft)"]})},t))}),(0,i.jsx)(W.R,{}),(0,i.jsx)(o.xu,{py:1,px:2,children:(0,i.jsx)(C.x,{fontSize:"xs",children:(0,i.jsx)(a.cC,{id:"gdzgeC"})})})]})})]}),(0,i.jsx)(L.h,{display:{base:"none",md:"inline-flex"},isDisabled:!v,onClick:h,"aria-label":"next version",...V,icon:(0,i.jsx)(y.G,{icon:l._tD,fixedWidth:!0})})]}):null});K.displayName="VersionSwitcher";var Y=n(67109),Z=n(49259),J=n(74008),X=n(85408),Q=n(26112),$=n(35183),ee=n(97166),et=n(29494),en=n(82655),ei=n(87254),er=n(79385),es=n(72396),eo=n(6476),el=n(85652);let ea=(0,c.memo)(()=>{let[e,t]=(0,w.ip)(),[n,r]=(0,w.Ns)("cardDimensions"),[s,o]=(0,w.Ns)("cardWidth"),l=(0,k.A)(eo._J);return(0,i.jsx)(el.j,{label:(0,i.jsx)(a.cC,{id:"kI1qVD"}),colorScheme:"orchid",icon:b.Y$l,values:[l[e].label()],children:(0,i.jsxs)(f.g,{spacing:4,align:"start",children:[(0,i.jsxs)($.NI,{children:[(0,i.jsx)(eo.FQ,{selectedFormat:e,setSelectedFormat:e=>{t(e);let{cardDimensions:n}=(0,es.sJ)(e);n&&r(n)}}),(0,i.jsx)(el.i,{children:(0,i.jsx)(a.cC,{id:"qJHyoI"})})]}),(0,i.jsxs)($.NI,{children:[(0,i.jsx)(ee.l,{fontSize:"sm",fontWeight:"semibold",children:(0,i.jsx)(a.cC,{id:"mbS8l0"})}),(0,i.jsx)(er.Ft,{cardDimensions:n,updateCardDimensions:r}),(0,i.jsx)(el.i,{children:(0,i.jsx)(C.x,{mt:2,children:(0,i.jsx)(a.cC,{id:"Q3Qdcd"})})})]}),(0,i.jsxs)($.NI,{children:[(0,i.jsx)(ee.l,{fontSize:"sm",fontWeight:"semibold",children:(0,i.jsx)(a.cC,{id:"cPp+Ef"})}),(0,i.jsx)(P.h,{size:"sm",isAttached:!0,width:"100%",children:ec.map(e=>{let t="default"===e.key?void 0:e.key;return(0,i.jsx)(D.z,{variant:t===s?"plainSelected":"plain",leftIcon:(0,i.jsx)(y.G,{icon:e.icon,color:"var(--chakra-colors-trueblue-500)"}),boxShadow:"none",onClick:()=>o(t),width:"100%",children:e.label()},e.key)})}),(0,i.jsx)(el.i,{children:(0,i.jsx)(C.x,{mt:2,children:(0,i.jsx)(a.cC,{id:"LiF+HT"})})})]}),(0,i.jsxs)($.NI,{children:[(0,i.jsx)(ee.l,{fontSize:"sm",fontWeight:"semibold",children:(0,i.jsx)(a.cC,{id:"G57+qO"})}),(0,i.jsx)(ed,{})]})]})})}),ec=[{key:"default",label:()=>ei.ag._({id:"TJBHlP"}),icon:en.pL1},{key:"lg",label:()=>ei.ag._({id:"I5S9ZE"}),icon:en.r9b}];ea.displayName="FormatSettingsGroup";let ed=(0,c.memo)(()=>{let[e,t]=(0,w.Q_)(),n=(0,c.useCallback)(e=>t(e.target.value),[t]);return(0,i.jsx)(et.g,{value:e||"",onChange:n,bg:"white",placeholder:ei.ag._({id:"LLAa/9"}),maxLength:es.V4})});ed.displayName="PromptInput";var eu=n(47308),eh=n(4816);let ex=(0,c.memo)(e=>{let{isLoading:t}=e,n=(0,p.CG)(m.Vn);return(0,i.jsxs)(f.g,{flex:"1",overflow:"hidden auto",spacing:3,align:"start",alignItems:"stretch",transition:"all 300ms ease",opacity:n?.75:1,pointerEvents:n?"none":"inherit",cursor:n?"not-allowed":"default",children:[(0,i.jsxs)(o.xu,{fontSize:"sm",children:[(0,i.jsx)(a.cC,{id:"Tz0i8g"})," ",(0,i.jsx)(H.Yq,{label:(0,i.jsx)(a.cC,{id:"FDel/s"})})]}),t?(0,i.jsxs)(j.K,{children:[(0,i.jsx)(Y.O,{height:16}),(0,i.jsx)(Y.O,{height:16}),(0,i.jsx)(Y.O,{height:16})]}):(0,i.jsxs)(Z.U,{allowMultiple:!0,defaultIndex:[0],allowToggle:!0,as:j.K,w:"100%",bg:"white",borderRadius:"lg",overflow:"hidden",spacing:0,divider:(0,i.jsx)(J.i,{}),boxShadow:"sm",children:[(0,i.jsx)(eh.o,{}),(0,i.jsx)(eu.Td,{}),(0,i.jsx)(ea,{})]}),(0,i.jsx)(o.xu,{display:{base:"none",lg:"block"},children:(0,i.jsx)(ep,{})})]})});ex.displayName="AIGeneratorSettings";let ep=(0,c.memo)(()=>{let e=(0,p.CG)(m.mO),{maxTokens:t}=(0,Q.ml)();return(0,i.jsx)(X.H,{charCount:e,max:t,shouldShow:!0})});ep.displayName="AIGeneratorCharacterCount";var em=n(93088),ef=n(75863);let eg=(0,c.memo)(()=>{let[e,t]=(0,c.useState)("outline"),{skipThemeStep:n}=(0,d.Ry)(),f=(0,p.TL)();(0,c.useEffect)(()=>()=>{f((0,m.fB)())},[f]);let g=(0,c.useCallback)(()=>{t("outline")},[]),j="theme"===e?void 0:(0,i.jsx)(a.cC,{id:"opD9db"});return(0,i.jsx)(x.jX,{children:(0,i.jsxs)(A.v4,{children:[(0,i.jsx)(T.D,{onClick:"theme"===e?g:void 0,navIconOverride:"theme"===e?l.acZ:void 0,navLabelOverride:"theme"===e?(0,i.jsx)(a.cC,{id:"iH8pgl"}):void 0,styleProps:"theme"===e?{position:"absolute"}:void 0,pageTitle:j,rightItem:"outline"===e?(0,i.jsx)(K,{}):void 0}),"outline"===e?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(r.r,{templateAreas:{base:'"overrideWarning" \n                   "settings" \n                   "editor"\n                   "tips"',md:'"overrideWarning overrideWarning"\n                   "settings editor"\n                   "tips editor"',xl:'". overrideWarning ." \n                 "settings editor tips" \n                 "settings editor tips"'},gridTemplateColumns:{base:"1fr",md:"2fr 3fr",xl:"3fr 6fr 3fr"},gridTemplateRows:{base:"auto",md:"auto auto 1fr",xl:"auto"},gap:4,mx:"auto",alignItems:"flex-start",p:{base:4,lg:6},pt:{base:4,lg:4},maxW:"1800px",children:[(0,i.jsx)(s.P,{area:"overrideWarning",children:(0,i.jsx)(R,{})}),(0,i.jsx)(s.P,{area:"settings",alignSelf:"start",children:(0,i.jsx)(ex,{isLoading:!1})}),(0,i.jsx)(s.P,{area:"editor",h:"100%",children:(0,i.jsx)(_.e,{showTopbar:!0,showAddBreaks:!0,enableModes:!0,containerProps:{minH:{base:"40vh",lg:"60vh"},fontSize:"16px"},showContentTip:!0})}),(0,i.jsx)(s.P,{area:"tips",children:(0,i.jsx)(E,{})})]}),(0,i.jsx)(o.xu,{height:"20vh"})," ",(0,i.jsx)(ef.U,{cta:n?(0,i.jsx)(h.j,{children:(0,i.jsx)(a.cC,{id:"ziAjHi"})}):(0,i.jsx)(em.O,{onClick:()=>t("theme")})})]}):"theme"===e?(0,i.jsx)(u.O,{}):null]})})});eg.displayName="AIGeneratorPage"},91e3:function(e,t,n){"use strict";n.d(t,{j:function(){return ee}});var i=n(52322),r=n(70065),s=n(43297),o=n(28535),l=n(77533),a=n(11082),c=n(17993),d=n(74409),u=n(62614),h=n(17190),x=n(54933),p=n(49929),m=n(5879),f=n(87254),g=n(2784),j=n(69971),v=n(74810),C=n(21829),b=n(25556),y=n(30240),k=n(5165),w=n(71383),S=n(31601),E=n(55898),I=n(98835),A=n(61652),_=n(5632),T=n(91076);let O=()=>{let[e]=(0,j.JBp)();return(0,g.useCallback)(async t=>{var n;let{settings:i}=t,r=await e({variables:{input:{workspaceId:(0,T.n_)(),generationType:j.FJd.UploadPptV2,input:{prompt:i.filename,format:j.j6H.Deck,settings:i}}}});if(r.errors)throw Error("Got the following graphql errors:\n\n"+r.errors.map(e=>e.message).join("\n\n"));return null===(n=r.data)||void 0===n?void 0:n.createDocGeneration},[e])},D=()=>{let e=O(),{push:t}=(0,_.useRouter)(),[n,i]=(0,g.useState)(!1),[r,s]=(0,g.useState)(null);return{continueToPptImport:(0,g.useCallback)(async n=>{if(i(!0),!n.filename||!n.fileUrl||!n.slideHtml)throw Error("Unable to continue, no fileUrl from ImportedFile");let r={htmlUrl:n.htmlUrl,filename:n.filename,fileUrl:n.fileUrl,numSlides:n.slideHtml.length};try{let n=await e({settings:r});if(!n)throw Error("Unable to create doc generation");t("/create/import-ppt/".concat(n.id))}catch(e){s(e.message),i(!1)}},[e,t]),isLoading:n,error:r}};var R=n(2309),P=n(93199),L=n(66266),z=n(74957),G=n(82863),N=n(95405),M=n(96023),U=n(16791),F=n(74090);let W=e=>{let{children:t}=e;return(0,i.jsx)(G.rg,{clientId:N.v.GOOGLE_DRIVE_IMPORT_CLIENT_ID,children:(0,i.jsxs)(M.v4,{children:[(0,i.jsx)(F.D,{}),(0,i.jsx)(U.U,{title:(0,i.jsx)(m.cC,{id:"eumYBf"}),subtitle:(0,i.jsx)(m.cC,{id:"7aFH7x"}),icon:(0,i.jsx)(p.G,{icon:x.Vmj}),iconBoxProps:{color:"purple.300"},children:(0,i.jsx)(h.W,{maxW:"4xl",display:"flex",flexDirection:"column",alignItems:"center",children:t})})]})})};var H=n(29117),q=n(36474),B=n(32899),V=n(42946),K=n(64253);let Y=e=>{let{importedFile:t,handleDelete:n}=e;return(0,i.jsx)(c.g,{spacing:4,align:"stretch",w:"100%",children:(0,i.jsxs)(H.U,{justifyContent:"center",bg:"white",py:3,px:4,spacing:4,borderRadius:"md",shadow:"sm",children:[(0,i.jsx)(o.xu,{color:"green.500",fontSize:"lg",children:(0,i.jsx)(p.G,{icon:x.f8k})}),(0,i.jsx)(l.x,{noOfLines:1,children:null==t?void 0:t.filename}),(0,i.jsx)(q.L,{}),(0,i.jsx)(K.kH,{placement:"top",label:(0,i.jsx)(m.cC,{id:"cILfnJ"}),children:(0,i.jsx)(B.h,{onClick:n,variant:"ghost",colorScheme:"red","aria-label":f.ag._({id:"cILfnJ"}),icon:(0,i.jsx)(p.G,{icon:V.Vui})})})]})})};var Z=n(82655),J=n(6476);let X=(0,g.memo)(e=>{let{value:t,onSelect:n}=e;return(0,i.jsxs)(s.K,{direction:"row",mb:4,w:"100%",justifyContent:"center",children:[(0,i.jsx)(o.xu,{flex:"1",children:(0,i.jsx)(J.qe,{label:(0,i.jsx)(m.cC,{id:"hEgO4f"}),icon:Z.JyM,selectedIcon:x.JyM,onClick:()=>{n("text")},isSelected:"text"===t,description:(0,i.jsx)(m.cC,{id:"9GItSL",components:{0:(0,i.jsx)("strong",{})}})})}),(0,i.jsx)(o.xu,{flex:"1",children:(0,i.jsx)(J.qe,{label:(0,i.jsx)(m.cC,{id:"Mm48EF"}),icon:Z.qHV,selectedIcon:x.qHV,onClick:()=>{n("vision")},description:(0,i.jsx)(m.cC,{id:"ApxVH5",components:{0:(0,i.jsx)("strong",{})}}),isSelected:"vision"===t,badge:"Beta"})})]})});X.displayName="PptImportTypeSelector";var Q=n(46692);let $={GoogleDocs:j.FJd.ImportGoogleDoc,GoogleSlides:j.FJd.ImportGoogleSlides,PptxUpload:j.FJd.UploadPpt,DocxUpload:j.FJd.UploadWordFile,WebpageUrl:j.FJd.ImportWebpage,PdfUpload:j.FJd.ImportPdf},ee=(0,g.memo)(()=>{let e=(0,w.TL)(),t=(0,S.z$)(),n=(0,r.p)(),[_,T]=(0,g.useState)(!1),{guessSettings:O,isLoading:G}=(0,R.d)({ref:"createImport"}),{goToScreen:N}=(0,Q.Ry)(),M=(0,y.ye)("pptImportV2"),[U,F]=(0,g.useState)("freeform"),H=(0,w.CG)(P.$Q),q=(null==H?void 0:H.source)==="PptxUpload"||(null==H?void 0:H.source)==="GoogleSlides",[B,V]=(0,g.useState)("deck"),[K,Z]=(0,g.useState)("text"),ee=(0,g.useCallback)(n=>{let{source:i,src:r}=n;e((0,P.c_)(n)),"GoogleSlides"===i||"PptxUpload"===i?F("structured"):F("freeform"),r&&(null==t||t.track(S.AA.DOC_IMPORTED,{source:i,src:r,with_ai:!0,latency:n.latency}))},[e,t]),et=(0,b.YO)(void 0,"pptImportV2",S.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_PPT_IMPORT_V2),{continueToPptImport:en,isLoading:ei}=D(),er=G||_||ei,es=(0,g.useCallback)(async()=>{if(!H)return;T(!0);let e=$[H.source];if(q){if("text"===K){try{if(!H.slideHtml)throw Error("No slideHtml returned from getPptHtml");let t=H.slideHtml.map(I.B).map(e=>(0,E.c$)(e,void 0,L.G)).join("\n\n---\n\n"),{cardDimensions:n,defaultContentWidth:i}=A.STYLE_TEMPLATES.deck_traditional.docSettings;await O(e,{format:B,content:t,settings:{textMode:"generate",editorMode:"structured",styleTemplate:"deck_traditional",cardDimensions:n,cardWidth:i}})}catch(e){console.error("[caught] getPptHtml error: ".concat(e)),n({status:"error",title:f.ag._({id:"SlfejT"}),description:f.ag._({id:"lIW942"}),duration:5e3,isClosable:!0})}finally{T(!1)}return}if(!et())return;q&&M&&"vision"===K&&await en(H);return}let t=H.markdown;if(!t){let e=(0,I.B)(H.html);t=(0,E.c$)(e,void 0,L.G)}let i="GoogleDocs"===H.source||"DocxUpload"===H.source||"PdfUpload"===H.source||"WebpageUrl"===H.source,r={format:B,content:t||"",settings:{textMode:i&&"document"!==B?"condense":i||"document"!==B?M&&q&&"text"===K?"generate":"preserve":"generate",editorMode:U}};await O(e,r)},[H,q,B,M,K,U,O,et,n,en]),eo=(0,g.useCallback)(()=>{e((0,P.c_)(void 0))},[e]);return(0,i.jsxs)(W,{children:[!H&&(0,i.jsxs)(s.K,{direction:"column",spacing:{base:6,md:8},align:"center",w:"100%",children:[(0,i.jsx)(k.v,{onImportComplete:ee}),(0,i.jsx)(o.xu,{w:"100%",children:(0,i.jsx)(l.x,{textAlign:"center",color:"blackAlpha.800",children:(0,i.jsx)(m.cC,{id:"HmmZUO",components:{0:(0,i.jsx)(a.r,{textDecoration:"underline",fontWeight:"600",href:"/create/paste?ref=import",onClick:e=>{e.preventDefault(),N("createPaste",{ref:"createImport"})}})}})})})]}),H&&(0,i.jsxs)(c.g,{spacing:{base:8,md:10},maxW:"100%",w:"700px",alignSelf:"center",children:[(0,i.jsx)(Y,{importedFile:H,handleDelete:eo}),(0,i.jsxs)(c.g,{spacing:4,w:"100%",children:[!q&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(c.g,{spacing:4,w:"100%",py:2,children:[(0,i.jsx)(d.X,{size:{base:"sm",md:"md"},textAlign:"center",fontWeight:"500",color:"blackAlpha.700",px:4,children:(0,i.jsx)(m.cC,{id:"SjATqV"})}),(0,i.jsx)(J.FQ,{setSelectedFormat:V,selectedFormat:B})]}),(0,i.jsx)(o.xu,{width:"100%",children:(0,i.jsx)(u.z,{size:"lg",variant:"solid",rightIcon:(0,i.jsx)(p.G,{icon:x.eFW}),onClick:es,isLoading:er,loadingText:f.ag._({id:"qgUvjm"}),w:"100%",children:(0,i.jsx)(m.cC,{id:"xGVfLh"})})})]}),q&&(0,i.jsxs)(i.Fragment,{children:[M&&(0,i.jsxs)(c.g,{spacing:4,w:"100%",py:2,children:[(0,i.jsx)(d.X,{size:{base:"sm",md:"md"},textAlign:"center",fontWeight:"500",color:"blackAlpha.700",px:4,children:(0,i.jsx)(m.cC,{id:"ETAPks"})}),(0,i.jsx)(X,{value:K,onSelect:Z})]}),"text"===K&&(0,i.jsxs)(c.g,{spacing:4,w:"100%",py:2,children:[(0,i.jsx)(d.X,{size:{base:"sm",md:"md"},textAlign:"center",fontWeight:"500",color:"blackAlpha.700",px:4,children:(0,i.jsx)(m.cC,{id:"SjATqV"})}),(0,i.jsx)(J.FQ,{setSelectedFormat:V,selectedFormat:B})]}),(0,i.jsxs)(c.g,{spacing:2,width:"100%",children:[(0,i.jsxs)(u.z,{size:"lg",variant:"solid",rightIcon:(0,i.jsx)(p.G,{icon:x.eFW}),onClick:es,isLoading:er,loadingText:f.ag._({id:"qgUvjm"}),w:"100%",children:[(0,i.jsx)(m.cC,{id:"xGVfLh"}),"vision"===K&&(0,i.jsx)(C.J,{type:"pptImportV2"})]}),"vision"===K&&(0,i.jsx)(v.q,{modalId:"ai-credits-modal-generate-v2",variant:"ghost",justify:"flex-end",segmentEvent:S.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_V2,alignSelf:"center"})]})]})]})]}),(0,i.jsx)(h.W,{maxW:"2xl",pb:"10vw",mt:16,children:(0,i.jsx)(z.F,{generationTypes:[j.FJd.ImportPdf,j.FJd.ImportWebpage,j.FJd.ImportGoogleDoc,j.FJd.ImportGoogleSlides,j.FJd.UploadPpt,j.FJd.UploadPptV2,j.FJd.UploadWordFile]})})]})});ee.displayName="CreateImportPage"},56630:function(e,t,n){"use strict";n.d(t,{B:function(){return S}});var i=n(52322),r=n(17190),s=n(43297),o=n(69251),l=n(30523),a=n(11082),c=n(42946),d=n(54933),u=n(49929),h=n(5879),x=n(5632),p=n(2784),m=n(36107),f=n(96023),g=n(30240),j=n(71383),v=n(93199),C=n(74957),b=n(16791),y=n(46692),k=n(74090);let w=e=>{let{createGenerateV2Enabled:t}=e,n=g.VH.get("importUrl");return{paste:{label:(0,i.jsx)(h.cC,{id:"Q4xH1Z"}),description:(0,i.jsx)(h.cC,{id:"MxbdK6"}),icon:d.nfZ,colorScheme:"pink",imageUrl:"/_next/static/media/Thumbnail-paste.fdba31f6.svg",transform:"rotate(-1.5deg) scale(0.84)",screen:"createPaste"},generate:{label:(0,i.jsx)(h.cC,{id:"ziAjHi"}),description:(0,i.jsx)(h.cC,{id:"anOFr5"}),icon:d.JyM,colorScheme:"trueblue",imageUrl:"/_next/static/media/Thumbnail-generate.8e2e4605.svg",isPopular:!0,screen:t?"createGenerate":"legacyGuidedMode"},import:{label:n?(0,i.jsx)(h.cC,{id:"krF+YI"}):(0,i.jsx)(h.cC,{id:"2xoyqj"}),description:n?(0,i.jsx)(h.cC,{id:"fG2B2z"}):(0,i.jsx)(h.cC,{id:"5c5WYH"}),icon:d.Vmj,colorScheme:"purple",imageUrl:"/_next/static/media/Thumbnail-transform.76b5e76e.svg",transform:"rotate(1.5deg) scale(0.84)",screen:"createImport"}}},S=(0,p.memo)(()=>{let e=(0,j.TL)(),{goToScreen:t,navEnabled:n}=(0,y.Ry)(),d=(0,g.ye)("createGenerateV2"),{query:p}=(0,x.useRouter)(),S=p.channelId;return(0,i.jsxs)(f.v4,{children:[n&&(0,i.jsx)(k.D,{}),(0,i.jsx)(b.U,{title:(0,i.jsx)(h.cC,{id:"1zuBj5"}),subtitle:(0,i.jsx)(h.cC,{id:"h0sjMM"}),children:(0,i.jsx)(r.W,{maxW:"4xl",children:(0,i.jsx)(s.K,{spacing:12,align:"center",children:(0,i.jsx)(o.r,{gap:[4,4,2],gridTemplateAreas:{base:'"generate" "paste" "import"',md:'"paste generate import"'},gridTemplateColumns:{base:"1fr",md:"1fr 1fr 1fr"},width:"100%",children:Object.entries(w({createGenerateV2Enabled:d})).map(n=>{let[r,{label:s,description:o,isPopular:d,colorScheme:x,imageUrl:p,transform:f,screen:g}]=n;return(0,i.jsx)(l.P,{area:r,children:(0,i.jsx)(m.X,{as:a.r,label:s,description:o,isPopular:d,colorScheme:x,imageUrl:p,transform:f,onClick:n=>{e((0,v._8)()),n.preventDefault(),n.stopPropagation(),t(g,{ref:"createWithAI",channelId:S})},ctaIcon:(0,i.jsx)(u.G,{icon:c.eFW}),ctaLabel:(0,i.jsx)(h.cC,{id:"xGVfLh"})})},r)})})})})}),(0,i.jsx)(r.W,{maxW:"2xl",pb:"10vw",children:(0,i.jsx)(C.F,{})})]})});S.displayName="CreatePage"},55655:function(e,t,n){"use strict";n.d(t,{L:function(){return D}});var i=n(52322),r=n(17190),s=n(17993),o=n(28535),l=n(87651),a=n(74409),c=n(62614),d=n(77533),u=n(11082),h=n(42946),x=n(54933),p=n(49929),m=n(64253),f=n(5879),g=n(87254),j=n(2784),v=n(96023),C=n(91309),b=n(92662),y=n(69971),k=n(71383),w=n(15550),S=n(2309),E=n(93199),I=n(96114),A=n(6476),_=n(16791),T=n(46692),O=n(74090);let D=(0,j.memo)(()=>{let{guessSettings:e,isLoading:t}=(0,S.d)({ref:"createPaste"}),n=(0,k.CG)(E.au),[D,R]=(0,j.useState)(!1),[P,L]=(0,j.useState)("deck"),{goToScreen:z}=(0,T.Ry)(),G=(0,j.useCallback)(async()=>{let t=(0,I.Yl)(n),i=(0,I.vE)(n),r=(0,b.J1)(n);await e(y.FJd.PasteText,{format:P,content:n,settings:{textMode:r>=1e3?"document"===P?"preserve":"condense":"generate",editorMode:i>2&&t>5?"structured":"freeform"}})},[e,P,n]);return(0,i.jsx)(C.jX,{children:(0,i.jsxs)(v.v4,{children:[(0,i.jsx)(O.D,{}),(0,i.jsx)(_.U,{title:(0,i.jsx)(f.cC,{id:"RG+JLG"}),subtitle:(0,i.jsx)(f.cC,{id:"v2ydVh"}),icon:(0,i.jsx)(p.G,{icon:x.OEL}),iconBoxProps:{color:"salmon.300"},children:(0,i.jsx)(r.W,{maxW:"2xl",children:(0,i.jsxs)(s.g,{spacing:4,w:"100%",children:[(0,i.jsx)(s.g,{spacing:3,align:"stretch",w:"100%",children:(0,i.jsx)(w.e,{containerProps:{minH:{base:"270px",sm:"300px",md:"50vh"},maxH:"50vh",overflow:"auto",fontSize:"16px"},hideFooter:!0,onEditorUpdate:e=>{let{editor:t}=e;R(!t.isEmpty)}})}),(0,i.jsx)(o.xu,{w:"100%",children:(0,i.jsx)(l.U,{in:D,children:(0,i.jsxs)(s.g,{spacing:4,py:2,w:"100%",children:[(0,i.jsx)(a.X,{size:{base:"sm",md:"md"},textAlign:"center",fontWeight:"500",color:"blackAlpha.700",px:4,children:(0,i.jsx)(f.cC,{id:"SjATqV"})}),(0,i.jsx)(A.FQ,{setSelectedFormat:L,selectedFormat:P})]})})}),(0,i.jsx)(m.kH,{label:n?"":(0,i.jsx)(f.cC,{id:"9IxKHJ"}),isDisabled:!!n,placement:"top",children:(0,i.jsx)(o.xu,{width:"100%",children:(0,i.jsx)(c.z,{size:"lg",minW:"16em",width:"100%",onClick:G,variant:"solid",rightIcon:(0,i.jsx)(p.G,{icon:h.eFW}),isLoading:t,isDisabled:!n,loadingText:g.ag._({id:"qgUvjm"}),children:(0,i.jsx)(f.cC,{id:"xGVfLh"})})})}),(0,i.jsx)(o.xu,{w:"100%",children:(0,i.jsx)(l.U,{in:!D,children:(0,i.jsx)(d.x,{textAlign:"center",color:"blackAlpha.800",children:(0,i.jsx)(f.cC,{id:"LVQnRo",components:{0:(0,i.jsx)(u.r,{onClick:e=>{e.preventDefault(),z("createImport",{ref:"createPaste"})},textDecoration:"underline",fontWeight:"600"})}})})})})]})})})]})})});D.displayName="CreatePastePage"},16791:function(e,t,n){"use strict";n.d(t,{U:function(){return a}});var i=n(52322),r=n(43297),s=n(74409),o=n(28535),l=n(38035);let a=e=>{let{title:t,subtitle:n,icon:a,iconBoxProps:c,children:d}=e;return(0,i.jsxs)(r.K,{alignContent:"center",position:"relative",zIndex:"0",spacing:0,py:{base:"9",md:"8vh"},w:"100%",children:[(0,i.jsxs)(r.K,{spacing:{base:2,md:4},mb:{base:5,md:8},w:"100%",children:[null!==t&&(0,i.jsxs)(s.X,{textAlign:"center",color:"gray.800",fontWeight:"600",fontFamily:"p22-mackinac-pro",w:"100%",size:{base:"xl",md:"2xl"},px:4,children:[a&&(0,i.jsx)(o.xu,{display:"inline",mr:2,...c,children:a}),t]}),n&&(0,i.jsx)(s.X,{size:{base:"sm",md:"md"},textAlign:"center",fontWeight:"500",color:"blackAlpha.700",px:4,children:n})]}),(0,i.jsx)(l.k,{w:"100%",justifyContent:"center",children:d})]})}},82929:function(e,t,n){"use strict";n.d(t,{B:function(){return j}});var i=n(52322),r=n(38035),s=n(2784),o=n(93689),l=n(9850),a=n.n(l),c=n(5632),d=n(93199),u=n(69971),h=n(71383),x=n(46692);let p=e=>{let{id:t}=e,n=(0,c.useRouter)(),i=(0,h.TL)(),r=(0,h.qr)(),{goToScreen:o}=(0,x.Ry)(),[l,a]=(0,s.useState)(!0),[p]=(0,u.UCC)({variables:{id:t}});return(0,s.useEffect)(()=>{n&&r&&p&&p().then(e=>{let{data:t}=e;if(null==t?void 0:t.docGeneration)return t.docGeneration;throw Error("Could not load docGeneration")}).then(e=>{i((0,d.Gn)(m(e))),a(!1)}).catch(()=>{o("createWithAI")})},[i,p,o,n,r]),{isLoading:l}},m=e=>({...e,docGenerateInputs:e.docGenerateInputs.map(f),draftInput:e.draftInput?f(e.draftInput):void 0}),f=e=>{let t=a()(e);return t.settings.textMode||(t.settings.preserveText?t.settings.textMode="preserve":t.settings.textMode="generate",delete t.settings.preserveText),t};var g=n(96023);let j=(0,s.memo)(e=>{let{id:t,children:n}=e,{isLoading:s}=p({id:t});return s?(0,i.jsx)(r.k,{...g.ZQ,w:"100%",h:"100%",flex:1,alignSelf:"center",children:(0,i.jsx)(o.AA,{})}):(0,i.jsx)(i.Fragment,{children:n})});j.displayName="LoadDocGenerationPage"},74957:function(e,t,n){"use strict";n.d(t,{F:function(){return G}});var i=n(52322),r=n(17993),s=n(74409),o=n(42822),l=n(67109),a=n(62614),c=n(42946),d=n(49929),u=n(5879),h=n(2784),x=n(69971),p=n(91076),m=n(43297),f=n(28535),g=n(77533),j=n(82554),v=n(36474),C=n(11082),b=n(29117),y=n(87254),k=n(56974),w=n.n(k),S=n(5632),E=n(86290),I=n(92035),A=n(33279),_=n(46692);let T="trueblue",O={[x.FJd.Generate]:(0,i.jsx)(u.cC,{id:"ziAjHi"}),[x.FJd.PasteText]:(0,i.jsx)(u.cC,{id:"yK5KbG"}),[x.FJd.ImportGoogleDoc]:(0,i.jsx)(u.cC,{id:"yYGwlq"}),[x.FJd.ImportGoogleSlides]:(0,i.jsx)(u.cC,{id:"z+pP4d"}),[x.FJd.ImportPdf]:(0,i.jsx)(u.cC,{id:"+HOkuz"}),[x.FJd.ImportWebpage]:(0,i.jsx)(u.cC,{id:"6gz43w"}),[x.FJd.UploadWordFile]:(0,i.jsx)(u.cC,{id:"yYGwlq"}),[x.FJd.UploadPpt]:(0,i.jsx)(u.cC,{id:"z+pP4d"}),[x.FJd.UploadPptV2]:(0,i.jsx)(u.cC,{id:"z+pP4d"})},D=e=>{let{count:t}=e;return(0,i.jsx)(i.Fragment,{children:[...Array(t)].map((e,t)=>(0,i.jsx)(z,{children:(0,i.jsxs)(m.K,{spacing:1,w:"100%",children:[(0,i.jsx)(l.O,{height:"1rem",borderRadius:"sm",w:"100%"}),(0,i.jsx)(f.xu,{w:"12rem",children:(0,i.jsx)(l.O,{height:"0.875rem",borderRadius:"sm",w:"100%"})})]})},t))})},R=e=>{for(let t of e){let e=t.replace(/<[^>]*>/g,"");if(0!==e.trim().length&&"---"!==e.trim())return e.trim().replace(/^[#]{1,3}/,"")}return y.ag._({id:"wja8aL"})},P=e=>{let{prompt:t,content:n,generationType:i}=e,r=R(n.split("\n"));return i===x.FJd.Generate&&t?t:i===x.FJd.UploadPptV2&&t?null!=t?t:"imported.pptx":r.slice(0,100)},L=e=>{var t,n,r,s,o,l;let{docGeneration:a}=e,p=(0,S.useRouter)(),{goToScreen:m}=(0,_.Ry)(),C={whitespace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},b=(null===(t=a.draftInput)||void 0===t?void 0:t.prompt)||(null===(r=a.docGenerateInputs)||void 0===r?void 0:null===(n=r[0])||void 0===n?void 0:n.prompt),y=(null===(s=a.draftInput)||void 0===s?void 0:s.content)||(null===(l=a.docGenerateInputs)||void 0===l?void 0:null===(o=l[0])||void 0===o?void 0:o.content)||"",k=P({generationType:a.generationType,prompt:b,content:y}),I=(0,E.BK)(a.updatedTime),D=0===a.docGenerateInputs.length,R=(0,A.Xn)(a,{ref:"createWithAI"}),L=(0,h.useCallback)(()=>{let{generationType:e}=a;if(e===x.FJd.Generate)m("createGenerate",{generateId:a.id,ref:"createWithAI"});else if(e===x.FJd.UploadPptV2){if(a.draftInput)p.push("/create/import-ppt/".concat(a.id));else{let e=w()(a.docGenerateInputs),t=null==e?void 0:e.docId;if(!t)throw Error("No generated docId for PPT import docGeneration.id=".concat(a.id));p.push("/docs/".concat(t))}}else m("promptEditor",{generateId:a.id,ref:"createWithAI"})},[a,m,p]);return(0,i.jsxs)(z,{href:R,onClick:L,children:[(0,i.jsxs)(f.xu,{overflow:"hidden",maxW:"100%",children:[(0,i.jsx)(g.x,{...C,textAlign:"left",fontSize:{base:"sm",md:"md"},mb:[1,1.5],children:k}),(0,i.jsxs)(g.x,{...C,textAlign:"left",maxW:"100%",fontWeight:"400",fontSize:{base:"xs",md:"sm"},color:"gray.700",children:[O[a.generationType]," \xb7 ",I,D&&(0,i.jsxs)(i.Fragment,{children:[" \xb7 ",(0,i.jsx)(j.C,{colorScheme:"teal",children:(0,i.jsx)(u.cC,{id:"eneWvv"})})]})]})]}),(0,i.jsx)(v.L,{}),(0,i.jsx)(f.xu,{fontSize:{base:"sm",md:"md"},color:"blackAlpha.400",_groupHover:{color:"".concat(T,".500")},children:(0,i.jsx)(d.G,{icon:c._tD})})]})},z=e=>{let{children:t,href:n,onClick:r,...s}=e;return(0,i.jsx)(a.z,{as:C.r,href:n||void 0,onClick:e=>{e.preventDefault(),null==r||r()},bg:"white",borderRadius:"lg",display:"flex",border:"1px solid",boxShadow:"sm",borderColor:"white",variant:"plain",fontSize:"lg",py:4,spacing:"3",role:"group",minH:{base:16,md:20},_hover:(0,I.s2)()?{}:{color:"".concat(T,".600"),textDecoration:"none",boxShadow:"md"},...s,children:(0,i.jsx)(b.U,{spacing:"3",w:"100%",children:t})})},G=(0,h.memo)(e=>{var t;let{generationTypes:n}=e,m=(0,p.n_)(),[f,g]=(0,h.useState)(!1),{data:j,fetchMore:v,loading:C}=(0,x.M1N)({variables:{workspaceId:m,first:5,generationTypes:n}}),b=null==j?void 0:j.docGenerations.pageInfo,y=(0,h.useCallback)(()=>{(null==b?void 0:b.hasNextPage)&&(null==b?void 0:b.endCursor)&&(g(!0),v({variables:{after:null==b?void 0:b.endCursor}}).finally(()=>{g(!1)}))},[v,b]),k=(0,h.useMemo)(()=>{var e;return(null==j?void 0:null===(e=j.docGenerations)||void 0===e?void 0:e.edges.map(e=>e.node))||[]},[null==j?void 0:null===(t=j.docGenerations)||void 0===t?void 0:t.edges]);return(0,i.jsxs)(r.g,{align:"stretch",spacing:[2,3],children:[(0,i.jsx)(s.X,{fontSize:["lg","2xl"],mb:[2,3],textAlign:"center",fontWeight:"600",color:"gray.800",fontFamily:"p22-mackinac-pro",children:C?(0,i.jsx)(o.M,{children:(0,i.jsx)(l.O,{w:"50%",h:6})}):0===k.length?(0,i.jsx)(i.Fragment,{}):(0,i.jsx)(u.cC,{id:"yvKMb+"})}),(0,i.jsx)(r.g,{spacing:3,align:"stretch",children:C?(0,i.jsx)(D,{count:5}):(null==k?void 0:k.length)===0?(0,i.jsx)(i.Fragment,{}):k.map(e=>(0,i.jsx)(L,{docGeneration:e},e.id))}),f&&(0,i.jsx)(D,{count:5}),(null==b?void 0:b.hasNextPage)&&(0,i.jsx)(a.z,{leftIcon:(0,i.jsx)(d.G,{icon:c.r8p}),variant:"plain",boxShadow:"none",_hover:{bg:"white"},onClick:()=>y(),isLoading:f,children:(0,i.jsx)(u.cC,{id:"yQ2kGp"})})]})});G.displayName="RecentPrompts"},29944:function(e,t,n){"use strict";n.d(t,{u:function(){return i}});let i="ppt-import"},62225:function(e,t,n){"use strict";n.d(t,{C:function(){return j}});var i=n(52322),r=n(29117),s=n(5740),o=n(77533),l=n(28535),a=n(43297),c=n(74409),d=n(20437),u=n(74008),h=n(62614),x=n(42946),p=n(54933),m=n(49929),f=n(5879);n(2784);let g=e=>{let{label:t,shortcuts:n}=e;return(0,i.jsxs)(r.U,{children:[n.map((e,t)=>(0,i.jsx)(s.T,{padding:1,children:e},t)),(0,i.jsx)(o.x,{fontSize:"sm",fontWeight:"medium",whiteSpace:"nowrap",children:t})]})},j=e=>{let{onClose:t,showExitPresentMode:n=!0}=e;return(0,i.jsx)(l.xu,{children:(0,i.jsxs)(a.K,{spacing:6,children:[(0,i.jsxs)(a.K,{spacing:1,children:[(0,i.jsxs)(r.U,{color:"gray.500",children:[(0,i.jsx)(m.G,{icon:x.UFh})," ",(0,i.jsx)(c.X,{size:"xs",fontWeight:"normal",children:(0,i.jsx)(f.cC,{id:"h7MgpO"})})]}),(0,i.jsx)(c.X,{size:"md",children:(0,i.jsx)(f.cC,{id:"UodEcE"})})]}),(0,i.jsxs)(d.M,{spacing:3,columns:1,children:[(0,i.jsx)(g,{label:(0,i.jsx)(f.cC,{id:"9xCxY6"}),shortcuts:[(0,i.jsx)(m.G,{icon:p.acZ},"left"),(0,i.jsx)(m.G,{icon:p.eFW},"right")]}),n&&(0,i.jsx)(g,{label:(0,i.jsx)(f.cC,{id:"IkakN2"}),shortcuts:["Esc"]}),(0,i.jsx)(g,{label:(0,i.jsx)(f.cC,{id:"K0Oq/D"}),shortcuts:["R"]}),(0,i.jsx)(u.i,{borderColor:"gray.300"}),(0,i.jsx)(g,{label:(0,i.jsx)(f.cC,{id:"CgmvBu"}),shortcuts:["S"]}),(0,i.jsx)(g,{label:(0,i.jsx)(f.cC,{id:"/5i2oX"}),shortcuts:[(0,i.jsx)(m.G,{icon:p.FPD},"up"),(0,i.jsx)(m.G,{icon:p.r5q},"down")]}),(0,i.jsx)(g,{label:(0,i.jsx)(f.cC,{id:"rEj/lx"}),shortcuts:["Enter"]})]}),(0,i.jsx)(h.z,{size:"sm",variant:"solid",onClick:t,children:(0,i.jsx)(f.cC,{id:"76gPWk"})})]})},"coach-bar")}},56500:function(e,t,n){"use strict";n.d(t,{z:function(){return v}});var i=n(52322),r=n(38035),s=n(28535),o=n(87254),l=n(2784),a=n(83693),c=n(71383),d=n(302),u=n(72611),h=n(68539),x=n(21298),p=n(32690);let m={fontFamily:'"Inter", sans-serif !important',fontWeight:"500",lineHeight:"1.5 !important",textTransform:"none",letterSpacing:"normal !important",textAlign:"left !important",margin:"0 !important",color:"gray.800 !important",background:"none !important",border:"0 none !important",padding:"0 !important",content:'""'},f={".block-paragraph,.block-heading,.block-title,.block-todo,.block-numbered,.block-bullet":{...m,margin:0,my:"0.75em",":first-child":{mt:"0px !important"},":last-child":{mb:"0px !important"}},".block-paragraph":{fontSize:"1em"},".block-heading,.block-title":{fontWeight:"bold",lineHeight:{fontSize:"1.25"},'.heading[level="1"]':{fontSize:"1.5em"},'.heading[level="2"]':{fontSize:"1.25em"},'.heading[level="3"]':{fontSize:"1.125em"},'.heading[level="4"]':{fontSize:"1em"}},".block-title":{".title":{fontSize:"1.75em"},'.title[level="1"]':{fontSize:"1.75em"},'.title[level="2"]':{fontSize:"2em"},'.title[level="3"]':{fontSize:"2.25em"}},a:{...m,color:"var(--chakra-colors-blue-500) !important","&:hover":{textDecoration:"underline"},'&[href=""]':{textDecorationStyle:"dashed"},cursor:"pointer"},".mention":{bgColor:"trueblue.50",whiteSpace:"break-spaces"},code:{backgroundColor:"var(--chakra-colors-trueblue-50)",color:"var(--body-color)",...p.FC}},g={".block-paragraph,.block-heading,.block-title,.block-todo,.block-numbered,.block-bullet":{...m,margin:0,my:"0.75em",":first-child":{mt:"0px !important"},":last-child":{mb:"0px !important"},color:"white"},code:{backgroundColor:"var(--chakra-colors-whiteAlpha-100)",color:"var(--chakra-colors-gray-200)",...p.FC},".block-todo label.chakra-checkbox .chakra-checkbox__control[data-checked]":{backgroundColor:"var(--chakra-colors-whiteAlpha-100)",color:"var(--chakra-colors-white)"}},j=e=>{let{isDark:t=!1}=e;return{".ProseMirror":{height:"100%"},...f,...x.dE,"--box-border-radius":"var(--chakra-radii-sm)","--link-color":t?"var(--chakra-colors-trueblue-100)":"var(--chakra-colors-trueblue-500)",".block-todo label.chakra-checkbox .chakra-checkbox__control:not([data-checked])":{borderColor:"var(--chakra-colors-chakra-border-color)"},"--body-color-inverted":t?"black":"white",...t?g:{},".is-selecting-node":{"[data-selection-ring]":{_before:{content:'""',position:"absolute",inset:0,borderRadius:"inherit",outline:"2px solid",outlineColor:t?"trueblue.100":"trueblue.300",pointerEvents:"none",zIndex:1}},'[data-selection-ring="padded"]':{_before:{outlineOffset:"0.25em"}}}}},v=(0,l.memo)(e=>{let{isEditable:t,notesSx:n,canShowEditHint:x=!1,isDark:p=!1}=e,[m,f]=(0,l.useState)(null),{destroyEditor:g,mountEditor:v}=(0,c.CG)(a.Vy),C=(0,l.useRef)(!1);(0,l.useEffect)(()=>(v&&f(v()),()=>{null==g||g(),f(null)}),[g,v]),(0,l.useEffect)(()=>{m&&t&&!C.current&&(m.commands.focus("end"),C.current=!0)},[t,m]),(0,l.useEffect)(()=>{if(m){if(m.shouldUseLiteMenus=!0,t&&!m.isEditable){m.setEditable(!0);return}if(!t&&m.isEditable){m.setEditable(!1);return}}},[t,m]);let b=t?o.ag._({id:"fnNtuR"}):"Double click to edit",y=x&&m&&m.isEmpty,k=j({isDark:p});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.k,{className:"card-notes-editor",overflowY:"auto",border:"1px solid",borderColor:p?"gray.700":"gray.200",borderRadius:"md",flex:1,p:4,wordBreak:"break-word",sx:{".block.block-paragraph.first-block.last-block.is-empty::before":{...h.BI,content:'"'.concat(b,'"')},...k,...n,_before:y?{...h.BI,top:2,left:2,height:"auto",width:"auto",content:'"'.concat(o.ag._({id:"CvH5f/"}),'"')}:{}},pos:"relative",children:(0,i.jsx)(r.k,{flex:1,flexDirection:"column",children:m&&(0,i.jsx)(u.k,{editor:m,className:"highlight-mask",style:{height:"100%"}})})}),m&&t&&(0,i.jsx)(s.xu,{children:(0,i.jsx)(d.uH,{editor:m,appendToSelector:"[data-card-notes-bubble-menu-target]"})})]})});v.displayName="CardNotesEditor"},1737:function(e,t,n){"use strict";n.d(t,{nP:function(){return T},tE:function(){return E},vP:function(){return S}});var i=n(52322),r=n(77533),s=n(332),o=n(28535),l=n(74409),a=n(69251),c=n(30523),d=n(19783),u=n(32899),h=n(54933),x=n(49929),p=n(5879),m=n(87254),f=n(87202),g=n(2784),j=n(53650),v=n(62861),C=n(71383),b=n(13675),y=n(65342),k=n(62344);let w=(0,f.ZP)("mod+Escape"),S=new Set(["h","j","k","l","s","PageUp","PageDown","ArrowRight","ArrowLeft","ArrowDown","ArrowUp","Enter","Escape"]),E=e=>{let{enabled:t,setActiveKey:n}=e,{editor:i}=(0,b._)(),{editCardInPresentMode:r}=(0,y.l)({editor:i}),s=(0,C.CG)(v.C),{handlePresentNavigationEvent:o,spotlightingByBlock:l}=(0,k._)();return(0,g.useEffect)(function(){if(t)return j.F7.on("keydown","NAVIGATION_CONTROLS",e=>{var t,i;let l=e.target;if((null==l?void 0:null===(t=l.closest)||void 0===t?void 0:t.call(l,"[data-gamma-child-tiptap-editor]"))||(null==l?void 0:null===(i=l.closest)||void 0===i?void 0:i.call(l,"input"))||e.metaKey||s)return!1;let a=e.key;if(S.has(a)&&("s"!==a&&(n(e.key),setTimeout(()=>{n(null)},100)),e.preventDefault())," "===a&&e.shiftKey)return o({eventType:"arrowLeft",eventKey:a});switch(e.key){case"e":return r(),!0;case"s":return o({eventType:"toggleSpotlight",eventKey:a});case" ":case"l":case"ArrowRight":return o({eventType:"arrowRight",eventKey:a});case"h":case"ArrowLeft":return o({eventType:"arrowLeft",eventKey:a});case"j":case"ArrowDown":case"PageDown":return o({eventType:"arrowDown",eventKey:a});case"k":case"ArrowUp":case"PageUp":return o({eventType:"arrowUp",eventKey:a});case"r":return o({eventType:"restart",eventKey:a});case"Escape":if(w(e))return!1;return o({eventType:"cancelCurrentAction",eventKey:a});case"Enter":return o({eventType:"toggleExpanded",eventKey:a});default:return!1}})},[r,t,o,s,n]),l},I=e=>{let t=new KeyboardEvent("keydown",{key:e});n.g.dispatchEvent(t)},A={ArrowUp:{icon:h.FPD,label:(0,i.jsx)(p.cC,{id:"VbggDE"}),ariaLabel:()=>m.ag._({id:"VbggDE"}),shortcuts:["↑","K"],key:"ArrowUp",onClick:()=>{I("ArrowUp")},gridPos:[1,2]},ArrowLeft:{icon:h.acZ,label:(0,i.jsx)(p.cC,{id:"4jciC3"}),ariaLabel:()=>m.ag._({id:"4jciC3"}),shortcuts:["←","H"],key:"ArrowLeft",onClick:()=>{I("ArrowLeft")},gridPos:[2,1]},ArrowDown:{icon:h.r5q,label:(0,i.jsx)(p.cC,{id:"e3GOIZ"}),ariaLabel:()=>m.ag._({id:"e3GOIZ"}),shortcuts:["↓","J"],key:"ArrowDown",onClick:()=>{I("ArrowDown")},gridPos:[2,2]},ArrowRight:{icon:h.eFW,label:(0,i.jsx)(p.cC,{id:"ZjQRVw"}),ariaLabel:()=>m.ag._({id:"ZjQRVw"}),shortcuts:["→","L"],key:"ArrowRight",onClick:()=>{I("ArrowRight")},gridPos:[2,3]},Spotlight:{icon:h.GTX,label:(0,i.jsx)(p.cC,{id:"Xon9jp"}),ariaLabel:()=>m.ag._({id:"Xon9jp"}),shortcuts:["S"],key:"S",onClick:()=>{I("s")},gridPos:[1,3]}},_=e=>{let{shortcuts:t}=e;return(0,i.jsx)(r.x,{as:"span",color:"gray.400",ml:2,children:t.map((e,n)=>(0,i.jsxs)(g.Fragment,{children:[e,n===t.length-1?null:(0,i.jsx)(r.x,{fontSize:"11px",as:"span",color:"gray.500",mx:1,children:"or"})]},e))})},T=e=>{let{activeKey:t,spotlightingByBlock:n}=e;return(0,i.jsx)(s.h,{children:(0,i.jsxs)(o.xu,{position:"absolute",bottom:4,right:6,zIndex:"sticky",children:[(0,i.jsx)(l.X,{children:(0,i.jsx)(p.cC,{id:"wja8aL"})}),(0,i.jsx)(a.r,{gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"repeat(2, 1fr)",children:Object.values(A).map(e=>{let{gridPos:s,icon:o,label:l,ariaLabel:a,shortcuts:h,key:p,onClick:m}=e;return(0,i.jsx)(c.P,{gridColumn:s[1],gridRow:s[0],children:(0,i.jsx)(d.u,{hasArrow:!0,placement:"top",label:(0,i.jsxs)(r.x,{whiteSpace:"nowrap",children:[l,(0,i.jsx)(_,{shortcuts:h})]}),children:(0,i.jsx)(u.h,{m:1,shadow:"base",size:"md",variant:"S"==p&&n?"solid":"plain",isActive:t===p||"S"===p&&n,onClick:m,onMouseDown:e=>e.preventDefault(),"aria-label":a(),icon:(0,i.jsx)(x.G,{icon:o})})})},p)})})]})})}},65342:function(e,t,n){"use strict";n.d(t,{l:function(){return o}});var i=n(2784),r=n(71383),s=n(78112);let o=e=>{let{editor:t}=e,n=(0,r.TL)(),o=(0,r.qr)();return{editCardInPresentMode:(0,i.useCallback)(()=>{(0,s.wc)(o.getState())&&(n((0,s.e)({isEditingInSlideView:!0})),n((0,s.Qx)({attached:!1})),n((0,s.kI)()),null==t||t.commands.turnOffSpotlight())},[t,n,o])}}},62344:function(e,t,n){"use strict";n.d(t,{_:function(){return m}});var i=n(2784),r=n(24759),s=n(71383),o=n(52659),l=n(31601),a=n(73281),c=n(27320),d=n(43911),u=n(20706),h=n(78112),x=n(13675);let p=function(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=(0,o.cC)("editor"),r=i.scroller;if(!r)return;e.commands.turnOffSpotlight();let s=r.scrollHeight-r.offsetHeight;if("down"===t){if(!(i.isAtBottom(90)&&n&&e.commands.spotlightNextCard(!1,"top"))){let e=r.scrollTop+.5*r.offsetHeight;e>s-150&&(e=s),i.scrollTo({top:e})}}else if(!(i.isAtTop(90)&&n&&e.commands.spotlightNextCard(!0,"bottom"))){let e=r.scrollTop-.5*r.offsetHeight;e<150&&(e=0),i.scrollTo({top:e})}},m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.R0.MAIN_PRESENT_VIEW,{editor:t}=(0,x._)(),n=(0,l.z$)(),{enabled:o}=(0,c.gZ)(t),m=(0,s.qr)();return{handlePresentNavigationEvent:(0,i.useCallback)(i=>{let{eventType:s,eventKey:o,method:c="keyboard",payload:x={}}=i;if(!t)return!1;let f=m.getState(),g=(0,h.k8)(f),j=null==g?void 0:g.pos,v=!!(t&&g&&(0,d.Jg)(t,g)),C=Object.keys((0,h.X9)(f).tree);switch(s){case"toggleSpotlight":return v?null==t||t.commands.turnOffSpotlight():null==t||t.commands.spotlightNextBlock(),m.dispatch((0,h.kI)()),!0;case"goToCard":{let{cardId:e}=x;if(!e)return!1;return t.commands.spotlightCardById(e,v),m.dispatch((0,h.Qx)({attached:!1})),!0}case"arrowRight":if((0,r.p7)(),m.dispatch((0,h.Qx)({attached:!1})),null==n||n.trackDocEvent(l.AA.PRESENT_MODE_NAVIGATED,{direction:l.xQ.CARD_NEXT,method:"keyboard"===c?l.SY.KEYBOARD:l.SY.BUTTON_CLICK,source:e,...void 0!==o&&{key:o}}),v)return t.commands.spotlightNextBlock();return t.commands.spotlightNextCard();case"arrowLeft":if((0,r.p7)(),m.dispatch((0,h.Qx)({attached:!1})),null==n||n.trackDocEvent(l.AA.PRESENT_MODE_NAVIGATED,{direction:l.xQ.CARD_PREV,method:"keyboard"===c?l.SY.KEYBOARD:l.SY.BUTTON_CLICK,source:e,...void 0!==o&&{key:o}}),v)return t.commands.spotlightNextBlock(!0);return t.commands.spotlightNextCard(!0);case"arrowDown":if((0,r.p7)(),m.dispatch((0,h.Qx)({attached:!1})),!v){let e=(0,a.ei)(t.state.selection);return t.commands.goToNextExpandableNode()||p(t,"down",!e),!0}return null==n||n.trackDocEvent(l.AA.PRESENT_MODE_NAVIGATED,{direction:l.xQ.TELEPROMPTER_DOWN,method:"keyboard"===c?l.SY.KEYBOARD:l.SY.BUTTON_CLICK,source:e,...void 0!==o&&{key:o}}),t.commands.spotlightNextBlock();case"arrowUp":if((0,r.p7)(),m.dispatch((0,h.Qx)({attached:!1})),!v){let e=(0,a.ei)(t.state.selection);return t.commands.goToNextExpandableNode(!0)||p(t,"up",!e),!0}return null==n||n.trackDocEvent(l.AA.PRESENT_MODE_NAVIGATED,{direction:l.xQ.TELEPROMPTER_UP,method:"keyboard"===c?l.SY.KEYBOARD:l.SY.BUTTON_CLICK,source:e,...void 0!==o&&{key:o}}),t.commands.spotlightNextBlock(!0);case"restart":if(C[0])return(0,r.p7)(),t.commands.spotlightCardById(C[0]),m.dispatch((0,h.Qx)({attached:!1})),!0;return!1;case"cancelCurrentAction":{let e=v&&j;if(t.commands.spotlightCollapseNearestExpandableNode(e?j:null))return t.commands.reHighlightExpandableNode(),!0;if(v)return t.commands.turnOffSpotlight(),!0;return m.dispatch((0,h.Qx)({attached:!1})),null==n||n.track(l.AA.CARD_COLLAPSED,{is_present_mode:!0,method:"escape_key"}),t.commands.ascendUpToParentCard(!1)}case"toggleExpanded":{let e=v&&j;if(t.commands.expandOrCollapseExpandableNode(e?j:null))return!0;if(e){let e=t.state.doc.resolve(j).parent;if(e&&(0,u.AH)(e))return(0,u.xB)(e.attrs.id,!1),t.commands.spotlightNextBlock(!0),!0;return t.commands.spotlightCollapseNearestExpandableNode(j)}return!1}default:return!1}},[n,t,e,m]),spotlightingByBlock:o}}},55758:function(e,t,n){"use strict";n.d(t,{VN:function(){return p},rJ:function(){return h},us:function(){return x}});var i=n(27875),r=n.n(i),s=n(2784),o=n(30240),l=n(71383),a=n(65050),c=n(78112),d=n(87103);let u="disable-card-size-animations",h=()=>{let e=(0,o.ye)("autoZoomToFit"),t=(0,l.CG)(c.Kk);return(0,s.useEffect)(()=>{t||f()},[t]),null!=t?t:e},x=()=>{let e=(0,l.CG)(c.i2),t=(0,s.useRef)(),n=h(),i=!d.Pv&&!d.Qg&&n;(0,s.useEffect)(()=>{let n=!t.current;t.current=e,e&&i&&(document.body.classList.add(u),p(),requestAnimationFrame(()=>{document.body.classList.remove(u)}),n&&setTimeout(()=>{document.body.classList.add(u),p(),requestAnimationFrame(()=>{document.body.classList.remove(u)})},a.nY))},[e,i])},p=()=>{let e=document.documentElement.clientHeight,t=document.querySelector('[data-animate-value="presentCurrent"][data-card-scroll-element]');if(!t)return;let n=m(t,e,1);if(n<.9){let i=(1-n)/3;n=m(t,e,n+i)}(0,l.bh)().dispatch((0,c.Ic)({zoomLevel:n}))},m=(e,t,n)=>{e.style.setProperty("--zoom-level",n.toString());let i=e.scrollHeight,s=r()(n*t/i,d.QX?.5:.65,1);return e.style.setProperty("--zoom-level",s.toString()),s},f=()=>{document.querySelectorAll("[data-card-scroll-element]").forEach(e=>{e.style.removeProperty("--zoom-level")})}},58847:function(e,t,n){"use strict";n.d(t,{o:function(){return x}});var i=n(21805),r=n(2784),s=n(95405),o=n(8940),l=n(30240),a=n(71383),c=n(91076),d=n(77555),u=n(85048),h=n(32140);let x=e=>{let t=(0,a.CG)(h.yx),n=(0,r.useMemo)(()=>!!i.Z.get(d.ir),[]),x=(0,c.we)(),p=(0,a.TL)(),m=(0,a.CG)(h.fh),f=(0,l.ye)("docEditorForcePublicStatic"),g=window!==window.top,j=(0,r.useMemo)(()=>{var e,i;if(g)return!1;let r=new URLSearchParams(window.location.search);if(r.get("following_id")&&r.get("follow_on_start"))return!0;if(!t)return n;let l=null===(i=t.accessLinks)||void 0===i?void 0:null===(e=i.find(e=>e.token===s.v.SHARE_TOKEN))||void 0===e?void 0:e.permission;return l&&[o.y3$.Edit,o.y3$.Comment].includes(l)||x.can(o.y3$.Comment,t)||x.can(o.y3$.Edit,t)||x.can(o.y3$.Manage,t)},[x,t,n,g]);(0,r.useEffect)(()=>{let t=f?u.Z.PUBLIC_STATIC:e||(j?u.Z.COLLABORATIVE:u.Z.PUBLIC_STATIC);p((0,h.R8)({docEditorType:t}))},[p,e,f,j]);let v=e||(j?u.Z.COLLABORATIVE:u.Z.PUBLIC_STATIC);return m||v}},28599:function(e,t,n){"use strict";n.d(t,{dM:function(){return pD},Ur:function(){return pf},nz:function(){return pW},_i:function(){return tS._i}});var i,r,s,o,l,a=n(52322),c=n(38035),d=n(28535),u=n(73200),h=n(5879),x=n(87254),p=n(97729),m=n.n(p),f=n(2784),g=n(43997),j=n(29201),v=n(1547),C=n(16618),b=n(83404),y=n(89072),k=n(62311),w=n(55478),S=n(43679),E=n(34071),I=n(32899),A=n(39429),_=n(48394),T=n(42946),O=n(49929),D=n(30733),R=n.n(D),P=n(12436),L=n.n(P),z=n(8848);class G extends z.v{cleanup(){document.removeEventListener("mousemove",this.throttled)}constructor(){super(),this.throttled=L()(e=>{this.emit("move",e)},200,{leading:!0}),document.addEventListener("mousemove",this.throttled)}}let N=R()(()=>new G),M=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=N(),[i,r]=(0,f.useState)(!1),s=(0,f.useRef)(t);return(0,f.useEffect)(()=>{s.current=t},[t]),(0,f.useEffect)(()=>n.on("move",t=>{s.current||r(e(t))}),[n,e]),i};var U=n(71383),F=n(78112),W=n(32817),H=n(18960),q=n(54913),B=n(51581),V=n(62225);let K=(0,f.memo)(()=>{let{isOpen:e,onToggle:t,onClose:n}=(0,w.q)(),[i,r]=(0,W.I)(H.H.hasSeenCoachBar,!1),s=(0,U.CG)(F.Tf),o=(0,f.useCallback)(()=>{i||r(!0),n()},[i,n,r]),l=!i||e,c=M((0,f.useCallback)(e=>e.clientX>window.innerWidth-150&&e.clientY>window.innerHeight-150,[]));return(0,a.jsx)(B.H,{mr:s&&i&&!l&&!c?"-100%":"0px",transitionProperty:"margin-right",transitionDuration:"ultra-slow",transitionTimingFunction:"ease-in-out",children:(0,a.jsxs)(S.J,{returnFocusOnClose:!1,isOpen:l,onClose:o,closeOnBlur:!0,children:[(0,a.jsx)(E.x,{children:(0,a.jsx)(I.h,{onClick:()=>{e&&r(!0),t()},"aria-label":"Help",isRound:!0,size:"md",icon:(0,a.jsx)(O.G,{icon:T.UFh})})}),(0,a.jsx)(A.y,{...q.Ro,children:(0,a.jsx)(_.b,{children:(0,a.jsx)(V.C,{onClose:o})})})]})})});K.displayName="PresentModeHelpWidget";var Y=n(23691),Z=n(10617),J=n(77574),X=n(3454),Q=n(66915),$=n(16810);let ee=()=>(0,U.CG)((0,$.CO)("left")),et=()=>(0,U.CG)((0,$.CO)("right")),en=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=e.panelPosition,i=(0,g.I0)(),r=(0,U.CG)((0,$.OC)(e)),s=(0,f.useCallback)(()=>{i((0,$.uJ)({component:e}))},[e,i]);return(0,X.v)(()=>{!t&&r&&i((0,$.sR)({position:n}))},[r,i,t,n],[t]),{togglePanel:(0,f.useCallback)(s=>{if(!t)return;let o=!r;(null==s?void 0:s.override)==="open"?o=!0:(null==s?void 0:s.override)==="closed"&&(o=!1),o?i((0,$.Yp)({component:e,disableTransition:!!(null==s?void 0:s.disableTransition)})):i((0,$.sR)({position:n}))},[e,n,r,i,t]),initPanel:s,isPanelOpen:r}},ei=()=>{let e=(0,f.useMemo)(()=>new Q.st,[]),t=(0,f.useMemo)(()=>new Q.st,[]),n=(0,f.useMemo)(()=>new Q.st,[]);return(0,f.useEffect)(()=>{if(!n||!e||!t)return;let i=e.pipe(n),r=t.pipe(n);return()=>{i(),r()}},[e,t,n]),{leftPanelLifecycle:e,rightPanelLifecycle:t,globalPanelLifecycle:n}};var er=n(48929),es=n(53650),eo=n(36533),el=n(70965),ea=n(55963);let ec=(e,t,n)=>Math.min(Math.max(e,t),n),ed=e=>{let{setWidth:t,width:n,position:i,onClose:r,panelRef:s,initialWidth:o,isDragging:l,setIsDragging:u}=e,h=(0,f.useMemo)(()=>(0,ea.n)(),[])>0&&"right"===i,[x,p]=(0,f.useState)(n),[m,g]=(0,f.useState)(null),j=L()(e=>{let t;let n=ec(t="left"===i?e.clientX:-((e.clientX-m)*1)+x,eo.pn,eo.ZQ);t<=eo.Nh?(s.current.style.transitionProperty="width",s.current.style.transitionDuration="var(--chakra-transition-duration-normal)",n=0):n>eo.pn&&(s.current.style.transitionProperty="",s.current.style.transitionDuration=""),s.current.style.width="".concat(n,"px")},30),v=()=>{u(!1),g(null);let e=s.current.style.width;"0px"===e?(r(),t(o)):t(parseInt(e.replace("px",""),10)),s.current.style.transitionProperty="",s.current.style.transitionDuration="",window.removeEventListener("mousemove",j),window.removeEventListener("mouseup",v)};(0,f.useEffect)(()=>(m&&(window.addEventListener("mousemove",j),window.addEventListener("mouseup",v)),()=>{window.removeEventListener("mousemove",j),window.removeEventListener("mouseup",v)}),[m]);let C={};return C="left"===i?{right:-4,position:"absolute"}:h?{position:"relative"}:{left:-4,position:"absolute"},(0,a.jsx)(c.k,{h:"100%",bg:h?"gray.200":l?"blackAlpha.200":"rgba(0,0,0,0)",w:h?2:4,justifyContent:"center",alignItems:"center",cursor:"col-resize",_hover:{bg:h?"gray.400":"blackAlpha.200"},transitionProperty:"common",transitionDuration:"normal",role:"group",onMouseDown:e=>{e.preventDefault(),u(!0),g(e.clientX),p(n)},position:"absolute",display:["none","none","none","flex"],...C,children:!h&&(0,a.jsx)(d.xu,{bg:"white",borderRadius:"full",w:1,h:10,opacity:l?1:".5",transitionProperty:"common",transitionDuration:"normal",_groupHover:{opacity:1}})})},eu=function(e,t,n){return"left"===n?{base:t,xl:e}:{xl:t,"2xl":e}},eh=e=>{let{children:t,onClose:n,panelName:i}=e;return(0,f.useEffect)(()=>es.F7.on("keydown",i,e=>"Escape"===e.key&&(n(),!0)),[i,n]),t},ex=e=>{var t;let{position:n,panelLifecycle:i}=e,r=(0,f.useRef)(),[s,o]=(0,f.useState)(!1),l=(0,g.I0)(),d=(0,U.CG)((0,$.SL)(n)),u=(0,U.CG)((0,$.Fw)(n)),h=(0,U.CG)(F.nz),x=(0,U.CG)((0,$.CO)(n)),p=(0,U.CG)((0,$.eh)(n)),m=null!==(t=null==p?void 0:p.canCollapse)&&void 0!==t&&t,j=(0,f.useCallback)(()=>{l((0,$.sR)({position:n}))},[l,n]),v=(0,f.useCallback)(()=>{l((0,$.Yp)({component:p}))},[p,l]),C=(0,f.useCallback)(e=>{l((0,$.UG)({width:e,position:n})),i.emit("resize",{})},[l,i,n]),b={zIndex:Number((0,er.dQ)("zIndices","overlay"))+1,position:eu("relative","fixed",n),top:eu(0,"var(--editor-padding-top)",n),bottom:0,[n]:0};u||s||(b.transitionProperty="width",b.transitionDuration="normal"),(0,f.useEffect)(()=>{let e=e=>{"width"===e.propertyName&&i.emit("resize",{})};return r.current.addEventListener("transitionend",e),()=>{r.current&&r.current.removeEventListener("transitionend",e)}},[i,r]);let y=(0,el.iq)(eu(!0,!1,n))||!1;return(0,f.useEffect)(()=>{d&&!y&&m&&j()},[y,d,j,m]),(0,f.useEffect)(()=>{h&&j()},[h,j]),(0,a.jsxs)(c.k,{ref:r,...b,style:{width:d||m?x:0},boxShadow:y?"none":"2xl",maxW:"100%","data-print-hidden":!0,children:[d&&"right"===n&&(0,a.jsx)(ed,{isDragging:s,setIsDragging:o,position:n,width:x,setWidth:C,panelRef:r,onClose:j,initialWidth:eo.Ld}),(0,a.jsx)(Q.Mn.Provider,{value:i,children:p&&(d||m)&&(0,a.jsx)(eh,{onClose:j,panelName:p.panelName,children:(0,a.jsx)(p,{isDragging:s,isOpen:d,closePanel:j,openPanel:v,panelRef:r,lifecycle:i,hasRoomToOpen:y})})}),d&&"left"===n&&(0,a.jsx)(ed,{isDragging:s,setIsDragging:o,position:n,width:x,setWidth:C,panelRef:r,onClose:j,initialWidth:eo.X9})]})},ep=(0,f.memo)(e=>(0,a.jsx)(ex,{position:"right",...e}));ep.displayName="RightPanelContainer";let em=(0,f.memo)(e=>(0,a.jsx)(ex,{position:"left",...e}));em.displayName="LeftPanelContainer";var ef=n(50019),eg=n(29117),ej=n(62614),ev=n(75768),eC=n(64253),eb=n(5632),ey=n(92035),ek=n(33279),ew=n(76599);let eS=e=>{let{docId:t}=e,n=(0,U.TL)(),i=(0,ef.ff)("gray.300","gray.800"),r=(0,ef.ff)("white","gray.900"),s=(0,ef.ff)("transparent","transparent"),o=(0,ef.ff)("gray.500","gray.400"),l=(0,ef.ff)("trueblue.50","trueblue.400"),u=(0,ef.ff)("trueblue.500","white"),p=(0,ef.ff)("gray.600","gray.100"),m=(0,ef.ff)("gray.100","gray.700"),g=(0,ef.ff)("trueblue.50","trueblue.400"),j=(0,ef.ff)("trueblue.500","white"),{replace:v}=(0,eb.useRouter)(),C=(0,U.CG)(ew.tv),b=(0,f.useCallback)(()=>{t&&v((0,ek.yQ)({docId:t}),void 0,{shallow:!0})},[t,v]),y=(0,f.useCallback)(e=>{n((0,ew.Tj)({previewSize:e}))},[n]);return(0,f.useEffect)(()=>es.F7.on("keydown","SITE_PREVIEW_PANE",e=>("Escape"===e.key&&b(),!0)),[b]),(0,a.jsx)(c.k,{bg:"white",align:"flex-start",direction:"column",width:"100%","data-sites-preview-pane":!0,children:(0,a.jsxs)(eg.U,{w:"100%",spacing:0,p:2,py:2,bg:r,borderColor:i,justify:"flex-start",borderBottomWidth:"1px",children:[(0,a.jsx)(eg.U,{spacing:2,flexBasis:"30%",children:!(0,ey.s2)()&&(0,a.jsx)(ej.z,{size:"sm",variant:"plain",onClick:b,children:(0,a.jsx)(eg.U,{children:(0,a.jsx)(d.xu,{children:(0,a.jsx)(O.G,{icon:T.acZ})})})})}),(0,a.jsxs)(ev.h,{size:"sm",ml:24,flexBasis:"40%",justifyContent:"center",children:[(0,a.jsx)(eC.kH,{label:(0,a.jsx)(h.cC,{id:"58m6Qy"}),children:(0,a.jsx)(I.h,{"aria-label":x.ag._({id:"58m6Qy"}),variant:"ghost",size:"sm",icon:(0,a.jsx)(O.G,{icon:T.Z__}),bg:"mobile"===C?l:s,_hover:{color:"mobile"===C?j:p,bg:"mobile"===C?g:m},color:"mobile"===C?u:o,onClick:()=>{y("mobile")}})}),!(0,ey.s2)()&&(0,a.jsx)(eC.kH,{label:(0,a.jsx)(h.cC,{id:"fpcKeD"}),children:(0,a.jsx)(I.h,{"aria-label":x.ag._({id:"fpcKeD"}),variant:"ghost",size:"sm",icon:(0,a.jsx)(O.G,{icon:T.ep5}),bg:"tablet"===C?l:s,_hover:{color:"tablet"===C?j:p,bg:"tablet"===C?g:m},color:"tablet"===C?u:o,onClick:()=>{y("tablet")}})}),!(0,ey.s2)()&&(0,a.jsx)(eC.kH,{label:(0,a.jsx)(h.cC,{id:"K3p0ar"}),children:(0,a.jsx)(I.h,{"aria-label":x.ag._({id:"K3p0ar"}),variant:"ghost",size:"sm",icon:(0,a.jsx)(O.G,{icon:T.tc$}),bg:"desktop"===C?l:s,_hover:{color:"desktop"===C?j:p,bg:"desktop"===C?g:m},color:"desktop"===C?u:o,onClick:()=>{y("desktop")}})})]}),(0,a.jsx)(eg.U,{flexBasis:"30%",justifyContent:"flex-end"})]})})};var eE=n(71184),eI=n(54073),eA=n.n(eI),e_=n(27287),eT=n(80180);let eO=(e,t)=>{let n=(0,U.TL)(),i=(0,U.qr)(),r=!!(0,U.CG)(e_.$U),s=(0,U.CG)(F.wc),o=(0,U.CG)(e_.B$),l=t&&r&&s;(0,f.useEffect)(()=>{var t,r;if(!l||!e||e.gammaDocId!==o)return;let s=(0,F.yx)(i.getState()),a=null==s?void 0:null===(r=s.publishedSnapshot)||void 0===r?void 0:null===(t=r.content)||void 0===t?void 0:t.default;if(!a)return;let c=!(0,eT.G0)(e,a);console.debug("[useDirtyStateTracking] INITIALIZING DIRTY STATE ".concat(o," via compareDocJSON"),{isDirty:c}),c&&n((0,e_.xc)({pageId:e.gammaDocId,lastUpdatedAt:new Date().toISOString()}))},[n,i,e,l,o]),(0,f.useEffect)(()=>{if(!l||!e)return;let t=eA()(()=>{n((0,e_.xc)({pageId:e.gammaDocId,lastUpdatedAt:new Date().toISOString()}))},500,{leading:!0,trailing:!0,maxWait:1e3});return e.on("update",t),()=>{e.off("update",t)}},[l,n,e])};var eD=n(41742),eR=n(15222),eP=n(81486),eL=n(92476),ez=n(65068),eG=n(43826),eN=n(3874),eM=n(31601),eU=n(73346),eF=n(37243),eW=n(84636),eH=n.n(eW),eq=n(52659),eB=n(54317),eV=n(28817),eK=n(33945);let eY=(e,t,n,i,r)=>{let s=i-n,o=Math.max(s-Math.max(e-n,0)-Math.max(i-t,0),0),l=o/s,a=l>0&&o==t-e;return{overlap:l,viewing:r&&(a||l>.5||o>400),only:a}},eZ=(e,t)=>{let n=(0,eq.As)("editor"),[i,r]=(0,f.useState)(null),s=(0,f.useRef)({presentingCardId:null,scrollTop:0,containerHeight:0,expandedCards:{}}),o=(0,U.CG)(F.gh),l=(0,U.CG)(F.i2);(0,f.useEffect)(()=>{s.current.presentingCardId=null!=l?l:null},[l]);let a=(0,U.CG)(F.Q5);(0,f.useEffect)(()=>{s.current.expandedCards=a},[a]),(0,f.useEffect)(()=>{let e=document.querySelector(n.scrollSelector);if(!e)return;r(e);let{height:t}=e.getBoundingClientRect();s.current.scrollTop=e.scrollTop,s.current.containerHeight=t},[n.scrollSelector,s]),(0,f.useEffect)(()=>{let e=eA()(()=>{i&&(s.current.scrollTop=i.scrollTop)},250,{trailing:!0,maxWait:500});return window.addEventListener("scroll",e,!0),()=>window.removeEventListener("scroll",e,!0)},[i]),(0,f.useEffect)(()=>{let e=eA()(()=>{i&&(s.current.containerHeight=i.getBoundingClientRect().height)},250,{trailing:!0,maxWait:500});return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[i]),(0,f.useEffect)(()=>{if(!e)return;if(o===eK.q.SLIDE_VIEW){let e=setInterval(()=>{t.emit("cardViewed",{cardId:s.current.presentingCardId,interval:1e3})},1e3);return()=>clearInterval(e)}let i=setInterval(()=>{if(document.hidden)return;let{scrollTop:i,containerHeight:r,expandedCards:o}=s.current,l=i+r;eH()((0,eF.N2)(e.state.doc,eB.KH),e=>e.node.attrs.id).map(t=>{let r;let s=t.node.attrs.id,a=o[s];if(!a)return null;try{r=e.view.nodeDOM(t.pos)}catch(e){return null}if(r instanceof HTMLElement){let e=(0,eV.LY)(r,n.scrollSelector),{offsetHeight:t}=r;return{id:s,...eY(i,l,e,t+e,a)}}return null}).filter(e=>!!(null==e?void 0:e.viewing)).forEach(e=>{t.emit("cardViewed",{cardId:e.id,interval:1e3})})},1e3);return()=>clearInterval(i)},[o,e,s,t,n.scrollSelector])},eJ=e=>{let{editor:t,backoffFactor:n=1}=e,i=(0,eM.z$)(),[r,s]=(0,f.useState)(15e3);eZ(t,eU.f);let o=(0,f.useCallback)(()=>{eU.f.flush(),s(Math.min(r*n,12e4))},[n,r]);return(0,f.useEffect)(()=>{if(!i)return;eU.f.initialize(),eU.f.on("flush",e=>{let{viewed:t}=e;for(let[e,n]of Object.entries(t))i.trackDocEvent(eM.AA.CARD_VIEWED,{card_id:e,duration:n})});let e=setInterval(()=>o(),r);return()=>{clearInterval(e),eU.f.destroy()}},[i,r,o]),null};var eX=n(97134),eQ=n(29342),e$=n(83693),e0=n(30240),e1=n(13675),e2=n(81672),e5=n(17993),e3=n(77533),e4=n(36474),e6=n(54933),e8=n(21829),e9=n(86743),e7=n(49206),te=n(56500),tt=n(18149),tn=n.n(tt),ti=n(44598),tr=n(43988);let ts=e=>{let t=(0,U.CG)(e$.AD),{title:n}=(0,ti.T)({cardId:t||void 0}),i=(0,U.CG)(F.pN,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return tn()(...t)}),r=i.indexOf(t||""),s=(0,f.useCallback)(t=>()=>{var n,s;if(!e)return;let o=null!==(s=i[r+(t?1:-1)])&&void 0!==s?s:i[r],l=null===(n=(0,eB.Bw)(e,o))||void 0===n?void 0:n.pos;if(!l)return;(0,tr.vS)(e,l)||e.commands.selectInsideNodeAtPos(l);let a=e.view.nodeDOM(l);a instanceof HTMLElement&&(0,eq.cC)("editor").scrollElementIntoView({element:a,delay:0})},[r,e,i]);return{cardId:t,title:n||"Untitled",canGoForward:r<i.length-1,canGoBack:r>0,goToNextCard:s(!0),goToPreviousCard:s(!1)}};var to=n(86745),tl=n(23186);let ta=e=>{let{editor:t,isReadonly:n}=e,{selection:i}=(0,to.t)(t),r=(0,U.TL)(),s=(0,e0.ye)("cardNotes");(0,f.useEffect)(()=>{if(!t||!s)return;let e=(0,tl.AQ)(t.state.doc,t.state.selection.from);if(e&&e.node&&!(0,tr.Qp)(e.node)){if(n){r((0,e$.NK)());return}(0,tr.Fi)(t,e.pos)}},[s,r,t,n,i])};var tc=n(90025),td=n(69964),tu=n(41019),th=n(25556),tx=n(13090),tp=n(81363),tm=n(22982),tf=n(84663),tg=n(55898),tj=n(40382);let tv=e=>{let{editor:t,cardId:n}=e,i=(0,U.CG)(F.Wl),r=(0,U.CG)(F.hN),s=(0,e0.ye)("aiCardNotes"),o=(0,f.useCallback)(e=>{if(!t||!n)return;let i=(0,eB.Bw)(t,n);if(!i)return;let r=t.state.doc.resolve(i.pos),s=(0,tr.cM)(r);if(!s)return;let o=(0,tg.aT)(e,t.schema),{tr:l}=t.state,a=s.pos+1,c=a+s.node.content.size;l.delete(a,c).insert(a,o.content),t.view.dispatch(l)},[t,n]),l=(0,tj.Z_)(o,200),[a,c]=(0,f.useState)(!1),{generate:d}=(0,td.jz)("GenerateSpeakerNotes",{onStart(){c(!0),l("")},onContent(e){l(e)},onComplete(e){l(e),c(!1)},timeout:3e4}),u=(0,U.qr)(),h=(0,f.useCallback)(async()=>{if(!i||!t||!n)return;let e=(0,eB.Bw)(t,n);if(!e)return;let r=(0,tc.c)(t,e.node),s=(0,tu.nZ)(),o=(0,tf.vR)(t,e.pos),l=(0,tm.D)(u);await d({variables:{cardHtml:r,previous:o,outline:l},workspaceId:i.id}).promise,(0,tx.d)("generateCardNotes",i,s)},[d,i,t,n,u]);return{onClickGenerate:(0,th.YO)(h,"generateCardNotes",tp.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_CARD),isGenerating:a,canGenerateCardNotes:s&&r}},tC=e=>{let{closePanel:t}=e,{editor:n}=(0,tS._i)(),i=(0,U.CG)(F.hN),{cardId:r,canGoBack:s,canGoForward:o,title:l,goToNextCard:d,goToPreviousCard:u}=ts(n),{isInOfflineMode:p}=(0,v.$)();ta({editor:n,isReadonly:!i});let m=(0,eR.Yy)(),f=m?"gray.900":"white",g=m?"white":"gray.900",j=m?"gray.300":"gray.500",{onClickGenerate:C,isGenerating:b,canGenerateCardNotes:y}=tv({editor:n,cardId:r});return(0,a.jsx)(eC.Wk,{isDark:m,children:(0,a.jsx)(e9.s,{bgColor:f,"data-panelid":"card-notes-panel",color:g,children:(0,a.jsxs)(c.k,{direction:"column",h:"100%",flex:1,children:[(0,a.jsxs)(c.k,{px:6,py:4,children:[(0,a.jsx)(c.k,{flex:1,children:(0,a.jsxs)(eg.U,{spacing:4,children:[(0,a.jsx)(e7.V,{children:(0,a.jsx)(h.cC,{id:"1DBGsz"})}),i&&!p&&(0,a.jsx)(eC.Yq,{label:(0,a.jsx)(h.cC,{id:"qcPeK2"})})]})}),(0,a.jsx)(e2.P,{"data-card-notes-close-button":!0,onClick:t})]}),(0,a.jsxs)(e5.g,{px:6,pb:4,alignItems:"stretch",flex:1,overflowY:"hidden",spacing:4,"data-card-notes-bubble-menu-target":!0,children:[(0,a.jsxs)(eg.U,{align:"end",children:[(0,a.jsx)(e3.x,{fontWeight:"600",color:j,wordBreak:"break-word",noOfLines:2,"data-testid":"card-notes-card-title",py:1,children:l}),(0,a.jsx)(e4.L,{}),y&&(0,a.jsx)(eC.kH,{label:(0,a.jsxs)(eg.U,{spacing:0,children:[(0,a.jsx)(h.cC,{id:"GyxUS3"}),(0,a.jsx)(e8.J,{type:"generateCardNotes"})]}),placement:"top",children:(0,a.jsx)(ej.z,{variant:"ghost",onClick:C,isLoading:b,isDisabled:p,size:"sm","aria-label":x.ag._({id:"ziAjHi"}),rightIcon:(0,a.jsx)(O.G,{icon:e6.JyM}),flexShrink:0,children:(0,a.jsx)(h.cC,{id:"ziAjHi"})})})]}),(0,a.jsx)(te.z,{isEditable:i,isDark:m}),i&&(0,a.jsxs)(eg.U,{children:[(0,a.jsx)(eC.kH,{label:s?(0,a.jsx)(h.cC,{id:"cbqngJ"}):(0,a.jsx)(h.cC,{id:"4OtlnH"}),children:(0,a.jsx)(c.k,{flex:1,children:(0,a.jsx)(I.h,{"aria-label":s?x.ag._({id:"cbqngJ"}):x.ag._({id:"4OtlnH"}),icon:(0,a.jsx)(O.G,{icon:T.acZ}),onClick:u,isDisabled:!s,flex:1})})}),(0,a.jsx)(eC.kH,{label:o?(0,a.jsx)(h.cC,{id:"EyUKqu"}):(0,a.jsx)(h.cC,{id:"ggpGEd"}),children:(0,a.jsx)(c.k,{flex:1,children:(0,a.jsx)(I.h,{"aria-label":o?x.ag._({id:"EyUKqu"}):x.ag._({id:"ggpGEd"}),icon:(0,a.jsx)(O.G,{icon:T.eFW}),onClick:d,isDisabled:!o,flex:1})})})]})]})]})})})};tC.panelPosition="right",tC.panelName="card-notes";let tb=()=>{let{togglePanel:e,isPanelOpen:t}=en(tC),{editor:n}=(0,e1._)(),i=(0,U.TL)(),r=(0,e0.ye)("cardNotes"),s=(0,U.CG)(F.gh)===eK.q.SLIDE_VIEW;(0,f.useEffect)(()=>{t&&(!r||s)&&e()},[r,t,e,s]),(0,f.useEffect)(()=>{!t&&n&&(i((0,e$.mK)({isOpen:!1})),n.view.dispatch(n.state.tr))},[i,n,t,e]),(0,f.useEffect)(()=>{if(r&&n)return eQ.T.on("toggle",r=>{let{config:s,clickedCardId:o,activeNotesCardId:l}=r;t&&o!==l||(e(s),i((0,e$.mK)({isOpen:!t})),n.view.dispatch(n.state.tr))})},[i,n,r,t,e])},ty="drag-in-progress",tk=()=>{(0,f.useEffect)(()=>{let e=()=>{document.body.classList.add(ty)},t=()=>{document.body.classList.remove(ty)};return document.body.addEventListener("dragstart",e,!0),document.body.addEventListener("dragend",t,!0),document.body.addEventListener("drop",t,!0),document.body.addEventListener("mouseup",t,!0),()=>{document.body.removeEventListener("dragstart",e,!0),document.body.removeEventListener("dragend",t,!0),document.body.removeEventListener("drop",t,!0),document.body.removeEventListener("mouseup",t,!0)}},[])};var tw=n(85048),tS=n(54349),tE=n(42822),tI=n(43297),tA=n(81540),t_=n(8142),tT=n(27821),tO=n(46520),tD=n(88670),tR=n(85064),tP=n(16882),tL=n(66295),tz=n(69465),tG=n(72658);let tN=e=>"tablet"===e?"768px":"mobile"===e?(0,ey.s2)()?"100vw":"375px":"100vw",tM=e=>{let{loading:t,...n}=e,{editor:i,docId:r,previewSize:s}=n;return(0,a.jsxs)(t_.BU,{children:[(0,a.jsx)("style",{id:"global-styles",dangerouslySetInnerHTML:{__html:tG.W.toString()}}),(0,a.jsx)(tT.cL,{children:(0,a.jsx)(c.k,{pos:"relative",justifyContent:"center",bg:"#C5C5C5",flex:1,children:!t&&i&&r?(0,a.jsx)(tU,{...n,editor:i,docId:r}):(0,a.jsx)(d.xu,{flexDirection:"column",w:tN(s),h:"var(--100vh)",bg:"gray.100","data-testid":"preview-editor-loading",inset:0,children:(0,a.jsx)(tE.M,{h:"100%",children:(0,a.jsx)(tI.K,{align:"center",children:(0,a.jsx)(tA.$,{})})})})})})]})},tU=e=>{let{docId:t,editor:n,previewSize:i,onCreate:r}=e,s=(0,f.useMemo)(()=>(0,tO.e)().concat(tD.F),[]),o=(0,f.useMemo)(()=>n.getJSON(),[n]),l="mobile"===i?"mobile":"desktop",h=(0,tP.j)({async onCreate(e){let{editor:t}=e;console.debug("[SimpleEditor][onCreate] TipTap editor is now ready"),null==r||r({editor:t})},content:o,extensions:s,editable:!1});h.shouldUsePublishedVersion=!0;let{editorAnimationsClass:x,editorAnimationsCSSVars:p}=(0,eL.k)({editor:h,instanceId:l,scrollingParentSelector:".".concat(tw.B)}),m=(0,U.CG)(e_.lH),g=(0,U.CG)(F.Pu),j=(0,tz.nT)(m),v=j?eG.ZQ:0,C=tN(i);return(0,a.jsxs)(d.xu,{className:(0,u.cx)("preview-editor-root",x),style:p,w:C,h:"100%",css:{"--editor-width":C,"--doc-padding-top":"".concat(v,"px"),"--editor-padding-top":"".concat(50,"px")},position:"relative",shadow:"xl",children:[m&&j&&(0,a.jsx)(c.k,{pos:"absolute",top:0,left:0,w:"100%",zIndex:"10",children:(0,a.jsx)(tR.n,{theme:g,editable:!1,content:m.navContent},"".concat(t,"__preview-editor-nav__").concat(l,"}"))}),(0,a.jsx)(tL.f,{editor:h},"".concat(t,"__preview-editor__").concat(l,"}"))]})};var tF=n(32140),tW=n(69971),tH=n(53078);let tq=()=>{let e=(0,U.CG)(e_.lH),t=(0,U.CG)(F.Pu),n=(0,U.qr)(),[i]=(0,tW.Iyu)(),r=(0,f.useCallback)(async e=>{var t;let{editor:r}=e,s=null===(t=(0,e_.lH)(n.getState()))||void 0===t?void 0:t.id;s&&await i({variables:{input:{siteId:s,navContent:r.state.doc.toJSON()}}})},[i,n]),s=(0,tj.Kt)(r,500);return e?(0,a.jsx)(c.k,{pos:"absolute",top:0,left:0,w:"100%",zIndex:tH.S.siteNav,children:(0,a.jsx)(tR.n,{theme:t,onUpdate:s,content:e.navContent,editable:!0,scrollingParentSelector:".".concat(tw.B)})}):null};var tB=n(78321),tV=n(32981),tK=n(26468),tY=n(73751),tZ=n(2338),tJ=n(97217),tX=n(50250),tQ=n(58125),t$=n(30764),t0=n(93689),t1=n(85336),t2=n(43271),t5=n(15998),t3=n(40802),t4=n(5968),t6=n(23764),t8=n(74216);let t9=f.createContext({enabled:!1,registerEditor:(e,t)=>{},getAllCards:()=>[],userMessage:"",setUserMessage:e=>{}});function t7(){return(0,f.useContext)(t9)}let ne=e=>{let{children:t}=e,n=(0,f.useRef)(new Map),i=(0,f.useRef)(""),r=(0,f.useRef)((e,t)=>{n.current.set(e,t)}),s=(0,f.useRef)(()=>Array.from(n.current.values()).map(e=>{var t,n;return null===(n=e.state.doc.firstChild)||void 0===n?void 0:null===(t=n.content.toJSON())||void 0===t?void 0:t[0]}).filter(Boolean)),o=(0,f.useCallback)(e=>{i.current=e},[]);return(0,a.jsx)(t9.Provider,{value:{enabled:!0,registerEditor:r.current,getAllCards:s.current,userMessage:i.current,setUserMessage:o},children:t})};var nt=n(68785),nn=n(67308),ni=n(56581),nr=n(27917);let ns=e=>{let{cardId:t,onClick:n}=e,i=(0,U.CG)((0,nt.l_)(t)),r=(0,U.CG)(F.Pu);return i?(0,a.jsxs)(tI.K,{zIndex:1,mt:"4.5em",width:"180px",bg:"whiteAlpha.500",border:"1px solid",borderColor:"blackAlpha.300",borderRadius:"lg",p:4,sx:{"*":{"backdrop-filter":"none !important","-webkit-backdrop-filter":"none !important"}},children:[i.variants.map(e=>{if(!e)return null;let{label:s,card:o,id:l}=e;return(0,a.jsx)(no,{theme:r,isSelected:i.selected===l,label:s,card:o,onClick:()=>{n({cardId:t,variationId:l})}},l)}),i.variants.length<2&&(0,a.jsx)(tE.M,{children:(0,a.jsx)(tA.$,{})})]}):null},no=e=>{let{label:t,card:n,theme:i,isSelected:r=!1,onClick:s=()=>{}}=e,o=(0,f.useMemo)(()=>(0,nr.vL)({docFlags:{cardLayoutsEnabled:!0}},[n]),[n]);return(0,a.jsxs)(tI.K,{align:"start",children:[(0,a.jsx)(c.k,{borderRadius:"md",bg:"white",shadow:r?"outline":"md",overflow:"hidden",cursor:"pointer",_hover:{bg:"trueblue.50"},transitionProperty:"common",transitionDuration:"fast",onClick:s,children:(0,a.jsx)(c.k,{sx:t4.n,css:{"--editor-font-size":"0.15rem","--editor-width":"150px"},justifyContent:"center",alignItems:"top",pointerEvents:"none",children:(0,a.jsx)(t4.m,{content:o,theme:i,isThumbnail:!0})})}),(0,a.jsxs)(e3.x,{fontSize:"sm",children:[r&&(0,a.jsx)(ni.n,{boxSize:3,mr:2}),t]})]})},nl="ai-wizard-editor-root",na=e=>{let{doc:t,cards:n,theme:i=(0,t5.y)()}=e,r=(0,t8.R5)(i),s=(0,t2.wj)(i),o=(0,t8.wh)(r,s),l=(0,U.TL)(),{registerEditor:d}=t7();return((0,f.useEffect)(()=>()=>{l((0,nt.mc)())},[l]),t)?(0,a.jsxs)(c.k,{bg:"gray.100",overflowY:"auto",overflowX:"hidden",justifyContent:"flex-start",alignContent:"center",alignItems:"center",alignSelf:"stretch",direction:"column",width:"100%",height:"100%",position:"relative",className:nl,...o,children:[(0,a.jsx)(t6.Y,{}),n.map((e,n)=>{var i;let r=null===(i=e.attrs)||void 0===i?void 0:i.id;return r?(0,a.jsx)(nc,{doc:t,cardId:r,cardIndex:n,cardJSON:e,onCreate:e=>{d(r,e)}},r):null})]}):null},nc=e=>{let{cardId:t,cardIndex:n,cardJSON:i,doc:r,onCreate:s}=e,o=(0,U.TL)(),[l,d]=(0,f.useState)(null),{userMessage:u}=t7(),h=(0,nn.b)({editor:l});(0,f.useEffect)(()=>{l&&h({doc:l.state.doc,cardId:t,message:u})},[h,l,t,n,u]);let x=(0,f.useMemo)(()=>(0,t3.vL)({docFlags:{cardLayoutsEnabled:!0}},[i]),[i]),p=(0,U.CG)((0,nt.a4)(t));(0,tj.vm)(()=>{if(!l||!p)return;let e=(0,eB.Bw)(l,t);e&&l.commands.command(t=>{let{tr:n}=t,i=t$.NB.fromJSON(l.schema,p.card);return n.replaceWith(e.pos,e.pos+e.node.nodeSize,i),!0})},[l,p,t],[p]);let m=(0,f.useCallback)(e=>{let{cardId:n,variationId:i}=e;l&&n===t&&o((0,nt.dx)({cardId:t,variantId:i}))},[o,l,t]);return(null==r?void 0:r.id)?(0,a.jsxs)(c.k,{className:"ai-variation-editor-".concat(t),alignItems:"flex-start",sx:t4.n,my:-8,children:[(0,a.jsx)(ns,{cardId:t,onClick:m}),(0,a.jsx)(tO.y,{initialContent:x,onCreate:e=>{let{editor:t}=e;d(t),s(t)},doc:r,docId:r.id,scrollingParentSelector:".".concat(nl),readOnly:!0,isStatic:!0,animationsEnabled:!1,extensions:[],shouldSupportMenus:!1})]}):null};var nd=n(27238);let nu=e=>{let{isOpen:t,onClose:n,onOpen:i}=(0,nd.M)({id:"cardSuggestionDrawer"}),r=(0,U.CG)(F.Pu),[s]=(0,f.useState)(()=>(0,tQ.xC)({reducer:U.Ct}));return(0,a.jsx)(g.zt,{store:s,children:(0,a.jsx)(nh,{...e,isOpen:t,onClose:n,onOpen:i,theme:r})})},nh=(i=e=>{let{doc:t,editor:n,theme:i,isOpen:r,onClose:s,onOpen:o}=e,[l,c]=(0,f.useState)([]),[d,u]=(0,f.useState)(null),{getAllCards:x,setUserMessage:p}=t7(),m=(0,f.useCallback)(()=>{s(),c([]),u(null)},[s]),g=(0,f.useCallback)(()=>{if(m(),!n)return;let e={type:"document",content:x()};console.log("[handleConfirm] contentToUse",e);let t=1,i=n.state.doc.nodeSize-2,r=(0,eB.Bw)(n,d);if(r){i=(t=r.pos)+r.node.nodeSize;let n=e.content.find(e=>{var t;return(null===(t=e.attrs)||void 0===t?void 0:t.id)===d});if(!n){console.warn("[handleConfirm] Count not find card to use");return}e=n}n.commands.command(r=>{let{tr:s}=r;return s.replaceRangeWith(t,i,t$.NB.fromJSON(n.schema,e)),!0})},[m,n,d,x]),j=(0,f.useCallback)(async(e,t,n)=>{o(),u(t),c(e.toJSON().content[0].content.filter(e=>{var n;return null===t||(null===(n=e.attrs)||void 0===n?void 0:n.id)===t})),p(n)},[o,p]);return(0,f.useEffect)(()=>{if(n)return t1.T.on("openSuggestionEditor",e=>{let{cardId:t,userMessage:i}=e;j(n.view.state.doc,t,i)})},[n,j]),(0,a.jsxs)(tV.d,{placement:"bottom",onClose:s,isOpen:r,trapFocus:!0,isFullHeight:!0,children:[(0,a.jsx)(tK.Z,{}),(0,a.jsxs)(tY.s,{borderTopRadius:"xl",h:"calc(var(--100vh) - 24px)",transform:"none !important",children:[(0,a.jsx)(tZ.o,{zIndex:"10",backgroundColor:"white",mr:2,shadow:"md"}),(0,a.jsx)(tJ.f,{p:0,h:"100%",children:l.length>0&&t?(0,a.jsx)(na,{doc:t,cards:l,theme:i}):(0,a.jsx)(t0.AA,{})}),(0,a.jsx)(tX.m,{borderTop:"1px solid #000",borderColor:"gray.200",children:(0,a.jsxs)(ev.h,{spacing:4,children:[(0,a.jsx)(ej.z,{variant:"ghost",onClick:s,children:(0,a.jsx)(h.cC,{id:"dEgA5A"})}),(0,a.jsx)(ej.z,{variant:"solid",onClick:g,children:(0,a.jsx)(h.cC,{id:"7VpPHA"})})]})})]})]})},(0,f.memo)(e=>(0,a.jsx)(ne,{children:(0,a.jsx)(i,{...e})})));var nx=n(65702),np=n(75009),nm=n(74409),nf=n(6717),ng=n(10001),nj=n(3699),nv={src:"/_next/static/media/Sal-Fishing-2x.1a2d0290.png"},nC=n(63416),nb=n(83906),ny=n(10625),nk=n(67046),nw=n(99058),nS=n(44035),nE=n(39237),nI=n(82108),nA=n.n(nI);let n_=e=>{let{count:t,onClose:n,commentStatusFilter:i,setCommentStatusFilter:r}=e,s=i===tW.Ux9.Open?x.ag._({id:"Kz1TxG"}):x.ag._({id:"kywJax"});return(0,a.jsxs)(c.k,{width:"100%",px:6,py:4,justifyContent:"space-between",alignItems:"center",h:16,tabIndex:0,outline:"none",children:[(0,a.jsx)(c.k,{flex:1,children:(0,a.jsxs)(eg.U,{spacing:4,children:[(0,a.jsx)(e7.V,{children:(0,a.jsx)(h.cC,{id:"eiUA4k",values:{count:t}})}),(0,a.jsxs)(ny.v,{closeOnSelect:!0,children:[(0,a.jsx)(nk.j,{as:ej.z,size:"sm",rightIcon:(0,a.jsx)(nb.v,{}),children:nA()(s)}),(0,a.jsx)(nw.q,{zIndex:3,children:(0,a.jsxs)(nS._,{defaultValue:i,title:x.ag._({id:"0cVgUw"}),type:"radio",children:[(0,a.jsx)(nE.i,{onClick:()=>r(tW.Ux9.Open),value:"open",children:(0,a.jsx)(h.cC,{id:"1TNIig"})}),(0,a.jsx)(nE.i,{onClick:()=>r(tW.Ux9.Closed),value:"closed",children:(0,a.jsx)(h.cC,{id:"D87pha"})})]})})]})]})}),(0,a.jsx)(e2.P,{onClick:n,"data-comment-feed-close-button":!0})]})};var nT=n(18730),nO=n(12560),nD=n(6167),nR=n(46625);let nP=e=>{let{user:t,editor:n}=e,[i,r]=(0,f.useState)(()=>{let e=(0,nO.W1)(n,nR.Et);return e&&e.length?e[0]:(0,nO.xN)(()=>nR.Et,n,"")});(0,f.useEffect)(()=>{if(i&&n)return()=>{var e,t;null===(e=(t=n.commands).createDraftComment)||void 0===e||e.call(t,i)}},[i,n]);let s=(0,nD.iZ)({draftComment:i,clearDraftComment(){var e,t,s,o;i&&(null===(s=(o=n.commands).removeDraftComments)||void 0===s||s.call(o,[i]));let l=(0,nO.xN)(()=>nR.Et,n,"");null===(e=(t=n.commands).createDraftComment)||void 0===e||e.call(t,l),r(l)},editor:n}),o=(0,f.useCallback)(e=>{let{editor:t}=e;r(e=>e?{...e,json:t.view.state.doc.toJSON(),text:t.view.state.doc.textContent}:e)},[]);return(0,a.jsx)(nT.A,{draftComment:i,user:t,onCommentDraftUpdate:o,onCommentSave:s,commentIdToHighlight:null})},nL=()=>({today:x.ag._({id:"ecUA8p"}),thisWeek:x.ag._({id:"yByRxz"}),earlier:x.ag._({id:"HPqZkW"})}),nz=e=>{var t;let{onClose:n,editor:i}=e,r=(0,U.CG)(F.yx),{isConnected:s}=(0,v.$)(),[o,l]=(0,f.useState)(tW.Ux9.Open),u=null==r?void 0:r.comments,x=null==r?void 0:null===(t=r.comments)||void 0===t?void 0:t.filter(e=>e.status===o),p=(0,U.CG)(F.gh),m=(0,eX.py)("comment",r)&&s,{user:g}=(0,eX.SE)(),j=(0,C.$m)(r,g),b=(0,f.useMemo)(()=>(0,nC.yd)({items:x||[],sortBy:nC.Yz,latestTimeGetterFn:nC.z3}),[x]);return u&&r&&i?(0,a.jsxs)(c.k,{direction:"column",h:"100%",overflowX:"hidden",className:nf.G,w:"100%",children:[(0,a.jsx)(n_,{commentStatusFilter:o,setCommentStatusFilter:l,count:(null==x?void 0:x.length)||0,onClose:n}),(0,a.jsxs)(c.k,{direction:"column",className:"comments-list",flex:1,overflowY:"auto",tabIndex:0,outline:"none",children:[(0,a.jsx)(J.V,{description:(0,a.jsx)(h.cC,{id:"pQvCbR"}),isConnected:s,mx:6}),j&&!g&&r&&(0,a.jsx)(nj.I,{doc:r,accessLink:j}),m&&(0,a.jsx)(d.xu,{px:6,py:2,children:(0,a.jsx)(nP,{user:g,editor:i})}),!(null==x?void 0:x.length)&&(0,a.jsxs)(e5.g,{align:"center",p:6,textAlign:"center",spacing:8,children:[(0,a.jsx)(d.xu,{w:"80%",maxW:"300px",mb:6,alignContent:"center",children:(0,a.jsx)(np.E,{src:nv.src,width:"640px",alt:"Sal, the Gamma mascot, fishing extraterrestrially"})}),(0,a.jsxs)(d.xu,{children:[(0,a.jsx)(nm.X,{size:"xs",mb:2,children:"open"===o?(0,a.jsx)(h.cC,{id:"W7i5f5"}):(0,a.jsx)(h.cC,{id:"mpDN1V"})}),(0,a.jsx)(e3.x,{fontSize:"sm",children:(0,a.jsx)(h.cC,{id:"iB9OEi"})})]})]}),Object.entries(b).filter(e=>{let[,t]=e;return t.length}).map(e=>{let[t,s]=e;return(0,a.jsxs)(c.k,{direction:"column",children:[(0,a.jsx)(eC.NZ,{px:6,pt:4,pb:2,position:"sticky",top:-2,bg:"white",zIndex:2,children:nL()[t]}),(0,a.jsx)(c.k,{direction:"column",children:s.map(e=>(0,a.jsx)(ng.q,{instanceType:"feed",userCanComment:m,editor:i,comment:e,selfUser:g,docId:null==r?void 0:r.id,editorMode:p,onClose:n,isRootComment:!0,pt:6,px:6,pb:4},e.id))})]},t)})]})]}):null},nG=e=>{let{closePanel:t}=e,{editor:n}=(0,e1._)();return(0,f.useEffect)(()=>{let e=e=>{let{open:n}=e;n&&t()};return nx.pw.on(nx.TI.POPUP_COMMENT_TOGGLED,e),()=>{nx.pw.on(nx.TI.POPUP_COMMENT_TOGGLED,e)}},[t]),(0,a.jsx)(e9.s,{bgColor:"white","data-panelid":"comment-feed-panel",children:(0,a.jsx)(nz,{onClose:t,editor:n})})};nG.panelPosition="right",nG.panelName="comment-feed";let nN=()=>{let{togglePanel:e,isPanelOpen:t}=en(nG);return{toggleCommentsPanel:e,isCommentsPanelOpen:t}};var nM=n(87202),nU=n(43901),nF=n(39097),nW=n.n(nF),nH=n(74810),nq=n(91076);let nB=()=>{var e,t;let n=(0,U.CG)(F.yx),{user:i}=(0,nq.SE)(),r=(0,nq.py)("manage",n)&&!!i,s=null==n?void 0:null===(e=n.docGenerateInput)||void 0===e?void 0:e.docGeneration;if(n&&s&&(null===(t=n.createdBy)||void 0===t?void 0:t.id)===(null==i?void 0:i.id)&&r)return(0,ek.Xn)(s)};var nV=n(47443),nK=n(80877),nY=n(74444),nZ=n(17689);let nJ=e=>{let{onClose:t}=e;return(0,a.jsxs)(tI.K,{flex:1,align:"center",justify:"center",p:6,spacing:6,children:[(0,a.jsx)(np.E,{src:"https://cdn.gamma.app/zc87vhr30n8uf3n/b4b04402416f4ec8b5c1dc24f4c2a3d6/optimized/Sal-Spaceship-Riding.png",px:12}),(0,a.jsx)(nZ.K,{children:(0,a.jsx)(e3.x,{children:(0,a.jsx)(h.cC,{id:"jVQv+Q"})})}),(0,a.jsx)(ej.z,{variant:"ghost",colorScheme:"blackAlpha",leftIcon:(0,a.jsx)(O.G,{icon:T.g82}),onClick:t,children:(0,a.jsx)(h.cC,{id:"pqZJT2"})})]})},nX=()=>(0,a.jsxs)(nV.b,{status:"warning",mt:12,minH:20,flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",borderRadius:"lg",borderWidth:"1px",children:[(0,a.jsx)(nK.C,{children:(0,a.jsx)(h.cC,{id:"rvbk/4"})}),(0,a.jsx)(nY.X,{children:(0,a.jsx)(h.cC,{id:"XNkIFY"})})]});var nQ=n(74105),n$=n(29494),n0=n(27191),n1=n(38799);let n2="40px",n5=e=>{let{value:t,onChange:n,onSubmit:i,isLoading:r,editor:s,resetMessages:o}=e;(0,n1.F1)(s);let{selection:l,doc:c}=s.state,d=c.textBetween(l.from,l.to,"\n"),u=(0,Z.Y)("unlimited_credits"),p=(0,f.useRef)(null),[m,g]=(0,f.useState)(!1),j=l instanceof n0.qv,v=l instanceof n0.Bs,C=j&&"card"===l.node.type.name,b=l.empty||C?x.ag._({id:"XrfE9D"}):j?x.ag._({id:"CsUli9"}):v&&d?x.ag._({id:"+NPPZN",values:{0:d.length>50?d.slice(0,50)+"...":d}}):x.ag._({id:"/fY1js"}),y=(0,f.useCallback)(()=>{p.current&&(p.current.style.height=n2,p.current.style.height="".concat(p.current.scrollHeight,"px"))},[]);return(0,f.useEffect)(()=>(s.on("selectionUpdate",y),()=>{s.off("selectionUpdate",y)}),[s,y]),(0,f.useEffect)(()=>{m?y():setTimeout(()=>{g(!0),y()},400)},[m,b,y,t]),(0,a.jsxs)(eg.U,{align:"end",children:[(0,a.jsx)(nQ.B,{size:"md",children:(0,a.jsx)(n$.g,{"data-gamma-child-tiptap-editor":!0,id:"ai-chat-input",h:n2,minH:n2,ref:p,resize:"none",maxH:m?32:n2,bg:"white",shadow:"md",autoFocus:!0,placeholder:b,value:t,onKeyPress:e=>{"Enter"!==e.key||!(t.length>0)||r||e.shiftKey||(e.preventDefault(),i())},onChange:e=>n(e.target.value),pr:12})}),(0,a.jsx)(eC.kH,{placement:"top",label:(0,a.jsxs)(e5.g,{spacing:0,children:[(0,a.jsx)(h.cC,{id:"4k2VbT"}),!u&&(0,a.jsx)(e3.x,{color:"gray.400",children:(0,a.jsx)(h.cC,{id:"jxCfNz",components:{0:(0,a.jsx)(e8.J,{type:"chatSuggestion",ml:0})}})}),(0,a.jsx)(eC.f2,{shortcut:"Enter"})]}),children:(0,a.jsx)(I.h,{"aria-label":"Send message",isDisabled:!t||r,size:"sm",h:n2,w:n2,variant:"solid",icon:(0,a.jsx)(O.G,{icon:e6.FzC,fixedWidth:!0}),onClick:i})})]})};var n3=n(52740),n4=n(98683),n6=n(73145);let n8=e=>{let{editor:t,scrollSelector:n,onClose:i}=e,[r,s]=(0,f.useState)(""),o=(0,e0.ye)("openAiStatus"),l=(0,U.TL)(),d=(0,eq.As)("editor"),u=(0,U.qr)(),x=(0,U.CG)(n4.AZ),p=(0,U.CG)(n4.Q_),[m,g]=(0,f.useState)(null),j=(0,f.useCallback)(()=>(0,n4.AZ)(u.getState()),[u]),v=(0,f.useCallback)(e=>{let t={timestamp:Date.now(),...e};l((0,n4.Hz)({message:t}))},[l]),C=(0,f.useCallback)(()=>{l((0,n4.mc)())},[l]),{status:b,sendMessage:y}=(0,n6.n)({addMessage:v,getMessageHistory:j,editor:t});(0,f.useEffect)(()=>{let e=n&&document.querySelector(n);e&&requestAnimationFrame(()=>{e.scrollTop=e.scrollHeight})},[n,x]);let k="idle"!==b;(0,f.useEffect)(()=>{if(!p.length||k)return;let{task:e,id:t}=p[0];!1===e.submit?s(e.message):y({message:e.message}),l((0,n4.VB)({id:t}))},[k,y,l,p]);let w=(0,f.useCallback)(()=>{if(!m||!t)return;let e=document.querySelector('[data-card-id="'.concat(m,'"]')),n=(0,eq.v4)(e,100);null!=n&&n.yAxisInView||d.scrollElementIntoView({element:e})},[t,d,m]),S=(0,f.useCallback)(e=>{w(),y({message:e})},[w,y]),E=(0,f.useCallback)(()=>{S(r),s("")},[S,r]),A=(0,th.YO)(E,"chatSuggestion",eM.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_CHAT);(0,f.useEffect)(()=>{if(!t)return;let e=()=>{let e=(0,tl.AQ)(t.state.doc,t.state.selection.from);e&&g(e.node.attrs.id)};return e(),t.on("selectionUpdate",e),()=>{t.off("selectionUpdate",e)}},[t]);let _=nB();return t?"DOWN"===o?(0,a.jsx)(nJ,{onClose:i}):(0,a.jsxs)(c.k,{direction:"column",h:"100%",w:"100%",px:6,pb:2,children:["DEGRADED"===o&&(0,a.jsx)(nX,{}),(0,a.jsx)(n3.rN,{scrollSelector:n,messages:x,editor:t,sendMessage:S,isLoading:k,onClose:i}),(0,a.jsxs)(tI.K,{pos:"sticky",bottom:0,py:2,pt:4,bg:"gray.50",children:[(0,a.jsx)(n5,{editor:t,value:r,onChange:s,onSubmit:A,isLoading:k,resetMessages:C}),(0,a.jsx)(nH.q,{modalId:"ai-credits-modal-message-list",variant:"ghost",justify:"flex-end",segmentEvent:eM.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_CHAT})]}),(0,a.jsxs)(ev.h,{position:"absolute",left:4,top:1,variant:"ghost",colorScheme:"blackAlpha",children:[(0,a.jsx)(eC.kH,{label:(0,a.jsx)(h.cC,{id:"5eg0kp"}),placement:"top",children:(0,a.jsx)(I.h,{color:"currentColor","aria-label":"reset-chat",icon:(0,a.jsx)(O.G,{icon:T.YcH}),onClick:C,isRound:!0})}),_&&(0,a.jsx)(eC.kH,{label:(0,a.jsx)(h.cC,{id:"pC3anp",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}}),placement:"top",children:(0,a.jsx)(I.h,{color:"currentColor","aria-label":"source-prompt",icon:(0,a.jsx)(O.G,{icon:T.Fzb}),as:nW(),href:_,target:(0,ey.Q5)()?"_self":"_blank",isRound:!0})})]})]}):null},n9=e=>{let{onClose:t}=e;return(0,a.jsx)(c.k,{width:"100%",px:6,py:4,justifyContent:"space-between",alignItems:"center",h:8,tabIndex:0,outline:"none",position:"absolute",top:0,children:(0,a.jsx)(e2.P,{"data-design-partner-close-button":!0,position:"absolute",top:2,right:6,zIndex:1,onClick:t})})},n7="design-partner-panel-wrapper",ie=()=>{let{togglePanel:e,isPanelOpen:t}=en(it),{editor:n}=(0,e1._)(),i=(0,e0.ye)("aiChat"),r=(0,U.TL)();(0,f.useEffect)(()=>()=>{r((0,n4.mc)())},[]);let s=(0,U.CG)(F.hN);return(0,f.useEffect)(()=>{!s&&t&&e()},[s,t,e]),(0,f.useEffect)(()=>{var e,i;n&&(null===(e=(i=n.commands).setSalOpen)||void 0===e||e.call(i,t))},[n,t]),(0,f.useEffect)(()=>{if(i)return nU.T.on("toggle",t=>{let{config:n}=t;e(n)})},[e,i]),(0,f.useEffect)(()=>{if(i)return nx.pw.on("queueDesignPartnerTask",t=>{r((0,n4.Lj)({task:t})),e({disableTransition:!1,override:"open"}),console.log("queueDesignPartnerTask",t)})},[r,i,e]),(0,f.useEffect)(()=>{if(!i||!s)return;let t=(0,nM.ZP)("mod+shift+S");return es.F7.on("keydown","DESIGN_PARTNER_PANEL",n=>!!t(n)&&(e(),!0))},[e,i,s]),{isDesignPartnerPanelOpen:t}},it=e=>{let{closePanel:t}=e,{editor:n}=(0,e1._)();return(0,f.useEffect)(()=>es.F7.on("keydown","DESIGN_PARTNER_PANEL",e=>!!document.activeElement.closest('[data-panelid="design-partner-panel"]')&&"Escape"===e.key&&(t(),!0)),[t]),(0,a.jsx)(e9.s,{bgColor:"gray.50","data-panelid":"design-partner-panel",borderLeftWidth:"1px",children:(0,a.jsxs)(c.k,{direction:"column",h:"100%",overflowY:"auto",overflowX:"hidden",className:n7,w:"100%",children:[(0,a.jsx)(n9,{onClose:t}),(0,a.jsx)(n8,{editor:n,scrollSelector:".".concat(n7),onClose:t})]})})};it.panelPosition="right",it.panelName="chat";let ii=e=>{let{disabled:t=!1,docId:n}=e;if(!t)return null;let i="https://metabase.internal.gamma.app/question/1558-workspace-lookup-by-id?org_id=none&doc_id=".concat(n);return(0,a.jsxs)(c.k,{direction:"row",bg:"red.500",color:"white",py:3,px:4,align:"center",fontSize:"sm",children:[(0,a.jsxs)(e5.g,{flex:"1",align:"start",spacing:0,children:[(0,a.jsxs)(e3.x,{fontWeight:"bold",children:["This ",Y.Yc," is disabled."]}),(0,a.jsx)(e3.x,{opacity:"0.7",fontSize:"xs",children:"It is only visible to Gamma support personnel. For more information, check the admin site."})]}),(0,a.jsx)(ej.z,{variant:"plain",size:"sm",mr:4,rightIcon:(0,a.jsx)(O.G,{icon:T.wlW}),onClick:()=>{i&&window.open(i,"_blank")},children:"Admin page"})]})};var ir=n(70065),is=n(26284),io=n(87651),il=n(17190),ia=n(5361),ic=n(58284),id=n(97590),iu=n(21697),ih=n(50828);let ix=["90%","360px"],ip=e=>{let{onClose:t,eyebrowText:n,mainText:i,callsToAction:r}=e;return(0,a.jsxs)(d.xu,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",p:4,w:ix,maxW:ix,position:"relative",children:[(0,a.jsx)(e2.P,{size:"sm",onClick:t,position:"absolute",insetEnd:1,top:1}),(0,a.jsxs)(tI.K,{spacing:4,children:[(0,a.jsxs)(tI.K,{spacing:1,paddingEnd:3,children:[!(0,ey.s2)()&&(0,a.jsx)(e3.x,{fontSize:"sm",color:"gray.600",children:n}),(0,a.jsx)(e3.x,{fontSize:"md",children:i})]}),(0,a.jsx)(d.xu,{w:"100%",children:r})]})]})},im=e=>{let{onClose:t,startTour:n}=e;return(0,a.jsx)(ip,{eyebrowText:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{"aria-label":"Wave",role:"img",children:"\uD83D\uDC4B"})," ",(0,a.jsx)(h.cC,{id:"IiwaCT",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})]}),mainText:(0,a.jsx)(h.cC,{id:"ntWFEH"}),onClose:t,callsToAction:(0,a.jsx)(ej.z,{size:"md",w:"100%",variant:"solid",onClick:()=>{n(0),t()},children:(0,a.jsx)(h.cC,{id:"VzFYDl"})})})};var ig=n(38914);let ij=["90%","360px"],iv=e=>{let{onClose:t}=e,[n,i]=(0,f.useState)(!0);return(0,f.useEffect)(()=>{setTimeout(()=>{i(!1)},3e3)},[]),(0,a.jsxs)(d.xu,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",p:4,w:ij,maxW:ij,position:"relative",children:[(0,a.jsx)(e2.P,{size:"md",onClick:t,position:"absolute",insetEnd:1,top:1}),(0,a.jsxs)(tI.K,{direction:"row",spacing:3,justify:"center",w:"100%",alignItems:"center",children:[(0,a.jsx)(d.xu,{color:"trueblue.300",children:(0,a.jsx)(O.G,{icon:ig.tc$,size:"2x",className:n?"fa-bounce":void 0})}),(0,a.jsxs)(tI.K,{spacing:0,direction:"column",flex:1,textAlign:"left",children:[(0,a.jsx)(e3.x,{fontSize:"sm",color:"gray.600",children:(0,a.jsx)(h.cC,{id:"eoDgVo"})}),(0,a.jsx)(e3.x,{fontSize:"md",children:(0,a.jsx)(h.cC,{id:"p7dFyi"})})]})]})]})},iC="source",ib="desktop-tour-toast",iy="switch-from-mobile-to-desktop-toast",ik=e=>{var t;let{editor:n}=e,i=(0,ir.p)(),r=(0,U.CG)(tF.yx),{startTour:s}=(0,b.c8)(),{user:o,setSettings:l}=(0,eX.SE)(),[a,c]=(0,f.useState)(!1),d=(0,f.useRef)(!1),u=(0,f.useRef)(!1),h=!!(null==o?void 0:null===(t=o.settings)||void 0===t?void 0:t.needsEditorOnboarding),x=(0,U.CG)((0,id.oH)(null==n?void 0:n.gammaDocId)),p=!!x&&"running"===x.status,m=(0,eq.As)("editor"),[g]=(0,f.useState)(()=>(0,ek.SJ)()[iC]===iu.VY),[j]=(0,f.useState)(()=>g&&(0,ey.s2)());(0,f.useEffect)(()=>{n&&c(!p&&!(0,ey.s2)()&&g&&h)},[n,g,p,h]),(0,ih.j)(iC),(0,f.useEffect)(function(){return u.current||!a||i.isActive(ib)||(u.current=!0,setTimeout(()=>{i({id:ib,position:"bottom-left",render:e=>{let{onClose:t}=e;return im({onClose:()=>{null==l||l({remove:["needsEditorOnboarding"]}),t()},startTour:s})},isClosable:!0,duration:null})},2e3)),()=>{i.isActive(ib)&&(u.current=!0,i.close(ib))}},[l,a,s,i]),(0,f.useEffect)(function(){if(!(0,ey.s2)()||!j)return;let e="body"===m.scrollSelector?document.documentElement:document.querySelector(m.scrollSelector),t=()=>{e&&(0,ey.s2)()&&(null==e?void 0:e.scrollTop)>=(null==e?void 0:e.scrollHeight)/4&&j&&!i.isActive(iy)&&!d.current&&(d.current=!0,i({id:iy,position:"top",render:e=>{let{onClose:t}=e;return iv({onClose:t})},isClosable:!0,duration:null,containerStyle:{minWidth:"100%",display:"flex",justifyContent:"center"}}))};return window.addEventListener("scroll",t,!0),()=>{window.removeEventListener("scroll",t,!0),i.isActive(iy)&&i.close(iy)}},[r,m.scrollSelector,j,i])};var iw=n(8940);let iS=e=>{var t;let{doc:n,site:i,path:r}=e,s=(0,ir.p)(),o=(0,U.TL)(),l=(0,U.CG)(e_.v),[c]=(0,iw.zU5)(),[u]=(0,iw.sIg)(),[x]=(0,iw.odt)(),p=(0,U.CG)(e_.B$),m=null==n?void 0:n.id,g=(0,eD.mn)({domain:null==i?void 0:null===(t=i.domains)||void 0===t?void 0:t[0],path:r}),j=null==i?void 0:i.id,v=(0,f.useCallback)(async()=>{m&&((0,e_.yB)(o)(!0),await (0,eD.iL)(m),await u({variables:{id:m},refetchQueries:["GetDoc","GetSite"]}).then(()=>{s({render:function(){return(0,a.jsx)(d.xu,{color:"white",p:3,bg:"green.500",shadow:"md",borderRadius:"md",children:(0,a.jsxs)(eg.U,{spacing:4,children:[(0,a.jsx)(d.xu,{children:(0,a.jsx)(O.G,{icon:T.fV7})}),(0,a.jsx)(e3.x,{fontWeight:"semibold",children:(0,a.jsx)(h.cC,{id:"V6Byuz"})}),g&&(0,a.jsx)(ej.z,{variant:"plain",as:"a",target:"_blank",_hover:{textDecoration:"none",color:"trueblue.500"},href:g,rightIcon:(0,a.jsx)(O.G,{icon:T.wlW}),children:(0,a.jsx)(h.cC,{id:"Zel0o2"})}),(0,a.jsx)(e2.P,{onClick:()=>s.closeAll()})]})})},status:"success",position:"top",duration:5e3,isClosable:!0})}).catch(e=>{s({title:(0,a.jsx)(h.cC,{id:"DD5mqk"}),status:"error",position:"top",isClosable:!0}),console.error("Error publishing site:",e.message)}).finally(()=>{(0,e_.yB)(o)(!1)}))},[o,m,u,s,g]);return{publishSite:(0,f.useCallback)(async()=>{j&&((0,e_.yB)(o)(!0),p&&await (0,eD.iL)(p),await c({variables:{id:j},update:(e,t)=>{let{data:n}=t,i=null==n?void 0:n.publishSite;i&&i.routes.forEach(t=>{e.updateQuery({query:iw.yE1,variables:{id:t.docId}},e=>{var n,i,r;return(e||console.log("%c Publish doc _data is undefined or null","color: red; font-size: 16px"),null==e?void 0:e.doc)?{doc:{...e.doc,publishedTime:null===(n=t.doc)||void 0===n?void 0:n.publishedTime,publishedSnapshotId:null===(i=t.doc)||void 0===i?void 0:i.publishedSnapshotId,currentSnapshotId:null===(r=t.doc)||void 0===r?void 0:r.currentSnapshotId}}:e})})}}).then(()=>{s({render:function(){return(0,a.jsx)(d.xu,{color:"white",p:3,bg:"green.500",shadow:"md",borderRadius:"md",children:(0,a.jsxs)(eg.U,{spacing:4,children:[(0,a.jsx)(d.xu,{children:(0,a.jsx)(O.G,{icon:T.fV7})}),(0,a.jsx)(e3.x,{fontWeight:"semibold",children:(0,a.jsx)(h.cC,{id:"V6Byuz"})}),g&&(0,a.jsx)(ej.z,{variant:"plain",as:"a",target:"_blank",_hover:{textDecoration:"none",color:"trueblue.500"},href:g,rightIcon:(0,a.jsx)(O.G,{icon:T.wlW}),children:(0,a.jsx)(h.cC,{id:"Zel0o2"})}),(0,a.jsx)(e2.P,{onClick:()=>s.closeAll()})]})})},status:"success",position:"top",duration:5e3,isClosable:!0})}).catch(e=>{s({title:(0,a.jsx)(h.cC,{id:"DD5mqk"}),description:(0,a.jsx)(h.cC,{id:"R4PZ4k"}),status:"error",position:"top",isClosable:!0}),console.error("Error publishing site:",e.message)}).finally(()=>{(0,e_.yB)(o)(!1)}))},[j,o,p,c,s,g]),publishDoc:v,isPublishing:l}};var iE=n(84538),iI=n(82959),iA=n(91e3),i_=n(56630),iT=n(55655),iO=n(82929),iD=n(46692);let iR=e=>{let{onGenerateSuccess:t}=e,[n,i]=(0,f.useState)("createGenerate"),[r,s]=(0,f.useState)([]),[o,l]=(0,f.useState)(void 0),c=(0,f.useMemo)(()=>({goToScreen:(e,t)=>{l(null==t?void 0:t.generateId),s(e=>[...e,n]),i(e)},navEnabled:"createGenerate"!==n,webpageOnly:!0,skipThemeStep:!0,onGenerateSuccess:t}),[n,t]),d=(0,f.useMemo)(()=>{switch(n){case"createWithAI":return i_.B;case"createImport":return iA.j;case"createPaste":return iT.L;case"promptEditor":return function(){return(0,a.jsx)(iO.B,{id:o,children:(0,a.jsx)(iE.N,{})})};case"createGenerate":return function(){return o?(0,a.jsx)(iO.B,{id:o,children:(0,a.jsx)(iI.m,{autosetLocale:!1})}):(0,a.jsx)(iI.m,{autosetLocale:!0})};default:throw Error("invalid page")}},[o,n]);return(0,a.jsx)(iD.u$.Provider,{value:c,children:(0,a.jsx)(d,{})})},iP=e=>{let{isOpen:t,onClose:n}=e;return(0,a.jsx)(eC.Wk,{isDark:!1,children:(0,a.jsxs)(tV.d,{isOpen:t,placement:"bottom",onClose:n,isFullHeight:!0,children:[(0,a.jsx)(tK.Z,{}),(0,a.jsxs)(tY.s,{h:"calc(var(--100vh) - 24px)",p:0,children:[(0,a.jsx)(tZ.o,{zIndex:"sticky"}),(0,a.jsx)(tJ.f,{p:0,children:(0,a.jsx)(iR,{onGenerateSuccess:n})})]})]})})},iL=e=>{var t;let{doc:n}=e,i=(0,eR.Yy)(),r=(0,ir.p)(),s=null==n?void 0:null===(t=n.accessLinks)||void 0===t?void 0:t[0],o=(0,f.useMemo)(()=>(0,ek.Gn)({docTitle:null==n?void 0:n.title,docId:null==n?void 0:n.id,token:null==s?void 0:s.token,absolute:!0}),[n,null==s?void 0:s.token]),{onCopy:l}=(0,is.V)(o),c=(0,f.useCallback)(()=>{(0,ia.J)({docId:null==n?void 0:n.id,source:"docWizardFooter",type:"tokenUrl"}),l(),r({title:(0,a.jsx)(h.cC,{id:"pQjjYo"}),status:"success",position:"top",duration:1e3,isClosable:!1})},[null==n?void 0:n.id,l,r]),d=nB();return(0,a.jsxs)(tI.K,{spacing:4,textAlign:"center",children:[(0,a.jsx)(nm.X,{size:"md",children:(0,a.jsx)(h.cC,{id:"bB+DHs"})})," ",(0,a.jsx)(ej.z,{as:nW(),target:(0,ey.Q5)()?"_self":"_blank",variant:"solid",colorScheme:i?"blackAlpha":"whiteAlpha",leftIcon:(0,a.jsx)(O.G,{icon:T.r8p}),href:"/create",children:(0,a.jsx)(h.cC,{id:"xFxi2V"})}),d?(0,a.jsx)(ej.z,{leftIcon:(0,a.jsx)(O.G,{icon:T.Fzb}),variant:"plain",as:nW(),target:(0,ey.Q5)()?"_self":"_blank",href:d,children:(0,a.jsx)(h.cC,{id:"550oRP"})}):(0,a.jsx)(ej.z,{leftIcon:(0,a.jsx)(O.G,{icon:T.nNP}),variant:"plain",onClick:c,children:(0,a.jsx)(h.cC,{id:"RGCCrg"})})]})},iz=()=>{let{isOpen:e,onClose:t,onOpen:n}=(0,nd.M)({id:"add-page-ai-modal"}),i=(0,U.CG)(e_.lH),r=(0,eD.Vr)(i),{publishSite:s,isPublishing:o}=iS({site:i}),l=(0,eR.Yy)();return(0,a.jsxs)(tI.K,{spacing:4,textAlign:"center",children:[(0,a.jsx)(nm.X,{size:"md",children:(0,a.jsx)(h.cC,{id:"bB+DHs"})}),(0,a.jsx)(ej.z,{variant:"solid",colorScheme:l?"blackAlpha":"whiteAlpha",leftIcon:(0,a.jsx)(O.G,{icon:T.r8p}),onClick:n,children:(0,a.jsx)(h.cC,{id:"K3193W"})}),r&&(0,a.jsx)(ej.z,{leftIcon:(0,a.jsx)(O.G,{icon:T.A$k}),variant:"plain",onClick:s,isLoading:o,children:(0,a.jsx)(h.cC,{id:"2uGo/E"})}),(0,a.jsx)(iP,{isOpen:e,onClose:t})]})},iG=()=>(0,a.jsx)(tI.K,{spacing:4,textAlign:"center",children:(0,a.jsx)(nm.X,{size:"md",children:(0,a.jsx)(h.cC,{id:"v1HDJV"})})}),iN=e=>{var t,n;let{doc:i}=e,r=null==i?void 0:null===(n=i.docGenerateInput)||void 0===n?void 0:null===(t=n.docGeneration)||void 0===t?void 0:t.generationType;return i?r===tW.FJd.UploadPptV2?(0,a.jsx)(iG,{}):i.site?i.site&&!(0,ey.s2)()?(0,a.jsx)(iz,{}):null:(0,a.jsx)(iL,{doc:i}):null};var iM=n(35676),iU=n.n(iM),iF=n(3440),iW=n.n(iF),iH=n(46152),iq=n.n(iH),iB=n(15377);let iV=[{key:"content_quality",category:"content",label:(0,a.jsx)(h.cC,{id:"geq9gH"})},{key:"missing_content",category:"content",label:(0,a.jsx)(h.cC,{id:"n4zPFX"})},{key:"wrong_language",category:"content",label:(0,a.jsx)(h.cC,{id:"R2Ly6h"})},{key:"amount_of_text",category:"content",label:(0,a.jsx)(h.cC,{id:"pi+Tez"})},{key:"inaccurate_content",category:"content",label:(0,a.jsx)(h.cC,{id:"Qk+SyG"})},{key:"image_quality",category:"image",label:(0,a.jsx)(h.cC,{id:"ESjmDR"})},{key:"number_of_images",category:"image",label:(0,a.jsx)(h.cC,{id:"x6yr/9"})},{key:"layouts_and_templates",category:"layout",label:(0,a.jsx)(h.cC,{id:"5yz5Kl"})},{key:"theme_styling",category:"layout",label:(0,a.jsx)(h.cC,{id:"nTZNkL"})}],iK={key:"other",category:"other",label:(0,a.jsx)(h.cC,{id:"/IX/7x"})},iY=[{key:"missing_content",category:"content",label:(0,a.jsx)(h.cC,{id:"n4zPFX"})},{key:"inaccurate_content",category:"content",label:(0,a.jsx)(h.cC,{id:"04mUQ2"})},{key:"missing_images",category:"image",label:(0,a.jsx)(h.cC,{id:"CLDdsj"})},{key:"image_quality",category:"image",label:(0,a.jsx)(h.cC,{id:"ESjmDR"})},{key:"wrong-layout",category:"layout",label:(0,a.jsx)(h.cC,{id:"x2M7iY"})},{key:"colors-fonts",category:"layout",label:(0,a.jsx)(h.cC,{id:"nTZNkL"})},{key:"animations",category:"animations",label:(0,a.jsx)(h.cC,{id:"HgWdP3"})},{key:"import_speed",category:"performance",label:(0,a.jsx)(h.cC,{id:"YJPN3F"})},{key:"too-similar",category:"layout",label:(0,a.jsx)(h.cC,{id:"R5upbf"})}],iZ=e=>{let{docId:t,isDark:n,generationType:i,interactionId:r}=e,s=(0,f.useMemo)(()=>{let e=i===tW.FJd.UploadPptV2?iY:iV;return iU()(iq()(iW()(iq()(e),"category"))).concat([iK])},[i]),o=(0,f.useCallback)(e=>{(0,tu.fM)({rating:e,doc_id:t,interactionId:r,generationType:i})},[t,i,r]),l=(0,f.useCallback)((e,n,s)=>{(0,tu.XH)({feedback:n,tags:s,rating:e,doc_id:t,generationType:i,interactionId:r})},[t,i,r]);return(0,a.jsx)(iB.Cn,{feedbackTags:s,trackRating:o,trackFeedback:l,isDark:n})};var iJ=n(29944),iX=n(36660),iQ=n(55891);let i$=e=>{let[t]=(0,f.useState)(()=>(0,ek.SJ)()[e]);return(0,f.useEffect)(()=>{setTimeout(()=>{(0,iX.lO)({query:{...(0,ek.SJ)(),[e]:void 0},emitChange:!1})})},[]),t},i0=e=>{var t,n,i;let{editor:r}=e,s=r&&null!==(n=null===(t=(0,iQ.VA)(r))||void 0===t?void 0:t.generateInfo)&&void 0!==n?n:{},o=i$("source"),l=(0,U.CG)((0,id.oH)(null==r?void 0:r.gammaDocId)),a=null,c=!0;return o===iu.VY?l&&("complete"===l.status||"error"===l.status)&&(a=l.id,c=!0):o===iJ.u&&(c=!0,a=null!==(i=s.interactionId)&&void 0!==i?i:null),{showDocWizardFooter:c,source:o,interactionId:a}},i1=(0,f.memo)(e=>{var t,n,i;let{interactionId:r}=e,s=(0,U.CG)(tF.yx),o=(0,eR.Yy)(),l=null==s?void 0:null===(n=s.docGenerateInput)||void 0===n?void 0:null===(t=n.docGeneration)||void 0===t?void 0:t.generationType,[d,u]=(0,f.useState)(!1),x=(0,ir.p)(),p=null==s?void 0:null===(i=s.accessLinks)||void 0===i?void 0:i[0],m=(0,f.useMemo)(()=>(0,ek.Gn)({docTitle:null==s?void 0:s.title,docId:null==s?void 0:s.id,token:null==p?void 0:p.token,absolute:!0}),[s,null==p?void 0:p.token]),{onCopy:g}=(0,is.V)(m);(0,f.useCallback)(()=>{(0,ia.J)({docId:null==s?void 0:s.id,source:"docWizardFooter",type:"tokenUrl"}),g(),x({title:(0,a.jsx)(h.cC,{id:"pQjjYo"}),status:"success",position:"top",duration:1e3,isClosable:!1})},[null==s?void 0:s.id,g,x]);let j=(0,f.useCallback)(()=>{u(!0)},[]);nB();let v=o?{background:"gray.900",color:"white",borderTop:"2px solid var(--chakra-colors-whiteAlpha-200)"}:{background:"white",color:void 0,borderTop:"2px solid var(--chakra-colors-blackAlpha-200)"};return s?(0,a.jsx)(eC.Wk,{isDark:o,children:(0,a.jsx)(c.k,{className:"chakra-dont-set-collapse","data-doc-wizard-footer":!0,w:"100%",mt:(0,ey.s2)()?void 0:"-".concat(ic.m),children:(0,a.jsx)(io.U,{in:!d,style:{width:"100%"},unmountOnExit:!0,children:(0,a.jsx)(c.k,{pt:[10,10,20],pb:[4,4,8],w:"100%",position:"relative",...v,children:(0,a.jsx)(il.W,{maxW:"450px",children:(0,a.jsxs)(tI.K,{spacing:8,children:[(0,a.jsx)(iN,{doc:s}),(0,a.jsx)(iZ,{docId:s.id,isDark:o,interactionId:r,generationType:l}),(0,a.jsx)(tE.M,{pt:[0,0,4],w:"100%",children:(0,a.jsx)(ej.z,{size:"sm",onClick:j,variant:"text",colorScheme:"blackAlpha",children:(0,a.jsx)(h.cC,{id:"vLyv1R"})})})]})})})})})}):null});i1.displayName="DocWizardFooterInner";let i2=e=>{let{editor:t}=e;ik({editor:t});let{showDocWizardFooter:n,interactionId:i}=i0({editor:t});return n&&i?(0,a.jsx)(i1,{interactionId:i}):null};var i5=n(98537),i3=n.n(i5),i4=n(11082),i6=n(71733);let i8=e=>{let{onCloneClick:t,onSignupClick:n,isLoggedIn:i}=e;return(0,a.jsx)(d.xu,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",display:"column",p:4,position:"relative",children:i?(0,a.jsxs)(eg.U,{children:[(0,a.jsxs)(e3.x,{mr:1,children:[(0,a.jsx)(h.cC,{id:"HMsJrS",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc},components:{0:(0,a.jsx)("strong",{})}})," ","\uD83D\uDE0D"]}),(0,a.jsx)(ej.z,{variant:"solid",onClick:t,children:(0,a.jsx)(h.cC,{id:"he3ygx"})})]}):(0,a.jsxs)(eg.U,{children:[(0,a.jsxs)(e3.x,{mr:1,children:[(0,a.jsx)(h.cC,{id:"FEyEJk",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc,GAMMA_PROPER_NOUN:Y.N6},components:{0:(0,a.jsx)("strong",{})}})," ","\uD83D\uDE0D"]}),(0,a.jsx)(nW(),{href:"/signup",passHref:!0,legacyBehavior:!0,children:(0,a.jsx)(ej.z,{as:i4.r,onClick:n,variant:"solid",textDecoration:"none !important",children:(0,a.jsx)(h.cC,{id:"e+RpCP"})})})]})})},i9=e=>{let t=!(0,ey.s2)(),{user:n}=(0,eX.SE)(),i=(0,ir.p)(),r=(0,f.useRef)(),s=(0,i6.e)(),o=(0,f.useCallback)(()=>{e&&(null===eM.co||void 0===eM.co||eM.co.track(eM.AA.EXAMPLE_SIGNUP_CLICKED,{doc_id:e.id,title:e.title}))},[e]),l=(0,f.useCallback)(()=>{s({docId:null==e?void 0:e.id,docTitle:null==e?void 0:e.title,source:"example_deck_clone_toast"})},[e,s]);(0,f.useEffect)(()=>()=>{r.current&&i.close(r.current)},[i]);let a=t&&e,c=!!n;(0,tj.vm)(()=>{r.current&&i.close(r.current),a&&(r.current=i({position:"bottom",render:()=>i8({onCloneClick:l,isLoggedIn:c,onSignupClick:o}),isClosable:!0,duration:null}))},[e,t,l,o,a,n,i,c],[a,c])};var i7=n(73281),re=n(27320),rt=n(24391);let rn="sessionId1",ri=eF.hj.create({addStorage:()=>({user:{}}),addCommands(){return{user:e=>()=>{let t=(0,U.bh)();return this.storage.user=i3()({},this.storage.user,e),t.dispatch((0,F.MU)({sessionId:rn})),t.dispatch((0,F.Tx)({collaborators:[this.storage.user]})),!0}}}}),rr=e=>{var t;let{docId:n,snapshotId:i,scrollingParentSelector:r,onCreate:s}=e,o=(0,U.CG)(tF.yx);i9(o);let[l]=(0,f.useState)(()=>[tD.F,re.$1.configure({scrollerSelector:r}),ri,i7._g]),{user:u,anonymousUser:h,isUserLoading:x,color:p}=(0,eX.SE)(),[m,g]=(0,f.useState)(),{data:j,loading:v,error:C}=(0,tW.EDv)({variables:{docId:n,snapshotId:i},skip:!i});(0,f.useEffect)(()=>{!x&&m&&m.commands.user({id:(null==u?void 0:u.id)||h.id,color:p.value,sessionId:rn,idleSince:null,name:(null==u?void 0:u.displayName)||h.displayName||"",profileImageUrl:(null==u?void 0:u.profileImageUrl)||"",isReady:!x})},[m,u,p,x,h]);let b=j&&void 0!==j.snapshot&&!v&&o;return(0,a.jsxs)(d.xu,{"data-testid":"example-static-editor-wrapper",flex:"1",height:"100%",children:[!b||C?(0,a.jsxs)(c.k,{direction:"column",height:"100%",flex:"1",bg:"gray.100",alignItems:"center",justifyContent:"center",children:[!b&&(0,a.jsx)(tA.$,{}),C&&(0,a.jsxs)(tE.M,{h:"100%",children:["There was an error loading this ",Y.Yc,":"," ",C.message]})]}):(0,a.jsx)(d.xu,{"data-testid":"example-static-editor-wrapper-inner",transitionProperty:"common",transitionDuration:"750ms",transitionTimingFunction:"ease-out",opacity:b?1:0,children:(0,a.jsx)(eP.yE,{doc:o,editorId:"main",docId:n,extensions:l,onCreate:e=>{let{editor:t}=e;g(t),setTimeout(()=>{s&&s(t)},10)},readOnly:!0,initialContent:null===(t=j.snapshot)||void 0===t?void 0:t.content.default,scrollingParentSelector:r})}),(0,a.jsx)(rt.m,{forceShow:!0,abuseReportingEnabled:!1})]})};var rs=n(71485),ro=n(332),rl=n(86290);let ra=e=>{var t;let{site:n}=e,i=null==n?void 0:null===(t=n.currentDeployment)||void 0===t?void 0:t.deploymentTime,r=(0,f.useMemo)(()=>({fromNow:(0,rl.Km)(i),calendar:(0,rl.p6)(i,"PPpp")}),[i]);return(0,a.jsx)(h.cC,{id:"ay/UB+",values:{0:r.fromNow},components:{0:(0,a.jsx)(eC.kH,{label:r.calendar,placement:"top",shouldWrapChildren:!0}),1:(0,a.jsx)(e3.x,{as:"span",cursor:"pointer",style:{textDecoration:"underline"}})}})},rc=e=>{let t=(0,U.CG)(e_.lH),n=(0,eD.k2)(t),i=!(0,eD.Vr)(t),r=(0,U.CG)(e_.RM),s=(0,U.CG)(e_.rc),{icon:o,text:l,color:c}=(0,f.useCallback)(()=>e?{icon:(0,a.jsx)(O.G,{icon:T.LM3,height:13,width:13}),text:(0,a.jsx)(h.cC,{id:"mkk40+"}),color:"gray.500"}:i?{icon:(0,a.jsx)(O.G,{icon:T.byT,height:13,width:13}),text:(0,a.jsx)(h.cC,{id:"r5OY1d"}),color:"gray.500"}:n?r>0||s?{icon:(0,a.jsx)(O.G,{icon:T.Pvm,height:13,width:13}),text:(0,a.jsx)(h.cC,{id:"eVV2pl"}),color:"orange.500"}:{icon:(0,a.jsx)(O.G,{icon:T.kd8,height:13,width:13}),text:(0,a.jsx)(h.cC,{id:"Rgbxkx"}),color:"green.500"}:{icon:(0,a.jsx)(O.G,{icon:T.g4A,height:13,width:13}),text:(0,a.jsx)(h.cC,{id:"tpB6bH"}),color:"gray.700"},[e,i,n,r,s])(),d=e?null:i?(0,a.jsx)(h.cC,{id:"u8Rqhk"}):!1===n?(0,a.jsx)(h.cC,{id:"Ys0XoA"}):r>0||s?(0,a.jsx)(h.cC,{id:"Ys0XoA"}):null,u=!1===i&&!e;return{statusText:l,statusIcon:o,statusColor:c,detailText:d,needsPublish:!n||s||r>0,lastPublishedTime:t?(0,a.jsx)(ra,{site:t}):null,publishEnabled:u}},rd=e=>{let{context:t,openSiteSettings:n}=e,i=(0,U.CG)(e_.lH),r=(0,rs.O1)(),{publishSite:s,isPublishing:o}=iS({site:i}),{statusText:l,detailText:c,needsPublish:d,publishEnabled:u}=rc(o),x=(0,ef.ff)(!1,!0);return("pages"!==t||d||o)&&r&&i&&(0,eD.Vr)(i)?(0,a.jsx)(il.W,{px:0,children:(0,a.jsxs)(tI.K,{w:"100%",bg:x?"gray.800":"gray.50",borderRadius:"md",p:4,align:"pages"===t?"stretch":"center",direction:"pages"===t?"column":"row",spacing:"pages"===t?3:1,children:[(0,a.jsxs)(e5.g,{spacing:0,color:x?"gray.200":void 0,textAlign:"pages"===t?"center":"left",align:"pages"===t?"center":"start",children:[(0,a.jsx)(e3.x,{fontWeight:"500",fontSize:"sm",children:l}),c&&(0,a.jsx)(e3.x,{fontSize:"xs",textColor:"gray.500",css:{textWrap:"balance"},children:c})]}),"pages"!==t&&(0,a.jsx)(e4.L,{}),(0,a.jsx)(ej.z,{flexShrink:"0",size:"sm",variant:"solid",leftIcon:(0,a.jsx)(O.G,{icon:T.A$k}),isDisabled:!u,onClick:s,isLoading:o,children:(0,a.jsx)(h.cC,{id:"1EeNDU"})}),"pages"===t&&(0,a.jsx)(ej.z,{textAlign:"left",color:x?"trueblue.200":"trueblue.600",variant:"link",size:"sm",onClick:n,flex:1,children:(0,a.jsx)(h.cC,{id:"WtsmDd"})})]})}):null};var ru=n(27599),rh=n(25481),rx=n(80934),rp=n(69024),rm=n(29705),rf=n(92850),rg=n(22226),rj=n(54326);let rv=e=>{var t;let{onClose:n,isOpen:i,site:r}=e,{replace:s}=(0,eb.useRouter)(),o=(0,ir.p)(),[l,{data:d,loading:u}]=(0,tW.jUI)(),x=null==d?void 0:null===(t=d.archiveSite)||void 0===t?void 0:t.archived,p=(0,f.useCallback)(async()=>{if(null==r?void 0:r.id)try{await l({variables:{id:null==r?void 0:r.id}}),n()}catch(e){console.error("[DeleteGammaModal] Failed to archive site",e.message),o({title:(0,a.jsx)(h.cC,{id:"aBvGpM"}),description:(0,a.jsx)(h.cC,{id:"DVB9Jq"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}},[l,null==r?void 0:r.id,o]);return((0,f.useEffect)(()=>{x&&(n(),s("/#sites"),o({title:(0,a.jsx)(h.cC,{id:"oGP1Fe"}),description:(0,a.jsx)(h.cC,{id:"sqh0jP"}),status:"success",duration:5e3,isClosable:!0,position:"top"}))},[x,n,s,o,r]),u||x)?(0,a.jsx)(ro.h,{children:(0,a.jsx)(c.k,{w:"100%",h:"100%",zIndex:"overlay",position:"absolute",top:"0",left:"0",background:"whiteAlpha.800",flex:1,children:(0,a.jsx)(t0.AA,{})})}):(0,a.jsxs)(rf.u_,{onClose:n,isOpen:i,size:"lg",children:[(0,a.jsx)(tK.Z,{}),(0,a.jsxs)(rg.h,{children:[(0,a.jsx)(rj.x,{children:(0,a.jsx)(h.cC,{id:"cw2uO1",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})}),(0,a.jsx)(tZ.o,{isDisabled:u}),(0,a.jsx)(tJ.f,{children:(0,a.jsxs)(tI.K,{spacing:4,children:[(0,a.jsx)(e3.x,{children:(0,a.jsx)(h.cC,{id:"87gjhX",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})}),(0,a.jsx)(e3.x,{children:(0,a.jsx)(h.cC,{id:"tOGRxi",values:{0:(null==r?void 0:r.name)?'"'.concat(null==r?void 0:r.name,'"'):""}})}),(0,a.jsx)(e3.x,{children:(0,a.jsx)(h.cC,{id:"MluQ97",values:{GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:Y.aq},components:{0:(0,a.jsx)(i4.r,{color:"trueblue.500",colorScheme:"trueblue",href:"/#trash",textDecoration:"underline",isExternal:!0}),1:(0,a.jsx)(rm.h,{mx:"2px"})}})})]})}),(0,a.jsx)(tX.m,{children:(0,a.jsxs)(ev.h,{children:[(0,a.jsx)(ej.z,{variant:"ghost",onClick:n,children:(0,a.jsx)(h.cC,{id:"dEgA5A"})}),(0,a.jsx)(ej.z,{variant:"ghost",color:"red.600",onClick:p,isLoading:u,children:(0,a.jsx)(h.cC,{id:"cnGeoo"})})]})})]})]})},rC=e=>{let{site:t}=e,{isOpen:n,onOpen:i,onClose:r}=(0,w.q)({id:"trash-site-modal"}),[s]=(0,tW.sJX)(),o=(0,rs.O1)(),l=null==t?void 0:t.archived,c=(0,f.useCallback)(()=>{(null==t?void 0:t.id)&&s({variables:{id:t.id},optimisticResponse:{unarchiveSite:{id:t.id,__typename:"Site"}}})},[null==t?void 0:t.id,s]);return o&&t?l?(0,a.jsx)(rh.s,{icon:(0,a.jsx)(O.G,{fixedWidth:!0,icon:e6.XnX}),onClick:c,children:(0,a.jsx)(h.cC,{id:"yKu/3Y"})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rh.s,{color:"red.500",icon:(0,a.jsx)(O.G,{fixedWidth:!0,icon:T.XAH}),onClick:()=>{i()},children:(0,a.jsx)(h.cC,{id:"NOLglc",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})}),n&&(0,a.jsx)(rv,{isOpen:n,onClose:r,site:t})]}):(0,a.jsx)(a.Fragment,{})},rb=()=>({[eK.q.DOC_VIEW]:{buttonLabel:(0,a.jsx)(h.cC,{id:"eZb+lw"}),shortcutIcon:e6.zc,shortcutKeys:(0,eC.cE)("Mod+Enter"),shortcutLabel:(0,a.jsx)(h.cC,{id:"tbDuNX"})},[eK.q.SLIDE_VIEW]:{buttonLabel:(0,a.jsx)(h.cC,{id:"ydzS9x"}),shortcutIcon:e6.Bg$,shortcutKeys:"Esc",shortcutLabel:(0,a.jsx)(h.cC,{id:"5Rfo7J"})}});var ry=n(65610),rk=n(62861),rw=n(1384),rS=n(42616),rE=n(20706),rI=n(48105);let rA=(0,nM.ZP)("mod+Enter"),r_=(0,nM.ZP)("Esc"),rT=(0,nM.ZP)("mod+Esc"),rO=(0,nM.ZP)("shift+mod+Enter"),rD=e=>function(t){t((0,F.Qx)({attached:!1})),t((0,F.PM)({mode:e}))},rR=(e,t)=>{let n=document.querySelector(t);if(!n)return;let i=n.getBoundingClientRect();e.commands.scrollToNodeWithPin(document.elementFromPoint(i.width/2,100),100)},rP=e=>{let{editorWrapperEl:t,scrollingParentSelector:n}=e,i=(0,U.TL)(),[r,s]=(0,f.useState)(!1),[o,l]=(0,f.useState)(!1),{editor:a}=(0,tS._i)(),c=(0,U.CG)(F.gh),d=(0,f.useRef)(c);(0,f.useEffect)(()=>{d.current=c},[c]);let u=(0,U.CG)(F.yq),h=(0,U.CG)(F.JA),x=(0,U.CG)(rk.C),p=(0,eM.z$)(),m=(0,f.useCallback)(e=>{a&&!a.isDestroyed&&(e===eK.q.SLIDE_VIEW?((0,rS.E0)(a.state.doc,i),(0,rE.U6)(a,!1),a.commands.spotlightCurrentCard()):(a.commands.turnOffSpotlight(!0),rR(a,n)),i(rD(e)))},[i,a,n]),g=(0,f.useCallback)(()=>{try{var e,t,n,i;if(null===(e=document.body)||void 0===e?void 0:e.requestFullscreen){null===(n=document.body)||void 0===n||n.requestFullscreen();return}(null===(t=document.body)||void 0===t?void 0:t.webkitRequestFullscreen)&&(null===(i=document.body)||void 0===i||i.webkitRequestFullscreen())}catch(e){console.debug("[PresentBlock] Error entering fullscreen:",e)}},[]),j=(0,f.useCallback)(()=>{try{if(document.fullscreenElement){document.exitFullscreen();return}document.webkitCurrentFullScreenElement&&document.webkitExitFullscreen&&document.webkitExitFullscreen()}catch(e){console.debug("[PresentBlock] Error exiting fullscreen:",e)}},[]),v=(0,e0.ye)("realUserMetrics"),{recordExitSlideModePerformance:C,recordEnterSlideModePerformance:b}=(0,rw.wK)(v),y=(0,f.useCallback)(e=>{let{fullscreen:t=!1}=e;d.current!==eK.q.SLIDE_VIEW&&(m(eK.q.SLIDE_VIEW),t&&g(),null==p||p.trackDocEvent(eM.AA.PRESENT_MODE_ENTERED),b({isFullscreen:t}),setTimeout(()=>{document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement.blur()}))},[m,b,g,d,p]),k=(0,f.useCallback)(()=>{d.current!==eK.q.DOC_VIEW&&(m(eK.q.DOC_VIEW),r&&j(),null==p||p.trackDocEvent(eM.AA.PRESENT_MODE_EXITED),C({isFullscreen:r}))},[m,r,j,C,d,p]);return(0,f.useEffect)(()=>{let e=()=>{null!==document.fullscreenElement||o||k(),null!==document.webkitCurrentFullScreenElement||o||k(),s(e=>!e),l(!1)};return document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e)}},[o,k,j]),(0,ry.r)(()=>{a&&!a.isDestroyed&&c===eK.q.DOC_VIEW&&requestAnimationFrame(()=>{let e=a.state.selection;e instanceof rI.c&&a.commands.command(t=>{let{tr:n}=t;return n.setSelection(e.createSelectionNear()),!0})})},[a,c]),(0,f.useEffect)(()=>es.F7.on("keydown","PRESENT_BLOCK",e=>{var t,n,i;let r=d.current===eK.q.SLIDE_VIEW;if(!x){if(rA(e)){if(null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.closest("[data-gamma-child-tiptap-editor]"))return;return e.preventDefault(),y({fullscreen:!1}),!0}if(rO(e)){if(null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.closest("[data-gamma-child-tiptap-editor]"))return;return e.preventDefault(),y({fullscreen:!0}),!0}if(rT(e)&&r)return k(),!0;if(r_(e)&&r&&!u&&!h){if(null==e?void 0:null===(i=e.target)||void 0===i?void 0:i.closest("[data-gamma-child-tiptap-editor]"))return;return k(),!0}}}),[y,k,g,u,h,t,x]),{enterSlideView:y,exitSlideView:k,enterFullscreen:g,exitFullscreen:j,exitedFullscreenByClick:o,isFullscreen:r,setIsFullscreen:s,setExitedFullscreenByClick:l}},rL=e=>{let{editorWrapperEl:t,scrollingParentSelector:n}=e,i=(0,U.CG)(F.gh),r=(0,e0.ye)("presentFullScreen"),{shortcutIcon:s,shortcutKeys:o,buttonLabel:l}=rb()[i],{enterSlideView:c,exitSlideView:d}=rP({editorWrapperEl:t,scrollingParentSelector:n});return(0,a.jsx)(rh.s,{icon:(0,a.jsx)(O.G,{icon:s,fixedWidth:!0}),command:o,onClick:()=>{i===eK.q.SLIDE_VIEW?d():c({fullscreen:r})},children:l})};var rz=n(74008),rG=n(78695),rN=n(67109),rM=n(30191),rU=n(34308);let rF="gray.700";var rW=n(52929);let rH=e=>{let{error:t,refetch:n,...i}=e;return(0,a.jsx)(d.xu,{px:6,py:4,...i,children:(0,a.jsxs)(nV.b,{p:6,status:"error",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",children:[(0,a.jsx)(rW.z,{mr:0,boxSize:"30px",alignSelf:"center"}),(0,a.jsx)(nK.C,{mt:4,mb:2,fontSize:"md",children:(0,a.jsx)(h.cC,{id:"uNQm3r"})}),(0,a.jsx)(nY.X,{maxWidth:"md",children:t.message}),(0,a.jsx)(ej.z,{mt:4,onClick:()=>n(),children:(0,a.jsx)(h.cC,{id:"6gRgw8"})})]})})};var rq=n(89099);let rB=()=>x.ag._({id:"QbrUIo"}),rV=()=>x.ag._({id:"FbBkvL"}),rK=e=>{let{isAnalyticsLoading:t,hasError:n,view:i,setView:r,description:s}=e;return n?(0,a.jsx)(rj.x,{children:(0,a.jsx)(h.cC,{id:"ZlwDi6"})}):(0,a.jsxs)(c.k,{direction:"column",flex:1,children:[(0,a.jsx)(rj.x,{children:t?(0,a.jsx)(rY,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.cC,{id:"ZlwDi6"}),(0,a.jsxs)(e5.g,{align:"stretch",spacing:4,children:[(0,a.jsx)(e3.x,{color:"gray.500",fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",children:s}),(0,a.jsxs)(rq.E,{children:[(0,a.jsx)(rq.U,{children:(0,a.jsx)(ej.z,{leftIcon:(0,a.jsx)(O.G,{icon:e6.Ma4,"aria-label":rB()}),variant:"ghost",fontWeight:"600",bg:"deckView"===i?"trueblue.50":"transparent",color:"deckView"===i?"trueblue.500":rF,onClick:()=>r("deckView"),children:rB()})}),(0,a.jsx)(rq.U,{children:(0,a.jsx)(ej.z,{leftIcon:(0,a.jsx)(O.G,{icon:e6.AGo,"aria-label":rV()}),variant:"ghost",fontWeight:"600",bg:"cardEngagement"===i?"trueblue.50":"transparent",color:"cardEngagement"===i?"trueblue.500":rF,onClick:()=>r("cardEngagement"),children:rV()})})]})]})]})}),(0,a.jsx)(tZ.o,{})]})},rY=()=>(0,a.jsxs)(e5.g,{align:"stretch",spacing:4,children:[(0,a.jsx)(rN.O,{h:12,width:"30%"}),(0,a.jsx)(rN.O,{h:4,width:"80%"})]});var rZ=n(98621),rJ=n.n(rZ),rX=n(71600);let rQ=e=>{let{degree:t,alpha:n=1,startColor:i="#ECC94B",endColor:r="#38A169"}=e;if(Number.isNaN(t))return rJ()("#e5e0df").toHex8String();let s=rJ()(i).toHsl(),o=rJ()(r).toHsl();return rJ()({h:(0,rX.t7)(s.h,o.h,t),s:(0,rX.t7)(s.s,o.s,t),l:(0,rX.t7)(s.l,o.l,t),a:n}).toHex8String()},r$=(e,t)=>e.reduce((e,n)=>(e[n.cardId]=n[t],e),{}),r0=(e,t)=>{let n=0;for(let r in e){var i;n+=(null!==(i=t[r])&&void 0!==i?i:0)+r0(e[r],t)}return n},r1=(e,t)=>{let n=0;for(let r in e){var i;n=Math.max((null!==(i=t[r])&&void 0!==i?i:0)+r0(e[r],t),n)}return n};var r2=n(25195),r5=n(62349),r3=n.n(r5);let r4=e=>{let{cardsViewed:t,totalCards:n}=e,i=rQ({degree:t/n}),r=n>0;return(0,a.jsxs)(eg.U,{spacing:3,children:[(0,a.jsxs)(c.k,{flex:1,position:"relative",children:[(0,a.jsx)(r2.E,{h:4,flex:1,borderRadius:"sm",value:t,max:r?n:void 0,bg:"gray.200",sx:{"> div":{bg:i}}}),r&&t===n&&(0,a.jsx)(r8,{top:0,right:0,transform:"translate(50%,-50%)",position:"absolute"})]}),(0,a.jsx)(e3.x,{w:{base:10,lg:12},fontSize:"sm",whiteSpace:"nowrap",textAlign:"left",children:r?"".concat(t,"/").concat(n):(0,a.jsx)(h.cC,{id:"8Va3Pt"})})]})},r6=e=>{let{cardCount:t}=e,n=(0,f.useMemo)(()=>r3()(1,t),[t]);return(0,a.jsxs)(eg.U,{spacing:3,filter:"blur(3px)",children:[(0,a.jsx)(c.k,{flex:1,position:"relative",children:(0,a.jsx)(r2.E,{h:4,flex:1,borderRadius:"sm",value:n,max:t,bg:"gray.300",sx:{"> div":{bg:"gray.300"}}})}),(0,a.jsxs)(e3.x,{w:{base:10,lg:12},fontSize:"sm",whiteSpace:"nowrap",textAlign:"left",color:"gray.600",children:[n,"/",t]})]})},r8=e=>{let{...t}=e;return(0,a.jsx)(d.Cd,{bg:"green.500",size:"18px",border:"2px solid white",color:"white",...t,children:(0,a.jsx)(O.G,{icon:e6.LEp,"aria-label":x.ag._({id:"y886Ns"}),size:"xs"})})},r9=e=>t=>(0,rX.t7)(0,100,t/e),r7=e=>{let{cards:t,isColorized:n=!1,scaleToMax:i=!1,includeChildren:r,showViewersPercent:s=!1,leftLabel:o,rightLabel:l,tooltipLabel:c,cardLookupTable:u,onAnalyticsPanelClose:h}=e,x=r9(r?r1(t,u):Math.max(...Object.values(u))),p=(0,f.useCallback)(e=>x(e),[x]);return(0,a.jsxs)(d.xu,{mt:6,mb:4,children:[(0,a.jsxs)(eg.U,{mb:3,children:[(0,a.jsx)(eg.U,{children:(0,a.jsx)(eC.NZ,{children:o})}),(0,a.jsx)(e4.L,{}),(0,a.jsx)(eg.U,{children:(0,a.jsx)(eC.kH,{placement:"top",label:c,children:(0,a.jsx)(eg.U,{children:(0,a.jsx)(eC.NZ,{borderBottom:"0.125em dashed",borderBottomColor:"gray.400",children:l})})})})]}),(0,a.jsx)(d.xu,{width:"100%",children:Object.entries(t).map(e=>{var t;let[o,l]=e;return(0,a.jsx)(se,{id:o,childCards:l,percentage:null!==(t=u[o])&&void 0!==t?t:0,calculatePercentageScale:p,isColorized:n,cardLookupTable:u,scaleToMax:i,includeChildren:r,showViewersPercent:s,onAnalyticsPanelClose:h},o)})})]})},se=e=>{let{id:t,cardLookupTable:n,childCards:i,percentage:r,calculatePercentageScale:s,isColorized:o,scaleToMax:l,includeChildren:u,showViewersPercent:x,onAnalyticsPanelClose:p}=e,[m,g]=(0,f.useState)(!1),j=(0,f.useCallback)(()=>{g(!m)},[m]),{title:v}=(0,ti.T)({cardId:t}),C=Object.values(i).length>0,b=0===r,y=u?r+r0(i,n):r,k=m?y:0,w=l?s(y):Math.min(100,k),S=m?r:y,E=l?s(S):Math.min(100,S),A={startColor:"#F6AD55",endColor:"#68D391"},_=o?rQ({degree:w/100,...A}):"trueblue.50",D=o?rQ({degree:E/100,...A}):"trueblue.100";return(0,a.jsxs)(tI.K,{children:[(0,a.jsx)(c.k,{direction:"column",children:(0,a.jsxs)(c.k,{h:8,px:2,bg:"gray.100",borderRadius:"md",position:"relative",overflow:"hidden",alignItems:"center",_focusWithin:{shadow:"outline"},children:[(0,a.jsxs)(eg.U,{pos:"absolute",zIndex:1,children:[C&&(0,a.jsx)(I.h,{"aria-label":"expand-card",size:"xs",variant:"ghost",isRound:!0,colorScheme:"blackAlpha",icon:(0,a.jsx)(O.G,{icon:T._tD}),transform:m?"rotate(90deg)":"",onClick:j,_focus:{shadow:"none"}}),!C&&(0,a.jsx)(c.k,{w:6,justifyContent:"center",alignItems:"center",children:b?(0,a.jsx)(eC.kH,{label:(0,a.jsx)(h.cC,{id:"s+PDNe"}),children:(0,a.jsx)(d.xu,{color:"blackAlpha.500",children:(0,a.jsx)(O.G,{icon:e6.Aq,size:"sm"})})}):(0,a.jsx)(d.xu,{color:"blackAlpha.300",fontSize:"xx-small",children:(0,a.jsx)(O.G,{icon:e6.nZ9,size:"sm"})})}),(0,a.jsx)(e3.x,{color:b?"blackAlpha.500":void 0,noOfLines:1,children:v||(0,a.jsx)(h.cC,{id:"wja8aL"})})]}),(0,a.jsxs)(d.xu,{position:"absolute",w:"100%",height:"100%",top:0,left:0,pointerEvents:"none",children:[(0,a.jsx)(d.xu,{position:"absolute",h:"100%",bg:b?"blackAlpha.200":_,w:"".concat(w,"%")}),(0,a.jsx)(d.xu,{transitionProperty:"all",transitionDuration:"normal",position:"absolute",h:"100%",bg:b?"blackAlpha.300":D,w:"".concat(E,"%")})]}),o&&100===r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e4.L,{}),(0,a.jsx)(r8,{alignSelf:"center",zIndex:1})]})]})}),(0,a.jsx)(d.xu,{pl:8,children:C&&Object.entries(i).map(e=>{var t;let[i,r]=e;return(0,a.jsx)(io.U,{in:m,children:(0,a.jsx)(se,{id:i,childCards:r,percentage:null!==(t=n[i])&&void 0!==t?t:0,cardLookupTable:n,calculatePercentageScale:s,scaleToMax:l,isColorized:o,includeChildren:u,showViewersPercent:x,onAnalyticsPanelClose:p})},i)})})]})},st=()=>(0,a.jsx)(tI.K,{spacing:2,children:(0,a.jsx)(h.cC,{id:"QXJTby",components:{0:(0,a.jsx)(e3.x,{}),1:(0,a.jsx)(e3.x,{}),2:(0,a.jsx)(e3.x,{})}})}),sn=e=>{let{timeInMS:t}=e;return void 0===t?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(h.cC,{id:"yXHI9B",values:{timeInSeconds:t/1e3}})},si=(e,t)=>"viewTimePercent"===e?{chartDescription:(0,a.jsx)(h.cC,{id:"dpTE1c",values:{viewerCount:t}}),leftLabel:(0,a.jsx)(h.cC,{id:"ml51m3"}),rightLabel:(0,a.jsx)(h.cC,{id:"8R7bfR"})}:{chartDescription:(0,a.jsx)(h.cC,{id:"b2VMTo",values:{viewerCount:t}}),leftLabel:(0,a.jsx)(h.cC,{id:"kTgCTO"}),rightLabel:(0,a.jsx)(h.cC,{id:"AKDcmS"})},sr=e=>{let{docId:t,viewerFilter:n,currentViewerFilterCount:i,onAnalyticsPanelClose:r}=e,s=(0,U.qr)().getState(),o=(0,F.X9)(s),{data:l,error:c,loading:u,refetch:x}=(0,tW.IrH)({variables:{docId:t}}),[p,m]=(0,f.useState)("viewTimePercent"),{chartDescription:g,rightLabel:j,leftLabel:v}=si(p,i),C="viewersOnly"===n?"viewers":"everyone",b=(0,e0.ye)("cardViewedThreshold"),y=(0,f.useMemo)(()=>{var e;return(null==l?void 0:null===(e=l.docCardsStats)||void 0===e?void 0:e[C])||[]},[null==l?void 0:l.docCardsStats,C]),k=(0,f.useMemo)(()=>r$(y,p),[y,p]),w=(0,f.useCallback)(()=>m("viewTimePercent"),[]),S=(0,f.useCallback)(()=>m("viewersPercent"),[]);return(0,a.jsxs)(d.xu,{children:[(0,a.jsxs)(eg.U,{my:4,children:[(0,a.jsx)(ej.z,{leftIcon:(0,a.jsx)(O.G,{icon:T.SZw,"aria-label":"Time spend"}),variant:"ghost",fontWeight:"600",bg:"viewTimePercent"===p?"trueblue.50":"transparent",color:"viewTimePercent"===p?"trueblue.500":rF,onClick:w,children:(0,a.jsx)(h.cC,{id:"XyvAeS"})}),(0,a.jsx)(ej.z,{leftIcon:(0,a.jsx)(O.G,{icon:e6.jGC,"aria-label":"Percent viewed"}),variant:"ghost",fontWeight:"600",bg:"viewersPercent"===p?"trueblue.50":"transparent",color:"viewersPercent"===p?"trueblue.500":rF,onClick:S,children:(0,a.jsx)(h.cC,{id:"vXtpAZ"})})]}),(0,a.jsx)(so,{description:g}),c&&(0,a.jsx)(rH,{error:c,refetch:x}),u&&!c&&(0,a.jsx)(ss,{}),!u&&!c&&(0,a.jsx)(r7,{cards:o.tree,cardLookupTable:k,scaleToMax:"viewTimePercent"===p,isColorized:"viewersPercent"===p,includeChildren:"viewTimePercent"===p,showViewersPercent:"viewersPercent"===p,rightLabel:j,leftLabel:v,tooltipLabel:"viewTimePercent"===p?(0,a.jsx)(st,{}):(0,a.jsx)(sn,{timeInMS:b}),onAnalyticsPanelClose:r})]})},ss=e=>{let{includeDescription:t=!1}=e;return(0,a.jsx)(c.k,{direction:"column",mt:6,mb:4,children:(0,a.jsxs)(e5.g,{align:"stretch",children:[t&&(0,a.jsx)(rN.O,{h:5,mb:3,w:"70%"}),[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)(rN.O,{h:8},t))]})})},so=e=>{let{description:t}=e;return(0,a.jsx)(e3.x,{color:rF,children:t})};var sl=n(89364),sa=n(78534),sc=n(80774),sd=n(5832),su=n(64565),sh=n(70189),sx=n(66983),sp=n(79443),sm=n(109),sf=n(16556),sg=n(829),sj=n.n(sg);let sv=e=>{let{uniqueViewers:t,docCreatedDate:n}=e,i=(0,e0.ye)("cardViewedThreshold");return(0,a.jsx)(sa.h,{children:(0,a.jsxs)(sc.Tr,{children:[(0,a.jsx)(sC,{label:(0,a.jsx)(h.cC,{id:"LZHJAq",values:{uniqueViewers:t}}),tooltip:(0,a.jsx)(h.cC,{id:"aaiIlJ",values:{docCreatedDate:n}}),width:"40%"}),(0,a.jsx)(sC,{label:(0,a.jsx)(h.cC,{id:"pRGfP3"}),width:"35%"}),(0,a.jsx)(sC,{label:(0,a.jsx)(h.cC,{id:"QfqHuz"}),tooltip:(0,a.jsx)(sn,{timeInMS:i}),width:"25%"})]})})},sC=e=>{let{label:t,width:n,tooltip:i}=e,r=(0,a.jsx)(sd.Th,{w:n,children:(0,a.jsx)(e3.x,{display:"inline",borderBottom:i?"0.125em dashed":void 0,borderBottomColor:i?"gray.400":void 0,children:t})});return i?(0,a.jsx)(eC.kH,{placement:"top",label:i,children:r}):r},sb=["Yesterday at 11:02 am","Today at 12:55 pm","Dec 12, 2020, 10:19 pm","Apr 14, 2023, 4:30 pm","Jan 1, 2021, 12:03 am","Dec 7, 1984, 12:03 am","May 14, 2002, 3:56 pm"],sy=e=>{let{viewers:t,currentViewerFilterCount:n,docCreatedDate:i,creatorId:r,contributors:s,cardCount:o,handleTableRowClick:l,hasIndividualAnalytics:c}=e,{user:d}=(0,eX.SE)(),u=c?t:sj()(t,e=>{var t;return[(null===(t=e.user)||void 0===t?void 0:t.id)===(null==d?void 0:d.id)?0:1,-e.lastOpened]}).slice(0,3);return(0,a.jsx)(su.x,{children:(0,a.jsxs)(sh.i,{colorScheme:"blackAlpha",children:[(0,a.jsx)(sv,{uniqueViewers:n,docCreatedDate:i}),(0,a.jsx)(sx.p,{children:u.map((e,n)=>{let{user:i,lastOpened:u,visitorId:h}=e,p=(null==i?void 0:i.id)===r,m=s.some(e=>e.user.id===(null==i?void 0:i.id)),f=i?i.displayName+(i.id===(null==d?void 0:d.id)?" "+x.ag._({id:"dDUgzP"}):"")||"":x.ag._({id:"VmjbJY"}),g=u?nA()((0,nC.P9)(u)):x.ag._({id:"/JO3xr"}),j={name:f,id:(null==i?void 0:i.id)||h||"",email:null==i?void 0:i.email,isCreator:p,isContributor:m,profileImg:null==i?void 0:i.profileImageUrl,lastOpened:g},v=n===t.length-1,C=(null==i?void 0:i.id)===(null==d?void 0:d.id),b=!c&&!C;return(0,a.jsxs)(sc.Tr,{cursor:"pointer",onClick:()=>l(j),_hover:{bg:"blackAlpha.50"},borderBottom:"none",children:[(0,a.jsx)(sp.Td,{borderBottom:v?"0 none":void 0,children:(0,a.jsx)(sk,{name:f,email:null==i?void 0:i.email,profileImg:null==i?void 0:i.profileImageUrl,isContributor:m,isCreator:p,isAnonymous:!i})}),(0,a.jsx)(sp.Td,{borderBottom:v?"0 none":void 0,children:b?(0,a.jsx)(e3.x,{fontSize:"sm",filter:"blur(3px)",color:"gray.600",children:sb[n%sb.length]}):(0,a.jsx)(e3.x,{fontSize:"sm",children:g})}),(0,a.jsx)(sp.Td,{borderBottom:v?"0 none":void 0,children:b?(0,a.jsx)(r6,{cardCount:o}):(0,a.jsx)(r4,{cardsViewed:e.cardsViewed||0,totalCards:o||0})})]},(null==i?void 0:i.id)||h)})})]})})},sk=e=>{let{name:t,profileImg:n,email:i="",isCreator:r=!1,isContributor:s=!1,isAnonymous:o=!1,...l}=e;return(0,a.jsxs)(eg.U,{...l,children:[(0,a.jsx)(sm.q,{size:"sm",name:t,src:n}),(0,a.jsxs)(tI.K,{spacing:.5,children:[(0,a.jsxs)(e3.x,{children:[t,o&&(0,a.jsx)(eC.Yq,{label:(0,a.jsx)(h.cC,{id:"VHgG8W",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}}),ml:2})]}),(0,a.jsxs)(eg.U,{mt:1,children:[(0,a.jsx)(e3.x,{fontSize:"sm",color:"gray.500",children:i}),(r||s)&&(0,a.jsx)(sf.Vp,{size:"sm",transform:"translate(0, 1.5px)",children:r?(0,a.jsx)(h.cC,{id:"UE2beD"}):(0,a.jsx)(h.cC,{id:"3L51iw"})})]})]})]})},sw=e=>{var t,n,i,r;let{user:s,onBackClick:o,docId:l,onAnalyticsPanelClose:c}=e,u=(0,U.qr)().getState(),x=(0,F.X9)(u),{data:p,error:m,loading:g,refetch:j}=(0,tW.IrH)({variables:{docId:l,userId:s.id},skip:!l||!s.id,pollInterval:9e5,notifyOnNetworkStatusChange:!0}),v=null!==(r=null==p?void 0:null===(n=p.docCardsStats)||void 0===n?void 0:null===(t=n.everyone)||void 0===t?void 0:t.length)&&void 0!==r?r:0,C=null==p?void 0:null===(i=p.docCardsStats)||void 0===i?void 0:i.cardCount,b=(0,f.useMemo)(()=>{var e;return(null==p?void 0:null===(e=p.docCardsStats)||void 0===e?void 0:e.everyone)||[]},[null==p?void 0:p.docCardsStats]),y=(0,f.useMemo)(()=>r$(b,"viewTimePercent"),[b]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rj.x,{children:(0,a.jsx)(ej.z,{"aria-label":"Back",leftIcon:(0,a.jsx)(sl.R,{}),variant:"ghost",onClick:o,children:(0,a.jsx)(h.cC,{id:"iH8pgl"})})}),(0,a.jsx)(tZ.o,{}),(0,a.jsx)(rz.i,{}),(0,a.jsx)(tJ.f,{children:(0,a.jsxs)(d.xu,{children:[(0,a.jsx)(sS,{user:s,showLastOpened:!0}),C&&(0,a.jsx)(so,{description:(0,a.jsx)(h.cC,{id:"YJOrjl",values:{cardsViewed:v,totalCards:C}})}),g&&!m&&(0,a.jsx)(ss,{includeDescription:!0}),m&&(0,a.jsx)(rH,{error:m,refetch:j}),!m&&!g&&(0,a.jsx)(r7,{cards:x.tree,scaleToMax:!0,includeChildren:!0,leftLabel:(0,a.jsx)(h.cC,{id:"ml51m3"}),rightLabel:(0,a.jsx)(h.cC,{id:"8R7bfR"}),cardLookupTable:y,tooltipLabel:(0,a.jsx)(st,{}),onAnalyticsPanelClose:c})]})})]})},sS=e=>{let{user:t,showLastOpened:n}=e;return(0,a.jsxs)(eg.U,{align:"center",my:6,children:[(0,a.jsx)(sk,{name:t.name,profileImg:t.profileImg,email:t.email,isCreator:t.isCreator,isContributor:t.isContributor,width:n?"50%":void 0}),n&&(0,a.jsxs)(e5.g,{align:"flex-start",spacing:0,children:[(0,a.jsx)(eC.NZ,{children:(0,a.jsx)(h.cC,{id:"pRGfP3"})}),(0,a.jsx)(e3.x,{children:t.lastOpened})]})]})},sE=(e,t,n)=>"everyone"===e?x.ag._({id:"1IE7uf",values:{everyone:t}}):"viewersOnly"===e?x.ag._({id:"r/tA4Y",values:{viewersOnly:n}}):x.ag._({id:"V9JX7d"}),sI={everyone:e6.NdV,viewersOnly:e6.Mdf,accessLinkOnly:e6.uWk},sA=e=>{let{selected:t,handleMenuItemChange:n,everyoneCount:i,viewersOnlyCount:r}=e;return(0,a.jsxs)(ny.v,{children:[(0,a.jsx)(nk.j,{leftIcon:(0,a.jsx)(O.G,{size:"xs",icon:sI[t]}),as:ej.z,size:"md",rightIcon:(0,a.jsx)(O.G,{size:"xs",icon:T.ptq}),children:sE(t,i,r)}),(0,a.jsx)(nw.q,{zIndex:2,maxW:"380px",children:(0,a.jsxs)(nS._,{defaultValue:t,value:t,onChange:e=>{Array.isArray(e)||n(e)},children:[(0,a.jsx)(nE.i,{value:"everyone",isDisabled:0===i,children:(0,a.jsxs)(c.k,{align:"center",children:[(0,a.jsx)(O.G,{icon:sI.everyone,size:"xs"}),(0,a.jsxs)(d.xu,{ml:3,children:[(0,a.jsx)(e3.x,{children:sE("everyone",i,r)}),(0,a.jsx)(e3.x,{fontSize:"sm",color:"gray.500",children:(0,a.jsx)(h.cC,{id:"c5ESvc",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})})]})]})}),(0,a.jsx)(nE.i,{value:"viewersOnly",isDisabled:0===r,children:(0,a.jsxs)(c.k,{align:"center",children:[(0,a.jsx)(O.G,{icon:sI.viewersOnly,size:"xs"}),(0,a.jsxs)(d.xu,{ml:3,children:[(0,a.jsx)(e3.x,{children:sE("viewersOnly",i,r)}),(0,a.jsx)(e3.x,{fontSize:"sm",color:"gray.500",children:(0,a.jsx)(h.cC,{id:"5hKO48",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})})]})]})}),!1]})})]})};var s_=n(18e3),sT=n(52521),sO=n(18526),sD=n(6802),sR=n(70258),sP=n(80237),sL=n(59309),sz=n(2574),sG=n(92638),sN=n(33951),sM=n(10897),sU=n(14582),sF=n(75715),sW=n(96492),sH=n(14141),sq=n(40837);let sB={top:55,right:20,bottom:40,left:24},sV=e=>Math.round(e).toString(),sK=e=>Math.max(...e.map(e=>(0,sF.Z)(e.toString(),{fontFamily:"Inter, sans-serif",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600"})||0)),sY={backgroundColor:"var(--chakra-colors-blackAlpha-800)",color:"var(--chakra-colors-gray-100)",fontFamily:"Inter, sans-serif",boxShadow:"var(--chakra-shadows-4)",fontSize:"var(--chakra-fontSizes-xs)",borderRadius:"var(--chakra-radii-sm)",fontWeight:"var(--chakra-fontWeights-semibold)",borderWidth:"1px",borderColor:"black",paddingRight:"var(--chakra-space-1-5)",paddingLeft:"var(--chakra-space-1-5)",paddingTop:"var(--chakra-space-0-5)",paddingBottom:"var(--chakra-space-0-5)",zIndex:"var(--chakra-zIndex-tooltip)",minWidth:"60px",lineHeight:"var(--chakra-lineHeights-base)"},sZ="var(--chakra-colors-gray-500)",sJ="var(--chakra-colors-gray-200)",sX=e=>e.map(e=>e.x),sQ=e=>e.map(e=>e.y),s$=e=>{let{width:t,height:n,margin:i=sB,chartData:r,TooltipInner:s,showZero:o,shouldRoundYValues:l,showMaxAndMiddle:c,barColor:u,customTooltipStyles:h,onClick:x=()=>{}}=e,{showTooltip:p,tooltipOpen:m,tooltipLeft:g,tooltipTop:j,tooltipData:v,hideTooltip:C}=(0,sW.Z)(),b=(0,f.useRef)(),y=(0,f.useRef)();(0,f.useEffect)(()=>()=>{b.current&&clearTimeout(b.current),y.current&&clearTimeout(y.current)},[]);let k=sQ(r),w=Math.max(...k),S=[w,Math.round(w/2)],E=sK(c?S:k),I=i.left+E,A=t-I-i.right,_=n-i.top-i.bottom,T={...sH.j,...sY,...h},O=(0,f.useMemo)(()=>(0,sG.Z)({range:[0,A],domain:sX(r),padding:.3}),[A,r]),D=(0,f.useMemo)(()=>(0,sN.Z)({range:[_,0],round:!0,domain:[0,w]}),[_,w]),R=o?D(Math.min(...k.filter(e=>0!==e))):_,P=o&&_-R>6;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.xu,{children:(0,a.jsxs)("svg",{width:t,height:n,children:[(0,a.jsx)("rect",{x:0,y:0,rx:4,width:t,height:n,fill:"var(--chakra-colors-gray-100)"}),(0,a.jsx)(sL.Z,{top:i.top,left:I,children:r.map(e=>{var t,n;let i=e.y,r=e.x,s="bar-".concat(r,"-").concat(i),l=O.bandwidth(),c=_-(null!==(t=D(i))&&void 0!==t?t:0),d=P&&0===c?6:c,h=null!==(n=O(r))&&void 0!==n?n:0,m=_-d;return(0,a.jsxs)(sL.Z,{children:[(0,a.jsx)(sM.Z,{x:h,y:m,width:l,height:d,radius:5,topLeft:!0,topRight:!0,fill:o&&0===i?sJ:u,onMouseLeave:()=>{b.current=window.setTimeout(()=>{C()},300)},onMouseMove:t=>{b.current&&clearTimeout(b.current);let n=(0,sP.Z)(t);p({tooltipData:e,tooltipTop:null==n?void 0:n.y,tooltipLeft:null==n?void 0:n.x})},onClick:t=>x(t,e)}),(0,a.jsx)(sU.Z,{x:h,y:0,width:l,height:Math.max(0,_-d),opacity:0,onMouseLeave:()=>{y.current=window.setTimeout(()=>{C()},300)},onMouseMove:t=>{y.current&&clearTimeout(y.current);let n=(0,sP.Z)(t);p({tooltipData:e,tooltipTop:null==n?void 0:n.y,tooltipLeft:null==n?void 0:n.x})}})]},s)})}),(0,a.jsx)(sD.Z,{top:i.top,left:I,scale:D,stroke:sJ,strokeWidth:2,tickValues:c?S:void 0,numTicks:c?void 0:2,hideZero:!0,tickFormat:l?sV:void 0,tickLength:6,tickStroke:sJ,tickLabelProps:()=>({fill:sZ,textAnchor:"end",fontFamily:"Inter, sans-serif",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600",dy:"0.33em",dx:-4})}),(0,a.jsx)(sR.Z,{top:_+i.top,left:I,scale:O,stroke:sJ,numTicks:4,tickStroke:sJ,tickLabelProps:()=>({fill:sZ,textAnchor:"middle",fontFamily:"Inter, sans-serif",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600",dy:4}),strokeWidth:2,tickLength:6})]})}),m&&v&&(0,a.jsx)(sq.Z,{top:j,left:g,style:T,children:(0,a.jsx)(s,{x:v.x,y:v.y})})]})},s0=e=>{let{chartTitle:t,TooltipInner:n,showZero:i=!0,shouldRoundYValues:r=!0,showMaxAndMiddle:s=!0,data:o,barColor:l="var(--chakra-colors-trueblue-200)",customTooltipStyles:c,onClick:u=()=>{},...h}=e;return(0,a.jsxs)(d.xu,{position:"relative",height:"300px",...h,children:[(0,a.jsx)(e3.x,{size:"xs",color:"gray.500",fontWeight:"600",position:"absolute",top:3,left:"50%",transform:"translateX(-50%)",children:t}),(0,a.jsx)(sz.Z,{children:e=>{let{width:t,height:d}=e;return t<10?null:(0,a.jsx)(s$,{width:t,height:d,showZero:i,chartData:o,barColor:l,customTooltipStyles:c,onClick:u,TooltipInner:n,shouldRoundYValues:r,showMaxAndMiddle:s})}})]})},s1=(e,t)=>{let n="LLL d",i=new Date;i.setDate(i.getDate()-t+1);let r=[];for(let s=0;s<t;s++){let t=new Date(i);t.setDate(t.getDate()+s);let o=function(e,t){if(arguments.length<1)throw TypeError("1 argument required, but only ".concat(arguments.length," present"));var n=(0,s_.Z)(e);if(!(0,sT.Z)(n))throw RangeError("Invalid time value");var i=t||{},r=null==i.format?"extended":String(i.format),s=null==i.representation?"complete":String(i.representation);if("extended"!==r&&"basic"!==r)throw RangeError("format must be 'extended' or 'basic'");if("date"!==s&&"time"!==s&&"complete"!==s)throw RangeError("representation must be 'date', 'time', or 'complete'");var o="",l="",a="extended"===r?"-":"";if("time"!==s){var c=(0,sO.Z)(n.getDate(),2),d=(0,sO.Z)(n.getMonth()+1,2),u=(0,sO.Z)(n.getFullYear(),4);o="".concat(u).concat(a).concat(d).concat(a).concat(c)}if("date"!==s){var h=n.getTimezoneOffset();if(0!==h){var x=Math.abs(h),p=(0,sO.Z)(Math.floor(x/60),2),m=(0,sO.Z)(x%60,2);l="".concat(h<0?"+":"-").concat(p,":").concat(m)}else l="Z";var f=(0,sO.Z)(n.getHours(),2),g=(0,sO.Z)(n.getMinutes(),2),j=(0,sO.Z)(n.getSeconds(),2),v=""===o?"":"T",C=[f,g,j].join("extended"===r?":":"");o="".concat(o).concat(v).concat(C).concat(l)}return o}(t,{representation:"date"}),l=e.find(e=>e.date===o);l?r.push({x:(0,rl.p6)(l.date,n),y:l.uniqueVisitors?l.uniqueVisitors:0}):r.push({x:(0,rl.p6)(o,n),y:0})}return r},s2=e=>{let{viewData:t,dayCount:n}=e,i=s1(t,n);return(0,a.jsx)(s0,{data:i,my:3,chartTitle:(0,a.jsx)(h.cC,{id:"mSEibf"}),TooltipInner:s5})},s5=e=>{let{x:t,y:n}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e3.x,{children:t}),(0,a.jsx)(e3.x,{children:(0,a.jsx)(h.cC,{id:"6MKtHx",values:{y:n}})})]})},s3=e=>e.every(e=>0===e.uniqueVisitors),s4=(e,t)=>t&&t.dailyViews?"everyone"===e?t.dailyViews.everyone?t.dailyViews.everyone:[]:"viewersOnly"===e&&t.dailyViews.viewers?t.dailyViews.viewers:[]:[],s6=(e,t,n)=>{var i,r,s;if(!n)return 0;let o=null!==(r=n.uniqueViewers)&&void 0!==r?r:0,l=null!==(s=null===(i=e.editors)||void 0===i?void 0:i.length)&&void 0!==s?s:0;return"everyone"===t?o:"viewersOnly"===t?Math.max(0,o-l):0},s8=e=>{var t,n;let{doc:i,handleSharePanelOpen:r,onAnalyticsPanelClose:s,canShare:o}=e,{loading:l,data:d,error:u,refetch:p}=(0,tW.xls)({variables:{memoId:i.id},skip:!i.id,pollInterval:9e5,notifyOnNetworkStatusChange:!0}),{user:m}=(0,eX.SE)(),[g,j]=(0,f.useState)("deckView"),[v,C]=(0,f.useState)(null),[b,y]=(0,f.useState)("everyone"),k=(0,rl.p6)(i.createdTime,"PPP"),w=i.title||(0,a.jsx)(h.cC,{id:"wja8aL"}),S=(null==d?void 0:d.memoStats.viewers)||[],E=(null==d?void 0:null===(t=d.memoStats.dailyViews)||void 0===t?void 0:t.dayCount)||0,I=s4(b,null==d?void 0:d.memoStats),A=(0,Z.Y)("individual_analytics",i.organization),{openUpsellModal:_}=(0,rU.z)(),T=s3(I),O=S.filter(e=>{var t;return"everyone"===b||!(null===(t=i.editors)||void 0===t?void 0:t.some(t=>{var n,i;return(null===(n=e.user)||void 0===n?void 0:n.id)===(null===(i=t.user)||void 0===i?void 0:i.id)}))}),D=s6(i,b,null==d?void 0:d.memoStats),R=(0,f.useCallback)(e=>{y(e)},[]),P=(0,f.useCallback)(e=>{j(e)},[]),L=(0,f.useCallback)(e=>{if(!A&&e.id!==(null==m?void 0:m.id)){_({segmentEvent:eM.AA.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS});return}C(e)},[_,A,m]),z=(0,f.useCallback)(()=>{C(null)},[]),G=void 0!==u;return(0,a.jsxs)(a.Fragment,{children:[v&&(0,a.jsx)(sw,{user:v,onBackClick:z,docId:i.id,onAnalyticsPanelClose:s}),!v&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rK,{hasError:G,isAnalyticsLoading:l,setView:P,view:g,description:(0,a.jsx)(h.cC,{id:"uEtUah",values:{docTitle:w,docCreatedDate:k}})}),G&&(0,a.jsx)(rH,{error:u,refetch:p}),!G&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rz.i,{}),(0,a.jsxs)(tJ.f,{children:[l&&(0,a.jsx)(s9,{}),!l&&S.length<=1&&o&&(0,a.jsx)(s7,{handleSharePanelOpen:r}),!l&&(0,a.jsxs)(tI.K,{direction:"column",mt:4,spacing:4,children:[(0,a.jsxs)(c.k,{direction:"row",justify:"space-between",align:"center",children:[(0,a.jsx)(nm.X,{as:"h2",size:"md",children:"cardEngagement"===g?rV():rB()}),(0,a.jsx)(sA,{selected:b,handleMenuItemChange:R,everyoneCount:s6(i,"everyone",null==d?void 0:d.memoStats),viewersOnlyCount:s6(i,"viewersOnly",null==d?void 0:d.memoStats)})]}),"deckView"===g&&T&&(0,a.jsx)(oe,{handleSharePanelOpen:r,dayCount:E}),"deckView"===g&&!T&&(0,a.jsx)(s2,{viewData:I,dayCount:E}),"cardEngagement"===g&&(0,a.jsx)(sr,{docId:i.id,viewerFilter:b,currentViewerFilterCount:D,onAnalyticsPanelClose:s}),(0,a.jsx)(sy,{creatorId:(null===(n=i.createdBy)||void 0===n?void 0:n.id)||"",viewers:O,currentViewerFilterCount:D,docCreatedDate:k,contributors:i.editors||[],cardCount:(null==d?void 0:d.memoStats.cardCount)||0,handleTableRowClick:L,hasIndividualAnalytics:A}),O.length>3&&!A&&(0,a.jsx)(ej.z,{variant:"ghost",size:"sm",color:"gray.600",colorScheme:"gray",onClick:()=>_({segmentEvent:eM.AA.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS}),children:(0,a.jsx)(h.cC,{id:"BKBX4n",values:{0:O.length-3}})}),!A&&(0,a.jsx)(rM.m,{segmentEvent:eM.AA.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS,description:x.ag._({id:"GYgPBy"})})]})]})]})]})]})},s9=()=>(0,a.jsxs)(c.k,{direction:"column",py:2,children:[(0,a.jsx)(rN.O,{h:10,width:"40%",mb:4}),(0,a.jsx)(rN.O,{h:40,mb:4}),(0,a.jsx)(e5.g,{align:"stretch",children:[void 0,void 0,void 0].map((e,t)=>(0,a.jsx)(rN.O,{h:12},t))})]}),s7=e=>{let{handleSharePanelOpen:t}=e;return(0,a.jsx)(c.k,{p:3,px:4,mt:2,bg:"gray.100",color:rF,borderRadius:"base",children:(0,a.jsxs)(c.k,{align:"baseline",fontSize:"sm",children:[(0,a.jsx)(d.xu,{pr:2,children:(0,a.jsx)(O.G,{icon:e6.ILF,"aria-label":"user-icon",size:"sm"})}),(0,a.jsx)(e3.x,{children:(0,a.jsx)(h.cC,{id:"FNMh4I",components:{0:(0,a.jsx)(e3.x,{as:"button",onClick:t,textDecoration:"underline",fontWeight:"600",color:"gray.800"})}})})]})})},oe=e=>{let{handleSharePanelOpen:t,dayCount:n}=e;return(0,a.jsxs)(nV.b,{my:4,p:6,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",colorScheme:"gray",children:[(0,a.jsx)(d.Cd,{size:"30px",bg:"gray.500",children:(0,a.jsx)(O.G,{icon:e6.ImE,color:"white"})}),(0,a.jsx)(nK.C,{mt:4,mb:2,fontSize:"md",children:(0,a.jsx)(h.cC,{id:"2OzAI5"})}),n>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(nY.X,{maxWidth:"sm",children:(0,a.jsx)(h.cC,{id:"qQLmo7",values:{dayCount:n}})}),(0,a.jsx)(ej.z,{mt:4,onClick:t,children:(0,a.jsx)(h.cC,{id:"6Jkfdh",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})})]})]})},ot=e=>{var t,n,i,r,s,o;let{doc:l,onAnalyticsPanelClose:c}=e,u=(0,U.qr)().getState(),x=(0,F.X9)(u),{user:p}=(0,eX.SE)(),{data:m,error:g,loading:j,refetch:v}=(0,tW.IrH)({variables:{docId:l.id,userId:null==p?void 0:p.id},skip:!(null==p?void 0:p.id),pollInterval:9e5,notifyOnNetworkStatusChange:!0}),C=null!==(o=null==m?void 0:null===(n=m.docCardsStats)||void 0===n?void 0:null===(t=n.everyone)||void 0===t?void 0:t.length)&&void 0!==o?o:0,b=null==m?void 0:null===(i=m.docCardsStats)||void 0===i?void 0:i.cardCount,y=(0,f.useMemo)(()=>{var e;return(null==m?void 0:null===(e=m.docCardsStats)||void 0===e?void 0:e.everyone)||[]},[null==m?void 0:m.docCardsStats]),k=(0,f.useMemo)(()=>r$(y,"viewTimePercent"),[y]);if(!p)return null;let w=p.id===(null===(r=l.createdBy)||void 0===r?void 0:r.id),S=null===(s=l.editors)||void 0===s?void 0:s.some(e=>e.user.id===p.id),E={name:p.displayName,id:p.id,profileImg:p.profileImageUrl,email:p.email,isContributor:S,isCreator:w};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(rj.x,{children:[(0,a.jsx)(h.cC,{id:"ZlwDi6"}),(0,a.jsx)(e3.x,{fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",color:"gray.500",noOfLines:1,children:l.title||(0,a.jsx)(h.cC,{id:"wja8aL"})})]}),(0,a.jsx)(tZ.o,{}),(0,a.jsx)(rz.i,{}),(0,a.jsx)(tJ.f,{children:(0,a.jsxs)(d.xu,{children:[(0,a.jsx)(sS,{user:E}),void 0!==b&&(0,a.jsx)(so,{description:(0,a.jsx)(h.cC,{id:"YJOrjl",values:{cardsViewed:C,totalCards:b}})}),j&&!g&&(0,a.jsx)(ss,{includeDescription:!0}),g&&(0,a.jsx)(rH,{error:g,refetch:v,px:0}),!g&&!j&&(0,a.jsx)(r7,{cards:x.tree,scaleToMax:!0,includeChildren:!0,leftLabel:(0,a.jsx)(h.cC,{id:"ml51m3"}),rightLabel:(0,a.jsx)(h.cC,{id:"8R7bfR"}),cardLookupTable:k,tooltipLabel:(0,a.jsx)(st,{}),onAnalyticsPanelClose:c}),(0,a.jsxs)(nV.b,{children:[(0,a.jsx)(rW.z,{}),(0,a.jsx)(h.cC,{id:"Znuvj3",values:{GAMMA_PROPER_NOUN:Y.N6,GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})]})]})})]})},on=(0,rG.Z)(e=>{let{doc:t,mode:n,isAnalyticsPanelOpen:i,onAnalyticsPanelClose:r,onSharePanelOpen:s}=e,o=(0,el.iq)({base:"sm",md:"2xl",lg:"4xl"}),l=!!s&&"full"==n,d=(0,f.useCallback)(()=>{s&&(s(),r())},[s,r]);return(0,a.jsx)(eC.Wk,{isDark:!1,children:(0,a.jsxs)(rf.u_,{onClose:r,isOpen:i,size:o,blockScrollOnMount:!1,children:[(0,a.jsx)(tK.Z,{}),(0,a.jsxs)(rg.h,{mx:2,minW:0,children:["full"===n?(0,a.jsx)(s8,{doc:t,handleSharePanelOpen:d,onAnalyticsPanelClose:r,canShare:l}):(0,a.jsx)(ot,{doc:t,onAnalyticsPanelClose:r}),(0,a.jsx)(rz.i,{my:4}),(0,a.jsx)(tX.m,{children:(0,a.jsxs)(c.k,{justifyContent:l?"space-between":"flex-end",flex:1,children:[l&&(0,a.jsx)(ej.z,{leftIcon:(0,a.jsx)(O.G,{icon:T.zBy}),variant:"ghost",onClick:d,children:(0,a.jsx)(h.cC,{id:"6Jkfdh",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})}),(0,a.jsx)(ej.z,{variant:"solid",onClick:r,children:(0,a.jsx)(h.cC,{id:"DPfwMq"})})]})})]})]})})}),oi=e=>{let{doc:t,mode:n}=e,i=(0,eM.z$)(),{isOpen:r,onClose:s,onOpen:o}=(0,nd.M)({id:"analyticsPanelDisclosure"}),l=(0,f.useCallback)(()=>{null==i||i.track(eM.AA.DOC_ANALYTICS_VIEWED,{docId:null==t?void 0:t.id,source:"toolbar_doc_menu",type:"personal"}),o()},[i,null==t?void 0:t.id,o]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rh.s,{icon:(0,a.jsx)(O.G,{icon:T.Ma4,fixedWidth:!0}),onClick:l,children:(0,a.jsx)(h.cC,{id:"ZlwDi6"})}),t&&r&&(0,a.jsx)(on,{doc:t,isAnalyticsPanelOpen:r,onAnalyticsPanelClose:s,mode:n})]})},or=e=>{let{toggleCommentsPanel:t}=e;return(0,a.jsx)(rh.s,{icon:(0,a.jsx)(O.G,{icon:T.Mzg,fixedWidth:!0}),onClick:t,children:(0,a.jsx)(h.cC,{id:"VbyRUy"})})};var os=n(82554),oo=n(35183),ol=n(97166),oa=n(99793),oc=n(16003);let od=e=>{let{label:t,initialValue:i="",updateValue:r,helperText:s,language:o,...l}=e,[c,u]=(0,f.useState)(i),[h,x]=(0,f.useState)(null),p=(0,tj.Kt)(r,100),[m,g]=(0,f.useState)();(0,f.useEffect)(()=>{"css"===o?Promise.all([n.e(8917),n.e(7120),n.e(6214)]).then(n.bind(n,96214)).then(e=>{g(e.css())}):"html"===o&&Promise.all([n.e(8917),n.e(7120),n.e(6214),n.e(4100),n.e(2163)]).then(n.bind(n,22163)).then(e=>{g(e.html())})},[o]),(0,tj.vm)(()=>{x(null),p(c)},[c,p],[c]);let j=[m].filter(Boolean);return(0,a.jsxs)(oo.NI,{isInvalid:!!h,children:[(0,a.jsx)(ol.l,{children:t}),h&&(0,a.jsx)(oa.J1,{children:h}),s&&(0,a.jsx)(oo.Q6,{children:s}),(0,a.jsx)(d.xu,{border:"1px solid",borderColor:"gray.200",fontSize:"md",position:"relative",children:(0,a.jsx)(f.Suspense,{fallback:(0,a.jsx)("span",{}),children:(0,a.jsx)(oc.B,{value:c,extensions:j,onChange:u,...l})})})]})};var ou=n(55338);let oh=(0,f.memo)(e=>{let{isOpen:t,onClose:n,editor:i}=e,r=(0,ou.A)(i),{bodyStart:s}=(0,U.CG)(F.$p),o=(0,f.useCallback)(e=>{null==i||i.commands.updateNestedAttributesAtPos(0,{customCode:{bodyStart:e}})},[i]);return(0,a.jsx)(eC.Wk,{isDark:!1,children:(0,a.jsxs)(tV.d,{returnFocusOnClose:!1,isOpen:t,placement:"right",onClose:n,size:"lg",children:[(0,a.jsx)(tK.Z,{background:"none"}),(0,a.jsxs)(tY.s,{onKeyDown:r,"data-testid":"custom-code-drawer",motionProps:{variants:{enter:{x:"0%",transition:{duration:.2}},exit:{x:"100%",transition:{duration:.1}}}},children:[(0,a.jsx)(tZ.o,{}),(0,a.jsx)(rj.x,{children:(0,a.jsx)(h.cC,{id:"E16GGw"})}),(0,a.jsx)(tJ.f,{overflowX:"hidden",children:(0,a.jsx)(od,{label:x.ag._({id:"fC5kYg"}),helperText:x.ag._({id:"0AZNtw"}),initialValue:s,updateValue:o,language:"html",height:"600px"})}),(0,a.jsx)(tX.m,{children:(0,a.jsx)(ej.z,{w:"100%",variant:"solid",onClick:n,children:(0,a.jsx)(h.cC,{id:"DPfwMq"})})})]})]})})});oh.displayName="CustomCodeDrawer";let ox=e=>{let{editor:t}=e,{isOpen:n,onOpen:i,onClose:r}=(0,nd.M)({id:"codeEditor"});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rh.s,{icon:(0,a.jsx)(O.G,{icon:T.dT$,fixedWidth:!0}),onClick:i,children:(0,a.jsxs)(eg.U,{children:[(0,a.jsx)(h.cC,{id:"cnlGIm"}),(0,a.jsx)(e4.L,{}),(0,a.jsx)(os.C,{colorScheme:"green",ml:2,children:(0,a.jsx)(h.cC,{id:"YBt9YP"})})]})}),(0,a.jsx)(oh,{editor:t,isOpen:n,onClose:r})]})},op=e=>{let{doc:t}=e,[n]=(0,tW.LT4)(),[i]=(0,tW.iX9)(),r=(0,f.useCallback)(e=>()=>{if(!t.id)return;let r={id:t.id};e?n({variables:r,optimisticResponse:{archiveDoc:{...r,archived:e,__typename:"Doc"}}}):i({variables:r,optimisticResponse:{unarchiveDoc:{...r,archived:e,__typename:"Doc"}}})},[n,t.id,i]);return t.archived?(0,a.jsx)(rh.s,{icon:(0,a.jsx)(O.G,{icon:T.ZeM,fixedWidth:!0}),onClick:r(!1),children:(0,a.jsx)(h.cC,{id:"yKu/3Y"})}):(0,a.jsx)(rh.s,{"data-testid":"doc-menu-trash-button",color:"red.500",icon:(0,a.jsx)(O.G,{icon:T.XAH,fixedWidth:!0}),onClick:r(!0),children:(0,a.jsx)(h.cC,{id:"NOLglc",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})})};var om=n(45441),of=n(1997),og=n(91998);let oj=e=>{var t,n;let{doc:i}=e,r=(null==i?void 0:i.createdTime)&&(0,om.Z)((0,of.Z)(i.createdTime),"PPP"),s=(0,og.$)(null==i?void 0:i.title);return(0,a.jsxs)(d.xu,{px:4,py:2,maxW:"300px",children:[(0,a.jsx)(e3.x,{noOfLines:6,children:s}),(0,a.jsx)(e3.x,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,a.jsx)(h.cC,{id:"jlWdji",values:{createdTime:r}})}),(0,a.jsx)(eC.kH,{label:null==i?void 0:null===(t=i.createdBy)||void 0===t?void 0:t.email,children:(0,a.jsx)(e3.x,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,a.jsx)(h.cC,{id:"t490IT",values:{0:null==i?void 0:null===(n=i.createdBy)||void 0===n?void 0:n.displayName}})})})]})},ov=e=>{let{doc:t,editor:n}=e,i=(0,i6.e)(),r=(0,f.useCallback)(()=>{if(!n)return;let e=n.getJSON();i({docId:t.id,initialContent:e,source:"editor_toolbar_doc_menu_duplicate",newWindow:!(0,ey.Q5)()})},[t.id,i,n]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(rh.s,{icon:(0,a.jsx)(O.G,{icon:T.kZ_,fixedWidth:!0}),onClick:r,children:(0,a.jsx)(h.cC,{id:"0Fcoqv",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})})})};var oC=n(41521);let ob=()=>(0,a.jsx)(rh.s,{icon:(0,a.jsx)(O.G,{icon:T.kwI,fixedWidth:!0}),onClick:()=>{oC.T.emit("openSharePanel",{view:"export"})},children:(0,a.jsx)(h.cC,{id:"U8WPSi"})}),oy=e=>{let{site:t,path:n}=e,i=(0,eD.AR)({site:t,path:n});return i?(0,a.jsx)(eC.kH,{label:(0,a.jsx)(h.cC,{id:"kcKqQj"}),placement:"top",children:(0,a.jsx)(I.h,{ml:-1,href:i,as:nW(),target:"_blank","aria-label":x.ag._({id:"WklWxF"}),variant:"ghost",color:"gray.500",size:"xs",icon:(0,a.jsx)(O.G,{icon:T.ZE5}),pointerEvents:"auto",onClick:e=>{e.stopPropagation()}})}):null},ok=e=>{var t,n;let{doc:i,site:r,showCreatedInfo:s}=e,o=(0,og.$)(null==i?void 0:i.title),l=null===(t=r.routes)||void 0===t?void 0:t.find(e=>e.docId===i.id),c=(0,eD.jl)(i,r);return(0,a.jsxs)(d.xu,{px:4,pb:2,maxW:"300px",children:[(0,a.jsxs)(eg.U,{align:"start",children:[(0,a.jsx)(e3.x,{noOfLines:2,children:o}),c&&(0,a.jsx)(oy,{site:r,path:null==l?void 0:l.path})]}),l&&(0,a.jsx)(ow,{path:l.path}),s&&"createdTime"in i&&(0,a.jsx)(e3.x,{fontSize:"sm",color:"gray.500",noOfLines:1,mt:2,children:(0,a.jsx)(h.cC,{id:"oJFw5Q",values:{0:(0,rl.Dw)(i.createdTime)}})}),"createdBy"in i&&s&&(0,a.jsx)(e3.x,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,a.jsx)(h.cC,{id:"t490IT",values:{0:null==i?void 0:null===(n=i.createdBy)||void 0===n?void 0:n.displayName}})})]})},ow=e=>{let{path:t}=e;return"/"===t?(0,a.jsx)(e3.x,{fontSize:"sm",color:"gray.500",children:(0,a.jsx)(h.cC,{id:"wFCbbC"})}):(0,a.jsx)(e3.x,{fontFamily:"mono",fontSize:"sm",color:"gray.500",children:t})},oS=e=>{let{onClick:t,icon:n,label:i}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(rh.s,{icon:n||(0,a.jsx)(O.G,{icon:T.gr5,fixedWidth:!0}),onClick:t||(()=>{oC.T.emit("openPageSetup","cards")}),children:i||(0,a.jsx)(h.cC,{id:"Kx2GmY"})})})},oE=e=>{let{site:t}=e,n=(0,om.Z)((0,of.Z)(t.createdTime),"PPP");return(0,a.jsxs)(d.xu,{px:4,pb:2,maxW:"300px",children:[(0,a.jsx)(e3.x,{noOfLines:6,children:t.name}),(0,a.jsx)(e3.x,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,a.jsx)(h.cC,{id:"jlWdji",values:{createdTime:n}})})]})};var oI=n(4476),oA=n(85573),o_=n(35534);let oT=e=>{let{onClose:t,domainName:n,onDelete:i,isDeleting:r}=e;return(0,a.jsxs)(rf.u_,{isOpen:!0,onClose:t,trapFocus:!1,size:"xl",isCentered:!0,closeOnOverlayClick:!1,children:[(0,a.jsx)(tK.Z,{}),(0,a.jsxs)(rg.h,{children:[(0,a.jsx)(rj.x,{children:(0,a.jsx)(tI.K,{spacing:0,children:(0,a.jsx)(e3.x,{children:(0,a.jsx)(h.cC,{id:"T3exbL",values:{domainName:n}})})})}),(0,a.jsx)(tJ.f,{children:(0,a.jsx)(tI.K,{spacing:4,children:(0,a.jsx)(e3.x,{children:(0,a.jsx)(h.cC,{id:"DkFGZj"})})})}),(0,a.jsx)(tX.m,{children:(0,a.jsxs)(ev.h,{children:[(0,a.jsx)(ej.z,{isDisabled:r,variant:"ghost",colorScheme:"gray",onClick:t,children:(0,a.jsx)(h.cC,{id:"dEgA5A"})}),(0,a.jsx)(ej.z,{variant:"hazardous",isLoading:r,onClick:i,loadingText:x.ag._({id:"EF2EU9"}),children:(0,a.jsx)(h.cC,{id:"cnGeoo"})})]})})]})]})};var oO=n(56453),oD=n(75397),oR=n(97010),oP=n(44438);let oL=e=>{let{code:t,data:n}=e;switch(t){case tW.ec5.AddARecord:return(0,a.jsx)(h.cC,{id:"ZIfa5n",values:{0:n.ip},components:{0:(0,a.jsx)("strong",{}),1:(0,a.jsx)(oP.E,{})}});case tW.ec5.AddCnameRecordSubdomain:return(0,a.jsx)(h.cC,{id:"edcjuc",values:{0:n.subdomain,1:n.cnameDomain},components:{0:(0,a.jsx)("strong",{}),1:(0,a.jsx)(oP.E,{}),2:(0,a.jsx)(oP.E,{})}});case tW.ec5.EditCnameRecordSubdomain:return(0,a.jsx)(h.cC,{id:"ngCUo8",values:{0:n.subdomain,1:n.cnameDomain},components:{0:(0,a.jsx)(oP.E,{}),1:(0,a.jsx)("strong",{}),2:(0,a.jsx)(oP.E,{})}});case tW.ec5.RemoveARecord:return(0,a.jsx)(h.cC,{id:"GLzRh5",values:{0:n.ip},components:{0:(0,a.jsx)("strong",{}),1:(0,a.jsx)(oP.E,{})}});case tW.ec5.RemoveAaaaRecord:return(0,a.jsx)(h.cC,{id:"g1KLfp",values:{0:n.ip},components:{0:(0,a.jsx)("strong",{}),1:(0,a.jsx)(oP.E,{})}});case tW.ec5.AddCnameRecordWww:return(0,a.jsx)(h.cC,{id:"hFQUqJ",values:{0:n.cnameDomain},components:{0:(0,a.jsx)("strong",{}),1:(0,a.jsx)(oP.E,{})}});case tW.ec5.EditCnameRecordWww:return(0,a.jsx)(h.cC,{id:"LmV2TD",values:{0:n.cnameDomain},components:{0:(0,a.jsx)(oP.E,{}),1:(0,a.jsx)("strong",{}),2:(0,a.jsx)(oP.E,{})}});case tW.ec5.ContactGammaSupport:return(0,a.jsx)(h.cC,{id:"pGrCiS"});case tW.ec5.SslModeFullCloudflare:return(0,a.jsx)(h.cC,{id:"D61i6v"});case tW.ec5.CheckDnsCloudflare:return(0,a.jsx)(h.cC,{id:"gYfbYc"})}return(0,a.jsx)(a.Fragment,{})};var oz=n(12194);let oG=e=>{let{isOpen:t,onClose:n,domain:i,siteId:r}=e,s=(0,ir.p)(),o=null==i?void 0:i.name,l=null==o?void 0:o.split(".")[0].split("-").slice(-1)[0],[c,d]=(0,f.useState)(null==o?void 0:o.split(".")[0].split("-").slice(0,-1).join("-")),u=null==o?void 0:o.split(".").slice(1).join("."),[p,{loading:m}]=(0,tW.gVY)(),g=(0,f.useCallback)(()=>{p({variables:{input:{siteId:r,name:c}}}).then(()=>{s({title:(0,a.jsx)(h.cC,{id:"oMgC5V"}),description:(0,a.jsx)(h.cC,{id:"tIBLtD"}),duration:3e3,position:"top",isClosable:!1,status:"success"}),n()}).catch(e=>{s({title:(0,a.jsx)(h.cC,{id:"YoFYYT"}),description:(0,a.jsx)(h.cC,{id:"Wd0ucu"}),duration:3e3,position:"top",isClosable:!1,status:"error"}),console.error("[BuiltInDomainEditModal] Failed to change domain name:",e)})},[p,r,c,s,n]);return(0,a.jsxs)(rf.u_,{isOpen:t,onClose:n,size:"md",closeOnOverlayClick:!1,children:[(0,a.jsx)(tK.Z,{}),(0,a.jsxs)(rg.h,{children:[(0,a.jsx)(rj.x,{children:(0,a.jsx)(h.cC,{id:"VMKg48"})}),(0,a.jsx)(tZ.o,{}),(0,a.jsx)(tJ.f,{children:(0,a.jsxs)(oo.NI,{children:[(0,a.jsxs)(eg.U,{children:[(0,a.jsx)(oA.I,{value:c,onKeyDown:e=>{"Enter"===e.key&&g()},onChange:e=>{d((0,oz.IR)(e.target.value))},placeholder:x.ag._({id:"dcSbw0"})}),(0,a.jsxs)(ol.l,{whiteSpace:"nowrap",children:["-",l,".",u]})]}),(0,a.jsx)(oo.Q6,{lineHeight:"normal",children:(0,a.jsx)(e3.x,{children:(0,a.jsx)(h.cC,{id:"bvN4Vx"})})})]})}),(0,a.jsxs)(tX.m,{children:[(0,a.jsx)(ej.z,{onClick:n,mr:3,variant:"ghost",children:(0,a.jsx)(h.cC,{id:"dEgA5A"})}),(0,a.jsx)(ej.z,{variant:"solid",onClick:g,isLoading:m,isDisabled:c.length<3,children:(0,a.jsx)(h.cC,{id:"tfDRzk"})})]})]})]})},oN={pending:{tooltip:(0,a.jsx)(h.cC,{id:"/BjVEU"}),badgeText:(0,a.jsx)(h.cC,{id:"bl9677"}),badgeColorScheme:"yellow"},failed:{tooltip:(0,a.jsx)(h.cC,{id:"7Bj3x9"}),badgeText:(0,a.jsx)(h.cC,{id:"7Bj3x9"}),badgeColorScheme:"red"}},oM=e=>{let{status:t,onClick:n}=e;if("verified"===t)return null;let{tooltip:i,badgeText:r,badgeColorScheme:s}=oN[t];return(0,a.jsx)(eC.kH,{label:i,placement:"top",children:(0,a.jsx)(os.C,{display:"flex",justifyContent:"center",colorScheme:s,cursor:n?"pointer":"default",onClick:n||void 0,children:r})})},oU=e=>{var t,n,i;let{domain:r,onDomainSetupClick:s,path:o,onDeleteClick:l,numDomains:c,siteId:u}=e,p=(0,eD.mn)({domain:r,path:o}),m=(0,ir.p)(),g=!r.builtin,j=r.builtin,v=g&&("verified"!==r.status||"verified"===r.status&&c>1),[C]=(0,tW.NEQ)(),{data:b}=(0,tW.pKQ)({variables:{name:r.name},skip:r.builtin||"failed"===r.status}),y=(0,f.useCallback)(async()=>{await C({variables:{id:r.id}}),m({title:(0,a.jsx)(h.cC,{id:"LIAJwx"}),status:"success",duration:3e3,position:"top",isClosable:!0})},[C,r.id,m]),{isOpen:k,onOpen:S,onClose:E}=(0,w.q)({id:"edit-domain-modal"});return(0,a.jsxs)(oO.Z,{variant:"outline",children:[(0,a.jsx)(oD.e,{children:(0,a.jsxs)(tI.K,{spacing:1,children:[(0,a.jsxs)(eg.U,{children:[(0,a.jsx)(tI.K,{children:"verified"===r.status?(0,a.jsx)(eC.kH,{label:p,placement:"top",children:(0,a.jsx)(ej.z,{as:i4.r,variant:"link",href:p,wordBreak:"break-all",target:"_blank",rightIcon:(0,a.jsx)(d.xu,{ml:2,children:(0,a.jsx)(O.G,{icon:e6.wlW,size:"xs"})}),whiteSpace:"normal",children:r.name})}):(0,a.jsx)(e3.x,{children:r.name})}),(0,a.jsx)(e4.L,{}),(0,a.jsx)(eg.U,{children:(0,a.jsx)(oM,{status:r.status,onClick:"failed"===r.status?y:null})}),(0,a.jsxs)(ev.h,{children:[j&&(0,a.jsx)(eC.kH,{label:(0,a.jsx)(h.cC,{id:"VMKg48"}),placement:"top",children:(0,a.jsx)(I.h,{onClick:S,"aria-label":x.ag._({id:"VMKg48"}),size:"sm",variant:"ghost",icon:(0,a.jsx)(O.G,{icon:T.Xcf})})}),g&&(0,a.jsx)(eC.kH,{label:(0,a.jsx)(h.cC,{id:"UqSZMD"}),placement:"top",children:(0,a.jsx)(I.h,{onClick:()=>{s(r.name)},"aria-label":x.ag._({id:"UqSZMD"}),size:"sm",variant:"ghost",colorScheme:"blackAlpha",icon:(0,a.jsx)(O.G,{icon:T.DBf})})}),v&&(0,a.jsx)(eC.kH,{label:(0,a.jsx)(h.cC,{id:"C2YqXi"}),placement:"top",children:(0,a.jsx)(I.h,{onClick:()=>{l(null==r?void 0:r.id)},"aria-label":x.ag._({id:"C2YqXi"}),size:"sm",variant:"hazardous",icon:(0,a.jsx)(O.G,{icon:T.Vui})})})]})]}),j&&(0,a.jsx)(d.xu,{children:(0,a.jsxs)(e3.x,{fontSize:"xs",color:"gray.500",as:"span",children:[(0,a.jsx)(h.cC,{id:"Zzuxg+"})," ",(0,a.jsx)(eC.Yq,{label:(0,a.jsx)(h.cC,{id:"FdwjYK"})})]})}),(null==b?void 0:b.checkDomain)&&(null===(t=b.checkDomain.actions)||void 0===t?void 0:t.length)&&(null===(i=b.checkDomain)||void 0===i?void 0:null===(n=i.dns)||void 0===n?void 0:n.status)!==tW.lK9.Ok&&(0,a.jsxs)(tI.K,{spacing:2,fontSize:"xs",color:"gray.500",children:[(0,a.jsxs)(e3.x,{children:[(0,a.jsx)(h.cC,{id:"ezr3/E"})," "]}),(0,a.jsx)(oR.QI,{pl:"0",spacing:"2",children:((null==b?void 0:b.checkDomain.actions)||[]).map(e=>(0,a.jsx)(oR.HC,{sx:{code:{fontSize:"xxs",bg:"gray.100",color:"gray.800"}},children:oL(e)},e.code))})]})]})}),(0,a.jsx)(oG,{isOpen:k,onClose:E,domain:r,siteId:u})]})},oF=()=>{let e=(0,f.useRef)(!1),[t,n]=(0,f.useState)(()=>void 0!==window.entri);return(0,tj.Gq)("https://cdn.goentri.com/entri.js",{predicate:()=>void 0===window.entri,onload:()=>{n(!0),e.current=!0}}),{entriReady:t}},oW=async()=>{if(!window.entri)throw Error("Entri not found");return fetch("/api/domains/connectToken").then(e=>e.json()).then(e=>{if(!e.auth_token)throw Error("No auth token returned");return e.auth_token})},oH=async()=>{let e=await oW();if(!window.entri)throw Error("Entri not found");let{dnsRecords:t}=(0,eD.Yd)(""),n={applicationId:"gamma",token:e,dnsRecords:t};return console.log("[launchEntri] Purchasing Entri with config",n),window.entri.purchaseDomain(n),oB()},oq=async e=>{let t=await oW(),{domain:n,dnsRecords:i}=(0,eD.Yd)(e),r={applicationId:"gamma",token:t,prefilledDomain:n,dnsRecords:i};return console.log("[launchEntri] Launching Entri with config",r),window.entri.showEntri(r),oB()},oB=()=>new Promise((e,t)=>{let n=i=>{if(window.removeEventListener("onEntriClose",n),i.detail.success)e(i.detail);else{var r,s,o;t((null==i?void 0:null===(r=i.detail)||void 0===r?void 0:r.error)?"".concat((null===(s=i.detail.error)||void 0===s?void 0:s.title)?"".concat(i.detail.error.title,": "):""," ").concat((null===(o=i.detail.error)||void 0===o?void 0:o.details)?i.detail.error.details:""):void 0)}};window.addEventListener("onEntriClose",n,!1)}),oV=e=>{let{siteId:t}=e,n=(0,eM.z$)(),{entriReady:i}=oF(),r=(0,ir.p)(),[s,o]=(0,f.useState)(!1),[l,{loading:c}]=(0,tW.kui)(),d=(0,f.useCallback)(async()=>{t&&(o(!0),oH().then(e=>{if(e&&"purchase"===e.setupType&&e.domain){let i=e.domain;null==n||n.track(eM.AA.SITE_DOMAIN_PURCHASED,{domain:i,siteId:t}),l({variables:{input:{name:i,siteId:t,method:tW.Q0V.Purchase}}}).then(()=>{null==n||n.track(eM.AA.SITE_DOMAIN_ADDED,{domain:i,siteId:t,source:"entriSell"}),r({title:(0,a.jsx)(h.cC,{id:"5Ae0kE"}),description:(0,a.jsx)(h.cC,{id:"HqV46b"}),status:"success",duration:3e3,isClosable:!0,position:"top"})}).catch(e=>{console.error("[DomainListWrapper] error adding domain error",e),r({title:(0,a.jsx)(h.cC,{id:"JXFM3z"}),description:(null==e?void 0:e.message)&&e.message,status:"error",duration:null,position:"top",isClosable:!0})})}}).catch(e=>{console.error("[DomainListWrapper] entriPurchaseDomain error",e),r({title:e?(0,a.jsx)(h.cC,{id:"H7PVmT"}):(0,a.jsx)(h.cC,{id:"vr6nIz"}),description:e||void 0,status:"error",duration:e?null:3e3,position:"top",isClosable:!0})}).finally(()=>{o(!1)}))},[l,n,t,r]);return t?(0,a.jsx)(ej.z,{variant:"outline",size:"md",onClick:d,isLoading:s,isDisabled:!i,children:(0,a.jsx)(h.cC,{id:"+VODT0"})}):null},oK=e=>{let{isOpen:t,onClose:n,domainName:i,onTransferConfirm:r,onTransferCancel:s,domainToTransfer:o,isTransferring:l}=e,c=(0,f.useCallback)(()=>{s(),n()},[n,s]),d=(0,f.useCallback)(async()=>{r(),n()},[n,r]);return o?(0,a.jsx)(eC.Wk,{isDark:!1,children:(0,a.jsxs)(rf.u_,{isOpen:t,onClose:c,size:"lg",children:[(0,a.jsx)(tK.Z,{}),(0,a.jsxs)(rg.h,{children:[(0,a.jsx)(rj.x,{children:(0,a.jsx)(h.cC,{id:"hqplvI"})}),(0,a.jsx)(tZ.o,{}),(0,a.jsx)(tJ.f,{children:(0,a.jsxs)(tI.K,{spacing:2,children:[(0,a.jsx)(e3.x,{children:o.siteArchived?(0,a.jsx)(h.cC,{id:"SeHn75",values:{domainName:i,0:o.siteName}}):(0,a.jsx)(h.cC,{id:"tX38ij",values:{domainName:i,0:o.siteName}})}),(0,a.jsx)(e3.x,{children:(0,a.jsx)(h.cC,{id:"rKH6wM"})})]})}),(0,a.jsxs)(tX.m,{children:[(0,a.jsx)(ej.z,{variant:"ghost",mr:3,onClick:c,children:(0,a.jsx)(h.cC,{id:"yz7wBu"})}),(0,a.jsx)(ej.z,{isLoading:l,variant:"hazardous",onClick:d,children:(0,a.jsx)(h.cC,{id:"vTZxnA"})})]})]})]})}):(0,a.jsx)(a.Fragment,{})},oY=e=>{var t;let{site:n,path:i,onDomainSetupClick:r,onAddDomain:s,isAddingDomain:o,refetchSites:l}=e,c=(0,e0.ye)("purchaseDomain"),d=(0,ir.p)(),{currentWorkspace:u}=(0,eX.SE)(),[p,m]=(0,f.useState)(),[g,j]=(0,f.useState)(),[v,C]=(0,f.useState)(""),{isOpen:b,onOpen:y,onClose:k}=(0,w.q)({id:"delete-domain-modal"}),{isOpen:S,onOpen:E,onClose:I}=(0,nd.M)({id:"transferDomainModal"}),[A,{loading:_}]=(0,tW.KtP)({fetchPolicy:"network-only",nextFetchPolicy:"network-only"}),T=n.domains.find(e=>e.id===p),O=(0,eD.m6)(v)&&void 0===n.domains.find(e=>e.name===v),[D,{loading:R}]=(0,tW.Yqv)(),[P,{loading:L}]=(0,tW.dLz)(),[z,G]=(0,f.useState)(void 0),N=(0,f.useCallback)(async e=>{var t;let i=await A({variables:{name:e,workspaceId:null==u?void 0:u.id}}),r=null==i?void 0:null===(t=i.data)||void 0===t?void 0:t.domains,o=null==r?void 0:r[0];if(n&&o){j(o),E();return}s(e),j(void 0),C("")},[null==u?void 0:u.id,A,s,E,n]);(0,tj.vm)(()=>{p?G(null==T?void 0:T.name):G(void 0)},[p,null==T?void 0:T.name],[p]);let M=(0,f.useCallback)(()=>{k(),m(()=>void 0)},[k]),U=(0,f.useCallback)(async()=>{T&&(await D({variables:{id:p}}),await l(),d({title:(0,a.jsx)(h.cC,{id:"V4fbcv",values:{0:T.name}}),status:"success",duration:3e3,position:"top",isClosable:!0}),M())},[l,D,p,T,M,d]),F=(0,o_.Y)("custom_domains"),W=F&&c,H=(0,eD.Zz)(n.domains),q=(0,f.useCallback)(()=>{j(void 0)},[]),B=(0,f.useCallback)(async()=>{g&&(await P({variables:{id:null==g?void 0:g.id,siteId:n.id},refetchQueries:["GetSite"]}),d({title:(0,a.jsx)(h.cC,{id:"dHhDGG",values:{0:g.name}}),position:"top",status:"success",duration:5e3}),C(""),j(void 0))},[g,n.id,d,P]);return(0,a.jsxs)(tI.K,{spacing:8,p:2,children:[F&&(0,a.jsxs)(tI.K,{spacing:4,mb:2,children:[W&&(0,a.jsxs)(tI.K,{children:[(0,a.jsx)(e3.x,{fontSize:"md",children:(0,a.jsx)(h.cC,{id:"gBiND0"})}),(0,a.jsx)(oV,{siteId:null==n?void 0:n.id})]}),(0,a.jsxs)(tI.K,{children:[(0,a.jsx)(e3.x,{children:W?(0,a.jsx)(h.cC,{id:"9UtMWk"}):(0,a.jsx)(h.cC,{id:"ssWCSl"})}),(0,a.jsxs)(eg.U,{children:[(0,a.jsx)(oA.I,{bg:"white",placeholder:(null==n?void 0:null===(t=n.domains)||void 0===t?void 0:t.length)?x.ag._({id:"jt/2Ky"}):x.ag._({id:"1y9z1r"}),value:v,onChange:e=>C(e.target.value),onKeyDown:e=>{"Enter"===e.key&&O&&(e.preventDefault(),N(v))}}),(0,a.jsx)(tI.K,{children:(0,a.jsx)(eC.kH,{label:(0,a.jsx)(h.cC,{id:"aUB5ST"}),placement:"top",shouldWrapChildren:!0,isDisabled:O,children:(0,a.jsx)(ej.z,{isDisabled:!O,variant:"plain",onClick:()=>{N(v)},isLoading:o||_,children:(0,a.jsx)(h.cC,{id:"EdEpYN"})})})})]})]})]}),(0,a.jsxs)(tI.K,{spacing:2,children:[(0,a.jsx)(h.cC,{id:"bwl+tv"}),H.map(e=>(0,a.jsx)(oU,{domain:e,onDomainSetupClick:r,path:i,onDeleteClick:e=>{m(e),y()},numDomains:n.domains.length||0,siteId:n.id},e.id))]}),!F&&(0,a.jsx)(rM.m,{segmentEvent:eM.AA.GAMMA_PRO_UPSELL_DOMAINS,title:(0,a.jsx)(h.cC,{id:"m6aLo0"}),description:(0,a.jsx)(h.cC,{id:"xFELnF",values:{GAMMA_PRO_PROPER_NOUN:Y.x8,GAMMA_PROPER_NOUN:Y.N6}})}),b&&(0,a.jsx)(oT,{onClose:M,onDelete:U,domainName:z,isDeleting:R}),(0,a.jsx)(oK,{isOpen:S,onClose:I,onTransferCancel:q,domainName:v,domainToTransfer:g,onTransferConfirm:B,isTransferring:L})]})};var oZ=n(12483),oJ=n(69419);let oX=e=>{let{isOpen:t,onClose:n,domainName:i,onDomainConfirmed:r}=e,[s,o]=(0,f.useState)("initial"),{entriReady:l}=oF(),[d,u]=(0,f.useState)(!1),x=(0,ir.p)(),{dnsRecords:p,isRootDomain:m,subdomain:g}=(0,f.useMemo)(()=>(0,eD.Yd)(i||""),[i]);return(0,a.jsx)(eC.Wk,{isDark:!1,children:(0,a.jsxs)(rf.u_,{isOpen:t,onClose:n,size:"3xl",trapFocus:!1,children:[(0,a.jsx)(tK.Z,{}),(0,a.jsxs)(rg.h,{children:[(0,a.jsx)(rj.x,{children:(0,a.jsx)(h.cC,{id:"xQMU8T",values:{domainName:i}})}),(0,a.jsx)(tZ.o,{}),(0,a.jsxs)(tJ.f,{children:["initial"===s&&(0,a.jsx)(oO.Z,{variant:"filled",children:(0,a.jsx)(oD.e,{children:(0,a.jsxs)(tI.K,{spacing:4,py:4,mx:"auto",children:[(0,a.jsxs)(tI.K,{spacing:2,children:[(0,a.jsxs)(tI.K,{spacing:1,children:[(0,a.jsx)(e3.x,{textAlign:"center",fontSize:"2xl",children:(0,a.jsx)(O.G,{icon:T.g4A,size:"lg"})}),(0,a.jsx)(e3.x,{fontWeight:"semibold",fontSize:"lg",textAlign:"center",children:(0,a.jsx)(h.cC,{id:"w5l5pM"})})]}),(0,a.jsx)(e3.x,{textAlign:"center",maxW:"unset",children:(0,a.jsx)(h.cC,{id:"MhdvBQ"})})]}),(0,a.jsx)(c.k,{align:"center",justify:"center",w:"100%",children:(0,a.jsxs)(tI.K,{w:64,maxW:"100%",children:[(0,a.jsx)(ej.z,{size:"md",variant:"solid",isDisabled:!l,isLoading:d,onClick:()=>{i&&(u(!0),oq(i).then(e=>{console.log("[ENTRI] Successfully setup domain",e),null==r||r({domainName:i,source:"automatic"})}).catch(e=>{e&&oZ.Tb("[entri.showEntri] Error setting up domain: ".concat(e)),x({title:e?(0,a.jsx)(h.cC,{id:"l/2jzv"}):(0,a.jsx)(h.cC,{id:"FZ1Qqq"}),description:e,status:"error",duration:3e3,isClosable:!0,position:"top"})}).finally(()=>{u(!1)}))},children:(0,a.jsx)(h.cC,{id:"qu+sXe"})}),(0,a.jsxs)(eg.U,{children:[(0,a.jsx)(rz.i,{}),(0,a.jsx)(e3.x,{color:"gray.600",children:(0,a.jsx)(h.cC,{id:"BzEFor"})}),(0,a.jsx)(rz.i,{})]}),(0,a.jsx)(ej.z,{size:"md",variant:"plain",onClick:()=>{o("manualSetup")},children:(0,a.jsx)(h.cC,{id:"ANIrop"})})]})})]})})}),"manualSetup"===s&&(0,a.jsx)(oO.Z,{variant:"filled",children:(0,a.jsx)(oD.e,{children:(0,a.jsxs)(tI.K,{spacing:6,children:[(0,a.jsx)(e3.x,{fontWeight:"semibold",fontSize:"lg",children:(0,a.jsx)(h.cC,{id:"L5N7HX"})}),(0,a.jsxs)(sh.i,{variant:"simple",children:[(0,a.jsx)(sa.h,{children:(0,a.jsxs)(sc.Tr,{children:[(0,a.jsx)(sd.Th,{children:(0,a.jsx)(h.cC,{id:"6YtxFj"})}),(0,a.jsx)(sd.Th,{children:(0,a.jsx)(h.cC,{id:"+zy2Nq"})}),(0,a.jsx)(sd.Th,{isNumeric:!0,children:(0,a.jsx)(h.cC,{id:"HKH+W+"})})]})}),(0,a.jsx)(sx.p,{children:(p||[]).map(e=>(0,a.jsxs)(sc.Tr,{children:[(0,a.jsx)(sp.Td,{fontFamily:"mono",children:e.host}),(0,a.jsx)(sp.Td,{fontFamily:"mono",children:e.type}),(0,a.jsx)(sp.Td,{isNumeric:!0,fontFamily:"mono",children:e.value})]},e.value))})]}),(0,a.jsxs)(nV.b,{status:"info",colorScheme:"orange",children:[(0,a.jsx)(rW.z,{}),(0,a.jsxs)(tI.K,{children:[(0,a.jsx)(e3.x,{fontWeight:"bold",fontSize:"md",children:(0,a.jsx)(h.cC,{id:"NxHkkp"})}),(0,a.jsxs)(oR.GS,{pl:"4",spacing:"2",children:[m?1===oJ.Co.length?(0,a.jsx)(oR.HC,{children:(0,a.jsx)(h.cC,{id:"wz2Cgq",values:{0:oJ.Co[0]},components:{0:(0,a.jsx)(oP.E,{colorScheme:"gray"}),1:(0,a.jsx)(oP.E,{colorScheme:"gray"})}})}):(0,a.jsx)(oR.HC,{children:(0,a.jsx)(h.cC,{id:"+kOqFW",values:{0:oJ.Co.slice(0,-1).map(e=>(0,a.jsx)(oP.E,{colorScheme:"gray",children:e},e)),1:oJ.Co.slice(-1)[0]},components:{0:(0,a.jsx)(oP.E,{colorScheme:"gray"}),1:(0,a.jsx)(eg.U,{display:"inline",divider:(0,a.jsx)("span",{children:", "})}),2:(0,a.jsx)(oP.E,{colorScheme:"gray"})}})}):null,m&&(0,a.jsx)(oR.HC,{children:(0,a.jsx)(h.cC,{id:"vLov0O",components:{0:(0,a.jsx)(oP.E,{colorScheme:"gray"}),1:(0,a.jsx)(oP.E,{colorScheme:"gray"})}})}),(0,a.jsx)(oR.HC,{children:(0,a.jsx)(h.cC,{id:"Jmb6Yp",values:{subdomain:g,GAMMA_SITES_HOST:oJ.ax},components:{0:(0,a.jsx)(oP.E,{colorScheme:"gray"}),1:(0,a.jsx)(oP.E,{colorScheme:"gray"}),2:(0,a.jsx)(oP.E,{colorScheme:"gray"})}})})]})]})]}),r&&(0,a.jsxs)(eg.U,{justifyContent:"space-between",children:[(0,a.jsx)(ej.z,{variant:"plain",onClick:()=>o("initial"),children:(0,a.jsx)(h.cC,{id:"iH8pgl"})}),(0,a.jsx)(ej.z,{variant:"solid",onClick:()=>{n(),null==r||r({domainName:i,source:"manual"})},size:"md",mx:"auto",children:(0,a.jsx)(h.cC,{id:"RyhVuk"})})]})]})})})]}),(0,a.jsx)(tX.m,{})]})]})})},oQ=e=>{let{children:t,shouldWrap:n=!1}=e;return n?(0,a.jsx)(il.W,{py:16,maxW:"container.md",children:t}):(0,a.jsx)(a.Fragment,{children:t})},o$=e=>{let{showHeadings:t=!0}=e,n=(0,eM.z$)(),i=(0,U.CG)(e_.lH),r=(0,ir.p)(),{refetch:s}=(0,iw.ZUZ)({variables:{id:null==i?void 0:i.id},fetchPolicy:"cache-first",skip:!(null==i?void 0:i.id)}),{isOpen:o,onOpen:l,onClose:d}=(0,nd.M)({id:"domainSetupModal"}),u=null==i?void 0:i.domains.find(e=>"pending"===e.status),[x,p]=(0,f.useState)(null),[m,{loading:g}]=(0,iw.kui)(),[j,v]=(0,f.useState)();(0,f.useEffect)(()=>{if(!u)return;let e=setInterval(()=>{s()},1e4);return()=>{clearInterval(e)}},[u,s,i]);let C=(0,f.useCallback)(e=>{v(e),l()},[l]),b=(0,f.useCallback)(e=>{let{domainName:t,source:s}=e;"addDomain"===x&&m({variables:{input:{siteId:null==i?void 0:i.id,name:t,method:"automatic"===s?iw.Q0V.Automatic:iw.Q0V.Manual}}}).then(()=>{null==n||n.track(eM.AA.SITE_DOMAIN_ADDED,{domain:t,siteId:null==i?void 0:i.id,source:s}),r({title:(0,a.jsx)(h.cC,{id:"p8Oc6N"}),description:(0,a.jsx)(h.cC,{id:"HqV46b"}),status:"success",duration:3e3,isClosable:!0,position:"top"}),d()})},[m,n,x,d,null==i?void 0:i.id,r]);return console.debug("%cDomainsPanel debug","background-color: #cc00ff",{site:i}),(0,a.jsx)(c.k,{w:"100%",flex:1,direction:"column",mt:4,children:(0,a.jsxs)(oQ,{shouldWrap:t,children:[t&&(0,a.jsxs)(tI.K,{spacing:1,mb:4,children:[(0,a.jsx)(nm.X,{children:(0,a.jsx)(h.cC,{id:"AZ4xlc"})}),(0,a.jsx)(e3.x,{children:(0,a.jsx)(h.cC,{id:"KuoJwF"})})]}),i?(0,a.jsx)(oY,{site:i,onDomainSetupClick:C,onAddDomain:e=>{l(),v(e),p("addDomain")},isAddingDomain:g,refetchSites:s}):(0,a.jsx)(t0.AA,{}),o&&j&&(0,a.jsx)(oX,{domainName:j,isOpen:o,onClose:()=>{d(),p(null)},onDomainConfirmed:x?b:null})]})})};var o0=n(20437),o1=n(72842),o2=n(9355),o5=n(77742),o3=n(62935),o4={src:"/_next/static/media/no-navbar.e9d28333.png"},o6={src:"/_next/static/media/top-navbar.97a69a83.png"};let o8=e=>{let t=(0,U.CG)(e_.lH);return t?(0,a.jsx)(o9,{site:t,...e}):null},o9=e=>{let{site:t,showHeadings:n=!0,doc:i}=e,r=(0,ir.p)(),s=(0,e0.ye)("sitesNav"),[o,l]=(0,f.useState)(t.name),[d,u]=(0,f.useState)(t.gtmContainerId),[p,m]=(0,f.useState)(t.navEnabled),[g,j]=(0,f.useState)(!1),[v,C]=(0,f.useState)(!1),[b,y]=(0,f.useState)(null),{currentWorkspace:k}=(0,eX.SE)(),[w]=(0,tW.Iyu)(),S=(0,f.useCallback)(async()=>{if(!(null==t?void 0:t.id))return;j(!0);let e={siteId:null==t?void 0:t.id,name:o,navEnabled:p,gtmContainerId:d};!p||(null==t?void 0:t.navContent)||(e.navContent=(0,eG.JB)()),await w({variables:{input:e}}),r({title:(0,a.jsx)(h.cC,{id:"bZn5Ok"}),status:"success",isClosable:!0,position:"top"}),j(!1)},[d,o,p,t,r,w]),E=(0,f.useCallback)(async e=>{(null==t?void 0:t.id)&&(C(!0),await w({variables:{input:{siteId:null==t?void 0:t.id,faviconUrl:e}}}),r({title:e?(0,a.jsx)(h.cC,{id:"64GEyu"}):(0,a.jsx)(h.cC,{id:"/K2cLG"}),status:"success",isClosable:!0,position:"top"}),C(!1))},[null==t?void 0:t.id,r,w]),A=o!==(null==t?void 0:t.name)||p!==(null==t?void 0:t.navEnabled)||d!==(null==t?void 0:t.gtmContainerId);return(0,a.jsxs)(c.k,{w:"100%",flex:1,direction:"column",px:2,children:[(0,a.jsxs)(oQ,{shouldWrap:n,children:[n&&(0,a.jsx)(nm.X,{fontSize:"3xl",letterSpacing:"tight",fontWeight:"800",mb:12,children:(0,a.jsx)(h.cC,{id:"Tz0i8g"})}),(0,a.jsxs)(tI.K,{spacing:4,mt:6,children:[(0,a.jsxs)(oo.NI,{children:[(0,a.jsx)(eg.U,{justifyContent:"center",children:(0,a.jsx)(ol.l,{flex:"1",children:(0,a.jsx)(h.cC,{id:"Lve3H6"})})}),(0,a.jsx)(oA.I,{onChange:e=>{l(e.currentTarget.value)},placeholder:x.ag._({id:"ZiMSMQ"}),value:o})]}),(0,a.jsxs)(oo.NI,{children:[(0,a.jsx)(eg.U,{justifyContent:"center",children:(0,a.jsx)(ol.l,{flex:"1",children:(0,a.jsx)(h.cC,{id:"+Qaboy"})})}),(0,a.jsx)(c.k,{h:"150px",w:"100%",position:"relative",justify:"center",align:"center",children:(null==t?void 0:t.faviconUrl)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.k,{align:"center",justify:"center",w:"128px",h:"128px",border:"1px solid var(--chakra-colors-blackAlpha-200)",children:(0,a.jsx)(np.E,{src:null==t?void 0:t.faviconUrl,maxW:"100px",maxH:"100px",borderRadius:"sm"})}),(0,a.jsx)(eC.kH,{label:(0,a.jsx)(h.cC,{id:"XyBdok"}),children:(0,a.jsx)(I.h,{zIndex:2,position:"absolute",top:0,right:0,isRound:!0,isDisabled:v,size:"sm",icon:(0,a.jsx)(O.G,{icon:T.XAH}),"aria-label":x.ag._({id:"XyBdok"}),onClick:()=>E(null)})})]}):v||b===o2.D.Uploading?(0,a.jsx)(tA.$,{}):(0,a.jsx)(o1.un,{orgId:null==k?void 0:k.id,uploadType:"icon",editType:"icon",dropHereText:x.ag._({id:"hVCCpY",values:{0:"%{browse}"}}),customHeight:"150px",customFontSize:"xs",onUploadStart:()=>{y(o2.D.Uploading)},onUploadSuccess:async(e,t)=>{let{src:n,uploadResultStep:i}=e;"optimized"===i&&(await E(n),y(o2.D.Done))},onUploadFailed:e=>{y(o2.D.Error),r({title:(0,a.jsx)(h.cC,{id:"aECahe"})}),console.error("[Site SettingsPanel] Favicon upload error",e)},sx:{width:"100%",".uppy-Root":{border:"1px solid var(--chakra-colors-gray-200)",borderRadius:"md",width:"100%"},".uppy-DragDrop-label":{fontSize:"xs",color:"gray.500"},".uppy-DragDrop--isDragDropSupported":{border:"none"},".uppy-DragDrop-arrow":{transform:"scale(0.85)"}}})}),(0,a.jsx)(e3.x,{fontSize:"xs",color:"gray.500",mt:2,children:(0,a.jsx)(h.cC,{id:"ifTGl2"})})]}),s&&(0,a.jsxs)(oo.NI,{children:[(0,a.jsx)(eg.U,{justifyContent:"center",children:(0,a.jsx)(ol.l,{flex:"1",children:(0,a.jsx)(h.cC,{id:"UxKoFf"})})}),(0,a.jsxs)(o0.M,{columns:2,spacing:6,flex:1,children:[(0,a.jsx)(o7,{name:x.ag._({id:"Nom9QG"}),src:o6.src,isSelected:p,onClick:()=>{m(!0)}}),(0,a.jsx)(o7,{name:x.ag._({id:"BvDFuc"}),src:o4.src,isSelected:!p,onClick:()=>{m(!1)}})]})]}),(0,a.jsxs)(oo.NI,{children:[(0,a.jsx)(eg.U,{justifyContent:"center",children:(0,a.jsx)(ol.l,{flex:"1",children:(0,a.jsx)(h.cC,{id:"d4WWfP"})})}),(0,a.jsxs)(c.k,{sx:{".gtm-prefix::before":{content:'"GTM\\2009-"'}},children:[(0,a.jsx)(c.k,{className:"gtm-prefix",position:"absolute",alignItems:"center",color:(null==d?void 0:d.length)?"gray.800":"gray.500",fontWeight:"400",h:10,pl:4}),(0,a.jsx)(oA.I,{pl:16,placeholder:"XXXXXX",value:d||"",onChange:e=>{u(o3.R.sanitize(e.currentTarget.value).replace(/[\W_]+/g,"").toUpperCase().slice(0,10))}})]}),(0,a.jsx)(e3.x,{fontSize:"xs",color:"gray.500",mt:2,children:(0,a.jsx)(h.cC,{id:"6LEeiE",components:{0:(0,a.jsx)("br",{}),1:(0,a.jsx)(ej.z,{"aria-label":"Learn more about Google Tag Manager",as:"a",px:1,textDecoration:"underline",variant:"ghost",href:"https://support.google.com/tagmanager/answer/6103696?hl=en",target:"_blank",size:"xs",rightIcon:(0,a.jsx)(rm.h,{ml:-1})})}})})]}),i&&(0,a.jsx)(o5.V,{label:(0,a.jsx)(h.cC,{id:"SDyz5I"}),segmentEvent:tp.AA.GAMMA_PRO_UPSELL_SITE_REMOVE_WATERMARK,doc:i})]})]}),(0,a.jsx)(c.k,{w:"100%",flex:1,direction:"column",pos:"sticky",bottom:0,children:(0,a.jsxs)(c.k,{mx:-2,flex:1,mb:-2,py:4,bg:"white",children:[(0,a.jsx)(e4.L,{}),(0,a.jsx)(ej.z,{variant:"solid",isDisabled:!A,onClick:S,isLoading:g,children:(0,a.jsx)(h.cC,{id:"tfDRzk"})})]})})]})},o7=e=>{let{name:t,src:n,onClick:i,isSelected:r,...s}=e;return(0,a.jsxs)(tI.K,{p:2,bg:r?"trueblue.50":"transparent",_hover:{bg:"trueblue.50",cursor:"pointer"},borderRadius:"md",spacing:2,...s,transitionProperty:"common",transitionDuration:"normal",onClick:i,children:[(0,a.jsx)(d.xu,{height:"80px",bg:"gray.50",borderRadius:"md",borderWidth:"1px",overflow:"hidden",children:n&&(0,a.jsx)(np.E,{src:n,width:"100%",height:"100%",objectFit:"contain",borderRadius:"md"})}),(0,a.jsxs)(eg.U,{children:[r&&(0,a.jsx)(d.xu,{children:(0,a.jsx)(O.G,{icon:T.LEp})}),(0,a.jsx)(e3.x,{fontSize:"sm",fontWeight:"500",children:t})]})]})},le=(0,f.memo)(e=>{let{editor:t}=e,{bodyStart:n}=(0,U.CG)(F.$p),i=(0,f.useCallback)(e=>{null==t||t.commands.updateNestedAttributesAtPos(0,{customCode:{bodyStart:e}})},[t]);return(0,a.jsx)(c.k,{w:"100%",flex:1,direction:"column",p:2,pt:6,children:(0,a.jsx)(od,{label:x.ag._({id:"fC5kYg"}),helperText:x.ag._({id:"0AZNtw"}),initialValue:n,updateValue:i,language:"html",height:"600px"})})});le.displayName="CustomCodePanel";let lt=(0,f.memo)(e=>{let{selectedPanel:t,setSelectedPanel:n}=e,i=(0,e0.ye)("docCustomCode");return(0,a.jsx)(tI.K,{spacing:4,children:(0,a.jsx)(tI.K,{spacing:8,children:(0,a.jsxs)(ev.h,{variant:"ghost",size:"sm",borderRadius:"full",w:"100%",children:[(0,a.jsx)(ej.z,{borderRadius:"md",leftIcon:(0,a.jsx)(O.G,{icon:T.ovd,fixedWidth:!0}),"data-website-panel-active-view-button":"domains",colorScheme:"domains"===t?"trueblue":"gray",bg:"domains"===t?"trueblue.100":void 0,onClick:()=>n("domains"),flex:1,children:(0,a.jsx)(h.cC,{id:"AZ4xlc"})}),(0,a.jsx)(ej.z,{borderRadius:"md",leftIcon:(0,a.jsx)(O.G,{icon:T.gr5,fixedWidth:!0}),"data-website-panel-active-view-button":"website",colorScheme:"website"===t?"trueblue":"gray",bg:"website"===t?"trueblue.100":void 0,onClick:()=>n("website"),flex:1,children:(0,a.jsx)(h.cC,{id:"Tz0i8g"})}),i&&(0,a.jsx)(ej.z,{borderRadius:"md",leftIcon:(0,a.jsx)(O.G,{icon:T.dT$,fixedWidth:!0}),"data-website-panel-active-view-button":"code",colorScheme:"code"===t?"trueblue":"gray",bg:"code"===t?"trueblue.100":void 0,onClick:()=>n("code"),flex:1,children:(0,a.jsx)(h.cC,{id:"E16GGw"})})]})})})});lt.displayName="SettingsPanelHeader";var ln=n(37164);let li=e=>{var t;let{title:n,site:i}=e,r="/".concat((0,oz.IR)(n||"untitled"));return(null==i?void 0:null===(t=i.routes)||void 0===t?void 0:t.find(e=>e.path===r))&&(r="".concat(r,"-").concat((0,ln.x0)(6))),r},lr={variant:"outline",transitionProperty:"all",transitionDuration:"normal",cursor:"pointer",boxShadow:"none",tabIndex:0,_hover:{shadow:"lg",borderColor:"trueblue.300",bg:"trueblue.50"},_focusVisible:{boxShadow:"none",outline:"none"},_focus:{boxShadow:"outline"}},ls=e=>{let{sites:t}=e,n=(0,U.CG)(F.yx),i=(0,eM.z$)(),{currentWorkspace:r}=(0,eX.SE)(),[s]=(0,tW.qbt)(),[o,l]=(0,f.useState)(!1),d=(0,ir.p)(),{push:u,reload:x}=(0,eb.useRouter)(),p=(0,f.useCallback)(async e=>{if(!n)return;l(!0);let o=null==t?void 0:t.find(t=>t.id===e),c=n.id;if(!(null==r?void 0:r.id)){console.error("[MoveToSiteModal] No currentWorkspace found");return}let u=li({title:n.title,site:o});if(await (0,eD.iL)(c),!c){console.error("[MoveToSiteModal] No docId found");return}null==i||i.track(eM.AA.DOC_MOVED_TO_SITE,{doc_id:c,site_id:e}),s({variables:{input:{siteId:e,docId:c,path:u}},refetchQueries:["GetSite"]}).then(()=>{(0,ek.yQ)({docId:c}),console.debug("[MoveToSiteModal] Doc moved to site. Adding route then navigating to editor",c),d({position:"top",title:(0,a.jsx)(h.cC,{id:"oMgC5V"}),description:(0,a.jsx)(h.cC,{id:"rYG2u6"}),status:"success",duration:5e3}),x()}).catch(e=>{d({position:"top",title:"Error",description:e.message,status:"error",duration:5e3}),l(!1)}).finally(()=>{l(!1)})},[i,null==r?void 0:r.id,n,x,s,t,d]);return(0,a.jsxs)(a.Fragment,{children:[o&&(0,a.jsx)(c.k,{w:"100",h:"400px",maxH:"30vh",children:(0,a.jsx)(t0.AA,{})}),!o&&(0,a.jsxs)(tI.K,{spacing:4,children:[(0,a.jsx)(tI.K,{pt:2,pb:2,children:(0,a.jsxs)(e3.x,{fontSize:"sm",letterSpacing:"normal",color:"gray.600",fontWeight:"500",children:[(0,a.jsx)(h.cC,{id:"1osTfm",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc},components:{0:(0,a.jsx)("strong",{})}})," ",(0,a.jsxs)(i4.r,{href:"https://help.gamma.app/en/articles/8429268-how-to-publish-your-page-to-a-custom-domain",textDecoration:"underline",isExternal:!0,color:"trueblue.500",children:[(0,a.jsx)(h.cC,{id:"Px95UX"}),(0,a.jsx)(rm.h,{mx:"2px"})]})," "]})}),t&&t.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e3.x,{fontSize:"sm",letterSpacing:"normal",color:"gray.600",fontWeight:"500",children:(0,a.jsx)(h.cC,{id:"kjbPb3",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})}),null==t?void 0:t.map(e=>(0,a.jsx)(oO.Z,{onClick:()=>p(e.id),onKeyPress:t=>{"Enter"===t.key&&p(e.id)},...lr,children:(0,a.jsx)(oD.e,{children:(0,a.jsxs)(eg.U,{children:[(0,a.jsx)(tI.K,{spacing:0,children:(0,a.jsxs)(eg.U,{children:[e.faviconUrl&&(0,a.jsx)(np.E,{w:"4",src:e.faviconUrl}),(0,a.jsx)(e3.x,{fontWeight:"600",children:e.name})]})}),(0,a.jsx)(e4.L,{}),(0,a.jsx)(O.G,{icon:T.eFW})]})})},e.id))]})]})]})},lo=()=>{let{isOpen:e,onOpen:t,onClose:n}=(0,nd.M)({id:"MoveToSiteDisclosure"}),{currentWorkspace:i}=(0,eX.SE)(),{data:r,loading:s}=(0,tW.bBo)({variables:{workspaceId:null==i?void 0:i.id},skip:!(null==i?void 0:i.id),fetchPolicy:"cache-first"}),o=null==r?void 0:r.sites;return s?(0,a.jsx)(tA.$,{size:"xs"}):o&&0===o.length?(0,a.jsx)(a.Fragment,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ej.z,{variant:"plain",onClick:t,colorScheme:"trueblue",children:(0,a.jsx)(h.cC,{id:"hsMvVQ"})}),(0,a.jsxs)(rf.u_,{isOpen:e,onClose:n,size:"3xl",children:[(0,a.jsx)(tK.Z,{}),(0,a.jsxs)(rg.h,{children:[(0,a.jsx)(rj.x,{children:(0,a.jsx)(h.cC,{id:"i4b0iJ"})}),(0,a.jsx)(tZ.o,{}),(0,a.jsx)(tJ.f,{maxH:"80vh",overflowY:"auto",children:(0,a.jsx)(ls,{sites:o})}),(0,a.jsx)(tX.m,{children:(0,a.jsx)(ej.z,{mr:3,onClick:n,children:(0,a.jsx)(h.cC,{id:"yz7wBu"})})})]})]})]})},ll=e=>{let{onEnable:t,isLoading:n}=e;return(0,a.jsxs)(tI.K,{align:"center",justify:"center",spacing:4,flex:1,p:6,mt:8,bg:"gray.50",borderRadius:"md",children:[(0,a.jsx)(np.E,{src:"https://cdn.gamma.app/zc87vhr30n8uf3n/9f0b4d71d10f4d388e50febe89bb1853/optimized/Sal-Chill-Cloud.svg",w:"200px"}),(0,a.jsx)(nm.X,{fontFamily:"p22-mackinac-pro",fontWeight:"700",size:"md",textAlign:"center",css:{textWrap:"pretty"},children:(0,a.jsx)(h.cC,{id:"0864Ii",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})}),(0,a.jsx)(e3.x,{fontSize:"sm",children:(0,a.jsx)(h.cC,{id:"dapHcS",components:{0:(0,a.jsx)("strong",{}),1:(0,a.jsx)("strong",{}),2:(0,a.jsx)("code",{})}})}),(0,a.jsxs)(tI.K,{w:"100%",children:[(0,a.jsx)(ej.z,{variant:"solid",onClick:t,isLoading:n,children:(0,a.jsx)(h.cC,{id:"oL6HHo"})}),(0,a.jsx)(lo,{})]}),(0,a.jsx)(ej.z,{as:i4.r,variant:"ghost",isExternal:!0,href:"https://help.gamma.app/en/articles/8429268-how-to-publish-your-page-to-a-custom-domain",rightIcon:(0,a.jsx)(O.G,{icon:T.gJF,size:"sm"}),children:(0,a.jsx)(h.cC,{id:"Px95UX"})})]})};var la=n(28165),lc=n(38045),ld=n(25925);let lu=(0,lc.E)(d.xu),lh={initial:{opacity:0,translateY:-40},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:40},transition:{duration:.3}},lx=e=>{let{isLoading:t,onChange:n,isChecked:i,isDisabled:r,enabledText:s,disabledText:o}=e;return(0,a.jsxs)(c.k,{cursor:r?"not-allowed":"pointer",className:(0,u.cx)("gamma-switch-container",t&&"loading",i?"active":""),opacity:r?.6:1,children:[(0,a.jsx)(d.xu,{as:"label",className:"text",fontSize:"sm",justifyContent:"center",htmlFor:"gamma-checkbox",position:"relative",overflow:"hidden",children:(0,a.jsx)(ld.M,{initial:!1,children:t?(0,a.jsx)(lu,{as:"span",position:"absolute",...lh,children:(0,a.jsx)(tA.$,{size:"sm"})},"loading"):i?(0,a.jsx)(lu,{as:"span",position:"absolute",...lh,children:s},"checked"):(0,a.jsx)(lu,{as:"span",position:"absolute",...lh,children:o},"unchecked")})}),(0,a.jsxs)(d.xu,{as:"label",className:"switch",pointerEvents:r?"none":"auto",children:[(0,a.jsx)("input",{id:"gamma-checkbox",type:"checkbox",onChange:n,disabled:t||r}),(0,a.jsx)("span",{className:"slider round"})]})]})},lp=(0,la.F4)({"0%":{transform:"scale(1)",opacity:1},"50%":{transform:"scale(1.7)",opacity:0},"100%":{transform:"scale(1)",opacity:0}}),lm=(0,la.F4)({"0%":{transform:"scale(1)",opacity:1},"15%":{transform:"scale(1)",opacity:1},"60%":{transform:"scale(1.7)",opacity:0},"100%":{transform:"scale(1)",opacity:0}}),lf=(0,la.F4)({"0%":{transform:"scale(1)"},"30%":{transform:"scale(1)"},"50%":{transform:"scale(1.05)"},"70%":{transform:"scale(1)"},"100%":{transform:"scale(1)"}}),lg=e=>{let{icon:t,showDisabled:n=!1,shouldPulse:i=!1,bg:r="gray.200",color:s="gray.800"}=e;return(0,a.jsx)(d.Cd,{color:s,textAlign:"center",bg:r,size:8,opacity:n?.5:1,position:"relative",animation:i?"".concat(lf," 2.7s infinite"):"none",sx:{":before":i?{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",content:"''",boxShadow:"inset 0 0 0 3px #6910D166",transition:"transform 0.2s, opacity 0.2s",animation:"".concat(lp," 2.7s infinite")}:{},":after":i?{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",content:"''",boxShadow:"inset 0 0 0 2px #6910D133",transition:"transform 0.2s, opacity 0.2s",animation:"".concat(lm," 2.7s infinite")}:{}},children:n?(0,a.jsxs)("span",{className:"fa-stack",children:[(0,a.jsx)(O.G,{icon:T.u6k,className:"fa-stack-1x"}),(0,a.jsx)(O.G,{icon:t,className:"fa-stack-1x"})]}):(0,a.jsx)(O.G,{size:"1x",icon:t})})},lj=e=>{let{isLoading:t=!1,site:n,onChange:i,disabledText:r,doc:s}=e,o=(0,eD.Vr)(n),l=(0,rs.Lu)(),u=(0,eX.py)("manage",s),x=l||u,p=!!(t||r||!x),m=(0,eD.k2)(n),f=x?r||(t?(0,a.jsx)(h.cC,{id:"mkk40+"}):o?(0,a.jsx)(h.cC,{id:"f4CBNf"}):(0,a.jsx)(h.cC,{id:"5G4vd5"})):(0,a.jsx)(h.cC,{id:"Z2uNdQ"});return n?(0,a.jsxs)(eg.U,{w:"100%",justify:"space-between","data-testid":"toggle-website-settings",children:[(0,a.jsx)(d.xu,{children:(0,a.jsxs)(c.k,{alignItems:"center",children:[(0,a.jsx)(lg,{shouldPulse:m,bg:m?"#6910D1":"gray.200",color:m?"white":"gray.800",icon:m?T.cL$:T.g4A}),(0,a.jsxs)(d.xu,{ml:3,children:[(0,a.jsx)(eg.U,{children:(0,a.jsx)(e3.x,{children:m?(0,a.jsx)(h.cC,{id:"MuDTSp"}):o?(0,a.jsx)(h.cC,{id:"AAm5jh"}):(0,a.jsx)(h.cC,{id:"HzFHhy"})})}),(0,a.jsx)(c.k,{align:"center",children:(0,a.jsx)(eg.U,{spacing:1,align:"center",children:(0,a.jsx)(e3.x,{fontSize:"xs",color:"gray.500",css:{textWrap:"balance"},children:n&&m?(0,a.jsx)(ra,{site:n}):o?(0,a.jsx)(h.cC,{id:"N4VTXP"}):(0,a.jsx)(h.cC,{id:"1bmqGL"})})})})]})]})}),(0,a.jsx)(d.xu,{children:(0,a.jsx)(eC.kH,{label:f,placement:"top",shouldWrapChildren:!0,children:(0,a.jsx)(lx,{isChecked:o,isDisabled:p,isLoading:t,onChange:i})})})]}):null},lv=e=>{var t,n;let{doc:i,isOpen:r,onOpen:s,onPublishSettingsClose:o}=e,l=(0,ir.p)(),d=(0,U.TL)(),u=(0,U.CG)(e_.lH),x=(0,U.CG)(e_.$U),{editor:p}=(0,tS._i)(),{currentWorkspace:m}=(0,eX.SE)(),[g,j]=(0,f.useState)(!1),[v]=(0,tW.V$$)(),[C]=(0,tW.cxO)(),[b]=(0,tW.A0Z)(),[y]=(0,tW.UoQ)(),[k,w]=(0,f.useState)("domains"),S=i.id,E=i.title,I=null==m?void 0:m.id,A=null==i?void 0:null===(t=i.theme)||void 0===t?void 0:t.id,_=!1==!!i.site?null:(null===(n=i.site)||void 0===n?void 0:n.enabled)?"enabled":"disabled",T=(null==u?void 0:u.archived)?(0,a.jsx)(h.cC,{id:"VAyYv6"}):null,{query:O}=(0,eb.useRouter)();(0,ih.j)("showDomains"),(0,f.useEffect)(()=>{let e=oC.T.on("openSiteSettings",e=>{w(e),s()});return()=>{e()}},[s]),(0,f.useEffect)(()=>{"true"===O.showDomains&&oC.T.emit("openSiteSettings","domains")},[]);let D=(0,f.useCallback)(async()=>{if(I){j(!0),y({variables:{id:S,themeId:null}});try{await v({variables:{input:{workspaceId:I,name:E,themeId:A,routes:[{docId:S,path:"/"}]}},refetchQueries:["GetDoc"]}).then(e=>{let{data:t}=e;(0,e_.zs)(d)({site:null==t?void 0:t.createSite,docId:S})})}catch(e){console.error("[WebsiteSettingsModal] Failed to create site",e.message),l({title:(0,a.jsx)(h.cC,{id:"Pdboh4"}),description:(0,a.jsx)(h.cC,{id:"8wxFbh"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}finally{j(!1)}}},[v,d,S,E,A,l,y,I]),R=(0,f.useCallback)(async()=>{if(x){j(!0);try{await C({variables:{id:x},update:(e,t)=>{let{data:n}=t;e.updateQuery({query:tW.yE1,variables:{id:S}},e=>e&&e.doc?{...e,doc:{...e.doc,site:null==n?void 0:n.disableSite}}:e)}})}catch(e){console.error("[WebsiteSettingsModal] Failed to deactivate site",e.message),l({title:(0,a.jsx)(h.cC,{id:"ksq4sM"}),description:(0,a.jsx)(h.cC,{id:"VE0YVl"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}finally{j(!1)}}},[C,S,x,l]),P=(0,f.useCallback)(async()=>{if(x){j(!0);try{await b({variables:{id:x},update:(e,t)=>{let{data:n}=t;e.updateQuery({query:tW.yE1,variables:{id:S}},e=>e&&e.doc?{...e,doc:{...e.doc,site:null==n?void 0:n.enableSite}}:e)}})}catch(e){console.error("[WebsiteSettingsModal] Failed to re-activate site",e.message),l({title:(0,a.jsx)(h.cC,{id:"aQnYTJ"}),description:(0,a.jsx)(h.cC,{id:"E2sPQM"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}finally{j(!1)}}},[S,b,x,l]),L=(0,f.useCallback)(()=>{null===_?D():"enabled"===_?R():"disabled"===_&&P()},[D,R,P,_]);return(0,a.jsx)(eC.Wk,{isDark:!1,children:(0,a.jsx)(tV.d,{isOpen:r,onClose:o,size:"md",trapFocus:!1,children:(0,a.jsxs)(tY.s,{p:0,shadow:"xl",children:[(0,a.jsxs)(rj.x,{children:[(0,a.jsx)(h.cC,{id:"WtsmDd"})," ",(0,a.jsx)(os.C,{colorScheme:"green",ml:2,fontSize:"sm",letterSpacing:"normal",children:(0,a.jsx)(h.cC,{id:"YBt9YP"})})]}),(0,a.jsx)(tZ.o,{}),(0,a.jsxs)(tJ.f,{children:[(0,a.jsxs)(e5.g,{spacing:4,align:"stretch",children:[(0,a.jsx)(lj,{isLoading:g,site:u,doc:i,onChange:L,disabledText:T}),!!u&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rd,{context:"settings"}),(0,a.jsx)(rz.i,{}),"disabled"===_&&(0,a.jsxs)(nV.b,{status:"warning",mb:6,children:[(0,a.jsx)(rW.z,{}),(0,a.jsx)(h.cC,{id:"CHu+l0"})]}),(0,a.jsxs)(c.k,{direction:"column",children:[(0,a.jsx)(lt,{selectedPanel:k,setSelectedPanel:w}),"website"===k?(0,a.jsx)(o8,{showHeadings:!1,doc:i}):"domains"===k?(0,a.jsx)(o$,{showHeadings:!1}):"code"===k?(0,a.jsx)(le,{editor:p}):null]})]})]}),!u&&(0,a.jsx)(ll,{onEnable:L,isLoading:g})]})]})})})},lC=e=>{let{doc:t,label:n=(0,a.jsx)(h.cC,{id:"sAalO9"}),showUpsellBadge:i}=e,{isOpen:r,onClose:s,onOpen:o}=(0,nd.M)({id:"PublishSettingsDisclosure"}),{openUpsellModal:l}=(0,rU.z)(),c=(0,f.useCallback)(()=>l({segmentEvent:eM.AA.GAMMA_PRO_UPSELL_SITE_ADD_CUSTOM_DOMAIN}),[l]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rh.s,{icon:(0,a.jsx)(O.G,{icon:T.g4A,fixedWidth:!0}),onClick:i?c:o,children:(0,a.jsxs)(eg.U,{justifyContent:"space-between",alignItems:"center",children:[n,i&&(0,a.jsx)(d.xu,{children:(0,a.jsx)(oI.ER,{})})]})}),t&&(0,a.jsx)(lv,{isOpen:r,onOpen:o,doc:t,onPublishSettingsClose:s})]})};var lb=n(2969),ly=n(73582),lk=n(24772),lw=n(36371),lS=n(32099),lE=n(90935),lI=n(65050);let lA=(e,t)=>{let n=[],i=e=>{if(t(e)&&n.push(e),e.content)for(let t of e.content)i(t)};return i(e),n},l_=()=>({today:x.ag._({id:"ecUA8p"}),thisWeek:x.ag._({id:"yByRxz"}),earlier:x.ag._({id:"HGg4T/"})}),lT=()=>(0,a.jsxs)(tI.K,{children:[(0,a.jsx)(rN.O,{w:"max(350px, 30%)",h:10}),(0,a.jsx)(rN.O,{w:"max(320px, 22%)",h:5})]}),lO=e=>{let{createdTime:t,editors:n,isLatest:i,onClick:r,showPaywall:s,paywallCount:o}=e;if(!n||!n.length)return(0,a.jsx)(a.Fragment,{});let l=s?"linear-gradient(rgb(0, 0, 0) 15%, transparent 100%)":"",u=(0,a.jsxs)(lb.O,{flexDirection:"row",borderRadius:"base",style:{WebkitMaskImage:l,maskImage:l},border:"none",isDisabled:s,opacity:"1 !important",onClick:r,alignItems:"flex-start",width:"100%",textAlign:"left",children:[(0,a.jsxs)(c.k,{w:"100%",direction:"column",children:[(0,a.jsx)(e3.x,{fontSize:"sm",children:nA()((0,nC.P9)(t))}),(0,a.jsx)(e3.x,{fontSize:"xs",flex:1,children:n[0].displayName})]}),i&&(0,a.jsx)(os.C,{colorScheme:"green",py:"0.5",fontSize:"0.65em",children:(0,a.jsx)(h.cC,{id:"wL3cK8"})})]});return s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eC.kH,{placement:"top",isDisabled:!s,label:s?(0,a.jsx)(h.cC,{id:"PYTBm5",values:{paywallCount:o}}):void 0,children:(0,a.jsx)(d.xu,{mb:4,children:u})}),(0,a.jsx)(rM.m,{isNarrow:!0,segmentEvent:eM.AA.GAMMA_PRO_UPSELL_CALLOUT_CHANGE_HISTORY,description:(0,a.jsx)(h.cC,{id:"mVKYtH"})})]}):u},lD=e=>{var t;let n=[];return{groupedSnapshots:(0,f.useMemo)(()=>(0,nC.yd)({items:e,sortBy:"createdTime"}),[e]),paywalledSnapshotId:null===(t=n[0])||void 0===t?void 0:t.id,paywallCount:n.length}},lR=e=>{let{groupedSnapshots:t,paywalledSnapshotId:n,paywallCount:i,onClick:r,showFetchMore:s,onFetchMoreClick:o,isFetchingMore:l}=e;return(0,a.jsxs)(ly.t,{w:"100%",children:[Object.entries(t).filter(e=>{let[,t]=e;return t.length}).map((e,t)=>{let[s,o]=e;return(0,a.jsxs)(f.Fragment,{children:[(0,a.jsx)(eC.NZ,{px:4,py:2,mx:0,mt:2,children:l_()[s]}),o.map((e,s)=>{let{createdTime:o,editors:l,id:c}=e;return(0,a.jsx)(lO,{onClick:()=>r(c),isLatest:0===t&&0===s,createdTime:o,editors:l,showPaywall:n===c,paywallCount:i},c)})]},s)}),s&&(0,a.jsx)(ej.z,{isLoading:l,onClick:o,children:(0,a.jsx)(h.cC,{id:"yQ2kGp"})})]})},lP=()=>(0,a.jsxs)(ly.t,{w:"100%",children:[(0,a.jsx)(rN.O,{h:16}),(0,a.jsx)(rN.O,{h:16,mt:2}),(0,a.jsx)(rN.O,{h:16,mt:2}),(0,a.jsx)(rN.O,{h:16,mt:2}),(0,a.jsx)(rN.O,{h:16,mt:2}),(0,a.jsx)(rN.O,{h:16,mt:2}),(0,a.jsx)(rN.O,{h:16,mt:2}),(0,a.jsx)(rN.O,{h:16,mt:2})]}),lL=e=>{let{title:t,createdBy:n,createdTime:i,numSnapshots:r}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e3.x,{mt:1,children:(0,a.jsx)(h.cC,{id:"yf//Op",values:{numSnapshots:r,0:(0,rl.Dw)(i),1:(0,rl.Dw)(i)}})}),(0,a.jsx)(e3.x,{color:"gray.500",fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",children:(0,a.jsx)(h.cC,{id:"JVHTIo",values:{title:t,0:(null==n?void 0:n.displayName)?null==n?void 0:n.displayName:"Unknown",1:(0,rl.p6)(i,"PPp")}})})]})},lz="snapshot-editor-root",lG=e=>{let{id:t,doc:n,content:i}=e,r=(0,f.useMemo)(()=>{if(i)return lA(i,e=>e.type===lI.W4).map(e=>{var t;return{__typename:"Card",id:(null===(t=e.attrs)||void 0===t?void 0:t.id)||"",docId:n.id,title:(0,lS.getCardTitle)(e),createdTime:n.createdTime,updatedTime:n.updatedTime,archived:!1}})},[i,n]);return(0,a.jsx)(eP.fb,{reduxData:{cards:r},initialContent:i,doc:n,docId:n.id,scrollingParentSelector:".".concat(lz),isInsideDrawer:!0},t)},lN=e=>{var t;let{isOpen:n,onClose:i,doc:r}=e,s=(0,ir.p)(),{getCollaborativeEditorInstance:o}=(0,tS._i)(),[l,u]=(0,f.useState)(!1),[x,{data:p}]=(0,tW.e8E)();(0,tj.vm)(()=>{x({variables:{id:r.id}})},[r.id,x,n],[n]);let m=null==p?void 0:null===(t=p.doc)||void 0===t?void 0:t.currentSnapshotId,{loading:g,data:j,called:v,fetchMore:C}=(0,tW.pfN)({variables:{docId:r.id,first:25},skip:!r||!n,fetchPolicy:"network-only",nextFetchPolicy:"network-only"}),[b,{loading:y,data:k}]=(0,tW.opq)({nextFetchPolicy:"cache-only"}),w=(null==j?void 0:j.snapshots.edges.map(e=>e.node))||[],{groupedSnapshots:S,paywalledSnapshotId:E,paywallCount:I}=lD(w),A=null==j?void 0:j.snapshots.pageInfo,_=!!(!E&&v&&(null==A?void 0:A.hasNextPage)&&(null==A?void 0:A.endCursor)),T=(0,f.useCallback)(()=>{(null==A?void 0:A.hasNextPage)&&(null==A?void 0:A.endCursor)&&(u(!0),C({variables:{after:A.endCursor}}).finally(()=>{u(!1)}))},[C,null==A?void 0:A.endCursor,null==A?void 0:A.hasNextPage]),O=w[0];(0,f.useEffect)(()=>{(null==O?void 0:O.id)&&b({variables:{snapshotId:O.id,docId:r.id}})},[r.id,b,null==O?void 0:O.id]);let D=(0,og.$)(null==r?void 0:r.title),R="createdBy"in r?r.createdBy:void 0,P=null==r?void 0:r.createdTime,L=null==k?void 0:k.snapshot,z=L&&L.id===m,G=(0,lk.S)(lE._o);return(0,a.jsx)(eC.Wk,{isDark:!1,children:(0,a.jsxs)(tV.d,{placement:"bottom",onClose:i,isOpen:n,trapFocus:!0,isFullHeight:!0,blockScrollOnMount:!1,children:[(0,a.jsx)(tK.Z,{}),(0,a.jsxs)(tY.s,{borderTopRadius:"xl",h:"calc(var(--100vh) - 24px)",transform:"none !important",children:[(0,a.jsx)(tZ.o,{}),(0,a.jsxs)(rj.x,{borderBottom:"1px solid #000",borderColor:"gray.200",children:[g&&(0,a.jsx)(lT,{}),!g&&r&&w&&(0,a.jsx)(lL,{numSnapshots:(null==w?void 0:w.length)||0,createdBy:R,createdTime:P,title:D})]}),(0,a.jsx)(tJ.f,{p:0,h:"100%",children:(0,a.jsxs)(c.k,{direction:"row",h:"100%",children:[(0,a.jsx)(d.xu,{p:2,w:"17rem",overflowY:"auto",bg:"gray.50",children:(0,a.jsxs)(lw.m,{variant:"soft-rounded",orientation:"vertical",size:"md",children:[g&&(0,a.jsx)(lP,{}),!g&&w&&(0,a.jsx)(lR,{onClick:e=>{b({variables:{snapshotId:e,docId:r.id}})},groupedSnapshots:S,paywalledSnapshotId:E,paywallCount:I,showFetchMore:_,onFetchMoreClick:T,isFetchingMore:l})]})}),(0,a.jsx)(c.k,{flex:1,bg:"gray.100",overflowY:"scroll",justifyContent:"center",alignContent:"center",alignItems:"flex-start",width:"100%",height:"100%",className:lz,css:{"--editor-width":"100%","--editor-font-size":G},children:(0,a.jsxs)(c.k,{direction:"column",position:"relative",width:"100%",height:"100%",children:[(0,a.jsx)(t6.Y,{}),(!L||y)&&(0,a.jsx)(t0.AA,{}),L&&!y&&(0,a.jsx)(lG,{id:L.id,doc:r,content:null==L?void 0:L.content.default})]})})]})}),(0,a.jsx)(tX.m,{borderTop:"1px solid #000",borderColor:"gray.200",bg:"var(--drawer-bg)",zIndex:1,children:(0,a.jsxs)(ev.h,{spacing:4,children:[(0,a.jsx)(ej.z,{variant:"ghost",onClick:i,children:(0,a.jsx)(h.cC,{id:"dEgA5A"})}),(0,a.jsx)(eC.kH,{label:z?(0,a.jsx)(h.cC,{id:"HJo72u"}):(0,a.jsx)(h.cC,{id:"sonTm1"}),shouldWrapChildren:!0,children:(0,a.jsx)(ej.z,{variant:"solid",isDisabled:!L||z,onClick:()=>{var e;if(!L)return;let t=null==w?void 0:null===(e=w.find(e=>e.id===L.id))||void 0===e?void 0:e.createdTime,n=o();if(!n)return;n.commands.setContent(L.content.default,!0);let{annotationsAbsolute:r}=L.content;r?n.commands.restoreAnnotations(r):n.commands.clearAnnotations(),i(),s({title:(0,a.jsx)(h.cC,{id:"7ovf4C"}),description:(0,a.jsx)(h.cC,{id:"DTim6X",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc,0:t?(0,rl.p6)(t,"PPp"):"selected snapshot"}}),status:"success",duration:5e3,isClosable:!0})},children:(0,a.jsx)(h.cC,{id:"yKu/3Y"})})})]})})]})]})})},lM=e=>{let{doc:t}=e,{isOpen:n,onClose:i,onOpen:r}=(0,nd.M)({id:"snapshotsDrawer"});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rh.s,{icon:(0,a.jsx)(O.G,{icon:T.SZw,fixedWidth:!0}),onClick:r,children:(0,a.jsx)(h.cC,{id:"6Z5x06"})}),t&&(0,a.jsx)(lN,{doc:t,isOpen:n,onClose:i})]})},lU=()=>{let e=nB();return e?(0,a.jsx)(rh.s,{icon:(0,a.jsx)(O.G,{icon:T.Fzb,fixedWidth:!0}),as:i4.r,textDecoration:"none !important",href:e,target:(0,ey.Q5)()?"_self":"_blank",children:(0,a.jsx)(h.cC,{id:"7U0bM7"})}):null},lF=()=>(0,a.jsx)(rh.s,{icon:(0,a.jsx)(O.G,{icon:T.q2v,fixedWidth:!0}),onClick:()=>nx.pw.emit(nx.TI.OPEN_THEME_DRAWER,{}),children:(0,a.jsx)(h.cC,{id:"90/Rx7"})}),lW=e=>{let{editor:t}=e,n=(0,f.useCallback)(()=>{t&&t.commands.undo()},[t]);return(0,a.jsx)(rh.s,{icon:(0,a.jsx)(O.G,{icon:T.paY,fixedWidth:!0}),onClick:n,command:(0,eC.cE)("Mod+Z"),children:(0,a.jsx)(h.cC,{id:"9uI/rE"})})},lH=e=>{let{doc:t,toggleCommentsPanel:n,editorWrapperEl:i,scrollingParentSelector:r}=e,{isConnected:s,isInOfflineMode:o}=(0,v.$)(),l=(0,e0.ye)("editDocAI"),{user:c}=(0,eX.SE)(),u=(0,eX.py)("view",t),x=(0,eX.py)("comment",t),p=(0,eX.py)("edit",t),m=(0,eX.py)("manage",t),f=(0,U.CG)(e_.lH),g=(0,rs.lP)(),{editor:j}=(0,e1._)(),C=(0,U.CG)(F.hN),b=!!l||!m,y=!!c&&b&&!t.site,k=!!l&&x,w=!!(c&&0!==c.workspaceMemberships.length&&!t.site),S=(0,e0.ye)("docCustomCode")&&p,E=p&&j;if(!s){let e=E&&o&&!f,i=C&&o&&!f,r=k&&o&&!f,s=i||e||r;return(0,a.jsx)(lq,{children:(0,a.jsxs)(rp.k,{children:[f?(0,a.jsx)(d.xu,{pt:2,children:(0,a.jsx)(oE,{site:f})}):(0,a.jsx)(oj,{doc:t}),s&&(0,a.jsx)(ru.R,{}),i&&(0,a.jsx)(lW,{editor:j}),e&&(0,a.jsx)(oS,{}),r&&(0,a.jsx)(or,{toggleCommentsPanel:n})]})})}let I=t.site?(0,a.jsx)(h.cC,{id:"gKmuNS"}):void 0;return(0,a.jsxs)(nw.q,{zIndex:"popover",maxH:"100vh",minW:"280px",maxW:"360px",overflow:"auto",children:[(0,a.jsxs)(rp.k,{children:[f?(0,a.jsx)(ok,{doc:t,site:f}):(0,a.jsx)(oj,{doc:t}),(0,a.jsx)(ru.R,{}),C&&(0,a.jsx)(lW,{editor:j}),p&&(0,a.jsx)(lM,{doc:t}),t.site&&(0,a.jsx)(rL,{editorWrapperEl:i,scrollingParentSelector:r}),(0,a.jsx)(lU,{}),g&&(0,a.jsx)(lF,{}),E&&(0,a.jsx)(oS,{}),u&&!!c&&(0,a.jsx)(ob,{}),S&&(0,a.jsx)(ox,{editor:j})]}),f?(0,a.jsx)(ru.R,{}):null,(0,a.jsxs)(rp.k,{children:[f&&(0,a.jsx)(oE,{site:f}),f?null:(0,a.jsx)(ru.R,{}),k&&(0,a.jsx)(or,{toggleCommentsPanel:n}),y&&(0,a.jsx)(oi,{doc:t,mode:m?"full":"personal"}),m&&(0,a.jsx)(lC,{doc:t,label:I}),w&&(0,a.jsx)(ov,{doc:t,editor:j}),m&&(0,a.jsx)(rC,{site:f}),!t.site&&m?(0,a.jsx)(op,{doc:t}):null]})]})},lq=e=>{let{children:t}=e;return(0,a.jsxs)(nw.q,{zIndex:"popover",maxH:"100vh",minW:"280px",maxW:"360px",overflow:"auto",children:[(0,a.jsx)(J.V,{description:(0,a.jsx)(h.cC,{id:"0CAvhs"}),isConnected:!1,maxWidth:"300px"}),t]})};var lB=n(82729);let lV=e=>{let{length:t,idealLength:n,maxLength:i}=e;return(0,a.jsxs)(e3.x,{fontSize:"xs",color:t>=i?"red.400":"gray.500",children:[t>=i&&(0,a.jsx)(O.G,{icon:e6.e7M})," ",t,"/",n]})};var lK=n(40914),lY=n(92768),lZ=n(37733);let lJ=(e,t)=>{var n;return null==e?void 0:null===(n=e.routes.find(e=>e.docId===t))||void 0===n?void 0:n.path},lX=e=>{let{openOtherDocModal:t}=e,n=(0,ef.ff)("gray.200","gray.600"),i=(0,ir.p)(),[r,s]=(0,f.useState)(!1),o=(0,o_._O)(),l=(0,U.CG)(tF.yx),c=(0,U.CG)(e_.lH),[u,{loading:x}]=(0,tW.qbt)(),p=lJ(c,null==l?void 0:l.id),[m,g]=(0,f.useState)(()=>(0,eD.es)(p||"")),[j,v]=(0,f.useState)(()=>(0,eD.es)(p||"")),C=(0,eD.gT)({routes:(null==c?void 0:c.routes)||[],path:(0,eD.fJ)(m),docId:null==l?void 0:l.id}),b=!!C,y=j!==m&&!b,k=(0,f.useCallback)(()=>{g(j)},[j]),w=(0,f.useCallback)(()=>{if(!y)return;if(!(null==c?void 0:c.id)||!(null==l?void 0:l.id)){console.error("Missing site or doc");return}let e=(0,eD.Is)(m);u({variables:{input:{siteId:c.id,docId:l.id,path:e}},refetchQueries:["GetSite"]}).then(()=>{v((0,eD.es)(e)),g((0,eD.es)(e)),s(!0)}).catch(e=>{i({status:"error",title:(0,a.jsx)(h.cC,{id:"dl5vwx"}),description:e.message}),console.error("[UrlSlugForm] Error setting route",e.message)})},[y,null==l?void 0:l.id,m,u,null==c?void 0:c.id,i]);return o?(0,a.jsxs)(tI.K,{children:[(0,a.jsx)(tI.K,{direction:"row",children:(0,a.jsxs)(e3.x,{children:[(0,a.jsx)(h.cC,{id:"dq8+qI"})," "]})}),(0,a.jsx)(e4.L,{}),(0,a.jsx)(tI.K,{spacing:2,children:(0,a.jsx)(eg.U,{spacing:1,children:(0,a.jsxs)(oo.NI,{as:"fieldset",isInvalid:b,children:[(0,a.jsx)(eg.U,{children:(0,a.jsxs)(nQ.B,{children:[(0,a.jsx)(lY.Ui,{children:"/"}),(0,a.jsx)(oA.I,{isDisabled:x,flex:2,value:m,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),w())},onChange:e=>{g((0,oz.IR)(e.currentTarget.value))},borderColor:n}),(0,a.jsx)(lZ.R,{in:y,unmountOnExit:!0,children:(0,a.jsx)(d.xu,{ml:2,children:(0,a.jsxs)(ev.h,{w:"100%",children:[(0,a.jsx)(ej.z,{variant:"solid",isLoading:x,isDisabled:b,onClick:w,children:(0,a.jsx)(h.cC,{id:"tfDRzk"})}),(0,a.jsx)(ej.z,{onClick:k,children:(0,a.jsx)(h.cC,{id:"dEgA5A"})})]})})})]})}),C?(0,a.jsx)(oa.J1,{justifyContent:"flex-end",alignItems:"flex-start",children:(0,a.jsx)(e3.x,{fontSize:"xs",children:(0,a.jsx)(h.cC,{id:"DQaTdC",components:{0:(0,a.jsx)(i4.r,{textDecoration:"underline",onClick:()=>t&&t(C.docId)})}})})}):(0,a.jsxs)(tI.K,{spacing:2,children:[(0,a.jsx)(oo.Q6,{fontSize:"sm",children:(0,a.jsx)(h.cC,{id:"ZMlbHK"})}),r&&(0,a.jsxs)(nV.b,{status:"warning",variant:"left-accent",fontSize:"sm",children:[(0,a.jsx)(rW.z,{}),(0,a.jsx)(nY.X,{children:(0,a.jsx)(h.cC,{id:"ZyBxCy"})})]})]})]})})})]}):(0,a.jsx)(a.Fragment,{})},lQ=e=>{let{inModal:t=!1,openOtherDocModal:n}=e,{editor:i}=(0,e1._)(),{isInOfflineMode:r}=(0,v.$)(),s=(0,f.useCallback)((e,t)=>{null==i||i.commands.updateNestedAttributesAtPos(0,{settings:{[e]:t}})},[i]),{metaDescription:o}=(0,U.CG)(F.US),l=(0,U.CG)(F.yx),c=(0,U.CG)((0,lK.cn)(null==l?void 0:l.id)),d=(0,U.CG)(lK.$4),[u,p]=(0,f.useState)(()=>(null==l?void 0:l.title)||""),[m,g]=(0,f.useState)(()=>o||""),j=l&&!!l.site&&(0,eD.Vr)(l.site),[C]=(0,tW.D1_)(),b=(0,f.useCallback)(e=>{l&&C({variables:{id:l.id,title:e,titleEdited:!0}})},[l,C]),k=(0,tj.Kt)(b,300),w=(0,f.useCallback)(e=>{p(e.target.value.substring(0,oJ.S8)),k(e.target.value.substring(0,oJ.S8))},[k]),S=(0,f.useCallback)(e=>{s("metaDescription",e)},[s]),E=(0,tj.Kt)(S,300),I=(0,U.CG)(lK.NN),A=null==I?void 0:I.previewUrl,_=(0,Z.dU)(null==l?void 0:l.organization),T=(0,y.U)(u||c,_),O=(0,y.V)(m||d,_),D=(0,ef.ff)("gray.200","gray.600");return(0,a.jsxs)(tI.K,{spacing:4,children:[(0,a.jsxs)(oo.NI,{children:[(0,a.jsxs)(eg.U,{justifyContent:"center",children:[(0,a.jsx)(ol.l,{flex:"1",children:(0,a.jsx)(h.cC,{id:"MHrjPM"})}),(0,a.jsx)(lV,{length:u.length||0,idealLength:oJ.si,maxLength:oJ.S8})]}),(0,a.jsx)(oA.I,{value:u,placeholder:c||x.ag._({id:"bTzMt5"}),_placeholder:{opacity:1,color:"gray.500"},onKeyDown:e=>{"Enter"===e.key&&b(u)},onChange:w,isDisabled:r,"data-title-input":!0,borderColor:D})]}),(null==l?void 0:l.site)&&(0,a.jsx)(lX,{openOtherDocModal:n}),(0,a.jsxs)(oo.NI,{children:[(0,a.jsxs)(eg.U,{justifyContent:"center",children:[(0,a.jsx)(ol.l,{flex:"1",pt:0,children:(0,a.jsx)(h.cC,{id:"Nu4oKW"})}),(0,a.jsx)(lV,{length:m.length||0,idealLength:oJ.cl,maxLength:oJ.Us})]}),(0,a.jsx)(n$.g,{rows:t?2:4,value:m,placeholder:(null==d?void 0:d.trim())||x.ag._({id:"2VBqT4"}),onChange:e=>{g(e.target.value.substring(0,oJ.Us)),E(e.target.value.substring(0,oJ.Us))},borderColor:D})]}),(0,a.jsx)(l$,{previewTitle:T,previewDescription:O,screenshotUrl:A,isInOfflineMode:r,isSiteOn:j,inModal:t}),!r&&(0,a.jsx)(o5.V,{label:(0,a.jsx)(h.cC,{id:"SDyz5I"}),segmentEvent:tp.AA.GAMMA_PRO_UPSELL_PAGE_SETUP_REMOVE_WATERMARK,doc:l})]})},l$=e=>{let{previewTitle:t,previewDescription:n,screenshotUrl:i,isInOfflineMode:r,isSiteOn:s,inModal:o}=e,l=(0,eR.Yy)();return(0,a.jsxs)(tI.K,{p:4,pt:3,bg:l?"gray.800":"gray.100",borderRadius:"md",direction:o?"row":"column",spacing:3,children:[(0,a.jsxs)(tI.K,{spacing:2,flex:1,children:[(0,a.jsx)(e3.x,{size:"sm",children:(0,a.jsx)(h.cC,{id:"h8sMnd"})}),(0,a.jsx)(l0,{title:t,description:n,screenshotUrl:i,isOffline:r})]}),s&&(0,a.jsxs)(tI.K,{spacing:2,flex:1,pl:o?3:void 0,pt:o?void 0:3,borderLeft:o?"1px solid":void 0,borderTop:o?void 0:"1px solid",borderColor:l?"gray.700":"gray.200",children:[(0,a.jsx)(e3.x,{size:"sm",children:(0,a.jsx)(h.cC,{id:"d3xOlk"})}),(0,a.jsx)(l1,{title:t,description:n,screenshotUrl:i,isOffline:r}),(0,a.jsx)(e3.x,{fontSize:"sm",color:"gray.500",children:(0,a.jsx)(h.cC,{id:"Ubf8D8"})})]})]})},l0=e=>{let{title:t,description:n,screenshotUrl:i,isOffline:r}=e,s=(0,eR.Yy)();return(0,a.jsxs)(d.xu,{cursor:"not-allowed",bg:"white",border:"1px solid",borderColor:s?"gray.700":"gray.200",borderRadius:"md",overflow:"hidden",children:[(0,a.jsx)(lB.o,{ratio:1200/630,bg:"gray.300",borderBottom:"1px solid",borderColor:"gray.200",children:(0,a.jsx)(d.xu,{bgColor:"gray.200",bgImage:"url(".concat(i,")"),backgroundSize:"cover",position:"relative",children:r&&(0,a.jsx)(O.G,{icon:T.bKP,size:"lg"})})}),(0,a.jsxs)(tI.K,{px:4,py:3,spacing:1,children:[(0,a.jsx)(e3.x,{color:"gray.800",fontSize:"md",fontWeight:"bold",noOfLines:2,children:t}),(0,a.jsx)(e3.x,{color:"gray.800",fontSize:"xs",noOfLines:2,children:n})]})]})},l1=e=>{let{title:t,description:n}=e;return(0,a.jsxs)(tI.K,{cursor:"not-allowed",bg:"white",border:"1px solid",borderColor:"gray.200",borderRadius:"md",overflow:"hidden",px:4,py:3,spacing:1,pos:"relative",children:[(0,a.jsx)(e3.x,{color:"blue.600",fontSize:"lg",lineHeight:1.3,noOfLines:2,children:t}),(0,a.jsx)(e3.x,{color:"gray.700",fontSize:"sm",noOfLines:3,children:n})]})},l2=e=>{let{onPageMetadataModalClose:t,isPageMetadataModalOpen:n,openOtherDocModal:i}=e,r=(0,eR.Yy)();return(0,a.jsx)(eC.Wk,{isDark:r,children:(0,a.jsxs)(rf.u_,{onEsc:t,isOpen:n,onClose:t,size:"3xl",returnFocusOnClose:!1,children:[(0,a.jsx)(tK.Z,{}),(0,a.jsxs)(rg.h,{color:r?"white":"gray.800",bg:r?"gray.900":"white",mx:2,borderColor:r?"gray.700":"gray.200",children:[(0,a.jsx)(rj.x,{children:(0,a.jsx)(h.cC,{id:"aBZSpm"})}),(0,a.jsx)(tZ.o,{"data-share-panel-close-button":!0,onClick:e=>{e.preventDefault(),t()}}),(0,a.jsx)(rz.i,{}),(0,a.jsx)(tJ.f,{children:(0,a.jsx)(lQ,{inModal:!0,openOtherDocModal:i})}),(0,a.jsx)(rz.i,{}),(0,a.jsx)(tX.m,{children:(0,a.jsx)(ej.z,{onClick:e=>{e.preventDefault(),t()},variant:"solid",children:(0,a.jsx)(h.cC,{id:"DPfwMq"})})})]})]})})},l5=e=>{let{isDisabled:t,onClick:n,isPublishing:i}=e;return(0,a.jsx)(eC.kH,{placement:"top",label:(0,a.jsx)(h.cC,{id:"Bq2yPr"}),shouldWrapChildren:!0,isDisabled:!t,children:(0,a.jsx)(rh.s,{icon:(0,a.jsx)(d.xu,{children:(0,a.jsx)(O.G,{icon:T.PQh,fixedWidth:!0})}),onClick:n,closeOnSelect:!1,isDisabled:i||t,children:(0,a.jsxs)(c.k,{direction:"row",w:"100%",justify:"space-between",align:"center",children:[(0,a.jsx)(h.cC,{id:"jNnwuI"}),i&&(0,a.jsx)(tA.$,{size:"xs"})]})})})},l3=e=>{let{title:t,path:n}=e;return(0,a.jsxs)(a.Fragment,{children:[t?"".concat(t," "):"",n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(oP.E,{as:"span",fontFamily:"mono",children:n})," "]})]})},l4=e=>{let{onClose:t,doc:n,site:i,path:r}=e,{push:s}=(0,eb.useRouter)(),[o,{loading:l}]=(0,tW.nRC)(),c=(0,ir.p)(),d=(0,U.CG)(e_.B$),u=(0,f.useCallback)(async()=>{if((null==n?void 0:n.id)&&i){if(await o({variables:{id:n.id},refetchQueries:["GetSite","GetDoc"]}),c({title:(0,a.jsx)(h.cC,{id:"oMgC5V"}),description:(0,a.jsx)(h.cC,{id:"gw6aHP",components:{0:(0,a.jsx)(l3,{title:null==n?void 0:n.title,path:r})}}),status:"success",duration:1e4,position:"top",isClosable:!0}),d===n.id){let e=(0,ek.hm)({site:i,docId:n.id});e&&await s(e)}t()}},[null==n?void 0:n.id,null==n?void 0:n.title,i,d,o,c,r,t,s]);return(0,a.jsx)(eC.Wk,{isDark:!1,children:(0,a.jsxs)(rf.u_,{onClose:t,isOpen:!0,size:"xl",children:[(0,a.jsx)(tK.Z,{}),(0,a.jsxs)(rg.h,{children:[(0,a.jsx)(rj.x,{children:(0,a.jsx)(h.cC,{id:"kbKU/5"})}),(0,a.jsx)(tZ.o,{isDisabled:l}),(0,a.jsx)(tJ.f,{children:(0,a.jsxs)(tI.K,{spacing:4,children:[(0,a.jsx)(e3.x,{children:(0,a.jsx)(h.cC,{id:"YOtIqx",values:{0:null==n?void 0:n.title,1:r&&(0,a.jsx)(oP.E,{as:"span",fontFamily:"mono",colorScheme:"blackAlpha",children:r})}})}),(0,a.jsx)(e3.x,{color:"red.500",children:(0,a.jsx)(h.cC,{id:"2xOCJW"})})]})}),(0,a.jsx)(tX.m,{children:(0,a.jsxs)(ev.h,{children:[(0,a.jsx)(ej.z,{variant:"ghost",onClick:t,children:(0,a.jsx)(h.cC,{id:"dEgA5A"})}),(0,a.jsx)(ej.z,{variant:"hazardous",onClick:u,isLoading:l,children:(0,a.jsx)(h.cC,{id:"O1M1zi"})})]})})]})]})})},l6=e=>{var t;let{site:n,doc:i,path:r}=e,{isOpen:s,onOpen:o,onClose:l}=(0,w.q)({id:"confirm-remove-page-modal"}),c=(null==n?void 0:n.routes)&&(null==n?void 0:null===(t=n.routes)||void 0===t?void 0:t.length)>1;return(0,a.jsxs)(a.Fragment,{children:[s&&(0,a.jsx)(l4,{site:n,doc:i,path:r,onClose:l}),(0,a.jsx)(eC.kH,{placement:"top",isDisabled:c,label:(0,a.jsx)(h.cC,{id:"PBFhJK"}),shouldWrapChildren:!0,children:(0,a.jsx)(rh.s,{color:"red.500",isDisabled:!c,icon:(0,a.jsx)(d.xu,{children:(0,a.jsx)(O.G,{icon:T.XAH,fixedWidth:!0})}),onClick:o,children:(0,a.jsx)(h.cC,{id:"cnGeoo"})})})]})},l8=e=>{let{site:t,doc:n,route:i,isTopToolbar:r=!1,hasChanges:s,onToggleOffline:o,...l}=e,c=(0,rx.b)(),{openPageSetup:u}=(0,tB.AA)(),{editor:x}=(0,e1._)(),{replace:p}=(0,eb.useRouter)(),{isConnected:m}=(0,tW.$gs)(),g=(null==n?void 0:n.id)&&(0,eD.Rh)({site:t,docId:n.id}),{publishDoc:j,isPublishing:v}=iS({doc:n,site:t,path:g}),C=(0,eD.Vr)(t),b=(0,U.CG)(F.yx),y=(0,eX.py)("edit",b),k=(0,eX.py)("edit",b),w=(0,eX.py)("manage",b),S=(0,rs.O1)(),E=(0,U.CG)(F.hN),I=(0,f.useCallback)(()=>{(null==n?void 0:n.id)&&c({path:"".concat((0,eD.Is)(i.path),"-copy"),siteId:t.id,routes:t.routes,sourceDocId:n.id})},[c,null==n?void 0:n.id,i.path,t.id,t.routes]),{isOpen:A,onClose:_,onOpen:D}=(0,nd.M)({id:"page-metadata-modal"});return m?(0,a.jsx)(ro.h,{children:n&&(0,a.jsxs)(nw.q,{...l,zIndex:"popover",maxH:"100vh",minW:"280px",maxW:"380px",overflow:"auto",children:[(0,a.jsx)(ok,{doc:n,site:t,showCreatedInfo:!0}),(0,a.jsx)(ru.R,{}),k&&x&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rh.s,{icon:(0,a.jsx)(O.G,{icon:T.Lc0,fixedWidth:!0}),onClick:()=>u(i.docId,D),children:(0,a.jsx)(h.cC,{id:"aBZSpm"})}),(0,a.jsx)(l2,{isPageMetadataModalOpen:A,onPageMetadataModalClose:_,openOtherDocModal:e=>u(e,D)})]}),k&&x&&(0,a.jsx)(oS,{onClick:()=>u(i.docId,()=>oC.T.emit("openPageSetup","cards"))})," ",(0,a.jsx)(ru.R,{}),S&&!i.offline&&(s||v)&&(0,a.jsx)(l5,{onClick:j,isDisabled:!C,isPublishing:v}),(0,a.jsx)(rh.s,{icon:(0,a.jsx)(d.xu,{children:(0,a.jsx)(O.G,{icon:e6.sl_,fixedWidth:!0})}),onClick:()=>{p((0,ek.yQ)({docId:n.id,preview:!0}),void 0,{shallow:!0})},children:(0,a.jsx)(h.cC,{id:"rdUucN"})}),!!o&&(0,a.jsx)(rh.s,{onClick:o,icon:(0,a.jsx)(d.xu,{children:(0,a.jsx)(O.G,{icon:i.offline?T.gMD:T.uoY,fixedWidth:!0})}),children:i.offline?(0,a.jsx)(h.cC,{id:"i/zQgj"}):(0,a.jsx)(h.cC,{id:"ySCSAn"})}),(0,a.jsx)(ru.R,{}),k&&x&&(0,a.jsx)(rh.s,{icon:(0,a.jsx)(O.G,{icon:T.kZ_,fixedWidth:!0}),onClick:I,children:(0,a.jsx)(h.cC,{id:"IVskn1"})}),E&&r&&(0,a.jsx)(lW,{editor:x}),y&&r&&(0,a.jsx)(lM,{doc:n}),w&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ru.R,{}),(0,a.jsx)(l6,{site:t,doc:n,path:g})]})]})}):(0,a.jsx)(lq,{})},l9=e=>{if(!e)return{path:"untitled-page",title:x.ag._({id:"kveQAJ"})};if(0===e.filter(e=>e.path.startsWith("/untitled-page")).length)return{title:x.ag._({id:"kveQAJ"}),path:"untitled-page"};let t=Math.max(...e.map(e=>{let[t,n]=e.path.match(/^\/untitled-page-?(\d+)/)||["","1"];return Number(n)}));return{title:x.ag._({id:"kveQAJ"})+" "+String(t+1),path:"untitled-page-".concat(t+1)}},l7=e=>{let{site:t}=e,n=(0,rx.b)(),{isOpen:i,onClose:r,onOpen:s}=(0,nd.M)({id:"add-page-ai-modal"}),[o,l]=(0,f.useState)(!1),c=(0,f.useCallback)(()=>{s()},[s]),d=(0,f.useCallback)(()=>{let{path:e}=l9(null==t?void 0:t.routes);l(!0),n({path:(0,eD.Is)(e),siteId:null==t?void 0:t.id,routes:null==t?void 0:t.routes}).then(()=>{l(!1)})},[n,null==t?void 0:t.id,null==t?void 0:t.routes]);return(0,a.jsxs)(ny.v,{children:[(0,a.jsx)(eC.kH,{label:x.ag._({id:"yLRlZm"}),placement:"bottom",children:(0,a.jsx)(nk.j,{as:I.h,isRound:!0,size:"xs",isLoading:o,onFocus:e=>e.preventDefault(),"data-testid":"add-page",icon:(0,a.jsx)(O.G,{icon:T.r8p}),sx:{span:{flexGrow:0}}})}),(0,a.jsx)(ro.h,{children:(0,a.jsx)(nw.q,{maxW:"350px",zIndex:"tooltip",children:(0,a.jsxs)(rp.k,{title:x.ag._({id:"yLRlZm"}),children:[(0,a.jsx)(rh.s,{icon:(0,a.jsx)(O.G,{icon:e6.JyM,fixedWidth:!0}),onClick:c,children:(0,a.jsxs)(eg.U,{align:"flex-start",children:[(0,a.jsxs)(tI.K,{spacing:0,children:[(0,a.jsx)(e3.x,{children:(0,a.jsx)(h.cC,{id:"OppH33"})}),(0,a.jsx)(e3.x,{fontSize:"xs",color:"gray.500",children:(0,a.jsx)(h.cC,{id:"P/o+t+"})})]}),(0,a.jsx)(e4.L,{}),(0,a.jsx)(os.C,{h:"fit-content",colorScheme:"trueblue",ml:2,children:(0,a.jsx)(h.cC,{id:"jsQZMk"})})]})}),(0,a.jsx)(rh.s,{icon:(0,a.jsx)(O.G,{icon:T.r8p,fixedWidth:!0}),onClick:d,children:(0,a.jsxs)(tI.K,{spacing:0,children:[(0,a.jsx)(e3.x,{children:(0,a.jsx)(h.cC,{id:"SSZKB9"})}),(0,a.jsx)(e3.x,{fontSize:"xs",color:"gray.500",children:(0,a.jsx)(h.cC,{id:"S65lUr"})})]})})]})})}),(0,a.jsx)(iP,{isOpen:i,onClose:r})]})},ae=e=>{if(!e)return{path:"untitled-page",title:x.ag._({id:"kveQAJ"})};if(0===e.filter(e=>e.path.startsWith("/untitled-page")).length)return{title:x.ag._({id:"kveQAJ"}),path:"untitled-page"};let t=Math.max(...e.map(e=>{let[t,n]=e.path.match(/^\/untitled-page-?(\d+)/)||["","1"];return Number(n)}));return{title:x.ag._({id:"kveQAJ"})+" "+String(t+1),path:"untitled-page-".concat(t+1)}},at=e=>{let{isOpen:t,onClose:n,site:i}=e,r=(0,rx.b)(),[s,o]=(0,f.useState)(()=>ae(null==i?void 0:i.routes).title),[l,c]=(0,f.useState)(()=>ae(null==i?void 0:i.routes).path),d=(0,f.useRef)(null),[u,p]=(0,f.useState)(!1),m=((null==i?void 0:i.routes.map(e=>e.path))||[]).includes("/".concat(l)),g=(0,ef.ff)("gray.900","gray.50"),j=(0,f.useCallback)(()=>{u||m||(p(!0),r({title:s,path:(0,eD.Is)(l),siteId:null==i?void 0:i.id,routes:null==i?void 0:i.routes}).then(()=>{p(!1),n()}))},[r,m,u,n,l,null==i?void 0:i.id,null==i?void 0:i.routes,s]);return((0,f.useEffect)(()=>{t&&setTimeout(()=>{d.current&&d.current.select()},50)},[t]),i)?(0,a.jsxs)(rf.u_,{isOpen:t,onClose:n,size:"xl",children:[(0,a.jsx)(tK.Z,{}),(0,a.jsxs)(rg.h,{color:g,children:[(0,a.jsx)(rj.x,{children:(0,a.jsxs)(tI.K,{children:[(0,a.jsx)(e3.x,{children:(0,a.jsx)(h.cC,{id:"yLRlZm"})}),(0,a.jsx)(e3.x,{fontSize:"sm",color:"gray.500",fontWeight:"normal",letterSpacing:"normal",children:(0,a.jsx)(h.cC,{id:"7TUZvz"})})]})}),(0,a.jsx)(tZ.o,{}),(0,a.jsx)(tJ.f,{children:(0,a.jsxs)(tI.K,{spacing:4,children:[(0,a.jsxs)(oo.NI,{children:[(0,a.jsxs)(eg.U,{justifyContent:"center",children:[(0,a.jsx)(ol.l,{flex:"1",children:(0,a.jsx)(h.cC,{id:"MHrjPM"})}),(0,a.jsx)(lV,{length:s.length||0,idealLength:oJ.si,maxLength:oJ.S8})]}),(0,a.jsx)(oA.I,{ref:d,value:s,onChange:e=>{o(e.target.value),c((0,oz.IR)(e.target.value))},_placeholder:{opacity:1,color:"gray.500"},onKeyDown:e=>{"Enter"===e.key&&j()}})]}),(0,a.jsxs)(oo.NI,{isInvalid:m,children:[(0,a.jsx)(eg.U,{justifyContent:"center",children:(0,a.jsx)(ol.l,{flex:"1",children:(0,a.jsx)(h.cC,{id:"dq8+qI"})})}),(0,a.jsxs)(nQ.B,{children:[(0,a.jsx)(lY.Ui,{children:"/"}),(0,a.jsx)(oA.I,{fontFamily:"mono",value:l,onKeyDown:e=>{"Enter"===e.key&&j()},onChange:e=>{c((0,oz.IR)(e.target.value))},placeholder:x.ag._({id:"bTzMt5"}),_placeholder:{opacity:1,color:"gray.500"}})]}),m&&!u&&(0,a.jsx)(oa.J1,{children:(0,a.jsx)(h.cC,{id:"hw1fjn"})})]})]})}),(0,a.jsx)(tX.m,{children:(0,a.jsxs)(ev.h,{children:[(0,a.jsx)(ej.z,{colorScheme:"gray",variant:"ghost",onClick:n,children:(0,a.jsx)(h.cC,{id:"dEgA5A"})}),(0,a.jsx)(ej.z,{onClick:j,isDisabled:m,variant:"solid",isLoading:u,children:(0,a.jsx)(h.cC,{id:"yLRlZm"})})]})})]})]}):(0,a.jsx)(a.Fragment,{})},an=e=>{let{site:t}=e,{isOpen:n,onClose:i,onOpen:r}=(0,w.q)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(d.xu,{bgColor:"gray.50",textAlign:"center",p:4,m:2,children:[(0,a.jsx)(e3.x,{fontSize:"sm",children:(0,a.jsx)(h.cC,{id:"6TCEnS"})}),(0,a.jsx)(e3.x,{fontSize:"sm",mt:2,fontWeight:"bold",children:(0,a.jsx)(i4.r,{color:"trueblue.600",href:"#",onClick:r,children:(0,a.jsx)(h.cC,{id:"S0WoXy"})})})]}),n&&(0,a.jsx)(at,{isOpen:n,onClose:i,site:t})]})},ai=e=>{let{icon:t,isSelected:n,children:i,href:r}=e,s=(0,f.useRef)(null),o=(0,ef.ff)("gray.600","gray.50"),l=(0,ef.ff)("trueblue.50","whiteAlpha.100"),c=(0,ef.ff)("gray.900","gray.50"),u=(0,ef.ff)("blackAlpha.50","whiteAlpha.100"),h=(0,ef.ff)("gray.600","gray.50"),x=(0,ef.ff)("trueblue.400","trueblue.200");(0,f.useEffect)(()=>{if(!n||!(null==s?void 0:s.current))return;let{inView:e}=(0,eq.v4)(s.current)||{};e||s.current.scrollIntoView()},[n]);let p=(0,f.useCallback)(e=>{e.target.closest('[data-id="sidebar-item-menu-button"]')&&e.preventDefault(),e.target.closest('[data-id="sidebar-item-menu-list"]')&&e.stopPropagation()},[]);return(0,a.jsx)(nW(),{href:r,passHref:!0,shallow:!0,children:(0,a.jsx)(ej.z,{ref:s,onClick:p,variant:"ghost",justifyContent:"flex-start",fontWeight:"500",w:"100%",size:"sm",color:n?c:o,bgColor:n?l:"transparent",_hover:{bgColor:n?l:u,color:n?c:h},h:"auto",py:1.5,px:2,role:"group",children:(0,a.jsxs)(eg.U,{alignItems:"start",justify:"flex-start",w:"100%",spacing:2,children:[(0,a.jsx)(d.xu,{color:n?x:o,mt:"0.2em",w:4,children:t}),(0,a.jsx)(tI.K,{flex:1,direction:"row",minW:0,align:"start",justifyContent:"flex-start",children:i})]})})})},ar=e=>{let{title:t,children:n}=e;return(0,a.jsxs)(eg.U,{justify:"space-between",children:[(0,a.jsx)(e3.x,{fontSize:"sm",fontWeight:"600",px:1,py:1.5,color:"gray.500",children:t}),n&&n]})},as=(e,t,n)=>n?(0,a.jsx)(tA.$,{size:"xs"}):e?(0,a.jsx)(O.G,{icon:T.t22,fixedWidth:!0}):t?(0,a.jsx)(O.G,{icon:T.BKg,fixedWidth:!0}):(0,a.jsx)(O.G,{icon:T.gMD,fixedWidth:!0}),ao=e=>{let{site:t,isSelected:n,doc:i,route:r,hasChanges:s,onToggleOffline:o}=e,l=(0,ef.ff)("trueblue.50","whiteAlpha.200"),c=(0,ef.ff)("trueblue.100","whiteAlpha.200");return(0,a.jsx)(ny.v,{modifiers:[{name:"flip",enabled:!0,options:{fallbackPlacements:["right"]}}],children:e=>{let{isOpen:u}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(nk.j,{"data-id":"sidebar-item-menu-button",ml:3,as:I.h,isRound:!0,variant:"ghost",py:2,size:"xs",_hover:{bgColor:n?c:l},icon:(0,a.jsx)(d.xu,{className:"ellipsis-icon",transitionProperty:"common",transitionDuration:"normal",_groupHover:{opacity:1},_hover:{opacity:1},_active:{opacity:1},opacity:u?1:0,children:(0,a.jsx)(O.G,{icon:T.S6C,fixedWidth:!0})})}),(0,a.jsx)(ro.h,{children:(0,a.jsx)(l8,{site:t,doc:i,route:r,hasChanges:s,"data-id":"sidebar-item-menu-list",onToggleOffline:o})})]})}})},al=e=>{var t;let{route:n,isHome:i,isSelected:r}=e,{docId:s,doc:o}=n,l=(0,tj.gF)(),d=(0,U.CG)(e_.lH),u=(0,U.CG)((0,e_.hZ)(s)),x=(0,f.useRef)(null),p=(0,U.CG)(e_.B$),[m,{loading:g}]=(0,tW.qbt)(),j=as(i,u,g),v="currentColor",C=(0,ef.ff)("gray.500","gray.400"),b=(0,ef.ff)("trueblue.400","trueblue.200"),y=(0,f.useCallback)(async()=>{if(!(null==o?void 0:o.id)||!d)return;let e=!(null==n?void 0:n.offline);await m({variables:{input:{siteId:d.id,docId:o.id,offline:e,path:null==n?void 0:n.path}}})},[null==o?void 0:o.id,n,m,d]);(0,f.useEffect)(()=>{if(!x.current||p!==s)return;let{inView:e}=(0,eq.v4)(x.current)||{};e||x.current.scrollIntoView()},[p,s]);let k=(0,ek.yQ)({docId:s});return(0,a.jsxs)(ai,{icon:j,"data-sidebar-doc":s,isSelected:r,href:k,children:[(0,a.jsxs)(tI.K,{flex:1,spacing:"3px",alignItems:"flex-start",justifyContent:"flex-start",w:"100%",minW:0,children:[(0,a.jsx)(e3.x,{textAlign:"left",color:r?b:v,noOfLines:2,maxW:"100%",whiteSpace:"normal",children:(0,og.$)(null===(t=n.doc)||void 0===t?void 0:t.title)}),(0,a.jsxs)(eg.U,{color:C,children:[u&&!n.offline?(0,a.jsx)(eC.kH,{label:(0,a.jsxs)(tI.K,{spacing:1,children:[(0,a.jsx)(e3.x,{children:(0,a.jsx)(h.cC,{id:"cFW7WD"})}),(0,a.jsx)(e3.x,{fontSize:"xs",color:"whiteAlpha.700",children:(0,a.jsx)(h.cC,{id:"qliBJ3"})})]}),placement:"top",children:(0,a.jsx)(c.k,{bg:r?b:v,minW:1.5,minH:1.5,borderRadius:"full"})}):null,(0,a.jsx)(e3.x,{mt:"-1px",textAlign:"left",noOfLines:1,fontFamily:i?void 0:"mono",fontSize:"xs",whiteSpace:"normal",wordBreak:"break-all",children:i?(0,a.jsx)(h.cC,{id:"i0qMbr"}):n.path})]})]}),y&&l&&d&&(0,a.jsx)(ao,{site:d,doc:o,route:n,hasChanges:u,isSelected:r,onToggleOffline:y})]})},aa=()=>{let e=(0,U.CG)(e_.lH),{openSiteSettings:t}=(0,tB.AA)(),n=(0,U.CG)(e_.B$),{onlineRoutes:i,offlineRoutes:r}=(0,f.useMemo)(()=>{let t=((null==e?void 0:e.routes)?[...e.routes]:[]).sort(function(e,t){return e.path<t.path?-1:e.path>t.path?1:0}).sort((e,t)=>"/"===e.path?-1:"/"===t.path?1:0);return{onlineRoutes:t.filter(e=>!e.offline),offlineRoutes:t.filter(e=>e.offline)}},[null==e?void 0:e.routes]);return e?(0,a.jsxs)(tI.K,{spacing:2,w:"100%",p:0,children:[(0,a.jsx)(rd,{context:"pages",openSiteSettings:()=>t("website")}),(0,a.jsxs)(ar,{title:(0,a.jsx)(h.cC,{id:"wRR604"}),children:[(0,a.jsx)(e4.L,{}),(0,a.jsx)(l7,{site:e})]}),(0,a.jsxs)(tI.K,{spacing:1,px:0,children:[0===i.length&&(0,a.jsx)(an,{site:e}),i.map(e=>{let t=e.docId===n;return(0,a.jsx)(al,{route:e,isHome:"/"===e.path,isSelected:t},e.id)}),r.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ar,{title:(0,a.jsx)(h.cC,{id:"1DdXjE"})}),r.map(e=>{let t=e.docId===n;return(0,a.jsx)(al,{route:e,isHome:"/"===e.path,isSelected:t},e.id)})]})]})]}):(0,a.jsx)(a.Fragment,{})},ac=()=>{let e=(0,eR.Yy)();return(0,a.jsx)(eC.Wk,{isDark:e,children:(0,a.jsx)(e9.s,{bg:e?"gray.900":"white",borderRight:"1px solid",borderColor:e?"gray.800":"gray.200","data-panelid":"pages-panel",overflowX:"hidden",px:6,pt:4,children:(0,a.jsx)(aa,{})})})};ac.panelPosition="left",ac.panelName="pages";let ad=()=>{let{togglePanel:e,isPanelOpen:t}=en(ac,(0,rs.O1)()),n=(0,g.v9)(F.gh),i=(0,U.CG)(e_.lH),{editor:r}=(0,tS._i)(),s=(0,U.CG)(ew.tv),o=!!(i&&!(null!==s)&&i.routes.length>1&&r);return(0,tj.vm)(()=>{o&&e({override:"open",disableTransition:!1})},[e,o],[o]),(0,f.useEffect)(()=>{n===eK.q.SLIDE_VIEW&&e({override:"closed",disableTransition:!0})},[n,e]),{togglePagesPanel:e,isPagesPanelOpen:t}};var au=n(20816),ah=n(71508);let ax=[{transform:"translateX(0px)"},{transform:"translateX(10px)"},{transform:"translateX(0px)"},{transform:"translateX(-10px)"},{transform:"translateX(0px)"},{transform:"translateX(10px)"},{transform:"translateX(0px)"},{transform:"translateX(-10px)"},{transform:"translateX(0px)"}],ap={duration:400,easing:"ease-in-out"},am=e=>{var t;let{docId:n}=e,{onClose:i}=(0,w.q)(),{onPasswordSubmitted:r}=(0,e1._)(),[s,o]=(0,f.useState)(!1),[l,d]=(0,f.useState)(""),[u,p]=(0,f.useState)(!1),[m,g]=(0,f.useState)(""),j=(0,f.useRef)(null),[v,{data:C}]=(0,tW.VEy)();(0,f.useEffect)(()=>{v({variables:{docId:n}})},[n,v]);let b=(0,f.useCallback)(()=>{u||null==r||r(l).then(e=>{var t;let[n]=e;(null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.doc)?p(!0):(j.current&&j.current.animate(ax,ap),g(x.ag._({id:"jvNV6s",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})))})},[l,u,g,p,r]);return(0,a.jsxs)(rf.u_,{isOpen:!0,onClose:i,isCentered:!0,size:"xl",children:[(0,a.jsx)(tK.Z,{}),(0,a.jsxs)(rg.h,{ref:j,p:8,children:[(0,a.jsx)(rj.x,{children:(0,a.jsxs)(tI.K,{alignItems:"center",children:[(0,a.jsx)(sm.q,{src:(null==C?void 0:null===(t=C.publicDoc)||void 0===t?void 0:t.logoUrl)||ah.Z.src,size:"lg"}),(0,a.jsx)(nm.X,{children:(0,a.jsx)(h.cC,{id:"GZ6qi2"})}),(0,a.jsx)(e3.x,{fontSize:"md",letterSpacing:"normal",fontWeight:"500",children:(0,a.jsx)(h.cC,{id:"rp/zfh"})})]})}),(0,a.jsx)(tJ.f,{display:"flex",flexDirection:"column",alignItems:"center",children:(0,a.jsx)(tI.K,{as:"form",spacing:4,onSubmit:e=>{e.preventDefault(),l.length&&b()},w:"100%",children:(0,a.jsxs)(oo.NI,{isInvalid:!!m,children:[(0,a.jsx)(ol.l,{children:(0,a.jsx)(h.cC,{id:"8ZsakT"})}),(0,a.jsxs)(nQ.B,{children:[(0,a.jsx)(oA.I,{type:s?"text":"password",placeholder:"Enter the password",value:l,onChange:e=>{d(e.target.value)},borderColor:m?"red":"gray.200"}),(0,a.jsx)(au.x,{children:(0,a.jsx)(I.h,{variant:"ghost",size:"sm",onClick:()=>o(!s),"aria-label":x.ag._({id:"tniYMG"}),icon:s?(0,a.jsx)(O.G,{icon:T.Aq}):(0,a.jsx)(O.G,{icon:T.Mdf}),_focus:{outline:"none"}})})]}),m&&(0,a.jsx)(oa.J1,{children:m}),!m&&(0,a.jsx)(oo.Q6,{color:"gray.600",children:(0,a.jsx)(h.cC,{id:"tSTf2H",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})})]})})}),(0,a.jsx)(tX.m,{flex:1,w:"100%",children:(0,a.jsx)(c.k,{flex:1,align:"center",justify:"center",textAlign:"center",children:(0,a.jsx)(ej.z,{w:"100%",variant:"solid",isDisabled:!l.length,onClick:b,children:(0,a.jsx)(h.cC,{id:"xGVfLh"})})})})]})]})};var af=n(12971);let ag=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body",n=(0,U.TL)(),i=(0,eq.As)("editor"),r=ee(),s=(0,U.CG)(F.yn,tn()),o=(0,U.CG)(F.k8,tn()),l=!!(null==o?void 0:o.pos);(0,f.useEffect)(()=>{if(!e)return;let t=eA()(()=>{s&&n((0,F.Qx)({attached:!1}))},500,{leading:!0}),i=(0,eV.B$)({topOffset:100,requiredCookie:"spotlightScrollDebug=true"});return document.addEventListener("wheel",t,!0),()=>{i(),t.cancel(),document.removeEventListener("wheel",t,!0)}},[e,n,s,l,t]);let a=(0,U.CG)(F.ks,tn());(0,f.useEffect)(()=>{if(!e||a)return;let t=eA()(()=>{if(i.inProgress)return;let t=(0,af.lI)(e,100,r);if(!t){console.debug("[useHandleScrollAndSelectionChange][handleScroll] Unable to find topPosPct.");return}n((0,F.Us)(t))},250,{trailing:!0,maxWait:500}),s=eA()(()=>{if(e.state.selection instanceof rI.c)return;let t=document.querySelector(i.scrollSelector||""),r=null==t?void 0:t.getBoundingClientRect(),s=e.state.selection.from,o=(0,af.Sh)(e,s);if(!t||!r||!o){console.debug("[useHandleScrollAndSelectionChange][handleSelectionChange] missing data",{domNodeToUse:o});return}let l=o.getBoundingClientRect(),a=parseFloat(((e.view.coordsAtPos(s).top-l.y)/l.height).toFixed(2));n((0,F.Us)({pos:s,pct:a}))},250,{trailing:!0,maxWait:500});return t(),e.on("selectionUpdate",s),window.addEventListener("scroll",t,!0),()=>{e.off("selectionUpdate",s),window.removeEventListener("scroll",t,!0)}},[e,n,i,a,r])},aj=()=>{let e=(0,ir.p)(),t=(0,U.TL)();return(0,f.useCallback)(n=>{let{collaborator:i,localIsFollowing:r,localIsAttached:s}=n,o={attached:!0};r?s?o.following=null:e.closeAll():(o.following=i.sessionId,e.closeAll(),e({duration:2e3,position:"bottom",render:function(){return(0,a.jsxs)(c.k,{bg:"gray.50",p:3,px:6,align:"center",borderRadius:"md",shadow:"md",children:[(0,a.jsx)(sm.q,{size:"sm",src:i.profileImageUrl,border:"solid 2px ".concat(i.color),color:rJ()(i.color).isDark()?"white":"black",bg:i.color}),(0,a.jsx)(e3.x,{ml:2,children:(0,a.jsx)(h.cC,{id:"lULvWe",values:{0:i.name}})})]})}})),console.debug("[CollaboratorsPanel] Clicked on collaborator ".concat(i.name,". Setting following to ").concat(o)),t((0,F.Qx)(o))},[e,t])},av=e=>{let{editor:t,collaborators:n,user:i}=e,r=(0,f.useRef)(!1),s=aj(),o=new URLSearchParams(window.location.search),l=o.get("following_id"),a=o.get("follow_on_start");(0,f.useEffect)(()=>{if(r.current||!a||(null==i?void 0:i.id)===l||!t)return;let e=n.find(e=>e.id===l);e&&(s({collaborator:e,localIsAttached:!1,localIsFollowing:!1}),r.current=!0)},[l,a,t,n,i,s])},aC="sessionId1",ab=eF.hj.create({addStorage:()=>({user:{}}),addCommands(){return{user:e=>()=>{let t=(0,U.bh)();return this.storage.user=i3()({},this.storage.user,e),t.dispatch((0,F.MU)({sessionId:aC})),t.dispatch((0,F.Tx)({collaborators:[this.storage.user]})),!0}}}}),ay=e=>{var t;let{docId:n,snapshotId:i,scrollingParentSelector:r,onCreate:s,theme:o,hideMadeWithGammaBadge:l=!1}=e,[u]=(0,f.useState)(()=>[tD.F,re.$1.configure({scrollerSelector:r}),ab,i7._g]),{user:h,isUserLoading:x,anonymousUser:p,color:m}=(0,eX.SE)(),[g]=(0,W.I)(H.H.gammaDocPasswords,{}),[j,v]=(0,f.useState)(),{data:C,loading:b,error:y}=(0,tW.EDv)({variables:{docId:n,snapshotId:i,password:g[n]},skip:!i}),k=(0,U.CG)(tF.yx);(0,f.useEffect)(()=>{!x&&j&&j.commands.user({id:(null==h?void 0:h.id)||p.id,color:m.value,sessionId:aC,idleSince:null,name:(null==h?void 0:h.displayName)||p.displayName||"",profileImageUrl:(null==h?void 0:h.profileImageUrl)||"",isReady:!x})},[j,h,m,x,p]);let w=C&&void 0!==C.snapshot&&!b&&k;return(0,a.jsxs)(d.xu,{"data-testid":"public-static-editor-wrapper",flex:"1",height:"100%",children:[!w||y?(0,a.jsxs)(c.k,{direction:"column",height:"100%",flex:"1",bg:"gray.100",alignItems:"center",justifyContent:"center",children:[!w&&(0,a.jsx)(tA.$,{}),y&&(0,a.jsxs)(tE.M,{h:"100%",children:["There was an error loading this ",Y.Yc,":"," ",y.message]})]}):(0,a.jsx)(d.xu,{"data-testid":"public-static-editor-wrapper-inner",transitionProperty:"common",transitionDuration:"750ms",transitionTimingFunction:"ease-out",opacity:w?1:0,children:(0,a.jsx)(eP.yE,{doc:k,editorId:"main",docId:n,theme:o||void 0,extensions:u,onCreate:e=>{let{editor:t}=e;v(t),setTimeout(()=>{s&&s(t)},10)},readOnly:!0,initialContent:null===(t=C.snapshot)||void 0===t?void 0:t.content.default,scrollingParentSelector:r})}),j&&(0,a.jsx)(eJ,{editor:j,backoffFactor:2}),!l&&(0,a.jsx)(rt.m,{docWorkspace:null==k?void 0:k.organization})]})},ak={[eK.q.DOC_VIEW]:"doc",[eK.q.SLIDE_VIEW]:"present"},aw=e=>{let t=(0,g.I0)(),n=(0,ek.SJ)().mode,i=(0,U.CG)(F.gh),r=(0,f.useCallback)(e=>{let t=e||i,{mode:n}=(0,ek.SJ)(),r=ak[t];n!==r&&(0,iX.lO)({query:{...(0,ek.SJ)(),mode:r},emitChange:!1})},[i]);(0,ry.r)(r,[i]),(0,f.useEffect)(()=>iX.fI.on("changed",()=>r()),[r]),(0,tj.vm)(function(){if(!e)return;let i=n===ak.SLIDE_VIEW?eK.q.SLIDE_VIEW:eK.q.DOC_VIEW,{cardId:s}=(0,ek.sY)();i===eK.q.SLIDE_VIEW&&(s?(console.debug("[useQuerySync] initializeModeFromQuery - Entering slide view -> spotlightCardById:",s),e.commands.spotlightCardById(s)):(console.debug("[useQuerySync] initializeModeFromQuery - Entering slide view -> spotlightCurrentCard"),e.commands.spotlightCurrentCard())),t((0,F.PM)({mode:i})),r(i)},[e,t,n,r],[e])};var aS=n(76643),aE=n(56960),aI=n(46007),aA=n(83091),a_=n(94207),aT=n(62502),aO=n(9237),aD=n(42156);let aR=e=>{let{isOpen:t,onClose:n,onSaveSuccess:i,docId:r}=e,s=(0,ir.p)(),o=(0,f.useRef)(null),[l,c]=(0,f.useState)(""),[d,{loading:u}]=(0,tW.D1_)(),x=()=>{d({variables:{id:r,title:l}}).then(()=>{c(()=>""),i()}).catch(e=>{console.error(e),s({title:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(h.cC,{id:"AToAqe",values:{0:e.message}})}),position:"top",status:"error"})})};return(0,a.jsxs)(rf.u_,{returnFocusOnClose:!1,onClose:n,closeOnOverlayClick:!0,isOpen:t,initialFocusRef:o,children:[(0,a.jsx)(tK.Z,{}),(0,a.jsxs)(rg.h,{children:[(0,a.jsx)(rj.x,{children:(0,a.jsx)(h.cC,{id:"kq/0Sg",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})}),(0,a.jsx)(tZ.o,{}),(0,a.jsx)(tJ.f,{children:(0,a.jsx)(oA.I,{ref:o,value:l,required:!0,placeholder:(0,og.$)(),onChange:e=>c(e.target.value),onKeyDown:e=>{"Enter"===e.key&&x()}})}),(0,a.jsx)(tX.m,{children:(0,a.jsx)(tI.K,{spacing:2,direction:"row",align:"center",children:(0,a.jsx)(ej.z,{isLoading:u,isDisabled:u||!l||!l.length,onClick:()=>{x()},children:(0,a.jsx)(h.cC,{id:"tfDRzk"})})})})]})]})},aP=(0,f.memo)(e=>{let{doc:t}=e,n=(0,f.useCallback)(()=>oC.T.emit("openSharePanel",{view:"invite"}),[]),{isOpen:i,onClose:r,onOpen:s}=(0,nd.M)({id:"analyticsModalDisclosure"}),{isOpen:o,onOpen:l,onClose:d}=(0,nd.M)({id:"titleModalDisclosure"}),{isInOfflineMode:u}=(0,v.$)(),p=(0,eM.z$)(),{user:m}=(0,eX.SE)(),g=(0,eX.py)("manage",t)&&!!m,j=(0,e0.ye)("editDocAI"),C=(0,f.useCallback)(()=>{t&&(t.title&&""!==t.title?n():l())},[t,n,l]),b=(0,f.useCallback)(e=>()=>{null==p||p.track(eM.AA.DOC_ANALYTICS_VIEWED,{docId:null==t?void 0:t.id,source:e,type:"full"}),s()},[p,null==t?void 0:t.id,s]);return g&&t&&!j?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.k,{children:(0,a.jsx)(eC.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,a.jsx)(h.cC,{id:"YaUqUV"}),children:(0,a.jsx)(aD.r,{"data-guider-highlight":"view-analytics-button","aria-label":x.ag._({id:"YaUqUV"}),isDisabled:u,onMouseDown:aO.br,onClick:b("toolbar_analytics_block"),icon:(0,a.jsx)(O.G,{icon:T.Ma4})})})}),o&&(0,a.jsx)(aR,{onClose:d,isOpen:o,onSaveSuccess:()=>{d(),n()},docId:null==t?void 0:t.id}),i&&(0,a.jsx)(on,{doc:t,onSharePanelOpen:C,onAnalyticsPanelClose:r,isAnalyticsPanelOpen:i,mode:"full"})]}):null});var aL=n(58905),az=n(75230),aG=n(64951),aN=n(25215),aM=n(58450),aU=n(41421),aF=n(14304),aW=n.n(aF),aH=n(48869),aq=n(19210);let aB=(0,lc.E)(c.k),aV=e=>{let{doc:t}=e;return(0,a.jsx)(aB,{initial:{opacity:1},animate:{opacity:1},exit:{opacity:0},children:(0,a.jsx)(ld.M,{initial:!1,children:(0,a.jsx)(aX,{doc:t})})})},aK=(0,f.memo)(e=>{let{doc:t}=e,{editor:n}=(0,tS._i)(),{isConnected:i}=(0,v.$)(),r=(0,ir.p)(),s=(0,f.useRef)(null),o=(0,f.useRef)(null),[l,{loading:c}]=(0,tW.D1_)(),[u,p]=(0,f.useState)(null),[m,g]=(0,f.useState)(!1),[j,C]=(0,f.useState)(!1),b=(0,eX.py)("edit",t),y=b?300:500,k=(0,f.useCallback)(()=>{if(!n)return"";let[e]=(0,eF.N2)(n.state.doc,eB.KH);return e&&(0,lS.getCardTitle)(e.node.toJSON())||""},[n]);(0,f.useEffect)(()=>{!t||m||c||(p(t.title||""),C(!!t.titleEdited))},[t,m,c]);let w=()=>{s.current.style.width=o.current.offsetWidth+0+"px"},S=(0,ef.ff)("gray.800","gray.200");return(0,a.jsx)(eC.kH,{label:b?i?(0,a.jsx)(h.cC,{id:"2wxgft"}):(0,a.jsx)(h.cC,{id:"Cb+Bgk"}):null,"aria-label":x.ag._({id:"2wxgft"}),children:(0,a.jsxs)(aL.C,{value:u||"",placeholder:u||k(),isDisabled:c||!b||!i,isPreviewFocusable:b,maxW:y,width:"100%",fontWeight:"normal",onCancel:()=>{w(),g(!1)},onFocus:()=>{w(),t&&!c&&g(!0)},onChange:e=>{w(),m&&(p(e),C(!!e))},onSubmit:()=>{if(!t||c)return;g(!1);let e=u||k();l({variables:{id:t.id,title:e,titleEdited:j}}).catch(e=>{console.error(e),r({title:(0,a.jsx)(h.cC,{id:"AToAqe",values:{0:e.message}}),position:"top",status:"error"})})},children:[(0,a.jsx)(az.w,{px:1,py:.5,display:m?"inline":"block",overflowX:"hidden",textOverflow:"ellipsis",color:j?S:"inherit"}),(0,a.jsx)(aG.V,{ref:s,px:1,py:.5,color:j?S:"inherit",maxW:y,_focus:{outline:"none",shadow:"0 0 0 2px rgb(66 153 225 / 60%)"}}),(0,a.jsx)(d.xu,{ref:o,as:"span",display:"inline-block",position:"absolute",left:"-9999px",opacity:0,zIndex:-1,minW:"180px",px:1,dangerouslySetInnerHTML:{__html:aW().sanitize((u||"").replace(/\s/g,"&nbsp;"))}})]})})});aK.displayName="EditableDocTitle";let aY=e=>{let{cardId:t,isEllipsis:n,value:i,onClick:r}=e,s=(0,ti.c)(t);if(n)return(0,a.jsx)(O.G,{icon:T.cNd});if(!t&&!i)return null;let o=i||(null==s?void 0:s.title)||"";return(0,a.jsx)(e3.x,{noOfLines:1,onClick:r,maxW:180,fontWeight:"normal",children:o})},aZ=e=>{let{isPresentModeFlat:t}=e;return e=>{let n=(0,F.gh)(e),i=(0,F.i2)(e)||"",r=(0,F.X9)(e).parents[i]||[];if("DOC_VIEW"===n||t)return[{isHome:!0},{isDocTitle:!0}];let s=r[0],o=r[r.length-1];return[{isHome:!0},r.length>1?{cardId:s}:null,r.length>2?{isEllipsis:!0}:null,r.length>0?{cardId:o}:null,{cardId:i}]}},aJ=()=>{let e=(0,e0.ye)("presentModeFlat");return(0,U.CG)(aZ({isPresentModeFlat:e}),(e,t)=>JSON.stringify(e)===JSON.stringify(t))},aX=(0,f.memo)(e=>{let{doc:t}=e,n=aJ(),[i]=(0,aq.X)(H.H.lastHomeUrl,"/"),{user:r}=(0,eX.SE)(),{isConnected:s,isInOfflineMode:o}=(0,v.$)(),{confirmNavigation:l}=(0,tS._i)(),{push:u}=(0,eb.useRouter)(),p=(0,el.iq)({base:"xs",sm:"sm"}),m=(0,ef.ff)("gray.500","gray.400"),f=(0,ef.ff)("gray.800","gray.100");return(0,a.jsxs)(eg.U,{spacing:0,as:ej.z,textAlign:"left",px:0,_hover:{color:f},h:8,bg:"transparent",boxShadow:"none",border:"none",children:[(0,a.jsx)(aN.a,{display:"flex",alignItems:"center",whiteSpace:"nowrap",size:p,spacing:["4px","8px"],separator:(0,a.jsx)(d.xu,{color:"gray.300",mt:["0.2rem","0.125rem"],children:(0,a.jsx)(O.G,{icon:T._tD})}),children:n.map((e,s)=>{if(!e)return null;let o=s===n.length-1,{cardId:c,isEllipsis:d,isDocTitle:h,isHome:x,value:p}=e,f=x?"home":d?"ellipsis":c||p||s;if(x&&!r)return null;let g={as:nW(),href:i||"/",fontWeight:"normal","data-testid":"toolbar-home-link"};return(0,a.jsx)(aM.g,{children:(0,a.jsx)(aB,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},children:(0,a.jsx)(aU.A,{isCurrentPage:o,pointerEvents:o&&!h?"none":"inherit",color:o?m:"inherit",...x?{...g}:{},children:h?(0,a.jsx)(aK,{doc:t}):x?(0,a.jsx)(i4.r,{ml:-3,as:aD.h,href:g.href,onClick:e=>{!e.shiftKey&&(e.metaKey||e.ctrlKey)||(e.preventDefault(),l().then(()=>{u(g.href)}))},mr:-1,children:(0,a.jsx)(O.G,{size:"1x",icon:T.J9Y})}):(0,a.jsx)(aY,{cardId:c,value:p,isEllipsis:d,onClick:()=>{c&&(0,aH.D)({cardId:c,method:"push"})}})})},f)},f)})}),!s&&(0,a.jsx)(eC.kH,{label:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e3.x,{mr:2,children:(0,a.jsx)(h.cC,{id:"ysdDIA"})}),o&&(0,a.jsx)(e3.x,{color:"gray.300",children:(0,a.jsx)(h.cC,{id:"+QNhGE"})})]}),"aria-label":x.ag._({id:"IcHxhR"}),children:(0,a.jsx)(c.k,{color:"gray.500",alignItems:"center",pr:3,children:(0,a.jsx)(O.G,{icon:T.bKP})})})]})});aX.displayName="BreadcrumbGroup";var aQ=n(82642),a$=n(62453),a0=n(93274),a1=n(3422);let a2=(0,f.createContext)(null);var a5=n(85886);let a3=e=>!e.isLayoutDirty&&e.willUpdate(!1),a4=e=>!0===e,a6=e=>a4(!0===e)||"id"===e,a8=({children:e,id:t,inheritId:n,inherit:i=!0})=>{void 0!==n&&(i=n);let r=(0,f.useContext)(a1.p),s=(0,f.useContext)(a2),[o,l]=(0,a5.N)(),a=(0,f.useRef)(null),c=r.id||s;null===a.current&&(a6(i)&&c&&(t=t?c+"-"+t:c),a.current={id:t,group:a4(i)&&r.group||function(){let e=new Set,t=new WeakMap,n=()=>e.forEach(a3);return{add:i=>{e.add(i),t.set(i,i.addEventListener("willUpdate",n))},remove:i=>{var r;e.delete(i),null===(r=t.get(i))||void 0===r||r(),t.delete(i),n()},dirty:n}}()});let d=(0,f.useMemo)(()=>({...a.current,forceRender:o}),[l]);return f.createElement(a1.p.Provider,{value:d},e)},a9=()=>{let{user:e,anonymousUser:t}=(0,eX.SE)(),n=(0,g.I0)(),i=(0,ir.p)(),{editor:r}=(0,tS._i)(),{collaborators:s,followers:o}=(0,g.v9)((0,F._h)((null==e?void 0:e.id)||t.id));av({editor:r,collaborators:s,user:e});let l=(0,g.v9)(F.Ok),d=(0,g.v9)(F.e0),u=(0,g.v9)(F.yn),p=(0,g.v9)(F.gs),m=(0,g.v9)(F.JA);(0,f.useEffect)(()=>{l.forEach(e=>{i({duration:2e3,position:"bottom",render:function(){return(0,a.jsxs)(c.k,{bg:"gray.50",p:3,px:6,align:"center",borderRadius:"md",shadow:"md",children:[(0,a.jsx)(sm.q,{size:"sm",src:e.profileImageUrl,border:"solid 2px ".concat(e.color),color:rJ()(e.color).isDark()?"white":"black",bg:e.color,ignoreFallback:!0}),(0,a.jsx)(e3.x,{ml:2,children:(0,a.jsx)(h.cC,{id:"DSaSKH",values:{0:e.name}})})]})}})})},[l,i]),(0,f.useEffect)(()=>{let e=!u&&p&&!m;if(!r||!e)return;i.closeAll();let t=i({id:"detached-toast",render:()=>(0,a.jsxs)(c.k,{bg:"gray.50",p:3,px:6,m:4,justify:"flex-end",align:"center",borderRadius:"md",shadow:"md",children:[(0,a.jsx)(e3.x,{size:"sm",mr:6,children:(0,a.jsx)(h.cC,{id:"PjodLp"})}),(0,a.jsxs)(ev.h,{size:"sm",alignItems:"center",children:[(0,a.jsx)(ej.z,{onClick:()=>{n((0,F.Qx)({attached:!0}))},variant:"solid",children:(0,a.jsx)(h.cC,{id:"f/C2ic"})}),(0,a.jsx)(eC.kH,{label:(0,a.jsx)(h.cC,{id:"5JWVnj"}),children:(0,a.jsx)(I.h,{isRound:!0,variant:"ghost",size:"xs","aria-label":x.ag._({id:"5JWVnj"}),icon:(0,a.jsx)(aQ.T,{}),onClick:()=>{n((0,F.Qx)({attached:!1,following:null}))}})})]})]}),position:"bottom",duration:null});return()=>{i.close(t)}},[r,u,p,m,i,n]),(0,f.useEffect)(()=>{p||!r||r.isDestroyed||n((0,F.Qx)({following:null}))},[r,p,n]);let j=(0,el.iq)({base:4,md:6,xl:8})||6,v=j/(o.length?2:1),C=j/(s.length?2:1);return(0,a.jsx)(c.k,{children:(0,a.jsxs)(eg.U,{divider:(0,a.jsx)(a$.c,{borderColor:"gray.200"}),children:[o.length&&(0,a.jsx)(a7,{type:"FOLLOWERS",collaborators:o,max:C,isEveryone:0===s.length,localCollaborator:d,localIsAttached:u}),s.length&&(0,a.jsx)(a7,{type:"COLLABORATORS",collaborators:s,max:v,isEveryone:0===o.length,localCollaborator:d,localIsAttached:u})]})})};(r=o||(o={})).FOLLOWERS="FOLLOWERS",r.COLLABORATORS="COLLABORATORS";let a7=e=>{let{collaborators:t,localCollaborator:n,localIsAttached:i,type:r,max:s,isEveryone:o}=e,l=aj(),d="FOLLOWERS"===r,u=t.length>s,p=u?t.slice(0,s-1):t,m=u?t.length-s+1:0,f=e=>{let{localIsFollowing:t,collaborator:n}=e;d||l({localIsFollowing:t,localIsAttached:i,collaborator:n})};return(0,a.jsx)(a8,{children:(0,a.jsxs)(a0.H,{size:"sm",spacing:d?-2:0,children:[d&&(0,a.jsx)(ce,{isEveryone:o}),p.map((e,t)=>{var r;let s=(null==n?void 0:null===(r=n.memoState)||void 0===r?void 0:r.following)===e.sessionId,o=!!e.idleSince,l=!d&&(u||p.length-1!==t);return(0,a.jsx)(eC.Vw,{ignoreFallback:!0,name:e.name,label:(0,a.jsxs)(c.k,{direction:"column",justify:"center",align:"center",children:[(0,a.jsx)(e3.x,{children:e.name}),(0,a.jsx)(e3.x,{fontSize:"xs",children:d?(0,a.jsx)(h.cC,{id:"iRohzP"}):s&&i?(0,a.jsx)(h.cC,{id:"1QTvS5"}):(0,a.jsx)(h.cC,{id:"2Ldadb"})})]}),pointerEvents:o?"none":"auto",opacity:o?.4:1,transitionProperty:"common",transitionDuration:"normal",src:e.profileImageUrl,border:"solid 2px ".concat(e.color),nubbin:s&&i,bg:e.color,shadow:"base",color:rJ()(e.color).isDark()?"white":"black",cursor:d?"":"pointer",boxProps:l?{marginEnd:-2}:{},onClick:()=>f({localIsFollowing:s,collaborator:e})},e.sessionId)}),m>0&&(0,a.jsxs)(eC.Z9,{tooltipLabel:x.ag._({id:"25VyZX"}),onClick:e=>{var i;let r=t.find(t=>t.id===e.id);f({localIsFollowing:!!(r&&(null==n?void 0:null===(i=n.memoState)||void 0===i?void 0:i.following)===r.sessionId),collaborator:r})},avatars:t,count:m,disabled:d,children:[(0,a.jsx)(e3.x,{px:2,children:d?(0,a.jsx)(h.cC,{id:"vliZud",values:{0:t.length}}):(0,a.jsx)(h.cC,{id:"sC4bhw",values:{0:t.length}})}),!d&&(0,a.jsx)(e3.x,{px:2,fontSize:"sm",color:"gray.500",children:(0,a.jsx)(h.cC,{id:"miJbY4"})}),(0,a.jsx)(ru.R,{})]})]})})},ce=e=>{let{isEveryone:t}=e,[n,i]=(0,f.useState)(!1),[r,s]=(0,f.useState)(!1),[o,l]=(0,f.useState)(!1);return((0,f.useEffect)(()=>{!n&&t&&(s(!0),i(!0),setTimeout(()=>{s(!1)},3e3))},[t,n]),t)?(0,a.jsx)(d.xu,{fontSize:"sm",color:"",px:2,mr:2,children:(0,a.jsx)(eC.kH,{label:(0,a.jsx)(h.cC,{id:"w7dTyp"}),isOpen:o||r,children:(0,a.jsx)(d.xu,{mr:2,px:1,bg:"green.300",color:"green.900",borderRadius:"full",onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:(0,a.jsx)(O.G,{icon:T.Mdf})})})}):(0,a.jsx)(d.xu,{fontSize:"sm",color:"gray.700",pr:4,children:(0,a.jsx)(O.G,{icon:T.Mdf})})};var ct=n(46164);let cn=(0,lc.E)(d.xu),ci=e=>{let{commentFeedItems:t,editor:n,doc:i,user:r}=e;return n&&r?(0,a.jsx)(tI.K,{p:2,children:(0,a.jsx)(ld.M,{initial:!1,children:t.map(e=>(0,a.jsx)(cn,{layout:!0,initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},bg:"gray.100",borderColor:"gray.200",borderWidth:"1px",borderRadius:"md",shadow:"sm",children:(0,a.jsx)(ng.q,{comment:e,editor:n,selfUser:r,docId:i.id,userCanComment:!1,instanceType:"notification"},e.id)},e.id))})}):null};var cr=n(56666);function cs(e,t,n,i,r,s,o){try{var l=e[s](o),a=l.value}catch(e){n(e);return}l.done?t(a):Promise.resolve(a).then(i,r)}function co(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var s=e.apply(t,n);function o(e){cs(s,i,r,o,l,"next",e)}function l(e){cs(s,i,r,o,l,"throw",e)}o(void 0)})}}var cl=n(89644),ca=n.n(cl),cc=n(41857);function cd(e,t,n,i,r,s,o){try{var l=e[s](o),a=l.value}catch(e){n(e);return}l.done?t(a):Promise.resolve(a).then(i,r)}function cu(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var s=e.apply(t,n);function o(e){cd(s,i,r,o,l,"next",e)}function l(e){cd(s,i,r,o,l,"throw",e)}o(void 0)})}}function ch(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function cx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ch(Object(n),!0).forEach(function(t){var i;i=n[t],t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ch(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var cp="axios-retry";function cm(e){return!e.response&&!!e.code&&"ECONNABORTED"!==e.code&&cc(e)}var cf=["get","head","options"],cg=cf.concat(["put","delete"]);function cj(e){return"ECONNABORTED"!==e.code&&(!e.response||e.response.status>=500&&e.response.status<=599)}function cv(e){return!!e.config&&cj(e)&&-1!==cg.indexOf(e.config.method)}function cC(e){return cm(e)||cv(e)}function cb(){return 0}function cy(e){var t=e[cp]||{};return t.retryCount=t.retryCount||0,e[cp]=t,t}function ck(){return(ck=cu(function*(e,t,n,i){var r=n.retryCount<e&&t(i);if("object"==typeof r)try{return yield r,!0}catch(e){return!1}return r})).apply(this,arguments)}function cw(e,t){var n;e.interceptors.request.use(e=>(cy(e).lastRequestTime=Date.now(),e)),e.interceptors.response.use(null,(n=cu(function*(n){var{config:i}=n;if(!i)return Promise.reject(n);var{retries:r=3,retryCondition:s=cC,retryDelay:o=cb,shouldResetTimeout:l=!1}=cx(cx({},t),i[cp]),a=cy(i);if(yield function(e,t,n,i){return ck.apply(this,arguments)}(r,s,a,n)){a.retryCount+=1;var c=o(a.retryCount,n);if(e.defaults.agent===i.agent&&delete i.agent,e.defaults.httpAgent===i.httpAgent&&delete i.httpAgent,e.defaults.httpsAgent===i.httpsAgent&&delete i.httpsAgent,!l&&i.timeout&&a.lastRequestTime){var d=Date.now()-a.lastRequestTime;i.timeout=Math.max(i.timeout-d-c,1)}return i.transformRequest=[e=>e],new Promise(t=>setTimeout(()=>t(e(i)),c))}return Promise.reject(n)}),function(e){return n.apply(this,arguments)}))}cw.isNetworkError=cm,cw.isSafeRequestError=function(e){return!!e.config&&cj(e)&&-1!==cf.indexOf(e.config.method)},cw.isIdempotentRequestError=cv,cw.isNetworkOrIdempotentRequestError=cC,cw.exponentialDelay=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=100*Math.pow(2,e);return t+.2*t*Math.random()},cw.isRetryableError=cj;var cS=n(31003);class cE{constructor(e){(0,cr.Z)(this,"host",void 0),(0,cr.Z)(this,"apiKey",void 0),(0,cr.Z)(this,"userToken",void 0),(0,cr.Z)(this,"axiosClient",void 0),(0,cr.Z)(this,"socket",void 0),(0,cr.Z)(this,"socketConnected",!1),this.host=e.host,this.apiKey=e.apiKey,this.userToken=e.userToken||null,this.axiosClient=ca().create({baseURL:this.host,headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(this.apiKey),"X-Knock-User-Token":this.userToken}}),this.socket=new cS.Socket("".concat(this.host.replace("http","ws"),"/ws/v1"),{params:{user_token:this.userToken,api_key:this.apiKey}}),cw(this.axiosClient,{retries:3,retryCondition:this.canRetryRequest,retryDelay:cw.exponentialDelay})}connectSocket(){this.socketConnected||(this.socket.connect(),this.socket.onOpen(()=>{this.socketConnected=!0}))}disconnectSocket(){this.socket.disconnect()}createChannel(e,t){return this.socket.channel(e,t)}makeRequest(e){var t=this;return co(function*(){try{var n=yield t.axiosClient(e);return{statusCode:n.status<300?"ok":"error",body:n.data,error:void 0,status:n.status}}catch(e){return console.error(e),{statusCode:"error",status:500,body:void 0,error:e}}})()}canRetryRequest(e){return!!cw.isNetworkError(e)||!!e.response&&(e.response.status>=500&&e.response.status<=599||429===e.response.status)}}var cI=n(10161),cA=n.n(cI);function c_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function cT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c_(Object(n),!0).forEach(function(t){(0,cr.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}(s=l||(l={})).loading="loading",s.fetchMore="fetchMore",s.ready="ready",s.error="error";var cO={shouldSetPage:!0,shouldAppend:!1};function cD(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function cR(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cD(Object(n),!0).forEach(function(t){(0,cr.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cD(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}class cP{constructor(e,t,n){this.knock=e,this.feedId=t,(0,cr.Z)(this,"apiClient",void 0),(0,cr.Z)(this,"userFeedId",void 0),(0,cr.Z)(this,"channelConnected",!1),(0,cr.Z)(this,"channel",void 0),(0,cr.Z)(this,"broadcaster",void 0),(0,cr.Z)(this,"defaultOptions",void 0),(0,cr.Z)(this,"store",void 0),this.apiClient=e.client(),this.feedId=t,this.userFeedId=this.buildUserFeedId(),this.store=function(e){let t;let n=new Set,i=(e,i)=>{let r="function"==typeof e?e(t):e;if(r!==t){let e=t;t=i?r:Object.assign({},t,r),n.forEach(n=>n(t,e))}},r=()=>t,s=(e,i=r,s=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let o=i(t);function l(){let n=i(t);if(!s(o,n)){let t=o;e(o=n,t)}}return n.add(l),()=>n.delete(l)},o={setState:i,getState:r,subscribe:(e,t,i)=>t||i?s(e,t,i):(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(i,r,o),o}(e=>({items:[],networkStatus:l.ready,loading:!1,metadata:{total_count:0,unread_count:0,unseen_count:0},pageInfo:{before:null,after:null,page_size:50},setLoading:t=>e(()=>({loading:t})),setNetworkStatus:t=>e(()=>({networkStatus:t,loading:t===l.loading})),setResult:function(t){var{entries:n,meta:i,page_info:r}=t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cO;return e(e=>{var t;return{items:s.shouldAppend?(t={},e.items.concat(n).reduce((e,n)=>t[n.id]?e:(t[n.id]=!0,[...e,n]),[])).sort((e,t)=>new Date(t.inserted_at).getTime()-new Date(e.inserted_at).getTime()):n,metadata:i,pageInfo:s.shouldSetPage?r:e.pageInfo,loading:!1,networkStatus:l.ready}})},setMetadata:t=>e(()=>({metadata:t})),setItemAttrs:(t,n)=>{var i=t.reduce((e,t)=>cT(cT({},e),{},{[t]:n}),{});return e(e=>({items:e.items.map(e=>i[e.id]?cT(cT({},e),i[e.id]):e)}))}})),this.broadcaster=new(cA()),this.defaultOptions=n,this.apiClient.connectSocket(),this.channel=this.apiClient.createChannel("feeds:".concat(this.userFeedId),this.defaultOptions)}listenForUpdates(){return this.channelConnected||(this.channel.join().receive("ok",()=>{this.channelConnected=!0}),this.channel.on("new-message",e=>this.onNewMessageReceived(e))),()=>{try{this.channel.leave()}catch(e){console.error("error while leaving channel",e)}}}on(e,t){this.broadcaster.on(e,t)}off(e,t){this.broadcaster.off(e,t)}getState(){return this.store.getState()}markAsSeen(e){var t=this;return co(function*(){var n=new Date().toISOString();return t.optimisticallyPerformStatusUpdate(e,"seen",{seen_at:n},"unseen_count"),t.makeStatusUpdate(e,"seen")})()}markAsUnseen(e){var t=this;return co(function*(){return t.optimisticallyPerformStatusUpdate(e,"unseen",{seen_at:null},"unseen_count"),t.makeStatusUpdate(e,"unseen")})()}markAsRead(e){var t=this;return co(function*(){var n=new Date().toISOString();return t.optimisticallyPerformStatusUpdate(e,"read",{read_at:n},"unread_count"),t.makeStatusUpdate(e,"read")})()}markAsUnread(e){var t=this;return co(function*(){return t.optimisticallyPerformStatusUpdate(e,"unread",{read_at:null},"unread_count"),t.makeStatusUpdate(e,"unread")})()}markAsArchived(e){var t=this;return co(function*(){var{getState:n,setState:i}=t.store,r=n(),s=!0!==t.defaultOptions.include_archived,o=Array.isArray(e)?e:[e],l=o.map(e=>e.id),a=o.filter(e=>!e.seen_at).length,c=o.filter(e=>!e.read_at).length,d=cR(cR({},r.metadata),{},{total_count:r.metadata.total_count-o.length,unseen_count:r.metadata.unseen_count-a,unread_count:r.metadata.unread_count-c});if(s){var u=r.items.filter(e=>!l.includes(e.id));i(e=>e.setResult({entries:u,meta:d,page_info:e.pageInfo}))}else i(e=>{e.setMetadata(d),e.setItemAttrs(l,{archived_at:new Date().toISOString()})});return t.makeStatusUpdate(e,"archived")})()}markAsUnarchived(e){var t=this;return co(function*(){return t.optimisticallyPerformStatusUpdate(e,"unarchived",{archived_at:null}),t.makeStatusUpdate(e,"unarchived")})()}fetch(){var e=arguments,t=this;return co(function*(){var n=e.length>0&&void 0!==e[0]?e[0]:{},{setState:i,getState:r}=t.store,{networkStatus:s}=r();if(![l.loading,l.fetchMore].includes(s)){i(e=>{var t;return e.setNetworkStatus(null!==(t=n.__loadingType)&&void 0!==t?t:l.loading)});var o=cR(cR({},t.defaultOptions),n),a=yield t.apiClient.makeRequest({method:"GET",url:"/v1/users/".concat(t.knock.userId,"/feeds/").concat(t.feedId),params:o});if("error"===a.statusCode)return i(e=>e.setNetworkStatus(l.error)),{status:a.statusCode,data:a.error||a.body};var c={entries:a.body.entries,meta:a.body.meta,page_info:a.body.page_info};if(n.before){var d={shouldSetPage:!1,shouldAppend:!0};i(e=>e.setResult(c,d))}else if(n.after){var u={shouldSetPage:!0,shouldAppend:!0};i(e=>e.setResult(c,u))}else i(e=>e.setResult(c));return t.broadcast("messages.new",c),{data:c,status:a.statusCode}}})()}fetchNextPage(){var e=this;return co(function*(){var{getState:t}=e.store,{pageInfo:n}=t();n.after&&e.fetch({after:n.after,__loadingType:l.fetchMore})})()}broadcast(e,t){this.broadcaster.emit(e,t)}onNewMessageReceived(e){var t=this;return co(function*(){var{metadata:n}=e,{getState:i,setState:r}=t.store,s=i().items[0];r(e=>e.setMetadata(n)),t.fetch({before:null==s?void 0:s.__cursor})})()}buildUserFeedId(){return"".concat(this.feedId,":").concat(this.knock.userId)}optimisticallyPerformStatusUpdate(e,t,n,i){var{getState:r,setState:s}=this.store,o=Array.isArray(e)?e.map(e=>e.id):[e.id];if(i){var{metadata:l}=r(),a=t.startsWith("un")?o.length:-o.length;s(e=>e.setMetadata(cR(cR({},l),{},{[i]:Math.max(0,l[i]+a)})))}s(e=>e.setItemAttrs(o,n))}makeStatusUpdate(e,t){var n=this;return co(function*(){if(Array.isArray(e)){var i=e.map(e=>e.id);return yield n.apiClient.makeRequest({method:"POST",url:"/v1/messages/batch/".concat(t),data:{message_ids:i}})}return yield n.apiClient.makeRequest({method:t.startsWith("un")?"DELETE":"PUT",url:"/v1/messages/".concat(e.id,"/").concat(t)})})()}}class cL{constructor(e){(0,cr.Z)(this,"instance",void 0),this.instance=e}initialize(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new cP(this.instance,e,t)}}var cz="default";function cG(e){return"object"==typeof e?e:{subscribed:e}}class cN{constructor(e){(0,cr.Z)(this,"instance",void 0),this.instance=e}getAll(){var e=this;return co(function*(){var t=yield e.instance.client().makeRequest({method:"GET",url:"/v1/users/".concat(e.instance.userId,"/preferences")});return e.handleResponse(t)})()}get(){var e=arguments,t=this;return co(function*(){var n=(e.length>0&&void 0!==e[0]?e[0]:{}).preferenceSet||cz,i=yield t.instance.client().makeRequest({method:"GET",url:"/v1/users/".concat(t.instance.userId,"/preferences/").concat(n)});return t.handleResponse(i)})()}set(e){var t=arguments,n=this;return co(function*(){var i=(t.length>1&&void 0!==t[1]?t[1]:{}).preferenceSet||cz,r=yield n.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(n.instance.userId,"/preferences/").concat(i),data:e});return n.handleResponse(r)})()}setChannelTypes(e){var t=arguments,n=this;return co(function*(){var i=(t.length>1&&void 0!==t[1]?t[1]:{}).preferenceSet||cz,r=yield n.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(n.instance.userId,"/preferences/").concat(i,"/channel_types"),data:e});return n.handleResponse(r)})()}setChannelType(e,t){var n=arguments,i=this;return co(function*(){var r=(n.length>2&&void 0!==n[2]?n[2]:{}).preferenceSet||cz,s=yield i.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(i.instance.userId,"/preferences/").concat(r,"/channel_types/").concat(e),data:{subscribed:t}});return i.handleResponse(s)})()}setWorkflows(e){var t=arguments,n=this;return co(function*(){var i=(t.length>1&&void 0!==t[1]?t[1]:{}).preferenceSet||cz,r=yield n.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(n.instance.userId,"/preferences/").concat(i,"/workflows"),data:e});return n.handleResponse(r)})()}setWorkflow(e,t){var n=arguments,i=this;return co(function*(){var r=(n.length>2&&void 0!==n[2]?n[2]:{}).preferenceSet||cz,s=cG(t),o=yield i.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(i.instance.userId,"/preferences/").concat(r,"/workflows/").concat(e),data:s});return i.handleResponse(o)})()}setCategories(e){var t=arguments,n=this;return co(function*(){var i=(t.length>1&&void 0!==t[1]?t[1]:{}).preferenceSet||cz,r=yield n.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(n.instance.userId,"/preferences/").concat(i,"/categories"),data:e});return n.handleResponse(r)})()}setCategory(e,t){var n=arguments,i=this;return co(function*(){var r=(n.length>2&&void 0!==n[2]?n[2]:{}).preferenceSet||cz,s=cG(t),o=yield i.instance.client().makeRequest({method:"PUT",url:"/v1/users/".concat(i.instance.userId,"/preferences/").concat(r,"/categories/").concat(e),data:s});return i.handleResponse(o)})()}handleResponse(e){if("error"===e.statusCode)throw Error(e.error||e.body);return e.body}}class cM{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.apiKey=e,(0,cr.Z)(this,"host",void 0),(0,cr.Z)(this,"userToken",void 0),(0,cr.Z)(this,"apiClient",null),(0,cr.Z)(this,"userId",void 0),(0,cr.Z)(this,"feeds",new cL(this)),(0,cr.Z)(this,"preferences",new cN(this)),this.host=t.host||"https://api.knock.app",this.apiKey&&this.apiKey.startsWith("sk_"))throw Error("[Knock] You are using your secret API key on the client. Please use the public key.")}client(){return this.userId||this.userToken||console.warn("[Knock] You must call authenticate(userId, userToken) first before trying to make a request.\n        Typically you'll see this message when you're creating a feed instance before having called\n        authenticate with a user Id and token. That means we won't know who to issue the request\n        to Knock on behalf of.\n        "),this.apiClient||(this.apiClient=new cE({apiKey:this.apiKey,host:this.host,userToken:this.userToken})),this.apiClient}authenticate(e,t){this.userId=e,this.userToken=t}teardown(){this.apiClient&&this.apiClient.disconnectSocket()}}var cU=n(95405);let cF=e=>!!e.comment&&null!==e.timeout,cW=e=>{let{user:t,docId:n,docComments:i=[],pauseExiration:r=!1,duration:s=5e3}=e,o=(0,ir.p)(),l=null==t?void 0:t.id,a=(0,f.useMemo)(()=>{if(!l)return null;let e=new cM(cU.v.KNOCK_PUBLIC_KEY);return e.authenticate(l),e},[l]),[c,d]=(0,f.useState)({}),u=(0,f.useRef)(!0),h=(0,f.useRef)(r);h.current=r,(0,f.useEffect)(()=>()=>{u.current=!1},[]);let x=(0,f.useCallback)(()=>d({}),[]),p=(0,f.useCallback)(e=>{d(t=>Object.entries(t).reduce((t,n)=>{let[i,r]=n;return(!0===e?-1===r.timeout:i===e)||(t[i]=r),t},{}))},[]);(0,f.useEffect)(()=>{r||p(!0)},[p,r]),(0,f.useEffect)(()=>{Object.entries(c).forEach(e=>{let[t,{entry:n,timeout:r}]=e;if(null===r){let e=n.data.commentId,r=null==i?void 0:i.find(t=>t.id===e);if(r){let e=setTimeout(()=>{u.current&&(h.current?d(e=>{let n={...e};return n[t].timeout=-1,n}):p(t))},s);d(i=>({...i,[t]:{entry:n,comment:r,timeout:e}}))}}})},[c,i,s,p]),(0,f.useEffect)(()=>{if(!a||!n)return;let e=a.feeds.initialize(cU.v.KNOCK_FEED_ID,{source:"new-comment",status:"unseen"}),t=e.listenForUpdates();return e.on("messages.new",t=>{let{entries:i}=t,[r]=i;r.data.docId===n&&(d(e=>({...e,[r.id]:{entry:r,timeout:null}})),e.markAsSeen(r).then(()=>{console.debug("New notification marked as seen")}).catch(e=>{console.error("Unable to mark notification as seen",e)}))}),()=>{t()}},[n,o,a]);let{isConnected:m}=(0,v.$)();return(0,f.useEffect)(()=>{if(!a||!n)return;let e=a.client();m?e.connectSocket():e.disconnectSocket()},[n,m,a]),{reset:x,comments:Object.values(c).filter(cF).map(e=>e.comment)}},cH=e=>{var t;let{toggleCommentsPanel:n,isCommentsPanelOpen:i,doc:r,mode:s}=e,{user:o}=(0,eX.SE)(),{editor:l}=(0,tS._i)(),c=(0,e0.ye)("editDocAI"),[d,u]=(0,tj.XI)(),{comments:h,reset:x}=cW({user:o,docId:null==r?void 0:r.id,docComments:null==r?void 0:r.comments,pauseExiration:u}),p=!!(l&&r&&r.comments);(0,f.useEffect)(()=>{if(!p)return;let{commentId:e}=(0,ek.sY)();e&&nx.pw.emit(nx.TI.OPEN_POPUP_COMMENT,{commentId:e,highlightComment:!0})},[p]),(0,f.useEffect)(()=>{(i||s===eK.q.SLIDE_VIEW)&&x()},[i,x,s]);let m=!!h.length&&!i&&s!==eK.q.SLIDE_VIEW,g=(null==r?void 0:null===(t=r.comments)||void 0===t?void 0:t.filter(e=>e.status===tW.Ux9.Open).length)||0;return c&&0===g?null:(0,a.jsxs)(S.J,{isLazy:!0,lazyBehavior:"keepMounted",returnFocusOnClose:!1,isOpen:m,placement:"bottom",children:[(0,a.jsx)(E.x,{children:(0,a.jsx)(aD.h,{onMouseDown:aO.br,onClick:n,icon:(0,a.jsx)(O.G,{icon:T.Mzg}),isActive:i,"aria-label":i?"Hide comments":"Show comments",borderRadius:5,children:g})}),(0,a.jsx)(ro.h,{children:r&&(0,a.jsxs)(A.y,{bg:"white",shadow:"lg",border:"none",ref:d,children:[(0,a.jsx)(ct.Q,{bg:"white"}),(0,a.jsx)(ci,{editor:l,user:o,commentFeedItems:h,doc:r})]})})]})},cq=()=>{let{isInOfflineMode:e}=(0,v.$)();return(0,a.jsx)(c.k,{children:(0,a.jsx)(eC.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,a.jsx)(h.cC,{id:"EVnzPs"}),children:(0,a.jsx)(aD.r,{"data-guider-highlight":"design-partner-button","aria-label":"Edit with AI",colorScheme:"trueblue",variant:"plain",isDisabled:e,onClick:()=>{nU.T.emit("toggle",{})},icon:(0,a.jsx)(O.G,{icon:T.JyM})})})})};var cB=n(82655),cV=n(19376),cK=(0,n(76801).m)("div",{baseStyle:{fontSize:"0.24em",top:"50%",left:"50%",width:"100%",textAlign:"center",position:"absolute",transform:"translate(-50%, -50%)"}});cK.displayName="CircularProgressLabel";let cY=(e,t)=>{let n=e.querySelector(".chakra-progress__indicator");if(!n)return;let i=(null!=t?t:0)/100,r=(null!=i?i:0)*264,s="".concat(r," ").concat(264-r);n.setAttribute("stroke-dasharray",s)},cZ=e=>{let{duration:t=10,onClose:n,onMouseEnter:i,enabled:r,...s}=e,o=(0,f.useRef)(null),l=(0,ef.ff)("gray.200","gray.700"),c=(0,ef.ff)("trueblue.400","trueblue.300"),u=(0,ef.ff)("var(--chakra-colors-gray-700)","var(--chakra-colors-gray-300)");return(0,f.useEffect)(()=>{let e,i;let s=o.current;if(!s||!r)return;cY(s,0);let l=r=>{e||(e=r);let o=Math.min(100,(r-e)/(10*t));cY(s,o),o<100?i=requestAnimationFrame(l):null==n||n()};return i=requestAnimationFrame(l),()=>{cancelAnimationFrame(i)}},[n,r,t]),(0,a.jsx)(d.xu,{ref:o,onMouseEnter:i,cursor:"pointer",sx:{".chakra-progress__indicator":{transition:"none !important",opacity:1,display:r?"block":"none",stroke:c},".chakra-progress__track":{display:r?"block":"none",stroke:l}},...s,children:(0,a.jsx)(cV.D,{display:"block",size:"24px",thickness:"10px",onClick:n,children:(0,a.jsx)(cK,{children:(0,a.jsx)(O.G,{icon:T.g82,fontSize:"14px",style:{color:u,borderRadius:"6px"}})})})})};var cJ=n(77692),cX=n(96114),cQ=n(69274),c$=n(13312),c0=n(78180),c1=n(65927),c2=n(2529),c5=n(25762),c3=n(96443),c4=n(98082);let c6=()=>{let{generate:e}=(0,td.jz)("EditCardParallel",{}),{generate:t}=(0,td.jz)("TranslateCardParallel",{});return(0,f.useCallback)((n,i)=>(null==i?void 0:i.key)==="edit.translate"?t({...n,variables:{...n.variables,language:n.variables.request}}):e(n),[e,t])},c8=e=>{var t;let{editor:n}=e,i=c6(),r=(0,U.CG)(F.yx),s=(0,U.CG)(F.Pu),o=(0,U.qr)(),l=(0,U.CG)(nt.oh),a=(0,tf.W7)(),c=(0,iQ.VA)(n),d=(0,f.useCallback)(async e=>{var t;let{instructions:n="",inputHtml:l,operation:d}=e,u=(null==a?void 0:a.format)||"deck",h=(null===(t=c.aiOptions.imageOptions)||void 0===t?void 0:t.provider)||e0.VH.get("aiGeneratorDefaultImageProvider")||void 0;if(!r||!r.organization)throw Error("Doc or organization not found");let x=r.organization.id,p=(0,tu.nZ)(),m=performance.now(),f=(0,tm.D)(o),g={interface:"edit-card-parallel",interactionId:p,inputContent:l,inputMessage:n,inputData:{custom:!!d,operation:null==d?void 0:d.key,operationGroup:null==d?void 0:d.group,format:u,imageProvider:h},product:(0,c2.K9)(r.organization),docId:r.id};try{let{promise:e}=i({workspaceId:r.organization.id,variables:{inputHtml:l,request:n,format:u,outline:f,imageProvider:h},interactionId:p},d),t=null==a?void 0:a.settings.imageStyle;!t&&"aiGenerated"===h&&s&&(t=(0,c5.A)(s)),(0,tu.hq)(g);let o=await e;console.log("[EditCardParallel] Response",o);let c=(0,cX.Au)(o);return console.log("[EditCardParallel] Parsing HTML",c),{output:await Promise.all(c.map(async e=>(0,cQ.sj)(e,{docFormatKey:u,loadImages:!1,context:{workspaceId:x,docId:r.id,interactionId:p},imageOptions:{provider:h,generateStyle:t},theme:s}))),interactionId:p}}catch(e){throw(0,tu.pQ)({...g,errorMessage:e.message,errorCode:e.code,errorName:e.name,outputMessage:"Error editing doc",latency:performance.now()-m}),e}},[null==a?void 0:a.format,null==a?void 0:a.settings.imageStyle,null===(t=c.aiOptions.imageOptions)||void 0===t?void 0:t.provider,r,o,i,s]),u=(0,f.useCallback)(async e=>{let{instructions:t,operation:i}=e,r=(0,eB.Y0)(n.state.doc),s=t||(null==i?void 0:i.instructions);if(r&&s)try{o.dispatch((0,nt.dt)(!0));let e=[];r.forEach(t=>{var r;o.dispatch((0,nt.t)({cardId:t.node.attrs.id,suggestions:{status:"loading",loadingMessage:null==i?void 0:null===(r=i.loadingMessage)||void 0===r?void 0:r.call(i),variants:[]}})),e.push((0,tc.c)(n,t.node))});let t=e.join();console.log("[EditCardParallel] Input HTMLParts",e);let{output:l,interactionId:a}=await d({instructions:s,operation:i,inputHtml:t});if(console.log("[EditCardParallel] New cards",l),l.length!==r.length)throw Error("[EditCardParallel] Mismatch in number of cards");let c={};r.forEach((e,t)=>{var n;let r=l[t];r.attrs=(0,c4.yH)(e.node.attrs,r.attrs),c[e.node.attrs.id]=r,o.dispatch((0,nt.t)({cardId:e.node.attrs.id,suggestions:{status:"done",interactionId:a,selected:"v1",operation:i,instructions:s,variants:[{label:x.ag._({id:"HxF6Fk"}),isOriginal:!0,id:"original",card:e.node.toJSON()},{label:(null==i?void 0:null===(n=i.variationName)||void 0===n?void 0:n.call(i))||x.ag._({id:"YledUl"}),isOriginal:!1,id:"v1",card:r}]}}))}),c7(n,c)}catch(e){console.error("[EditCardParallel] Error regenerating card",e),r.forEach(e=>{o.dispatch((0,nt.t)({cardId:e.node.attrs.id,suggestions:{status:"error",variants:[]}}))})}finally{o.dispatch((0,nt.dt)(!1))}},[n,d,o]);return(0,f.useEffect)(()=>c0.T.on("translate",e=>{let{type:t,language:n}=e,i=c3.xd.find(e=>"edit.translate"===e.key);"doc"===t&&i&&u({instructions:"".concat(n.englishName," (").concat(n.key,")"),operation:i})}),[u]),{editDoc:u,acceptAll:(0,f.useCallback)(()=>{o.dispatch((0,nt.Mq)({}))},[o]),rejectAll:(0,f.useCallback)(()=>{c9(n,o.getState(),!0),o.dispatch((0,nt.Mq)({}))},[n,o]),status:l}},c9=(e,t,n)=>{let i=(0,nt.Ir)(t),r=e.chain();return Object.entries(i).forEach(t=>{let[i,s]=t,o=(0,eB.Bw)(e,i),l=s.variants.find(e=>!!e.isOriginal===n);o&&l&&l.id!==s.selected&&r.command(t=>{let{tr:n}=t,i=t$.NB.fromJSON(e.schema,l.card),r=n.mapping.map(o.pos);return n.replaceWith(r,r+o.node.nodeSize,i),!0})}),r.run()},c7=(e,t)=>{let n=(0,eB.Y0)(e.state.doc);if(!n)return;let i=n.map(n=>{let i=t[n.node.attrs.id];if(!i){console.warn("[useGenerateCard] Card not found. It may have been deleted while generating.");return}let r=t$.NB.fromJSON(e.state.schema,i),s=(0,F.Pu)((0,U.bh)().getState());return(0,c$.eM)(e,r,s),i}).filter(e=>!!e);console.log("[replaceDocWithCardVariants] content",i),e.chain().setMeta("isEditCardVariant",!0).setMeta("cardNotesHandled",!0).insertContentAt({from:1,to:e.state.doc.nodeSize-2},i).run()},de=()=>{let e=!!(0,U.CG)(e_.lH),{isOpen:t,onClose:n,onOpen:i}=(0,nd.M)({id:"TranslateDocDisclosure"}),r=(0,f.useCallback)(e=>{c0.T.emit("translate",{type:"doc",language:e}),n()},[n]);return{translateDocModal:t?(0,a.jsx)(c1.o,{isSite:e,isFullDoc:!0,onClose:n,startTranslation:r}):null,onTranslateDocOpen:i}},dt=(0,lc.E)(e5.g),dn=e=>{let{editor:t}=e,{isInOfflineMode:n}=(0,v.$)(),{openUpsellModal:i}=(0,rU.z)(),{editDoc:r,status:s,acceptAll:o,rejectAll:l}=c8({editor:t}),d=(0,eR.Yy)(),u=(0,f.useRef)(null),p=(0,f.useRef)(null),m=(0,e0.ye)("editCard2"),g=(0,ef.ff)("gray.200","whiteAlpha.200"),[j,C]=(0,f.useState)(),b=(0,f.useCallback)(()=>C(void 0),[]),y=(0,Z.Y)("edit_doc_ai"),{translateDocModal:k,onTranslateDocOpen:w}=de(),S="loading"===s,E=(0,f.useCallback)(e=>{var t;if(!y){i({segmentEvent:eM.AA.GAMMA_PRO_UPSELL_CALLOUT_EDIT_DOC_AI});return}if(o(),C(e.operation||"Editing"),(null===(t=e.operation)||void 0===t?void 0:t.key)==="edit.translate"){w();return}r(e)},[o,y,r,w,i]);return m?(0,a.jsxs)(eC.Wk,{isDark:d,children:[(0,a.jsx)(ny.v,{placement:"bottom-end",isLazy:!0,initialFocusRef:p,onOpen:()=>{C(void 0)},children:e=>{let{onClose:t,isOpen:i}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c.k,{direction:"column",children:[(0,a.jsx)(eC.kH,{label:(0,a.jsx)(h.cC,{id:"nIHiKm"}),placement:"bottom",children:(0,a.jsx)(nk.j,{as:aD.r,position:"relative",colorScheme:"trueblue","aria-label":x.ag._({id:"nIHiKm"}),borderRadius:"md",bg:i?g:void 0,isDisabled:S||n,icon:S?(0,a.jsx)(tA.$,{size:"sm"}):(0,a.jsx)(O.G,{icon:cB.JyM})})}),(0,a.jsx)(dr,{currentOperation:j,onConfirm:o,onReject:l,onClose:b})]}),(0,a.jsx)(ro.h,{children:(0,a.jsxs)(nw.q,{"data-doc-ai-menu":!0,minWidth:"320px",width:"fit-content",maxWidth:"min(360px, 80vw)",fontFamily:"Inter, sans-serif",fontSize:"md",border:"none",children:[(0,a.jsx)(cJ.M,{firstItemRef:u,inputRef:p,editCardIfAllowed:E,onClose:t,isDisabled:S,opacityFadeUpsell:!y,groups:["writing"],showCreditCosts:!1}),(0,a.jsx)(rM.m,{isNarrow:!0,mb:0,segmentEvent:eM.AA.GAMMA_PRO_UPSELL_CALLOUT_EDIT_DOC_AI,title:(0,a.jsx)(h.cC,{id:"mpbrVv",values:{GAMMA_PRO_PROPER_NOUN:Y.x8}}),description:(0,a.jsx)(h.cC,{id:"gNaWbA",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})})]})})]})}}),k]}):null},di={initial:{opacity:0,y:10},animate:{opacity:1,transition:{duration:.4,ease:[.21,1.02,.73,1]},y:0},exit:{opacity:0,scale:.9},transition:{duration:.4,ease:[.06,.71,.55,1]}},dr=e=>{var t,n,i;let{currentOperation:r,onConfirm:s,onReject:o,onClose:l}=e,d=(0,U.CG)(nt.oo),[u,p]=(0,f.useState)(!0),m="Edited"===r?r:"object"==typeof r?null===(t=r.completionMessage)||void 0===t?void 0:t.call(r):(0,a.jsx)(h.cC,{id:"MRZxAn"}),g=null!==(n=d.done)&&void 0!==n?n:0,j=null!==(i=d.error)&&void 0!==i?i:0,v=!!((g||j)&&r);(0,f.useEffect)(()=>{v||p(!0)},[v]);let C={activeColor:(0,ef.ff)("trueblue.500","trueblue.300"),hoverColorCloseButton:(0,ef.ff)(j?"red.200":"gray.100","whiteAlpha.200"),bg:(0,ef.ff)("white","gray.900"),bgError:(0,ef.ff)("red.100","red.700"),textColor:(0,ef.ff)("blackAlpha.800","whiteAlpha.900"),textErrorColor:(0,ef.ff)("red.500","red.100"),iconColor:(0,ef.ff)("blackAlpha.800","whiteAlpha.800")};return(0,a.jsx)(ld.M,{children:v&&(0,a.jsxs)(dt,{position:"absolute",bg:j?C.bgError:C.bg,borderRadius:"md",boxShadow:"md",overflow:"hidden",top:14,right:6,flexDirection:"row",spacing:2,p:2,onMouseEnter:()=>p(!1),...di,children:[j>0?(0,a.jsxs)(eg.U,{spacing:0,children:[(0,a.jsx)(c.k,{mx:2,justifyContent:"center",alignItems:"center",color:C.textErrorColor,children:(0,a.jsx)(O.G,{icon:T.e7M,size:"lg"})}),(0,a.jsxs)(e5.g,{mx:2,spacing:0,alignItems:"flex-start",children:[(0,a.jsx)(e3.x,{fontSize:"sm",color:C.textErrorColor,children:(0,a.jsx)(h.cC,{id:"nwtY4N"})}),(0,a.jsx)(e3.x,{fontSize:"xs",color:C.textErrorColor,children:(0,a.jsx)(h.cC,{id:"xbrcey"})})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(e5.g,{spacing:0,alignItems:"flex-start",children:[(0,a.jsxs)(c.k,{mx:2,justifyContent:"center",alignItems:"center",children:[(0,a.jsx)(O.G,{icon:cB.JyM,color:"var(--chakra-colors-trueblue-400)"}),(0,a.jsx)(e3.x,{fontSize:"sm",mx:2,color:C.textColor,children:m})]}),(0,a.jsx)(c.k,{mx:2,children:(0,a.jsx)(e3.x,{fontSize:"sm",color:"gray.500",children:(0,a.jsx)(h.cC,{id:"Dj1qYd",values:{doneCount:g}})})})]}),(0,a.jsxs)(ev.h,{spacing:0,children:[(0,a.jsx)(eC.kH,{label:x.ag._({id:"I1yW7+"}),placement:"top",children:(0,a.jsx)(I.h,{"aria-label":x.ag._({id:"yWDjkv"}),variant:"ghost",colorScheme:"gray",size:"sm",mx:1,icon:(0,a.jsx)(O.G,{icon:T.X7o}),onClick:o})}),(0,a.jsx)(eC.kH,{label:x.ag._({id:"kOU1RP"}),placement:"top",children:(0,a.jsx)(ej.z,{"aria-label":x.ag._({id:"aIcRZZ"}),variant:"plain",size:"sm",mx:1,rightIcon:(0,a.jsx)(O.G,{icon:T.FFp}),onClick:s,children:(0,a.jsx)(h.cC,{id:"PHWHEO"})})})]})]}),(0,a.jsx)(c.k,{mt:-6,mr:-1,children:(0,a.jsx)(eC.kH,{label:x.ag._({id:"1QfxQT"}),placement:"top",shouldWrapChildren:!0,children:(0,a.jsx)(cZ,{onClose:l,enabled:u&&!j,duration:30,borderRadius:"full",_hover:{bg:C.hoverColorCloseButton,color:C.textColor}})})})]},"confirm-edit-doc-toast")})},ds=(0,lc.E)(d.xu),dl=()=>{let e=(0,U.CG)(F.WI),t=(0,U.CG)(F.yn);return(0,a.jsx)(ld.M,{initial:!1,children:e&&t&&(0,a.jsx)(ds,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},position:"absolute",pointerEvents:"none",borderTop:"solid ".concat(4,"px ").concat(e.color),top:0,left:0,bottom:0,right:0,height:"var(--100vh)"})})},da=e=>{let{doc:t,toggleCommentsPanel:n,editorWrapperEl:i,scrollingParentSelector:r}=e;return(0,a.jsxs)(ny.v,{placement:"bottom-end","data-testid":"doc-toolbar-menu",modifiers:[{name:"flip",enabled:!0,options:{fallbackPlacements:["left"]}}],children:[(0,a.jsx)(nk.j,{as:aD.r,borderRadius:"md",icon:(0,a.jsx)(O.G,{icon:T.cNd}),onMouseDown:aO.br,"data-testid":"doc-toolbar-menu-button"}),(0,a.jsx)(ro.h,{children:t&&(0,a.jsx)(lH,{doc:t,toggleCommentsPanel:n,scrollingParentSelector:r,editorWrapperEl:i})})]})},dc=e=>{let{docId:t,enabled:n,enterSlideView:i}=e,r=(0,U.CG)(F.e0),s=(0,f.useRef)(null),o=(0,ir.p)();return(0,f.useEffect)(()=>{!n&&s.current&&s.current.close()},[n]),(0,f.useEffect)(()=>{let e=()=>{var e;null===(e=s.current)||void 0===e||e.close()};return window.addEventListener("beforeunload",e),()=>{var t;window.removeEventListener("beforeunload",e),null===(t=s.current)||void 0===t||t.close()}},[]),{handlePresentViewClick:(0,f.useCallback)(()=>{if(!t||!(null==r?void 0:r.sessionId))return;let e=(0,ek.C3)({docId:t,sessionId:r.sessionId}),n=window.open(e,"present-view","popup,left=0,top=0,width=720,height=580");n?s.current=n:(o({title:"Failed to open presenter view.",description:"Please allow popups for this site and try again.",status:"error",position:"top",duration:5e3}),console.error("[usePresenterViewToggle] Failed to open presenter view")),i({fullscreen:!1})},[t,i,null==r?void 0:r.sessionId,o])}};var dd=n(73235),du=n(20737);function dh(){let e=(0,dd._)(["\n    0% { transform: scale(1.0); filter: brightness(1.0);  }\n    3% { transform: scale(1.0); filter: brightness(1.0);  }\n    8% {  transform: scale(0.90); filter: brightness(1.30);  }\n    18% { transform: scale(1.05); filter: brightness(1.0); }\n    30% { transform: scale(1.0); filter: brightness(1.0); }\n  "]);return dh=function(){return e},e}let dx=e=>({followOnStart:!0,followingId:e}),dp=e=>{switch(e){case"edit":return x.ag._({id:"UZN1cZ"});case"comment":return x.ag._({id:"jFTs0A"});case"view":return x.ag._({id:"Ya6CJ0"});default:return x.ag._({id:"Txd1qM"})}},dm=e=>{var t,n;let{isOpen:i,onClose:r,accessLinkUrl:s,onPlayClick:o}=e,{user:l}=(0,eX.SE)(),{replace:c}=(0,eb.useRouter)(),u=dx(null==l?void 0:l.id),[p,m]=(0,f.useState)(u),g=(0,ek.eo)(s,p),{user:j,color:v}=(0,eX.SE)(),C=(0,U.CG)(tF.yx),b=null==C?void 0:null===(n=C.accessLinks)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.permission,y=(0,la.F4)(dh());return(0,a.jsx)(eC.Wk,{isDark:!1,children:(0,a.jsxs)(rf.u_,{isOpen:i,onClose:r,size:"lg",children:[(0,a.jsx)(tK.Z,{}),(0,a.jsxs)(rg.h,{children:[(0,a.jsx)(rj.x,{children:(0,a.jsx)(h.cC,{id:"88XnIQ"})}),(0,a.jsx)(tZ.o,{}),(0,a.jsx)(rz.i,{}),(0,a.jsx)(tJ.f,{pt:"6",children:(0,a.jsxs)(tI.K,{spacing:"4",children:[(0,a.jsx)(e3.x,{children:(0,a.jsx)(h.cC,{id:"oYTLJe",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc,0:dp(b)},components:{0:(0,a.jsx)(e3.x,{as:"span",fontWeight:"bold",borderBottom:"1px dashed",borderColor:"gray.400",display:"inline-block"}),1:(0,a.jsx)(eC.kH,{label:x.ag._({id:"8LnpqL"}),placement:"top"})}})}),(0,a.jsx)(d.xu,{mb:"2",children:(0,a.jsx)(du.I,{url:g,variant:"solid"})}),(0,a.jsxs)(nV.b,{children:[(0,a.jsx)(rW.z,{}),(0,a.jsxs)(eg.U,{flexBasis:"100%",alignItems:"top",children:[(0,a.jsx)(e3.x,{fontSize:"sm",width:"100%",children:(0,a.jsx)(h.cC,{id:"EApNIe"})}),(0,a.jsxs)(d.xu,{position:"relative",textShadow:"sm",children:[(0,a.jsx)(sm.q,{animation:"".concat(y," 2s infinite ease-out"),name:null==j?void 0:j.displayName,src:null==j?void 0:j.profileImageUrl,size:"md",border:"solid 3px ".concat(v.value),shadow:"lg"}),(0,a.jsx)(d.xu,{position:"absolute",top:"1.75rem",left:"1.75rem",outline:"0 0 2px rgba(255,255,255,1.0)",sx:{path:{stroke:"white",strokeWidth:48}},color:"black",children:(0,a.jsx)(O.G,{icon:e6.qaO,fixedWidth:!0})})]})]})]})]})}),(0,a.jsx)(tX.m,{children:(0,a.jsxs)(ev.h,{children:[(0,a.jsx)(ej.z,{variant:"ghost",colorScheme:"gray",onClick:()=>{r()},children:(0,a.jsx)(h.cC,{id:"DPfwMq"})}),(0,a.jsx)(ej.z,{variant:"solid",onClick:()=>{r(),o(),c(g,g,{shallow:!0})},leftIcon:(0,a.jsx)(O.G,{icon:e6.zc}),children:(0,a.jsx)(h.cC,{id:"tbDuNX"})})]})})]})]})})},df=e=>{var t,n,i,r;let{doc:s,docEditorType:o,isStaticEditor:l,enterSlideView:u,exitSlideView:p,setExitedFullscreenByClick:m,isFullscreen:g,enterFullscreen:j,exitFullscreen:C,shouldHide:b}=e,{onOpen:y,onClose:k,isOpen:w}=(0,nd.M)({id:"meetModal"}),{user:S}=(0,eX.SE)(),E=(0,U.CG)(F.gh),I=(0,f.useRef)(E);(0,f.useEffect)(()=>{I.current=E},[E]);let{shortcutLabel:A,shortcutIcon:_,shortcutKeys:D,buttonLabel:R}=rb()[E],P=null==s?void 0:null===(n=s.accessLinks)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.url,L=!!(null==s?void 0:null===(r=s.accessLinks)||void 0===r?void 0:null===(i=r[0])||void 0===i?void 0:i.permission),z=(0,eX.py)("comment",s||void 0),G=(0,eX.py)("manage",s||void 0),N=!l&&S&&P&&G,M=(0,e0.ye)("cardNotes"),W=E===eK.q.SLIDE_VIEW,H=E===eK.q.DOC_VIEW,q=M&&z&&o!==tw.Z.PUBLIC_STATIC,{isInOfflineMode:B}=(0,v.$)(),{handlePresentViewClick:V}=dc({docId:null==s?void 0:s.id,enabled:M&&W,enterSlideView:u}),K=(0,e0.ye)("presentFullScreen");return(0,a.jsxs)(c.k,{display:b?"none":"flex",children:[(0,a.jsxs)(ev.h,{isAttached:!0,size:"sm","data-guider-highlight":"present-button-group","data-editor-mode":W?"slide":"doc",children:[(0,a.jsx)(eC.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:A,shortcut:D,children:(0,a.jsx)(aD.h,{fontWeight:"normal",size:"sm",variant:"solid",onClick:()=>{W?p():u({fullscreen:K})},onMouseDown:aO.br,icon:(0,a.jsx)(O.G,{icon:_}),"data-present-button":!0,children:R})}),(0,a.jsxs)(ny.v,{children:[(0,a.jsx)(nk.j,{variant:"solid",as:aD.r,icon:(0,a.jsx)(O.G,{icon:T.ptq})}),(0,a.jsx)(ro.h,{children:(0,a.jsxs)(nw.q,{zIndex:"popover",children:[H&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(rp.k,{title:x.ag._({id:"tbDuNX"}),children:[q&&(0,a.jsx)(rh.s,{icon:(0,a.jsx)(O.G,{icon:T.s0r,fixedWidth:!0}),onClick:V,isDisabled:B,children:(0,a.jsxs)(tI.K,{spacing:"0",children:[(0,a.jsx)(e3.x,{children:(0,a.jsx)(h.cC,{id:"T+GUKl"})}),(0,a.jsx)(e3.x,{fontSize:"sm",color:"gray.600",children:(0,a.jsx)(h.cC,{id:"ACelDx"})})]})}),q&&(0,a.jsx)(ru.R,{}),(0,a.jsx)(rh.s,{icon:(0,a.jsx)(O.G,{icon:T.Rkb,fixedWidth:!0}),command:(0,eC.cE)("Mod+Enter"),onClick:()=>u({fullscreen:!1}),children:(0,a.jsx)(h.cC,{id:"LRFe2O"})}),(0,a.jsx)(rh.s,{icon:(0,a.jsx)(O.G,{icon:T.tc$,fixedWidth:!0}),command:(0,eC.cE)("Mod+Shift+Enter"),onClick:()=>u({fullscreen:!0}),children:(0,a.jsx)(h.cC,{id:"OwIqiD"})})]}),N&&(0,a.jsx)(ru.R,{})]}),W&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rh.s,{icon:(0,a.jsx)(O.G,{icon:e6.Bg$,fixedWidth:!0}),command:(0,eC.cE)("Esc"),onClick:p,children:(0,a.jsx)(h.cC,{id:"5Rfo7J"})}),(q||N)&&(0,a.jsx)(ru.R,{}),q&&(0,a.jsx)(rh.s,{icon:(0,a.jsx)(O.G,{icon:T.s0r,fixedWidth:!0}),onClick:V,children:(0,a.jsxs)(tI.K,{spacing:"0",children:[(0,a.jsx)(e3.x,{children:(0,a.jsx)(h.cC,{id:"T+GUKl"})}),(0,a.jsx)(e3.x,{fontSize:"sm",color:"gray.600",children:(0,a.jsx)(h.cC,{id:"ACelDx"})})]})})]}),N&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eC.kH,{isDisabled:L,label:(0,a.jsx)(h.cC,{id:"zk6wKo"}),children:(0,a.jsx)(d.xu,{children:(0,a.jsx)(rh.s,{onClick:()=>{var e;(null==s?void 0:null===(e=s.accessLinks)||void 0===e?void 0:e[0].permission)&&y()},isDisabled:!L||B,icon:(0,a.jsx)(O.G,{icon:T.ASo,fixedWidth:!0}),children:(0,a.jsx)(tI.K,{spacing:"0",children:(0,a.jsx)(h.cC,{id:"z7gRub",components:{0:(0,a.jsx)(e3.x,{}),1:(0,a.jsx)(e3.x,{fontSize:"sm",color:"gray.600"})}})})})})}),(0,a.jsx)(dm,{isOpen:w,onClose:k,accessLinkUrl:P,onPlayClick:()=>{u({fullscreen:!1})}})]})]})})]})]}),W&&(0,a.jsx)(c.k,{ml:W?2:0,children:(0,a.jsx)(eC.kH,{label:g?"Exit full screen":"Enter full screen",children:(0,a.jsx)(aD.r,{"aria-label":g?"Exit full screen":"Enter full screen",borderRadius:"md",icon:(0,a.jsx)(O.G,{icon:g?T.Qj4:T.TL5}),onClick:g?()=>{m(!0),C()}:j})})})]})},dg=e=>{switch(e){case tW.X5w.Pending:return{icon:T.rk4,label:x.ag._({id:"JKsafh"})};case tW.X5w.Verified:return{icon:T.LEp,label:x.ag._({id:"DKrUGB"})};case tW.X5w.Failed:return{icon:T.FGl,label:x.ag._({id:"ojSx8e"})}}},dj=e=>{let{domain:t,status:n,isLive:i,site:r,docId:s}=e,o=(0,eD.D5)({site:r,docId:s}),l=(0,f.useMemo)(()=>dg(n),[n]);return r&&s?(0,a.jsxs)(eg.U,{color:"gray.500",pointerEvents:"none",justifyContent:"flex-start",w:"full",children:[(0,a.jsx)(eC.kH,{label:l.label,placement:"left",children:(0,a.jsx)(I.h,{variant:"ghost",size:"xs",mx:-1,mr:-2,color:"gray.500","aria-label":l.label,_hover:{bg:"transparent"},_active:{bg:"transparent"},children:(0,a.jsx)(O.G,{icon:l.icon,size:"xs",pointerEvents:"auto",fixedWidth:!0,spin:n===tW.X5w.Pending})})}),(0,a.jsx)(eC.kH,{label:t,placement:"top",openDelay:500,closeOnClick:!1,children:(0,a.jsx)(d.xu,{fontSize:"xs",pointerEvents:"auto",children:dv(t,33)})}),i&&n===tW.X5w.Verified&&(0,a.jsx)(oy,{site:r,path:(0,eD.fJ)(o)})]}):null},dv=(e,t)=>{if(e.length<=t)return e;let n=e.replace(/^https?:\/\//,"").split("."),i=n.slice(-2).join("."),r=n.slice(0,-2).join("."),s=t-i.length-3;if(s<=0)return i;let o=r.slice(0,s);return"".concat(o).concat("...").concat(i)},dC=e=>{let{onClick:t,doc:n,isLive:i}=e,r=null==n?void 0:n.site,s=(0,eD.Zz)(null==r?void 0:r.domains),o=i?(0,a.jsx)(h.cC,{id:"3TQHDg",values:{0:s.length}}):(0,a.jsx)(h.cC,{id:"1EeNDU"});return(0,a.jsxs)(rh.s,{icon:(0,a.jsx)(O.G,{icon:T.A$k,fixedWidth:!0}),onClick:t,alignItems:"baseline",children:[o,r&&(null==n?void 0:n.id)&&s.map(e=>(0,a.jsx)(dj,{domain:e.name,status:e.status,isLive:i,site:r,docId:n.id},e.id))]})},db=e=>{let{doc:t}=e,{replace:n}=(0,eb.useRouter)(),{isInOfflineMode:i}=(0,tW.$gs)(),r=(0,eX.py)("manage",t),s=(0,U.CG)(e_.lH),o=null==t?void 0:t.id,l=(0,eD.D5)({site:s,docId:o}),{publishDoc:u,publishSite:p,isPublishing:m}=iS({doc:t,site:s,path:l}),{statusText:g,statusIcon:j,statusColor:v,lastPublishedTime:C,needsPublish:b,publishEnabled:y}=rc(m),k=s&&(0,eD.jl)(t,s),w=(0,f.useCallback)(()=>{o&&n((0,ek.yQ)({docId:o,preview:!0}),void 0,{shallow:!0})},[o,n]);if(!s)return null;let S=(0,Z.uL)("custom_domains");return(0,a.jsx)(c.k,{children:(0,a.jsxs)(ev.h,{isAttached:!0,size:"sm",children:[(0,a.jsx)(eC.kH,{closeOnMouseDown:!1,closeOnClick:!1,isDisabled:!y,label:b&&!m?(0,a.jsxs)(tI.K,{children:[g,(0,a.jsx)(e3.x,{color:"gray.400",children:(0,a.jsx)(h.cC,{id:"FmP7uY"})})]}):(0,a.jsx)(h.cC,{id:"o+bOqE"}),children:(0,a.jsx)(aD.h,{fontWeight:"normal",size:"sm",variant:"solid",onClick:p,onMouseDown:aO.br,isDisabled:!y||i,isLoading:m,icon:b?(0,a.jsx)(O.G,{icon:T.A$k}):(0,a.jsx)(O.G,{icon:T.LEp}),"data-publish-button":!0,children:b?(0,a.jsx)(h.cC,{id:"EEYbdt"}):(0,a.jsx)(h.cC,{id:"u3wRF+"})})}),(0,a.jsxs)(ny.v,{children:[(0,a.jsx)(nk.j,{variant:"solid",as:aD.r,isDisabled:!y||i,icon:(0,a.jsx)(O.G,{icon:T.ptq})}),(0,a.jsx)(ro.h,{children:(0,a.jsxs)(nw.q,{zIndex:"popover",minW:"320px",maxW:"360px",children:[(0,a.jsx)(rp.k,{children:(0,a.jsxs)(e5.g,{alignItems:"flex-start",children:[(0,a.jsxs)(eg.U,{px:3,pt:2,alignItems:"center",color:v,children:[j&&(0,a.jsx)(d.xu,{mr:1.5,display:"inline-flex",children:j}),(0,a.jsx)(d.xu,{children:(0,a.jsx)(e3.x,{fontWeight:"semibold",children:g})})]}),C&&(null==t?void 0:t.site)&&(0,a.jsxs)(eg.U,{pb:2,mt:-1,children:[(0,a.jsx)(e4.L,{mr:2,px:3,w:13}),(0,a.jsx)(e3.x,{fontSize:"xs",color:"gray.500",children:k?C:(0,a.jsx)(h.cC,{id:"0bSVwO"})})]})]})}),r&&t&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(ru.R,{}),(0,a.jsxs)(rp.k,{title:x.ag._({id:"1EeNDU"}),children:[(0,a.jsx)(dC,{onClick:p,doc:t,isLive:!!k}),(0,a.jsx)(lC,{doc:t,label:(0,a.jsx)(h.cC,{id:"A/QS9E"}),showUpsellBadge:!S})]})]}),(0,a.jsx)(ru.R,{}),(0,a.jsx)(rp.k,{title:x.ag._({id:"Pf2dn/"}),children:(0,a.jsx)(rh.s,{icon:(0,a.jsx)(O.G,{icon:T.PQh,fixedWidth:!0}),onClick:u,alignItems:"baseline",children:(0,a.jsx)(h.cC,{id:"szmTdw"})})}),(0,a.jsx)(ru.R,{}),(0,a.jsx)(rp.k,{title:x.ag._({id:"rdUucN"}),children:(0,a.jsx)(eC.kH,{label:(0,a.jsx)(h.cC,{id:"aChIoL"}),children:(0,a.jsx)(d.xu,{children:(0,a.jsx)(rh.s,{onClick:w,icon:(0,a.jsx)(O.G,{icon:e6.sl_,fixedWidth:!0}),alignItems:"baseline",children:(0,a.jsx)(tI.K,{spacing:"0",children:(0,a.jsx)(h.cC,{id:"EEOIfz",components:{0:(0,a.jsx)(e3.x,{})}})})})})})})]})})]})]})})};var dy=n(17210),dk=n(83235),dw=n(21716),dS=n(42907);let dE=e=>{var t,n;let{doc:i,showAnalytics:r=!0,showSharePublic:s=!0,showEmbed:o=!0,showButton:l=!0}=e,{isOpen:c,onClose:u,onOpen:x}=(0,nd.M)({id:"analyticsModalDisclosure"}),{isSharePanelOpen:p,onSharePanelOpen:m,onSharePanelClose:g,view:j,setView:C}=(0,dk.y)(),{isInOfflineMode:b}=(0,v.$)(),{user:y,currentWorkspace:k}=(0,eX.SE)(),{editor:w}=(0,tS._i)(),S=(0,eX.py)("view",i),E=(0,eX.py)("edit",i),I=(0,eX.py)("manage",i),A=(0,eM.z$)();(0,f.useEffect)(()=>oC.T.on("openSharePanel",e=>{let{view:t}=e;m(),C(t)}),[m,C]);let _=(0,f.useCallback)(()=>{null==A||A.track(eM.AA.DOC_ANALYTICS_VIEWED,{docId:null==i?void 0:i.id,source:"share_panel",type:I?"full":"personal"}),x()},[A,I,null==i?void 0:i.id,x]);if(!S||!y||!i)return null;let T=i.collaborators||[],O=i.channels||[],D=(0,dS.Hs)([...T].sort((e,t)=>e.user.id===y.id?-1:t.user.id===y.id?1:0).map(e=>e.user.id===y.id?"You":e.user.displayName||"").concat(i.orgAccess?O.map(e=>{let{name:t}=e;return t||""}):[])),R=(0,dw.h_)(i,y),P=R?(0,dw.Xp)()[R]:null,L=(0,dw.Gi)(i,k);return null===P?(console.error("[SharePanel] Unknown VisibilityValue for doc",i),null):(0,a.jsxs)(a.Fragment,{children:[l&&(0,a.jsx)(eC.kH,{label:(0,a.jsxs)(a.Fragment,{children:[L&&(0,a.jsx)(e3.x,{fontWeight:"bold",children:(0,a.jsx)(h.cC,{id:"OS9x6e",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}})}),P.title(null==i?void 0:null===(t=i.organization)||void 0===t?void 0:t.name)?(0,a.jsx)(e3.x,{children:P.title(null==i?void 0:null===(n=i.organization)||void 0===n?void 0:n.name)}):null,(0,a.jsx)(e3.x,{fontSize:"xs",children:P.subtitle?P.subtitle(D||""):""})]}),children:(0,a.jsx)("span",{children:(0,a.jsx)(aD.h,{"data-guider-highlight":"share-button",onMouseDown:aO.br,icon:(0,a.jsx)(d.xu,{children:(0,a.jsx)(dy.aA,{visibility:P,isFromOtherOrg:L})}),isDisabled:!E||b,onClick:m,children:(0,a.jsx)(h.cC,{id:"Z8lGw6"})})})}),(0,a.jsx)(dy.G9,{doc:i,editor:w,isSharePanelOpen:p,onSharePanelOpen:m,onSharePanelClose:g,onAnalyticsPanelOpen:_,view:j,setView:C,showAnalytics:r,showSharePublic:s,showEmbed:o}),c&&(0,a.jsx)(on,{doc:i,onSharePanelOpen:m,onAnalyticsPanelClose:u,isAnalyticsPanelOpen:c,mode:I?"full":"personal"})]})},dI=(0,f.memo)(e=>{let{doc:t,onClick:n}=e,{isConnected:i,isInOfflineMode:r}=(0,v.$)(),s=(null==t?void 0:t.title)||"";return(0,a.jsxs)(c.k,{flex:1,w:32,children:[(0,a.jsx)(eC.kH,{label:(0,a.jsxs)(tI.K,{spacing:0,children:[(0,a.jsx)(e3.x,{children:(0,a.jsx)(h.cC,{id:"g/+TNk"})}),(0,a.jsx)(e3.x,{color:"gray.500",children:(0,a.jsx)(h.cC,{id:"ZfQLKw"})})]}),isDisabled:r,"aria-label":x.ag._({id:"g/+TNk"}),children:(0,a.jsx)(ej.z,{size:"sm",variant:"ghost",colorScheme:"gray",fontWeight:"normal",ml:-1,leftIcon:(0,a.jsx)(O.G,{icon:T.SCr}),onClick:n,isDisabled:r,children:(0,a.jsx)(e3.x,{isTruncated:!0,whiteSpace:"nowrap",textOverflow:"ellipsis",w:"100%",children:s})})}),!i&&(0,a.jsx)(eC.kH,{label:(0,a.jsxs)(tI.K,{spacing:0,children:[(0,a.jsx)(e3.x,{children:(0,a.jsx)(h.cC,{id:"ysdDIA"})}),r&&(0,a.jsx)(e3.x,{color:"gray.500",children:(0,a.jsx)(h.cC,{id:"+QNhGE"})})]}),"aria-label":x.ag._({id:"IcHxhR"}),children:(0,a.jsx)(c.k,{color:"gray.500",alignItems:"center",mr:2,children:(0,a.jsx)(O.G,{icon:T.bKP})})})]})});dI.displayName="EditableDocTitle";let dA=e=>(0,a.jsx)(d_,{...e}),d_=(0,f.memo)(e=>{let{doc:t,togglePagesPanel:n}=e,[i]=(0,aq.X)(H.H.lastHomeUrl,"/"),r=(0,U.CG)(e_.lH),{confirmNavigation:s}=(0,tS._i)(),{push:o}=(0,eb.useRouter)(),l={as:nW(),href:i||"/",colorScheme:"gray",fontWeight:"normal","data-testid":"toolbar-home-link"},u=(0,ef.ff)("gray.800","gray.100");return(0,a.jsx)(eg.U,{flex:1,children:(0,a.jsxs)(eg.U,{spacing:2,divider:(0,a.jsx)(d.xu,{border:"none",as:O.G,icon:T._tD,size:"sm",color:"gray.300"}),w:"100%",color:u,children:[(0,a.jsx)(i4.r,{as:aD.h,href:l.href,onClick:e=>{!e.shiftKey&&(e.metaKey||e.ctrlKey)||(e.preventDefault(),s().then(()=>{o(l.href)}))},mr:-1,colorScheme:"gray",children:(0,a.jsx)(O.G,{size:"1x",icon:T.J9Y})}),r&&(null==r?void 0:r.routes.length)>1&&(0,a.jsx)(c.k,{flexGrow:0,flexShrink:1,children:(0,a.jsx)(e3.x,{noOfLines:1,fontWeight:"normal",fontSize:"sm",children:null==r?void 0:r.name})}),(0,a.jsx)(dI,{doc:t,onClick:()=>{null==n||n()}})]})})});d_.displayName="PageBreadcrumbGroup";let dT=e=>{let{spotlightingByBlock:t}=e,{editor:n}=(0,tS._i)(),i=(0,f.useCallback)(()=>{t?null==n||n.commands.turnOffSpotlight():null==n||n.commands.spotlightNextBlock()},[n,t]);return(0,a.jsx)(c.k,{children:(0,a.jsx)(eC.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,a.jsxs)(e3.x,{whiteSpace:"nowrap",children:[t?"Turn off spotlight":"Turn on spotlight",(0,a.jsx)(e3.x,{as:"span",display:"inline",color:"gray.400",ml:2,children:"S"})]}),children:(0,a.jsx)(aD.h,{colorScheme:"trueblue",variant:t?"solid":"plain",onClick:e=>{i(),e.target.blur()},icon:(0,a.jsx)(O.G,{icon:T.QMW}),children:"Spotlight"})})})};var dO=n(78183),dD=n(15889),dR=n(61387);let dP=(0,f.memo)(e=>{let{isOpen:t,onClose:n,setDocTheme:i}=e,r=(0,U.CG)(F.Pu),s=(0,f.useCallback)(()=>{nx.pw.emit(nx.TI.OPEN_PAGE_SETUP,"background"),null==n||n()},[n]);return(0,a.jsx)(eC.Wk,{isDark:!1,children:(0,a.jsxs)(tV.d,{returnFocusOnClose:!1,trapFocus:!1,isOpen:t,placement:"right",onClose:n,size:"md",blockScrollOnMount:!1,children:[(0,a.jsx)(tK.Z,{background:"none"}),(0,a.jsxs)(tY.s,{"data-testid":"doc-theme-drawer","data-doc-theme-drawer":!0,motionProps:{variants:{enter:{x:"0%",transition:{duration:.2}},exit:{x:"100%",transition:{duration:.1}}}},children:[(0,a.jsx)(rj.x,{pb:4,children:(0,a.jsx)(dR.v,{title:(0,a.jsx)(h.cC,{id:"FEr96N"}),description:(0,a.jsx)(e3.x,{fontSize:"sm",fontWeight:"500",mt:"-2",letterSpacing:0,color:"gray.700",children:(0,a.jsx)(h.cC,{id:"S9uQm/"})}),showDrawerCloseButton:!0,currentTheme:r})}),(0,a.jsx)(tJ.f,{overflowX:"hidden","data-theme-picker-scroll-container":!0,children:(0,a.jsx)(dD.t,{currentTheme:r,openBackgroundPanel:s,setTheme:i})})]})]})})});dP.displayName="DocThemeDrawer";let dL=(0,f.memo)(()=>{let e=(0,ir.p)(),[t]=(0,tW.Iyu)(),n=(0,U.CG)(e_.$U),{docId:i,getCollaborativeEditorInstance:r}=(0,tS._i)(),{isOpen:s,onOpen:o,onClose:l}=(0,nd.M)({id:"themeStyleDrawer"}),d=(0,U.CG)(F.Pu),u=r(),x=(0,eM.z$)(),{updateDocThemeWithAccentImages:p}=(0,eR.vi)({docId:i,editor:u}),m=(0,f.useCallback)(e=>{n&&e.id!==d.id&&t({variables:{input:{siteId:n,themeId:e.id}},update:(t,i)=>{let{data:r}=i,s=t.readFragment({id:"Theme:".concat(e.id),fragment:tW.ASj,fragmentName:"DefaultThemeFields"});t.updateQuery({query:tW.BYL,variables:{id:n}},e=>e&&e.site&&s?{...e,site:{...e.site,...null==r?void 0:r.updateSite,theme:s}}:e)}}).then(()=>{})},[n,d.id,t]),g=(0,f.useCallback)(t=>{t.id!==d.id&&p(t.id).then(()=>{null==x||x.track(eM.AA.DOC_THEME_UPDATED,{doc_id:i,theme_id:t.id})}).catch(t=>{console.error(t),e({title:(0,a.jsx)(h.cC,{id:"Fulf8b",values:{0:t.message}}),position:"top",status:"error"})})},[x,d.id,i,e,p]),j=(0,f.useCallback)(e=>n?m(e):g(e),[n,g,m]);return(0,f.useEffect)(()=>{let e=oC.T.on("toggleThemeBlock",o),t=nx.pw.on(nx.TI.OPEN_THEME_DRAWER,o);return()=>{e(),t()}},[o]),(0,a.jsxs)(c.k,{children:[(0,a.jsx)(dP,{isOpen:s,onClose:l,setDocTheme:j}),(0,a.jsx)(dO.g,{onThemeCreated:j,getCollaborativeEditorInstance:r})]})}),dz=(0,f.memo)(()=>{let{isConnected:e}=(0,tW.$gs)();return(0,a.jsx)(eC.kH,{label:e?(0,a.jsx)(h.cC,{id:"JkEyR8"}):(0,a.jsx)(h.cC,{id:"GvC+mL",components:{0:(0,a.jsx)(e3.x,{}),1:(0,a.jsx)(e3.x,{color:"gray.300"})}}),"aria-label":x.ag._({id:"JkEyR8"}),children:(0,a.jsx)(d.xu,{children:(0,a.jsx)(aD.h,{"data-guider-highlight":"toolbar-theme-button",onClick:()=>{oC.T.emit("toggleThemeBlock",!0)},isDisabled:!e,icon:(0,a.jsx)(O.G,{icon:T.q2v}),"data-testid":"toolbar-theme-button",children:(0,a.jsx)(h.cC,{id:"FEr96N"})})})})});dz.displayName="ThemeToolbarButton";let dG=()=>{let{isConnected:e}=(0,tW.$gs)();return(0,a.jsxs)(a.Fragment,{children:[e&&(0,a.jsx)(dL,{}),(0,a.jsx)(dz,{})]})};dL.displayName="ThemeDrawers";var dN=n(55758);let dM=[.5,.8,.9,1,1.1,1.2,1.5,2],dU=e=>"".concat((100*e).toFixed(0),"%"),dF=()=>{let e=(0,e0.ye)("presentZoom"),{editor:t}=(0,tS._i)(),n=(0,eM.z$)(),i=(0,g.I0)(),r=(0,U.CG)(F.SU),s=(0,f.useCallback)(e=>{i((0,F.Ic)({zoomLevel:e})),i((0,F.fT)({enabled:!1})),null==n||n.track(eM.AA.DOC_ZOOMED,{direction:"set",level:e})},[i,n]),o=(0,f.useCallback)(()=>{i((0,F.fT)({enabled:!0}))},[i]),l=(0,f.useCallback)(()=>{let e=Math.min(lI.v4,dW(r)+.1);i((0,F.Ic)({zoomLevel:e})),i((0,F.fT)({enabled:!1})),null==n||n.track(eM.AA.DOC_ZOOMED,{direction:"in",level:e})},[i,n,r]),c=(0,f.useCallback)(()=>{let e=Math.max(lI.Ou,dW(r)-.1);i((0,F.Ic)({zoomLevel:e})),i((0,F.fT)({enabled:!1})),null==n||n.track(eM.AA.DOC_ZOOMED,{direction:"in",level:e})},[i,n,r]),d=(0,f.useCallback)(()=>{let e=lI.aX;i((0,F.Ic)({zoomLevel:e})),i((0,F.fT)({enabled:!1})),null==n||n.track(eM.AA.DOC_ZOOMED,{direction:"reset",level:e})},[i,n]),u=(0,U.CG)(rk.C),p=(0,dN.rJ)();return((0,f.useEffect)(()=>{if(e)return es.F7.on("keydown","PRESENT_BLOCK",e=>{let n=e.target instanceof HTMLElement&&(0,eV.Hx)(e.target);return!(u||!t||(0,af.KB)(t))&&!n&&((0,nM.ZP)("=")(e)?(l(),e.preventDefault(),!0):(0,nM.ZP)("-")(e)?(c(),e.preventDefault(),!0):(0,nM.ZP)("0")(e)?(d(),e.preventDefault(),!0):!!(0,nM.ZP)("9")(e)&&(o(),e.preventDefault(),!0))})},[u,e,t,l,c,d,o]),e)?(0,a.jsxs)(ev.h,{spacing:"0",size:"sm",variant:"ghost",isAttached:!0,borderWidth:"1px",borderRadius:"md",children:[(0,a.jsx)(eC.kH,{closeOnMouseDown:!1,closeOnClick:!1,shortcut:"-",label:x.ag._({id:"FjkaiT"}),children:(0,a.jsx)(I.h,{"aria-label":x.ag._({id:"FjkaiT"}),fontWeight:"normal",onClick:c,icon:(0,a.jsx)(O.G,{icon:T.Kl4})})}),(0,a.jsxs)(ny.v,{closeOnSelect:!0,children:[(0,a.jsx)(eC.kH,{label:x.ag._({id:"VZ3UQG"}),children:(0,a.jsx)(nk.j,{minW:20,as:ej.z,variant:"ghost",fontWeight:"400",size:"sm",rightIcon:(0,a.jsx)(O.G,{icon:T.ptq}),children:p?(0,a.jsx)(h.cC,{id:"R9Khdg"}):dU(r)})}),(0,a.jsxs)(nw.q,{maxW:"220px",children:[(0,a.jsx)(nS._,{value:p?"auto":r.toString(),type:"radio",children:(0,a.jsx)(nE.i,{value:"auto",onClick:o,children:(0,a.jsxs)(eg.U,{children:[(0,a.jsxs)(e3.x,{children:[(0,a.jsx)(h.cC,{id:"R9Khdg"})," ",(0,a.jsx)(e3.x,{as:"span",color:"gray.500",children:(0,a.jsx)(h.cC,{id:"P9Cyl9"})})]}),(0,a.jsx)(e4.L,{}),(0,a.jsx)(e3.x,{as:"span",opacity:"0.6",children:"9"})]})})}),(0,a.jsx)(ru.R,{}),(0,a.jsx)(nS._,{value:p?"auto":r.toString(),type:"radio",children:dM.map(e=>(0,a.jsx)(nE.i,{value:(e/100).toString(),onClick:()=>{s(e)},children:(0,a.jsxs)(eg.U,{children:[(0,a.jsx)(e3.x,{children:dU(e)}),(0,a.jsx)(e4.L,{}),e===lI.aX&&(0,a.jsx)(e3.x,{as:"span",opacity:"0.6",children:"0"})]})},e))})]})]}),(0,a.jsx)(eC.kH,{closeOnMouseDown:!1,closeOnClick:!1,shortcut:"+",label:x.ag._({id:"AWOSPo"}),children:(0,a.jsx)(I.h,{fontWeight:"normal","aria-label":x.ag._({id:"AWOSPo"}),onClick:l,icon:(0,a.jsx)(O.G,{icon:T.r8p})})})]}):null},dW=e=>Math.round(10*e)/10,dH=(0,f.memo)(function(e){let{scrollingParentSelector:t,toggleCommentsPanel:i,isCommentsPanelOpen:r,isPagesPanelOpen:s,togglePagesPanel:o,editorWrapperEl:l,docEditorType:d,isDark:u}=e,[h]=(0,a_.a)(["(max-width: 840px)","(min-width: 841px)"]),x=(0,e0.ye)("editDocAI"),p=(0,el.iq)({base:!0,lg:!1}),m=(0,U.CG)(F.gh),g=(0,U.CG)(tF.yx),j=(0,U.CG)(e_.lH),{editor:v}=(0,tS._i)(),C=(0,eX.py)("comment",g),b=(0,rs.O1)(),y=(0,rs.lP)(),{enabled:k}=(0,aT.g)(v),w=(0,eD.Vr)(j),S="SLIDE_VIEW"!==m,E=(0,U.CG)(F.hN),I=d!==tw.Z.COLLABORATIVE,A=(0,U.CG)(F.Tf),_=(0,U.CG)((0,$.SL)("left")),T=(0,U.CG)((0,$.SL)("right")),O=(0,e0.ye)("aiChat"),{enterSlideView:D,exitSlideView:R,setExitedFullscreenByClick:P,isFullscreen:L,enterFullscreen:z,exitFullscreen:G}=rP({editorWrapperEl:l,scrollingParentSelector:t});window.exportToPptx=async e=>{if(!v)return;let{exportToPptx:t}=await Promise.all([n.e(4865),n.e(4467),n.e(9928)]).then(n.bind(n,21459));return t(v,e)};let N=M((0,f.useCallback)(e=>{let t=W.current;return!!t&&(!!(t.querySelector("[data-active]")||t.querySelector('[aria-expanded="true"]')||_||T)||e.clientY<100)},[_,T]),!A),W=(0,f.useRef)(null),H=!(0,ey.s2)();if(!v)return null;let q=!1===x&&!h&&p&&!I&&E&&O;return(0,a.jsx)(eC.Wk,{isDark:u,children:(0,a.jsxs)(c.k,{"data-editor-toolbar":!0,ref:W,bg:u?"gray.900":"white",borderBottomWidth:"1px",borderBottomColor:u?"whiteAlpha.100":"blackAlpha.100",zIndex:tH.S.toolbar,left:0,right:0,py:1.5,alignItems:"center",p:2,pr:6,gap:2,transform:!A||A&&N?void 0:"translateY(-100%)",pointerEvents:"none",sx:{"&:focus-within":{marginTop:0},"> *":{pointerEvents:"auto"},"> #toolbar-spacer":{pointerEvents:"none"}},transitionProperty:"transform",transitionDuration:"normal",transitionTimingFunction:"ease-in-out","data-print-hidden":!0,children:[(0,a.jsx)(dl,{}),(0,a.jsx)(eg.U,{flex:1,children:j?(0,a.jsx)(dA,{doc:g,pagesPanelEnabled:b,isPagesPanelOpen:s,togglePagesPanel:o}):(0,a.jsx)(aV,{doc:g})}),(0,a.jsxs)(eg.U,{children:[!h&&(0,a.jsx)(a9,{}),!h&&!S&&(0,a.jsx)(dF,{}),!h&&!S&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(dT,{spotlightingByBlock:k})}),!h&&!I&&E&&y&&(0,a.jsx)(dG,{}),!I&&(0,a.jsx)(dE,{doc:g,showButton:!h}),H&&!w&&(0,a.jsx)(df,{doc:g,isStaticEditor:I,editorWrapperEl:l,scrollingParentSelector:t,enterSlideView:D,exitSlideView:R,setExitedFullscreenByClick:P,isFullscreen:L,enterFullscreen:z,exitFullscreen:G,shouldHide:h,docEditorType:d}),H&&w&&b&&(0,a.jsx)(db,{doc:g}),!I&&C&&(0,a.jsx)(cH,{doc:g,mode:m,isCommentsPanelOpen:r,toggleCommentsPanel:i}),x&&E?(0,a.jsx)(dn,{editor:v}):q?(0,a.jsx)(cq,{}):null,!h&&!I&&!w&&(0,a.jsx)(aP,{doc:g}),!h&&!I&&(0,a.jsx)(da,{doc:g,toggleCommentsPanel:i,editorWrapperEl:l,scrollingParentSelector:t}),(0,a.jsx)(c.k,{children:(0,a.jsx)(t0.DY,{showRing:!0})})]})]})})}),dq=e=>!!(e.target&&e.target instanceof HTMLElement&&"IFRAME"===e.target.tagName),dB=(e,t)=>{var n;let i=Math.max((null===(n=t.posAtCoords(e))||void 0===n?void 0:n.inside)||-1);if(-1!=i)try{return t.state.doc.resolve(i)}catch(e){return}},dV=e=>"card"===e.type.name?!!(0,rS.HD)(e.attrs.id):!!((0,i7.L8)(e)||["button","buttonGroup","tableOfContents","toggleSummary"].includes(e.type.name)),dK=e=>!!(e.dataset.contentReference||e.dataset.zoomClickCapture),dY=(e,t)=>{if(!(null==t?void 0:t.nodeAfter))return!1;let n=t.nodeAfter;if("paragraph"===n.type.name)return!!(e.classList.contains("link")||e.closest(".link"));if(!(dV(n)||(0,eF.qv)(t,e=>dV(e))))return!1;if((0,aI.vb)(n.type)){let t=e.closest(".react-renderer");return!!t&&!!(dK(e)||(0,eV.tl)(e,t,dK))}return"gallery"!==n.type.name||!!e.closest(".gallery-content")},dZ=(0,f.memo)(e=>{let{editor:t}=e,[n,i]=(0,f.useState)(!0),r=(0,f.useRef)({x:0,y:0}),s=(0,f.useRef)(null),o=(0,f.useRef)(null),l=(0,f.useRef)(null),u=(0,f.useRef)("none"),h=(0,aE.y)("debugCardViewed"),x=(0,U.CG)(F.pN),p=x[0],m=x[x.length-1],g=(0,U.CG)(F.i2),j=(0,f.useRef)("middle"),v=(0,U.CG)(F.SU),C=(0,U.CG)(F.Kk),b=(0,U.CG)(e=>{var t;return!!(null===(t=(0,F.k8)(e))||void 0===t?void 0:t.pos)}),y=!1===C?Math.max(.75,v):1;j.current=g===p?"first":g===m?"last":"middle",(0,f.useEffect)(()=>{let e,n;let a=e=>{s.current&&l.current&&(s.current.style.opacity=e?"1":"0",l.current.disabled=!e)},c=()=>{cancelAnimationFrame(e),e=requestAnimationFrame(()=>{if(!s.current||!o.current)return;let e=r.current.x-30*y/2,t=r.current.y-30*y/2;s.current.style.transform="translate(".concat(e,"px, ").concat(t,"px)"),"left"===u.current&&(s.current.style.transform+=" scaleX(-1)"),a("none"!==u.current)})},d=()=>{i(!0),clearTimeout(n),n=setTimeout(()=>{i(!1),c()},2e3)},h=e=>{d(),e&&(r.current={x:e.clientX,y:e.clientY});let n=r.current.x,i=r.current.y,o=null==e?void 0:e.target;if(!t||!s.current||!l.current||!o)return;if(e&&dq(e)){u.current="none",c();return}let a=n/window.innerWidth*100;if(a>20&&a<80||i<=51||!o.closest(".ProseMirror")||b||dY(o,dB({left:n,top:i},t.view))){u.current="none",c();return}u.current=a<=20?"left":"right",c()},x=()=>{u.current="none",c()},p=e=>{dq(e)&&(u.current="none",c())},m=e=>{if(d(),!t||e.button>1||(0,aA.BS)(t.view))return;let n=(0,U.bh)().getState(),i=!!(0,F.Od)(n),r=(0,F.hN)(n);!i&&!r&&["left","right"].includes(u.current)&&(e.preventDefault(),e.stopPropagation(),t.commands.spotlightNextCard("left"===u.current))};return h(),document.body.addEventListener("mousemove",h),document.body.addEventListener("mouseleave",x),document.body.addEventListener("mouseup",m),document.body.addEventListener("mouseover",p),()=>{document.body.removeEventListener("mousemove",h),document.body.removeEventListener("mouseleave",x),document.body.removeEventListener("mouseup",m),document.body.removeEventListener("mouseover",p),clearTimeout(n)}},[t,y,g,b]);let k="".concat(30*y,"px"),w="".concat(30*y,"px");return(0,a.jsxs)(ro.h,{children:[(0,a.jsx)("style",{ref:l,children:"html * { cursor: none!important}"}),(0,a.jsx)(dJ,{position:"left",enabled:h}),(0,a.jsx)(dJ,{position:"right",enabled:h}),(0,a.jsx)(c.k,{ref:s,position:"absolute",top:"0",left:"0",alignItems:"center",justifyContent:"center",className:"gamma-custom-cursor",width:k,height:w,pointerEvents:"none",willChange:"transform",verticalAlign:"middle",zIndex:"tooltip",filter:"drop-shadow(3px 1px 2px rgb(0 0 0 / 0.1))",outline:h?"2px solid pink":void 0,children:(0,a.jsx)(d.xu,{ref:o,position:"absolute",width:k,height:w,sx:{"::before":{content:'""',opacity:n?1:0,transition:"opacity 0.2s",display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundImage:"url(".concat("/_next/static/media/CustomCursorPointer.288ac219.svg",")"),width:"100%",height:"100%"}}})})]})}),dJ=e=>{let{position:t,enabled:n}=e;return n?(0,a.jsx)(d.xu,{position:"absolute",top:"0",bottom:"0",left:"left"===t?"calc(".concat(20,"% - 1px)"):void 0,right:"right"===t?"calc(".concat(20,"% - 1px)"):void 0,width:"2px",height:"100%",zIndex:"tooltip",pointerEvents:"none",borderLeft:"2px dashed red"}):null};var dX=n(62344);let dQ=e=>{let t=(0,U.CG)(F.uD),n=(0,U.CG)(F.e0),{handlePresentNavigationEvent:i}=(0,dX._)(tp.R0.PRESENTER_VIEW_POPUP);(0,f.useEffect)(()=>{if(!t)return;let r=t=>{let{payload:r}=t;if(e)try{let{payload:e}=JSON.parse(r),{action:t,eventKey:s,method:o,toSessionId:l,fromUserId:a}=e;if(l!==(null==n?void 0:n.sessionId)||a!==(null==n?void 0:n.id))return;switch(t){case"goToCard":{let{cardId:n}=e;if(!n)break;i({eventType:t,eventKey:s,method:o,payload:{cardId:n}});break}case"toggleSpotlight":case"arrowRight":case"arrowLeft":case"arrowDown":case"arrowUp":case"restart":case"toggleExpanded":case"cancelCurrentAction":i({eventType:t,eventKey:s,method:o});break;default:console.warn("[usePresenterViewMessages] Unknown message type",e)}}catch(e){console.error("[usePresenterViewMessages] Error parsing message",e)}};return t.on("stateless",r),()=>{t.off("stateless",r)}},[e,null==n?void 0:n.sessionId,null==n?void 0:n.id,i,t])},d$=e=>{let{editor:t,enabled:n}=e,i=(0,U.TL)(),r=(0,f.useRef)(null),[s,o]=(0,f.useState)(!1),[l,a]=(0,f.useState)([0,0]),[c,d]=(0,f.useState)("bottom"),u=(0,U.CG)(F.Od),h=(0,f.useCallback)(()=>{o(!1)},[]),x=(0,f.useCallback)(()=>{a([0,0]),d("bottom")},[]),p=(0,f.useCallback)(e=>{o(!0),a(e)},[]),m=(0,f.useCallback)(e=>{var t;e.preventDefault(),p([e.clientX,e.clientY]);let n=null===(t=r.current)||void 0===t?void 0:t.offsetHeight;if(null==n)return;let i=window.innerHeight<e.clientY+n,s=e.clientY<n;i&&!s?d("top"):i&&s?d("center"):d("bottom")},[r,p]);(0,f.useEffect)(()=>{u||o(!1)},[u]),(0,f.useEffect)(()=>{if(t&&n)return nx.pw.on(nx.TI.OPEN_PRESENT_MODE_CONTEXT_MENU,e=>{let{e:t,pos:n,cardId:r}=e;m(t),i((0,F.$B)({pos:n,cardId:r}))})},[t,n,m,i]);let g=(0,f.useMemo)(()=>{var e;let t=l[1],n=null===(e=r.current)||void 0===e?void 0:e.offsetHeight,i=n?window.innerHeight-(t+n+8):void 0,s="center"===c&&i?"translateY(".concat(i,"px)"):"top"===c?"translateY(-100%)":void 0;return{left:l[0],top:l[1],transform:s,transformOrigin:"top"}},[c,l]);return{menuRef:r,isPresentModeMenuOpen:s,onPresentModeMenuClose:h,handleContextMenu:m,menuRootStyles:g,clearPositioning:x}};var d0=n(1737),d1=n(27988),d2=n(65342);let d5=e=>{let{children:t,icon:n,onClick:i,shouldHide:r=!1,...s}=e;return r?null:(0,a.jsx)(rh.s,{icon:n,onClick:i,...s,children:t})},d3=(0,f.forwardRef)((e,t)=>{let{editor:n,isOpen:i,onClose:r,readOnly:s,clearPositioning:o,rootStyles:l}=e,[c,d]=(0,f.useState)(null),u=(0,d1.q)(t,d),{pos:x,cardId:p}=(0,U.CG)(F.OH),{enabled:m}=(0,re.gZ)(n),{editCardInPresentMode:g}=(0,d2.l)({editor:n}),j=(0,eR.Yy)(),v=(0,f.useCallback)(()=>{m?null==n||n.commands.turnOffSpotlight():x?null==n||n.commands.spotlightNodeAtPos(x):p&&(null==n||n.commands.spotlightNextBlock()),r()},[m,x,p,r,null==n?void 0:n.commands]);return(0,f.useEffect)(()=>{var e;null==c||null===(e=c.parentElement)||void 0===e||e.addEventListener("contextmenu",e=>{e.preventDefault(),e.stopPropagation()})},[c]),(0,a.jsx)(ro.h,{children:(0,a.jsx)(eC.Wk,{isDark:j,children:(0,a.jsx)(ny.v,{isOpen:i,closeOnBlur:!1,isLazy:!0,children:(0,a.jsxs)(nw.q,{onContextMenu:e=>{e.preventDefault(),e.stopPropagation()},zIndex:"popover",ref:u,rootProps:{style:l},w:"260px",overflowY:"auto",onTransitionEnd:()=>{i||o()},children:[(0,a.jsx)(d5,{"data-testid":"present-mode-menu-item-edit",command:(0,eC.cE)("E"),shouldHide:s,icon:(0,a.jsx)(O.G,{fixedWidth:!0,icon:T.TzT}),onClick:g,children:(0,a.jsx)(h.cC,{id:"IkOuqb"})}),(0,a.jsx)(d5,{"data-testid":"present-mode-menu-item-spotlight",command:(0,eC.cE)("S"),icon:(0,a.jsx)(O.G,{fixedWidth:!0,icon:T.QMW}),onClick:v,children:m?(0,a.jsx)(h.cC,{id:"CzYGrQ"}):x?(0,a.jsx)(h.cC,{id:"LoLA00"}):p?(0,a.jsx)(h.cC,{id:"X1FNEK"}):null})]})})})})});d3.displayName="PresentModeContextMenuComponent";let d4=(0,f.memo)(d3);var d6=n(63176),d8=n(6185),d9=n.n(d8),d7=n(68642),ue=n(27875),ut=n.n(ue);let un={easeOutLinear:rX.gA,easeOutSine:rX.vh,easeOutCubic:rX.w2,easeOutCirc:rX.ei,easeOutQuad:rX.hl,easeOutQuart:rX.Y3,easeOutExpo:rX.ad,bezierCustom1:d9()(.13,.97,.035,.73),bezierCustom2:d9()(.105,1.15,.15,.355)},ui={UP:"up",DOWN:"down"},ur=e=>e?+new Date-+new Date(e):1/0,us=(e,t)=>{let n=(0,f.useMemo)(()=>new d7.Lethargy(6,120,.3,150),[]),{easing:i="easeOutCubic",touchpadFactor:r=1.5,triggerThreshold:s=1200}=t||{},o=(0,eq.As)("editor"),l=(0,U.CG)(F.i2),a=(0,f.useRef)(null),c=(0,f.useRef)(null),d=(0,f.useRef)(null),u=(0,f.useRef)(!1),h=(0,f.useRef)(null),x=(0,f.useRef)(null),[p,m]=(0,f.useState)(!1),[g,j]=(0,f.useState)(!1),v=(0,f.useRef)({counterTarget:0,counterCurrent:0,direction:ui.DOWN}),C=(0,f.useCallback)(()=>{var e;if(!a.current)return;let{counterTarget:t}=v.current,n=t/s*100,i=(null!=n?n:0)*2.64,r="".concat(i," ").concat(264-i),o=null===(e=a.current.querySelector(".chakra-progress"))||void 0===e?void 0:e.lastElementChild,l=a.current.querySelector(".chakra-progress__indicator");l&&l.setAttribute("stroke-dasharray",r),o&&(o.innerHTML="".concat(n.toFixed(0),"%"))},[s]),b=(0,f.useCallback)(()=>{let e=d.current,t=c.current;if(!t||!e)return;let n=e.querySelector(".chakra-progress__indicator"),r=t.querySelector(".chakra-progress__indicator");if(!n||!r)return;let o=v.current.counterCurrent/s,l=(550>ur(x.current)?1:null!=o?o:0)*264,a="".concat(l," ").concat(264-l),u=Math.max(56-56*un[i](Math.min(o,1)),0);e.style.transform="translateY(".concat(u,"px)"),t.style.transform="translateY(-".concat(u,"px)"),r.setAttribute("stroke-dasharray",a),n.setAttribute("stroke-dasharray",a)},[i,s]),y=(0,f.useCallback)(()=>{let e;if(u.current)return;let t=n=>{let i=e?n-e:0;if(e=n,.1>Math.abs(v.current.counterTarget-v.current.counterCurrent)){v.current.counterCurrent=v.current.counterTarget,b(),u.current=!1;return}v.current.counterCurrent=(0,rX.t7)(v.current.counterCurrent,v.current.counterTarget,ut()(60/(i?1e3/i:60)*.3,.3,1)),b(),requestAnimationFrame(t)};requestAnimationFrame(t)},[b]),k=(0,f.useCallback)(()=>{v.current.counterTarget=0,m(!1),j(!1),C(),y()},[y,C]);return(0,f.useEffect)(()=>{let t,i;if(!l||!e)return k();let a=document.querySelector((0,lI.U8)(l));if(!a)return k();let u=t=>{if(t.target.closest("[data-comments-wrapper]"))return;let l=n.check(t);if(null===d.current||null===c.current)return;let a=ur(h.current);if(a<500||a<1e3&&!1===l)return;let u=ur(x.current);if(u<500||u<1e3&&!1===l)return;let p=0===Math.abs(t.deltaY)?v.current.direction:t.deltaY>0?ui.DOWN:ui.UP;if(!("down"===p?o.isAtBottom():o.isAtTop()))return;clearTimeout(i);let f=t.wheelDeltaY?t.wheelDeltaY===-3*t.deltaY:0===t.deltaMode,g=Math.abs(void 0!==t.deltaY?t.deltaY:40)*(f?r:1);if(p!==v.current.direction){v.current.direction=p,k();return}j(p===ui.DOWN),m(p===ui.UP),v.current.counterTarget+=g,v.current.direction=p,v.current.counterTarget/s>=1?(e.commands.spotlightNextCard(p===ui.UP,p===ui.UP?"bottom":"top"),x.current=+new Date,setTimeout(()=>{k(),C()},250),setTimeout(()=>{x.current=null},1e3)):i=setTimeout(k,500),y(),C()},p=()=>{h.current=+new Date,clearTimeout(t),k(),t=setTimeout(()=>{h.current=null},1e3)};return a.addEventListener("scroll",p),a.addEventListener("wheel",u,{passive:!0}),C(),()=>{a.removeEventListener("scroll",p),a.removeEventListener("wheel",u)}},[e,n,y,i,r,s,o,C,b,k,l]),{debugRef:a,nextCardRef:d,prevCardRef:c,showNextCard:g,showPrevCard:p}},uo=e=>{let{editor:t}=e,n=(0,e0.ye)("debugLogging"),[i,r]=(0,f.useState)("easeOutExpo"),[s,o]=(0,f.useState)(1.5),[l,c]=(0,f.useState)(1200),{debugRef:d,nextCardRef:u,prevCardRef:h,showNextCard:x,showPrevCard:p}=us(t,{easing:i,touchpadFactor:s,triggerThreshold:l}),{prevCard:m,nextCard:g}=(0,U.CG)(e=>{let t=(0,F.i2)(e)||"",n=(0,F.X9)(e),i=Object.keys((n.parents[t]||[]).reduce((e,t)=>e[t],n.tree)),r=null,s=null;return i.forEach((e,o)=>{if(e!==t)return;let l=n.parents[t];0===o?l.length&&(r={cardId:l[l.length-1],isSibling:!1}):r={cardId:i[o-1],isSibling:!0},o===i.length-1?l.length&&(s={cardId:l[l.length-1],isSibling:!1}):s={cardId:i[o+1],isSibling:!0}}),{prevCard:r,nextCard:s}},tn()),j=null==g?void 0:g.cardId,v=null==m?void 0:m.cardId,C=(0,f.useMemo)(()=>{let e=null,n=null;return t&&t.state.doc.descendants(t=>!(0,eB.KH)(t)||(t.attrs.id===v?e=t:t.attrs.id===j&&(n=t),!!(!e&&v)||!!(!n&&j))),{prev:e,next:n}},[t,j,v]);return(0,a.jsxs)(a.Fragment,{children:[n&&(0,a.jsx)(ul,{ref:d,setEasing:r,setTouchpadFactor:o,setTriggerThreshold:c}),(0,a.jsx)(ua,{ref:h,direction:"up",node:C.prev,enabled:p,offset:16}),(0,a.jsx)(ua,{ref:u,direction:"down",node:C.next,enabled:x,offset:24})]})},ul=f.forwardRef((e,t)=>{let{setEasing:n,setTouchpadFactor:i,setTriggerThreshold:r}=e;return(0,a.jsxs)(c.k,{position:"absolute",alignItems:"center",bg:"gray.100",left:2,bottom:16,zIndex:"overlay",borderRadius:"md",border:"solid 2px var(--chakra-colors-trueblue-300)",p:1,children:[(0,a.jsxs)(ny.v,{closeOnSelect:!1,children:[(0,a.jsx)(nk.j,{as:ej.z,colorScheme:"trueblue",children:"Options"}),(0,a.jsxs)(nw.q,{minWidth:"240px",children:[(0,a.jsx)(eC.kH,{label:"How much total scrolling work do we need to do to trigger next/prev card?",placement:"right",children:(0,a.jsxs)(e3.x,{color:"gray",fontSize:"sm",fontWeight:"600",ml:2,pb:2,children:["Scroll Threshold"," ",(0,a.jsxs)("i",{children:["(default=",1200,")"]})]})}),(0,a.jsxs)(d6.Y2,{defaultValue:1200,min:100,max:1e4,precision:0,step:100,onChange:(e,t)=>r(t),children:[(0,a.jsx)(d6.zu,{}),(0,a.jsxs)(d6.Fi,{children:[(0,a.jsx)(d6.WQ,{}),(0,a.jsx)(d6.Y_,{})]})]}),(0,a.jsx)(ru.R,{}),(0,a.jsx)(eC.kH,{label:"How much extra weight do we give to touchpad scroll events?",placement:"right",children:(0,a.jsxs)(e3.x,{color:"gray",fontSize:"sm",fontWeight:"600",ml:2,pb:2,children:["Touchpad Multiplier"," ",(0,a.jsxs)("i",{children:["(default=",1.5,")"]})]})}),(0,a.jsxs)(d6.Y2,{defaultValue:1.5,min:1,max:10,precision:1,step:.1,onChange:(e,t)=>i(t),children:[(0,a.jsx)(d6.zu,{}),(0,a.jsxs)(d6.Fi,{children:[(0,a.jsx)(d6.WQ,{}),(0,a.jsx)(d6.Y_,{})]})]}),(0,a.jsx)(ru.R,{}),(0,a.jsxs)(nS._,{defaultValue:"easeOutExpo",title:"Easing (of peek element)",type:"radio",onChange:e=>n(e),children:[(0,a.jsx)(nE.i,{value:"easeOutLinear",children:"easeOutLinear"}),(0,a.jsx)(nE.i,{value:"easeOutSine",children:"easeOutSine"}),(0,a.jsx)(nE.i,{value:"easeOutCubic",children:"easeOutCubic"}),(0,a.jsx)(nE.i,{value:"easeOutCirc",children:"easeOutCirc"}),(0,a.jsx)(nE.i,{value:"easeOutQuad",children:"easeOutQuad"}),(0,a.jsx)(nE.i,{value:"easeOutQuart",children:"easeOutQuart"}),(0,a.jsx)(nE.i,{value:"easeOutExpo",children:"easeOutExpo"}),(0,a.jsx)(nE.i,{value:"bezierCustom1",children:"bezierCustom1"}),(0,a.jsx)(nE.i,{value:"bezierCustom2",children:"bezierCustom2"})]})]})]}),(0,a.jsx)(c.k,{ref:t,direction:"column",alignItems:"center",width:"85px",ml:1,sx:{".chakra-progress__indicator":{transition:"none !important",opacity:1}},children:(0,a.jsx)(cV.D,{value:40,color:"trueblue.500",children:(0,a.jsx)(cK,{})})})]})});ul.displayName="PeekDebugger";let ua=f.forwardRef((e,t)=>{let{direction:n,enabled:i,node:r,offset:s}=e,[o,l]=(0,f.useState)(!1),[d,u]=(0,f.useState)(r);(0,f.useEffect)(()=>{l(!0);let e=setTimeout(()=>{l(!1),u(r)},550);return()=>{clearTimeout(e)}},[r]);let h=(0,f.useMemo)(()=>d?(0,lS.getCardTitle)(d.toJSON()):"",[d]),x=!!d;return(0,a.jsx)(c.k,{ref:t,pointerEvents:"none",position:"absolute",justifyContent:"center",width:"100%",zIndex:"overlay",top:"up"===n?"".concat(s,"px"):"inherit",bottom:"down"===n?"".concat(s,"px"):"inherit",children:(0,a.jsxs)(c.k,{bg:"gray.100",borderRadius:"md",boxShadow:"md",h:"".concat(40,"px"),maxWidth:"450px",justifyContent:"center",opacity:i?1:0,transition:"opacity ".concat(300,"ms ease-out"),textAlign:"center",alignItems:"center",direction:"row",px:2,sx:{".chakra-progress__indicator":{transition:"none !important",opacity:1}},children:[(0,a.jsx)(cV.D,{display:x?"block":"none",color:"trueblue.500",size:"20px",thickness:"16px",children:(0,a.jsx)(cK,{visibility:o?"visible":"hidden",children:(0,a.jsx)(O.G,{icon:T.fV7,fontSize:"14px",style:{color:"var(--chakra-colors-gray-100)",backgroundColor:"var(--chakra-colors-trueblue-500)",borderRadius:"10px"}})})}),x||"up"!==n?x||"down"!==n?null:(0,a.jsx)(O.G,{icon:T.m5q,size:"xs",color:"var(--chakra-colors-gray-600)"}):(0,a.jsx)(O.G,{icon:T.ytF,size:"xs",color:"var(--chakra-colors-gray-600)"}),(0,a.jsx)(c.k,{width:1}),(0,a.jsx)(e3.x,{noOfLines:1,textOverflow:"ellipsis",overflowX:"hidden",fontSize:"md",color:x?"gray.800":"gray.600",px:2,children:x?h:"down"===n?"End of presentation":"Start of presentation"})]})})});ua.displayName="PeekCardTab";let uc=()=>{let[e,t]=(0,f.useState)(["",[],{}]),n=(0,U.qr)();return(0,f.useEffect)(()=>n.subscribe(()=>{let e=n.getState(),i=(0,F.X9)(e),r=(0,F.i2)(e)||"",s=i.parents[r]||[],o={};Object.keys(i.tree).forEach(e=>{let t=[],n=e=>{Object.keys(e).forEach(i=>{t.push(i),n(e[i])})};n(i.tree[e]),o[e]=t}),t([r,s,o])}),[n]),e},ud=()=>{let[e,t,n]=uc(),i=Object.keys(n);return(0,a.jsx)(eg.U,{position:"fixed",bottom:0,w:"100vw",zIndex:10,background:"blackAlpha.200",px:"6px",py:"2px",align:"end",spacing:"2px",opacity:e?1:0,transitionProperty:"opacity",transitionDuration:"normal",children:i.map((r,s)=>{let o=[...t,e][0],l=i.indexOf(o),c=n[o],d=0,u=100;return e&&c&&-1===i.indexOf(e)&&(d=(c.indexOf(e)+1)/c.length*100,u=1/c.length*100),(0,a.jsx)(ux,{cardId:r,state:s===l?"current":s<=l?"prev":"next",percent:d,unit:u},r)})})},uu="var(--chakra-colors-trueblue-200)",uh="var(--chakra-colors-trueblue-100)",ux=e=>{let{cardId:t,state:n,percent:i,unit:r}=e,s="linear-gradient(to right, ".concat(uu," 0% ").concat(i,"%, ").concat("var(--chakra-colors-trueblue-300)"," ").concat(i,"% ").concat(i+r,"%, ").concat(uh," ").concat(i+r,"% 100%)");return(0,a.jsx)(c.k,{borderRadius:"2px",flex:"1",h:"6px",bg:"current"===n?s:"prev"===n?uu:uh},t)},up=(0,nM.ZP)("Esc"),um=e=>{let{editor:t,showNavigationControls:n}=e,[i,r]=(0,f.useState)(null),s=(0,g.v9)(F.JA),o=(0,f.useRef)(s),l=(0,g.I0)(),d=(0,n1.Br)("edit"),u=(0,aE.y)("presentModeCursor"),x=(0,d0.tE)({enabled:!s,setActiveKey:r});dQ(t);let{menuRef:p,isPresentModeMenuOpen:m,onPresentModeMenuClose:j,menuRootStyles:v,clearPositioning:C}=d$({editor:t,enabled:!0});return(0,f.useEffect)(()=>(l((0,F.e)({isEditingInSlideView:!1})),()=>{l((0,F.e)({isEditingInSlideView:!1}))}),[l]),o.current=s,(0,f.useEffect)(()=>es.F7.on("keydown","SLIDE_VIEW",e=>!!(o.current&&up(e))&&(l((0,F.e)({isEditingInSlideView:!1})),e.preventDefault(),!0)),[l]),(0,dN.us)(),(0,aS.O)({ref:p,enabled:m,handler(e){e instanceof MouseEvent&&2!==e.button&&j()}}),(0,a.jsxs)(a.Fragment,{children:[t&&(0,a.jsx)(d4,{ref:p,editor:t,readOnly:!d,isOpen:m,onClose:j,clearPositioning:C,rootStyles:v}),(0,a.jsx)(uo,{editor:t}),(0,a.jsx)(ud,{}),(0,a.jsx)(c.k,{position:"absolute",inset:0,width:"100%",height:"100%",pointerEvents:"none",justify:"flex-end",children:(0,a.jsxs)(c.k,{bg:"gray.50",position:"fixed",bottom:6,right:6,p:3,px:6,justify:"flex-end",align:"center",opacity:s?1:0,pointerEvents:s?"auto":"none",transitionProperty:"opacity, transform",transitionDuration:"normal",transitionTimingFunction:"ease",transform:s?"translate(0,0)":"translate(0,100%)",borderRadius:"md",shadow:"md",zIndex:"overlay",children:[(0,a.jsx)(e3.x,{size:"sm",mr:3,children:(0,a.jsx)(h.cC,{id:"DjD/sG"})}),(0,a.jsx)(ej.z,{size:"sm",variant:"solid",onClick:()=>l((0,F.e)({isEditingInSlideView:!1})),children:(0,a.jsx)(h.cC,{id:"DPfwMq"})})]})}),u&&(0,a.jsx)(dZ,{editor:t}),n&&(0,a.jsx)(d0.nP,{activeKey:i,spotlightingByBlock:x})]})};var uf=n(50423),ug=n(61836);let uj=tH.S.filmstrip,uv=tH.S.filmstrip-1,uC={duration:.25,delay:.75},ub={duration:.25},uy="filmstrip-root",uk=".".concat(uy),uw="filmstrip-scroller",uS=".".concat(uw),uE=f.createContext({state:{navItemPreviewRefMap:{}},setNavItemPreviewRef:()=>{throw Error("context not initialized")}}),uI=e=>{let{children:t}=e,[n,i]=(0,f.useState)({navItemPreviewRefMap:{}}),r=(0,f.useMemo)(()=>{let e=[],t=null,r=()=>{let r;t=null;let s={...n.navItemPreviewRefMap},o=!1;for(;r=e.shift();){let[e,t]=r;s[e]!==t&&(s[e]=t,o=!0)}o&&i(e=>({...e,navItemPreviewRefMap:s}))},s=()=>{t&&(clearTimeout(t),t=null)};return(n,i)=>{s(),e.push([n,i]),t=setTimeout(r,0)}},[n.navItemPreviewRefMap]);return(0,a.jsx)(uE.Provider,{value:{state:n,setNavItemPreviewRef:r},children:t})};function uA(){return(0,f.useContext)(uE)}var u_=n(9340);let uT=(0,f.createContext)(null);var uO=n(3105),uD=n(44866),uR=n(65339);let uP=(0,f.forwardRef)(function({children:e,as:t="ul",axis:n="y",onReorder:i,values:r,...s},o){let l=(0,uO.h)(()=>(0,lc.E)(t)),a=[],c=(0,f.useRef)(!1);return(0,u_.k)(!!r,"Reorder.Group must be provided a values prop"),(0,f.useEffect)(()=>{c.current=!1}),f.createElement(l,{...s,ref:o},f.createElement(uT.Provider,{value:{axis:n,registerItem:(e,t)=>{t&&-1===a.findIndex(t=>e===t.value)&&(a.push({value:e,layout:t[n]}),a.sort(uz))},updateOrder:(e,t,n)=>{if(c.current)return;let s=function(e,t,n,i){if(!i)return e;let r=e.findIndex(e=>e.value===t);if(-1===r)return e;let s=i>0?1:-1,o=e[r+s];if(!o)return e;let l=e[r],a=o.layout,c=(0,uR.C)(a.min,a.max,.5);return 1===s&&l.layout.max+n>c||-1===s&&l.layout.min+n<c?(0,uD.uo)(e,r,r+s):e}(a,e,t,n);a!==s&&(c.current=!0,i(s.map(uL).filter(e=>-1!==r.indexOf(e))))}}},e))});function uL(e){return e.value}function uz(e,t){return e.layout.min-t.layout.min}var uG=n(40226),uN=n(60976);function uM(e){let t=(0,uO.h)(()=>(0,uG.B)(e)),{isStatic:n}=(0,f.useContext)(uN._);if(n){let[,n]=(0,f.useState)(e);(0,f.useEffect)(()=>t.on("change",n),[])}return t}var uU=n(83972);let uF=e=>"object"==typeof e&&e.mix,uW=e=>uF(e)?e.mix:void 0;var uH=n(23617),uq=n(58387);function uB(e,t){let n=(0,uO.h)(()=>[]);return function(e,t){var n,i;let r=uM(t()),s=()=>r.set(t());return s(),n=()=>uq.Z_.update(s,!1,!0),i=()=>uq.qY.update(s),(0,uH.L)(()=>{let t=e.map(e=>e.on("change",n));return()=>{t.forEach(e=>e()),i()}}),r}(e,()=>{n.length=0;let i=e.length;for(let t=0;t<i;t++)n[t]=e[t].get();return t(n)})}var uV=n(15815);function uK(e,t=0){return(0,uV.i)(e)?e:uM(t)}let uY={Group:uP,Item:(0,f.forwardRef)(function({children:e,style:t={},value:n,as:i="li",onDrag:r,layout:s=!0,...o},l){let a=(0,uO.h)(()=>(0,lc.E)(i)),c=(0,f.useContext)(uT),d={x:uK(t.x),y:uK(t.y)},u=function(e,t,n,i){let r="function"==typeof t?t:function(...e){let t=!Array.isArray(e[0]),n=t?0:-1,i=e[0+n],r=e[1+n],s=e[2+n],o=e[3+n],l=(0,uU.s)(r,s,{mixer:uW(s[0]),...o});return t?l(i):l}(t,void 0,void 0);return Array.isArray(e)?uB(e,r):uB([e],([e])=>r(e))}([d.x,d.y],([e,t])=>e||t?1:"unset"),h=(0,f.useRef)(null);(0,u_.k)(!!c,"Reorder.Item must be a child of Reorder.Group");let{axis:x,registerItem:p,updateOrder:m}=c;return(0,f.useEffect)(()=>{p(n,h.current)},[c]),f.createElement(a,{drag:x,...o,dragSnapToOrigin:!0,style:{...t,x:d.x,y:d.y,zIndex:u},layout:s,onDrag:(e,t)=>{let{velocity:i}=t;i[x]&&m(n,d[x].get(),i[x]),r&&r(e,t)},onLayoutMeasure:e=>{h.current=e},ref:l},e)})};var uZ=n(39871),uJ=n(50645),uX=n(67154),uQ=n(48380);let u$=e=>{let{content:t,selection:n}=(0,uX.i)(e),i=!!(null==t?void 0:t.content),r=(0,f.useMemo)(()=>{var e;if(!i)return[];let n=t.content,r=(null==n?void 0:n[0].content)||[],s=null===(e=t.content)||void 0===e?void 0:e[0].attrs;return r.map(e=>{var t;return s&&(null===(t=e.attrs)||void 0===t?void 0:t.id)?{cardId:e.attrs.id,isDragging:!1,displayBehavior:"normal"}:null}).filter(e=>null!==e)},[t,i]),s=(0,U.CG)(uQ.ZD,(e,t)=>tn()(e,t)).map(e=>r.find(t=>t.cardId===e.cardId)?{...e}:null).filter(e=>null!==e),o=(0,U.CG)(uQ.Ae);return{isDragging:o,cards:o?s:r,editorContent:t,selection:n,isLoaded:i}},u0=e=>({backgroundColor:e?"gray.700":"gray.200",activeButtonColor:e?"gray.50":"trueblue.500",inactiveButtonColor:e?"gray.50":"gray.900",closeButtonColorScheme:e?"gray":"blackAlpha"}),u1=e=>{let{onClose:t,isDark:n,viewPreference:i,setViewPreference:r}=e,s="list"===i,{activeButtonColor:o,inactiveButtonColor:l,backgroundColor:d,closeButtonColorScheme:u}=u0(n),p=(0,eM.z$)(),m=(0,f.useCallback)(e=>()=>{r(e),null==p||p.track(eM.AA.FILMSTRIP_TOGGLE_VIEW,{view:e})},[p,r]);return(0,a.jsxs)(c.k,{p:"8px",pb:"2px",children:[(0,a.jsxs)(eg.U,{spacing:0,bg:d,p:.5,borderRadius:"md",children:[(0,a.jsx)(eC.kH,{label:(0,a.jsx)(h.cC,{id:"Rv+zkJ"}),children:(0,a.jsx)(ej.z,{size:"xs",variant:s?"ghost":"plain",color:s?l:o,onClick:m("film"),"data-testid":"filmstrip-view-button",children:(0,a.jsx)(eg.U,{children:(0,a.jsx)(O.G,{icon:T.CjD})})})}),(0,a.jsx)(eC.kH,{label:(0,a.jsx)(h.cC,{id:"5NZpX8"}),children:(0,a.jsx)(ej.z,{size:"xs",variant:s?"plain":"ghost",color:s?o:l,onClick:m("list"),"data-testid":"list-view-button",children:(0,a.jsx)(eg.U,{children:(0,a.jsx)(O.G,{icon:T.Zrf})})})})]}),(0,a.jsx)(eC.kH,{label:(0,a.jsx)(h.cC,{id:"C8DFL7"}),shortcut:"Mod+\\",children:(0,a.jsx)(I.h,{variant:"ghost","aria-label":x.ag._({id:"C8DFL7"}),"data-testid":"close-filmstrip-button",colorScheme:u,isRound:!0,size:"xs",icon:(0,a.jsx)(O.G,{icon:T.g82}),outlineOffset:"0px",ml:"auto",onClick:e=>{e.stopPropagation(),t()},onMouseDown:aO.br})})]})};var u2=n(29803),u5=n(8839),u3=n(38564),u4=n(56143),u6=n(25779),u8=n(50381),u9=n.n(u8),u7=n(9850),he=n.n(u7),ht=n(39198),hn=n(68498),hi=n(66490),hr=n(46577),hs=n(48972),ho=n(65277),hl=n(51161);let ha=(e,t)=>{let n=u3.Gk.getState(e.state).undoManager,i=n.undoStack[n.undoStack.length-1];i&&i.meta.set("filmstripState",t)},hc=e=>{let t=(0,U.CG)(uZ.wg),n=(0,U.CG)(uZ.zq),i=(0,U.TL)(),r=(0,ir.p)(),s=(0,f.useCallback)(n=>{var i;if(!e)return;let s=(0,eB.Lz)(e,t);if(!s.length)return;let o=t$.HY.from(s),l=(0,hs.G8)(o,e.schema);if(!l){r({title:n?(0,a.jsx)(h.cC,{id:"33a+2Q"}):(0,a.jsx)(h.cC,{id:"FntfNT"}),status:"error",duration:3e3,position:"top"});return}null===(i=document.getSelection())||void 0===i||i.removeAllRanges(),u9()(l,{format:"text/html"});let c=hi.Z.getState(e.state);c&&!n&&c.clearCutData(),r({title:n?(0,a.jsx)(h.cC,{id:"VG4BD6",values:{0:s.length,1:s.length}}):(0,a.jsx)(h.cC,{id:"GtH+14",values:{0:s.length,1:s.length}}),status:"success",duration:3e3,position:"top"})},[e,t,r]),o=(0,f.useCallback)(()=>{s(!1)},[s]),l=(0,f.useCallback)(function(){let n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e)return;let r=(0,uZ.ym)((0,U.bh)().getState());i((0,uZ.jf)()),e.commands.deleteCardsById(t,n),ha(e,r)},[i,e,t]),c=(0,f.useCallback)(()=>{if(!e||0===t.length)return;let n="";if(1===t.length){let i=(0,eB.Bw)(e,t[0]);i&&(n=(0,u6.getCardTitle)(i.node.toJSON())||"")}l();let i=n?'"'.concat(n,'"'):x.ag._({id:"FyJPFh"}),s=r({title:(0,a.jsxs)(eg.U,{children:[(0,a.jsx)(e3.x,{noOfLines:1,children:(0,a.jsx)(h.cC,{id:"OJTPnC",values:{displayTitle:i,0:t.length,1:t.length}})}),(0,a.jsx)(i4.r,{textDecoration:"underline",onClick:()=>{(0,u4.Yw)(e.state),r.close(s)},children:(0,a.jsx)(h.cC,{id:"9uI/rE"})})]}),status:"info",duration:3e3,position:"top"})},[l,e,t,r]),d=(0,f.useCallback)(()=>{0!==t.length&&(s(!0),l(!0))},[l,s,t]),u=(0,f.useCallback)(()=>{if(!e||0===t.length)return;let s=(0,eB.Lz)(e,t);if(s.length){let t=(0,eB.Bw)(e,n),o=t?t.pos+t.node.nodeSize:e.state.doc.content.size-1,l=s.map(e=>(0,eT.hs)(he()(e.toJSON()))).map(e=>(0,hr.Zs)(e)),c=(0,uZ.ym)((0,U.bh)().getState());e.chain().insertContentAt(o,l,{updateSelection:!1}).command(e=>{let{tr:t}=e,n=(0,hl.t)(t.doc.resolve(o));return n&&(t=t.setSelection(n)),t.setMeta(ho.q,!0),t.setMeta(hn.k,!0),!0}).scrollIntoView().run(),ha(e,c),i((0,uZ.xi)({beforeCardId:null==t?void 0:t.node.attrs.id,cardCount:l.length})),r({title:(0,a.jsx)(h.cC,{id:"ClnFsQ",values:{0:s.length,1:s.length}}),status:"success",duration:3e3,position:"top"})}},[i,e,n,r,t]);return{handleAddCard:(0,f.useCallback)(()=>{if(!e)return;let t=(0,uZ.zq)((0,U.bh)().getState()),n=(0,eB.Bw)(e,t);if(!n)return;let{pos:r}=n,s=e.view.state.doc.nodeAt(r);if(!s){console.error("[Filmstrip] Cannot append card. Node unknown");return}let o=r+s.nodeSize,l=(0,ht.e1)().blankCard;(0,ht.ZT)({key:"blankCard",nodeName:"card"},tp.fe.FILMSTRIP_CARD_MENU);let a=(0,uZ.ym)((0,U.bh)().getState());e.chain().insertContentAt(o,(0,hr.Zs)(l),{updateSelection:!1}).command(e=>{let{tr:t}=e,n=(0,hl.t)(t.doc.resolve(o));return n&&(t=t.setSelection(n)),t.setMeta(ho.q,!0),t.setMeta(hn.k,!0),!0}).scrollIntoView().run(),ha(e,a),i((0,uZ.xi)({beforeCardId:null==n?void 0:n.node.attrs.id,cardCount:1}))},[i,e]),handleCopy:o,handleDelete:c,handleCut:d,handleDuplicate:u}},hd=e=>{let{children:t,icon:n,onClick:i,shouldHide:r=!1,...s}=e;return r?null:(0,a.jsx)(rh.s,{icon:n,onClick:i,...s,children:t})},hu=(0,f.memo)(e=>{let{isDark:t}=e;return(0,a.jsxs)(d.xu,{as:"span",className:"fa-layers fa-fw",children:[(0,a.jsx)(O.G,{fixedWidth:!0,icon:T.lCX}),(0,a.jsx)(O.G,{icon:e6.diR,transform:"shrink-4 right-6 down-4",color:"var(--menu-bg, white)"}),(0,a.jsx)(O.G,{icon:e6.diR,transform:"shrink-7 right-6 down-4"}),(0,a.jsx)(O.G,{icon:e6.r8p,color:t?"var(--chakra-colors-gray-800)":"var(--chakra-colors-gray-100)",transform:"shrink-10 right-6 down-4"})]})});hu.displayName="AddCardIcon";let hh=(e,t)=>{if(0===e.length||!t)return null;if(1===e.length){let n=(0,eB.Bw)(t,e[0]);return n?(0,lS.getCardTitle)(n.node.toJSON())||"Untitled card":null}return"Multiple cards selected"},hx=(0,f.forwardRef)((e,t)=>{let{editor:n,isOpen:i,onClose:r,readOnly:s,clearPositioning:o,rootStyles:l,isDark:c}=e,d=(0,U.CG)(F.yx),u=(0,ir.p)(),{handleCopy:x,handleDelete:p,handleCut:m,handleDuplicate:g,handleAddCard:j}=hc(n),v=(0,U.CG)(uZ.wg),C=1===v.length,b=(0,f.useMemo)(()=>C?(0,ek.gq)({cardId:v[0],docId:null==d?void 0:d.id,isPresentMode:!1}):"",[null==d?void 0:d.id,C,v]),{onCopy:y}=(0,is.V)(b),k=(0,f.useCallback)(()=>{y(),u({title:(0,a.jsx)(h.cC,{id:"h5GS+N"}),status:"success",duration:3e3,position:"top"})},[y,u]),w=(0,u5.K)(),S=(0,f.useMemo)(()=>hh(v,n),[n,v]),E=(0,f.useMemo)(()=>c?{"--menu-bg":"var(--chakra-colors-gray-900)","&:focus":{"--menu-bg":"var(--chakra-colors-gray-800)"}}:{},[c]);return(0,a.jsx)(ny.v,{isOpen:i,onClose:r,children:(0,a.jsxs)(nw.q,{className:"filmstrip-card-menu",onContextMenu:e=>{e.preventDefault()},zIndex:"popover",ref:t,rootProps:{style:l},w:"260px",overflowY:"auto",onTransitionEnd:()=>{i||o()},children:[S&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e3.x,{pl:3,color:c?"gray.400":"gray.600",noOfLines:1,"data-testid":"filmstrip-card-menu-card-title",children:S}),(0,a.jsx)(ru.R,{})]}),(0,a.jsx)(hd,{"data-testid":"filmstrip-card-menu-item-cut",shouldHide:s,command:(0,eC.cE)("Mod+X"),icon:(0,a.jsx)(O.G,{fixedWidth:!0,icon:T.EQg}),onClick:m,children:(0,a.jsx)(h.cC,{id:"cCd8Bs"})}),(0,a.jsx)(hd,{"data-testid":"filmstrip-card-menu-item-copy",shouldHide:s,command:(0,eC.cE)("Mod+C"),icon:(0,a.jsx)(O.G,{fixedWidth:!0,icon:T.kZ_}),onClick:x,children:(0,a.jsx)(h.cC,{id:"he3ygx"})}),(0,a.jsx)(hd,{"data-testid":"filmstrip-card-menu-item-duplicate",shouldHide:s,command:(0,eC.cE)("Mod+D"),icon:(0,a.jsx)(O.G,{fixedWidth:!0,icon:T.WM4}),onClick:g,children:(0,a.jsx)(h.cC,{id:"euc6Ns"})}),(0,a.jsx)(hd,{"data-testid":"filmstrip-card-menu-item-add-card",shouldHide:s,icon:(0,a.jsx)(hu,{isDark:c}),onClick:j,sx:E,children:(0,a.jsx)(h.cC,{id:"90n2YU"})}),!s&&(0,a.jsx)(ru.R,{}),(0,a.jsx)(hd,{"data-testid":"filmstrip-card-menu-item-copy-link",shouldHide:!C,icon:(0,a.jsx)(u2.x,{isLocked:!w,isDark:c}),onClick:k,children:(0,a.jsx)(h.cC,{id:"F0YmUY"})}),(0,a.jsx)(hd,{"data-testid":"filmstrip-card-menu-item-delete",color:c?"red.300":"red.500",icon:(0,a.jsx)(O.G,{icon:T.XAH,fixedWidth:!0}),onClick:p,shouldHide:s,children:(0,a.jsx)(h.cC,{id:"cnGeoo"})})]})})});hx.displayName="FilmstripCardMenuComponent";let hp=(0,f.memo)(hx);var hm=n(58763),hf=n(3194);let hg=(0,lc.E)(d.xu),hj=e=>{let{isEditorFocused:t,isFilmstripSelected:n,shouldHide:i,cardId:r,isDraggingCard:s,isDragInProgress:o,index:l}=e;return(0,a.jsxs)(c.k,{boxShadow:n?"var(--fs-item-selected-box-shadow)":t?"var(--fs-item-focused-box-shadow)":"var(--fs-item-box-shadow)",transitionProperty:"common",transitionDuration:"normal",borderRadius:"sm",overflow:"hidden",display:i?"none":void 0,children:[(0,a.jsx)(hv,{shouldFixHeight:!i&&o,cardId:r}),(0,a.jsx)(ld.M,{children:!i&&!s&&(0,a.jsx)(hg,{position:"absolute",exit:{opacity:0},transition:{duration:.2},bottom:1,left:1,px:1.5,borderRadius:"md",boxShadow:"base",borderWidth:"1px",borderColor:"var(--fs-item-card-number-border-color)",bg:"var(--fs-item-card-number-background-color)",color:"var(--fs-item-card-number-color)",fontWeight:600,fontSize:"xs",children:(0,a.jsx)(e3.x,{children:l})},l)})]})},hv=e=>{let{cardId:t,shouldFixHeight:n}=e,{setNavItemPreviewRef:i}=uA(),r=(0,U.CG)(F.Pu),s=(0,hm.J)(r,!1),o=(0,f.useRef)(null);return(0,f.useEffect)(()=>{o.current&&(n?o.current.style.height="".concat(o.current.offsetHeight,"px"):o.current.style.height="")},[n]),(0,a.jsx)(c.k,{ref:o,className:"filmstrip-nav-item-wrapper",sx:t4.n,css:{"--editor-font-size":"calc(var(--editor-width) / ".concat(hf.DB,")"),"--thumbnail-min-height":"calc(var(--editor-width) * 0.4)"},justifyContent:"center",overflow:"hidden",pointerEvents:"none",bg:"gray.100",minH:"var(--thumbnail-min-height)",maxH:"calc(var(--editor-width) * 1.5)",w:"var(--editor-width)",children:(0,a.jsx)("div",{className:"ProseMirror",children:(0,a.jsx)(c.k,{className:"doc-content-wrapper",direction:"column",align:"center",sx:s,inert:"true",children:(0,a.jsx)("div",{style:{width:"100%"},ref:e=>{e&&i(t,e)}})})})})},hC=e=>{let{cardId:t,index:n,isEditorFocused:i,isFilmstripSelected:r}=e,{title:s}=(0,ti.T)({cardId:t});return(0,a.jsxs)(c.k,{className:"filmstrip-nav-item-wrapper",w:"var(--editor-width)",justifyContent:"flex-start",fontSize:"xs",borderRadius:"sm",boxShadow:r?"var(--fs-text-item-selected-box-shadow)":i?"var(--fs-item-focused-box-shadow)":"var(--fs-item-box-shadow)",color:r?"trueblue.500":void 0,transitionProperty:"common",transitionDuration:"normal",_hover:{".filmstrip-text-item-number":{display:"none"},".filmstrip-text-drag-handle":{display:"block"}},children:[(0,a.jsxs)(c.k,{alignItems:"center",bg:r?"trueblue.100":"var(--fs-text-item-card-number-bg-color)",transitionProperty:"common",transitionDuration:"normal",children:[(0,a.jsx)(d.xu,{className:"filmstrip-text-item-number",w:6,fontSize:n>=1e3?"0.6rem":void 0,textAlign:"center",overflow:"hidden",whiteSpace:"nowrap",children:n}),(0,a.jsx)(d.xu,{className:"filmstrip-text-drag-handle",display:"none",textAlign:"center",w:6,fontSize:"md",_hover:{cursor:"grab"},children:(0,a.jsx)(O.G,{icon:T.Okg})})]}),(0,a.jsx)(c.k,{"data-testid":"filmstrip-text-item-title",p:2,pl:"4px",flex:1,bg:r?"trueblue.50":"var(--fs-text-item-bg-color)",alignItems:"center",overflow:"hidden",transitionProperty:"common",transitionDuration:"normal",inert:"true",children:(0,a.jsx)(e3.x,{noOfLines:1,children:s||(0,a.jsx)(h.cC,{id:"wja8aL"})})})]})},hb=e=>{let{filmstripItemRef:t,cardId:n,isFilmstripSelected:i,currentFocusedCard:r,editor:s,isAnimating:o}=e,l=(0,eq.As)("filmstrip"),a=(0,U.CG)(uZ.DM);(0,f.useEffect)(()=>{t.current&&n===r&&(((null==s?void 0:s.isFocused)||(null==s?void 0:s.isThumbnail))&&!o?l.scrollElementIntoView({element:t.current,offsetFromTop:120}):i&&n===a&&requestAnimationFrame(()=>{if(!t.current||!l.scroller)return;let e=l.scroller.getBoundingClientRect(),n=t.current.getBoundingClientRect(),i=n.top,r=n.bottom,s=n.height,o=0,a=t.current.closest(".reorder-item");if(a instanceof HTMLElement&&(o=a.offsetTop),r>=e.bottom){let e=Math.max(0,o+s-l.scroller.clientHeight+4);l.scrollTo({top:e})}else i<=e.top&&l.scrollTo({top:o})}))},[n,r,s,a,i,l,t,o])},hy=()=>{let e=(0,el.iq)({lg:100,xl:125,"2xl":150})||100,t=(0,U.CG)(uZ.K5),n=null!==t?t:e;return{previewWidth:n,width:n+40,fontSize:n/hf.DB}},hk=(0,lc.E)(c.k),hw=e=>{let{card:t,index:n,isFirst:i,isEditorFocused:r,currentFocusedCard:s,isFilmstripSelected:o,readOnly:l,shouldHide:c,isDragInProgress:u,numberOfCardsDragging:h,onContextClick:x,editor:p,isAnimating:m,showTextOnly:g}=e,{cardId:j,isDragging:v}=t,C=(0,f.useRef)(null);hb({filmstripItemRef:C,cardId:j,isFilmstripSelected:o,currentFocusedCard:s,editor:p,isAnimating:m});let b=(0,U.TL)(),{previewWidth:y}=hy(),k=(0,f.useCallback)(e=>{if(!j)return;let t=e.shiftKey,n=!t&&(e.metaKey||e.ctrlKey);if(t&&!l)b((0,uZ.YC)({id:j,currentFocusedCard:s}));else if(n&&!l)b((0,uZ.sY)({id:j}));else{if(u)return;b((0,uZ.Ti)({id:j})),b((0,F.Qx)({attached:!1})),p&&(0,tl.YS)({cardId:j,editor:p})}},[j,l,b,s,u,p]);return(0,a.jsxs)(d.xu,{className:"filmstrip-item",ref:C,pos:"relative",pt:g?void 0:1,mt:g?1.5:i?void 0:1,onClick:k,onContextMenu:x,cursor:"pointer",userSelect:"none",transitionProperty:"common",transitionDuration:"normal",display:c?"none":void 0,"data-filmstrip-selected":o,"data-filmstrip-view":g?"list":"filmstrip",css:{"--editor-width":"".concat(y,"px")},children:[g&&(0,a.jsx)(hC,{cardId:j,index:n,isFilmstripSelected:o,isEditorFocused:r}),(0,a.jsx)(hj,{shouldHide:c||g,cardId:j,index:n,isDraggingCard:v,isDragInProgress:u,isFilmstripSelected:o,isEditorFocused:r}),(0,a.jsx)(ld.M,{children:h&&(0,a.jsx)(d.xu,{position:"absolute",bottom:0,left:0,transform:"translate(-50%, 50%)",children:(0,a.jsx)(hk,{initial:{scale:.5,opacity:0},exit:{scale:.5,opacity:0},animate:{scale:1,opacity:1},h:5,minW:5,px:1,borderRadius:"full",bg:"trueblue.300",color:"white",fontSize:"xs",fontWeight:600,boxShadow:"sm",justify:"center",align:"center",children:(0,a.jsx)(e3.x,{children:h})},"badge-number")})})]})};var hS=n(28316),hE=n(34584),hI=n(3939),hA=n(27210),h_=n(82098);let hT=(0,f.forwardRef)(function(e,t){let{reduxData:n,...i}=e,r=(0,h_.c)(n);return(0,a.jsx)(g.zt,{store:r,children:(0,a.jsx)(hO,{ref:t,...i})})}),hO=(0,f.forwardRef)(function(e,t){let{parent:n,theme:i,portalComponent:r,parentIsStreaming:s}=e,o=(0,f.useMemo)(()=>(0,tO.e)(),[]),l=(0,U.TL)();(0,f.useEffect)(()=>{l((0,F.Dc)({theme:i||null})),l((0,F.iS)({isAllowedToEdit:!1})),l((0,F.Nr)({animationsEnabled:!1}))},[i,l]);let c=(0,hA.jE)({extensions:o,content:n.getJSON(),editable:!1});return t&&("function"==typeof t?t(c):t.current=c),c.isThumbnail=!0,(0,f.useEffect)(()=>{var e;let t=n.getJSON();t&&c&&(c.commands.setContent(t),c.commands.command(()=>((0,rS.E0)(c.state.doc,l),!0)),null===(e=hE.S.getState(c.state))||void 0===e||e.compute(c.state.doc).processChanges(l))},[n,c,l]),(0,hn.M)({sourceEditor:n,targetEditor:c,isStreaming:s}),(0,a.jsx)(d.xu,{className:"editor-preview-root","data-variation-preview":!0,"data-testid":"editor-preview-root",width:"100px",position:"relative",sx:hI.Y,children:(0,a.jsx)(hA.kg,{editor:c,portalComponent:r,style:{width:"100%",height:"100%"},className:"highlight-mask"})})});var hD=n(31335);let hR=(0,f.memo)(e=>{let{content:t,theme:n}=e,[i,r]=(0,f.useState)(!1);return((0,f.useEffect)(()=>{requestAnimationFrame(()=>{r(!0)})},[]),i)?(0,a.jsx)(t4.m,{theme:n,content:t,isThumbnail:!0,portalComponent:hL}):null}),hP=(0,f.memo)((0,f.forwardRef)((e,t)=>{let[n,i]=(0,f.useState)(!1);return((0,f.useEffect)(()=>{requestAnimationFrame(()=>{i(!0)})},[]),n)?(0,a.jsx)(hT,{...e,portalComponent:hL,ref:t}):null}));hP.displayName="TransactionalFilmstripPreviewEditor";let hL=e=>{let{renderers:t}=e,{state:{navItemPreviewRefMap:n}}=uA();return(0,a.jsx)(a.Fragment,{children:Object.entries(t).map(e=>{let[t,i]=e,r=i.props.node;if("document"===r.type.name)return null;let s=(0,hD.KH)(r)?n[r.attrs.id]:null;return hS.createPortal(i.reactElement,s||i.element,t)})})};hR.displayName="FilmstripPreviewEditor";var hz=n(88786);let hG=(0,f.memo)(e=>{let{onClose:t,isDark:n,isResizing:i,setIsResizing:r}=e,{previewWidth:s}=hy(),o=(0,f.useRef)(null),l=(0,f.useRef)(s),u=(0,f.useRef)(null),h=(0,U.TL)(),x=(0,f.useCallback)(e=>{if(e.preventDefault(),!o.current||!l.current||!u.current)return;let{width:n,x:i}=o.current,r=e.clientX-i;if(n+r<=30){t();return}let s=ut()(n+r,90,200);s!==l.current&&(l.current=s,u.current.innerHTML="\n          .filmstrip-nav-item-wrapper {\n            --editor-width: ".concat(s,"px;\n          }"))},[t]),p=(0,hz.Z_)(x,30),m=(0,f.useCallback)(e=>{e.preventDefault(),o.current={x:e.clientX,width:l.current},r(!0);let t=()=>{o.current=null,u.current&&(u.current.innerHTML=""),h((0,uZ.lh)({width:l.current})),document.removeEventListener("mousemove",p),document.removeEventListener("mouseup",t),requestAnimationFrame(()=>{r(!1)})};document.addEventListener("mousemove",p),document.addEventListener("mouseup",t)},[h,r,p]);return(0,a.jsxs)(c.k,{className:"filmstrip-resizer",css:{"--resizer-width":"24px","--resizer-offset":"4px","--drag-handle-width":"4px"},pos:"absolute",top:0,bottom:0,right:"calc(var(--resizer-width) * -1 + var(--resizer-offset))",opacity:0,w:"var(--resizer-width)",bg:n?"whiteAlpha.200":"blackAlpha.200",h:"100%",transitionProperty:"common",transitionDuration:"normal",transitionTimingFunction:"ease",justify:"center",alignItems:"center",borderTopEndRadius:"md",borderBottomEndRadius:"md",boxShadow:"md",_hover:{cursor:"ew-resize"},onMouseDown:m,zIndex:uv,children:[(0,a.jsx)("style",{ref:u}),(0,a.jsx)(d.xu,{position:"relative",left:"calc(var(--resizer-offset) - (var(--drag-handle-width) / 2))",bg:"white",borderRadius:"full",w:"var(--drag-handle-width)",h:"40px",opacity:i?1:.6,transitionProperty:"common",transitionDuration:"normal"})]})});hG.displayName="FilmstripResizer";let hN=e=>({"--fs-item-border-color":e?"var(--chakra-colors-whiteAlpha-300)":"var(--chakra-colors-gray-200)","--fs-text-item-selected-border-color":"var(--chakra-colors-trueblue-100)","--fs-item-box-shadow":"0 0 0 1px var(--fs-item-border-color)","--fs-item-focused-box-shadow":"0 0 0 2px var(--chakra-ring-color)","--fs-item-selected-box-shadow":"0 0 0 2px var(--chakra-colors-trueblue-300)","--fs-text-item-selected-box-shadow":"0 0 0 1px var(--fs-text-item-selected-border-color)","--fs-item-card-number-border-color":e?"var(--chakra-colors-gray-800)":"var(--chakra-colors-gray-200)","--fs-item-selected-text-color":e?"var(--chakra-colors-trueblue-200)":"var(--chakra-colors-trueblue-500)","--fs-item-card-number-color":e?"var(--chakra-colors-gray-100)":"var(--chakra-colors-gray-800)","--fs-item-card-number-background-color":e?"var(--chakra-colors-gradient-dark)":"var(--chakra-colors-gradient-light)","--fs-text-item-bg-color":e?"var(--chakra-colors-gray-800)":"var(--chakra-colors-gray-100)","--fs-text-item-card-number-bg-color":e?"var(--chakra-colors-gray-700)":"var(--chakra-colors-gray-200)"}),hM=(e,t)=>{if(!e||!t)return{id:null,pos:null};let{$from:n,from:i,to:r}=e,s=null,o=null;return n.doc.nodesBetween(i,r,(e,t)=>{let i=n.doc.resolve(t).depth;return!(!s&&(0,eB.KH)(e))||1!==i||(s=e.attrs.id,o=t,!1)}),{id:s,pos:o}},hU=()=>{var e;return!!(null===(e=document.activeElement)||void 0===e?void 0:e.closest(uk))},hF=()=>{let e=(0,f.useRef)(null),[t,n]=(0,f.useState)(!1),[i,r]=(0,f.useState)([0,0]),[s,o]=(0,f.useState)("bottom"),l=(0,U.TL)(),a=(0,f.useCallback)(()=>{n(!1)},[]),c=(0,f.useCallback)(()=>{r([0,0]),o("bottom")},[]),d=(0,f.useCallback)(e=>{n(!0),r(e)},[]),u=(0,f.useCallback)(t=>n=>{var i;n.preventDefault(),l((0,uZ.uu)({id:t})),d([n.clientX,n.clientY]);let r=null===(i=e.current)||void 0===i?void 0:i.offsetHeight;if(null==r)return;let s=window.innerHeight<n.clientY+r,a=n.clientY<r;s&&!a?o("top"):s&&a?o("center"):o("bottom")},[l,e,d]),h=(0,f.useMemo)(()=>{var t;let n=i[1],r=null===(t=e.current)||void 0===t?void 0:t.offsetHeight,o=r?window.innerHeight-(n+r+8):void 0,l="center"===s&&o?"translateY(".concat(o,"px)"):"top"===s?"translateY(-100%)":void 0;return{left:i[0],top:i[1],transform:l,transformOrigin:"top"}},[s,i]);return{menuRef:e,isFilmstripCardMenuOpen:t,onFilmstripCardMenuClose:a,handleContextMenu:u,menuRootStyles:h,clearPositioning:c}},hW=eA()(tl.YS,200),hH=e=>{let{isFocused:t,readOnly:n,firstFocusedCardId:i,editor:r,isDragging:s}=e,{handleCopy:o,handleDelete:l,handleCut:a,handleDuplicate:c}=hc(r),d=(0,U.TL)(),u=(0,U.qr)();(0,f.useEffect)(()=>ug.F7.on("keydown","FILMSTRIP",e=>{if(!t)return!1;switch(e.key){case"Escape":if(s)return d((0,uQ.vL)()),!0;return!1;case"Backspace":case"Delete":if(!n)return l(),!0;return!1;case"a":case"A":if(!n&&(e.ctrlKey||e.metaKey))return e.preventDefault(),d((0,uZ.td)({currentFocusedCard:i})),!0;return!1;case"c":case"C":if(!n&&(e.ctrlKey||e.metaKey))return o(),!0;return!1;case"d":case"D":if(!n&&(e.ctrlKey||e.metaKey))return e.preventDefault(),c(),!0;return!1;case"x":case"X":if(!n&&(e.ctrlKey||e.metaKey))return a(),!0;return!1;case"ArrowDown":{d((0,uZ.ut)({direction:"down",withShift:!n&&e.shiftKey,currentFocusedCard:i}));let t=(0,uZ.wg)(u.getState())[0];return!e.shiftKey&&r&&t&&(hW({cardId:t,editor:r}),d((0,F.Qx)({attached:!1}))),!0}case"ArrowUp":{d((0,uZ.ut)({direction:"up",withShift:!n&&e.shiftKey,currentFocusedCard:i}));let t=(0,uZ.wg)(u.getState())[0];return!e.shiftKey&&r&&t&&(hW({cardId:t,editor:r}),d((0,F.Qx)({attached:!1}))),!0}default:return!1}}),[d,i,t,s,l,o,c,a,n,r,u])};var hq=n(50738);let hB=e=>{let t=(0,U.qr)(),n=(0,ir.p)(),i=(0,U.TL)();(0,f.useEffect)(()=>{let r=r=>{var s;let o=t.getState();if(!e||!hU()||!(0,F.hN)(o))return;let l=null===(s=r.clipboardData)||void 0===s?void 0:s.getData("text/html");if(!l)return;let{content:c}=(0,hq.T)(l,e.schema),d=c.content.filter(e=>(0,hD.KH)(e));if(d.length){let t=(0,eB.Bw)(e,(0,uZ.zq)(o)),s=t?t.pos+t.node.nodeSize:e.state.doc.content.size-1,l=d.map(e=>(0,eT.hs)(he()(e.toJSON()))).map(e=>(0,hr.Zs)(e)),c=(0,uZ.ym)((0,U.bh)().getState());e.chain().insertContentAt(s,l,{updateSelection:!1}).command(e=>{let{tr:t}=e;t.setMeta("annotationEvent",{type:"filmstrip-paste",insertPos:s});let n=(0,hl.t)(t.doc.resolve(s));return n&&(t=t.setSelection(n)),!0}).scrollIntoView().run(),r.preventDefault(),ha(e,c),i((0,uZ.xi)({beforeCardId:null==t?void 0:t.node.attrs.id,cardCount:l.length})),n({title:(0,a.jsx)(h.cC,{id:"3viq5b",values:{0:d.length,1:d.length}}),status:"success",duration:3e3,position:"top"})}};return document.addEventListener("paste",r),()=>{document.removeEventListener("paste",r)}},[i,e,t,n])};class hV{constructor(){this.componentControls=new Set}subscribe(e){return this.componentControls.add(e),()=>this.componentControls.delete(e)}start(e,t){this.componentControls.forEach(n=>{n.start(e.nativeEvent||e,t)})}}let hK=()=>new hV,hY=()=>{let e=(0,uO.h)(hK),t=(0,f.useRef)(null),n=(0,f.useRef)(),i=(0,f.useRef)(),r=(0,f.useRef)(),s=(0,f.useCallback)(e=>{if(!r.current)return;let t=hJ(r.current),s=e.target;if(!t||!s||void 0===n.current||void 0===i.current)return;let o=s.scrollTop-n.current.top;t.y=i.current-o},[]),o=(0,f.useCallback)((e,i)=>{var r,s;let o=t.current;if(!o)return;let l=o.getBoundingClientRect(),a=i.point.y,c=e.target;if(!(c instanceof Element))return;let d=c.closest("[draggable]"),u=null==d?void 0:d.parentElement;u&&(a<l.top+25&&(d!==u.firstElementChild||o.scrollTop>0)?o.scrollTop-=5:a>l.bottom-25&&o.scrollTop+l.height<(null!==(s=null===(r=n.current)||void 0===r?void 0:r.height)&&void 0!==s?s:o.scrollHeight)&&(o.scrollTop+=5))},[]),l=(0,f.useCallback)(()=>{let s=t.current,o=hZ(e);if(!s||!o)return;r.current=o,n.current={top:s.scrollTop,height:s.scrollHeight};let l=hJ(o);l&&(i.current=l.y)},[e]);return{scrollerRef:t,onScroll:s,dragControls:e,onDrag:o,onDragStart:l,onDragEnd:(0,f.useCallback)(()=>{n.current=void 0,i.current=void 0,r.current=void 0},[])}},hZ=e=>{try{return Array.from(e.componentControls).find(e=>e.isDragging)}catch(e){console.error("[caught] findDraggingElementControls",e);return}},hJ=e=>{try{return e.panSession.history[0]}catch(e){console.error("[caught] getDraggingElementStartPoint",e);return}},hX=(0,lc.E)(c.k),hQ=(0,lc.E)(d.xu),h$="data-".concat(n1.dh),h0=e=>({initial:{x:-e},animate:{x:0,transition:uC},exit:{x:-e,transition:ub}}),h1=e=>{let{onClose:t,editor:n,readOnly:i}=e,[r,s]=(0,f.useState)(null),[o,l]=(0,f.useState)(!1),[u,h]=(0,W.I)(H.H.filmstripViewPreference,"film"),x=(0,e0.ye)("transactionalFilmstrip"),p=(0,f.useRef)(null),m=(0,U.CG)((0,id.Sj)(null==n?void 0:n.gammaDocId)),{cards:g,editorContent:j,isDragging:v,selection:C,isLoaded:b}=u$(x?null!=r?r:void 0:n),{id:y}=(0,f.useMemo)(()=>hM(C,n),[n,C]),k=(0,U.TL)(),w=(0,U.CG)(uZ.wg),S=(0,U.CG)(uQ.pe),E=(0,U.CG)(uQ.u9),I=(0,U.CG)(uQ.K3),[A,_]=(0,f.useState)(!1),{menuRef:T,isFilmstripCardMenuOpen:O,onFilmstripCardMenuClose:D,clearPositioning:R,handleContextMenu:P,menuRootStyles:L}=hF(),z=(0,f.useCallback)(()=>{if(D(),o){var e;null===(e=p.current)||void 0===e||e.focus()}},[o,D]),{scrollerRef:G,onScroll:N,dragControls:M,onDrag:q,onDragStart:B,onDragEnd:V}=hY(),K=(0,f.useCallback)(e=>()=>{if(_(!0),B(),G.current){let e=G.current.getBoundingClientRect().height;G.current.style.height="".concat(e,"px")}let t=w.includes(e)?w:[e];k((0,uZ.WF)({selectedCardIdsToDrag:t})),k((0,uQ.CA)({cardIds:g.map(e=>e.cardId),leaderCardId:e,selectedCardIds:t}))},[g,k,w,B,G]),Y=(0,f.useCallback)(()=>{n&&(n.commands.rearrangeCardsById(g.map(e=>e.cardId),E),k((0,uQ.vL)()),V())},[g,k,n,E,V]),Z=(0,f.useCallback)(()=>{G.current&&(G.current.style.height=""),_(!1)},[G]);hB(n),hH({isFocused:o,readOnly:i,firstFocusedCardId:y,editor:n,isDragging:v}),(0,aS.O)({ref:p,handler(e){T.current&&T.current.contains(e.target)||(O&&D(),k((0,uZ.Mt)()))}});let J=(0,U.CG)(F.Pu),X=(0,ef.ff)("whiteAlpha.600","whiteAlpha.100"),Q=(0,ef.ff)("#F9FAFBDD","gray.900"),$=(0,ef.ff)("gray.800","gray.200"),ee=(0,ef.ff)("blackAlpha.400","whiteAlpha.500"),{colorMode:et}=(0,ef.If)(),en="dark"===et,ei=(0,f.useMemo)(()=>hN(en),[en]),[er,es]=(0,f.useState)(!1),{width:eo}=hy(),el=h0(eo),ea=(0,f.useMemo)(()=>{let e=E.length;return v&&e>1?e:null},[v,E.length]),[ec,ed]=(0,f.useState)(!1),eu=(0,eq.As)("filmstrip");(0,f.useEffect)(()=>{eu.setScrollSelector(uS)},[eu]);let eh=(0,uJ.WD)(),ex=!!eh.src,ep=x?r:n;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c.k,{pointerEvents:"none",position:"absolute",direction:"column",left:2,top:14,bottom:ex?"".concat(eh.height+2*eh.paddingY,"px"):2,justifyContent:"center",color:$,children:[n&&x?(0,a.jsx)(hP,{parent:n,theme:J,parentIsStreaming:m,ref:s}):(0,a.jsx)(hR,{theme:J,content:j}),(0,a.jsxs)(d.xu,{pos:"relative",pointerEvents:"auto",_hover:{".filmstrip-resizer":{opacity:ec?0:1}},maxHeight:"100%",children:[(0,a.jsxs)(hX,{ref:p,"data-guider-highlight":"filmstrip",className:uy,[h$]:!0,pos:"relative",direction:"column",zIndex:uj,...el,onAnimationStart:()=>{ed(!0)},onAnimationComplete:()=>{ed(!1)},tabIndex:0,_focus:{outline:"none"},onFocus:()=>{l(!0),null==n||n.commands.blur()},onBlur:e=>{var t,n;p.current&&(null===(t=p.current)||void 0===t?void 0:t.contains(e.relatedTarget))||(null===(n=T.current)||void 0===n?void 0:n.contains(e.relatedTarget))||l(!1)},borderRadius:"md",bg:Q,borderWidth:"1px",borderColor:X,shadow:"lg",backdropFilter:"blur(20px)",maxHeight:"100%",alignSelf:"flex-start",children:[(0,a.jsx)(u1,{isDark:en,onClose:t,viewPreference:u,setViewPreference:h}),(0,a.jsx)(hQ,{className:uw,layoutScroll:!0,overflowY:"auto",position:"relative",sx:{"&::-webkit-scrollbar":{opacity:1,width:"5px"},"&::-webkit-scrollbar-track":{opacity:0,width:"5px"},"&::-webkit-scrollbar-thumb":{background:ee,borderRadius:"full"},...ei},ref:G,onScroll:N,p:"8px",pt:0,children:(0,a.jsx)(uY.Group,{onReorder:e=>{let t=e.map(e=>e.cardId);k((0,uQ.k)({reorderedCardIds:t}))},values:g,axis:"y",children:ep&&n&&b&&g.map((e,t)=>{let{cardId:r,displayBehavior:s}=e,o=w.includes(r),l=I===r;return(0,a.jsx)(uY.Item,{drag:!i&&"y",value:e,onDragStart:K(r),onDragEnd:Y,onDragTransitionEnd:Z,className:"reorder-item",dragControls:M,transition:{layout:{duration:er?0:void 0}},onDrag:q,style:{position:"relative",listStyle:"none"},children:(0,a.jsx)(hw,{readOnly:i,editor:ep,card:e,index:v&&void 0!==S[r]?S[r]:t+1,isFirst:0===t,shouldHide:"hidden"===s,isDragInProgress:A,isEditorFocused:y===r&&n.isFocused,isFilmstripSelected:!!o,currentFocusedCard:y,numberOfCardsDragging:l?ea:null,onContextClick:P(r),isAnimating:ec,showTextOnly:"list"===u})},r)})})})]}),(0,a.jsx)(hG,{onClose:t,isDark:en,isResizing:er,setIsResizing:es})]})]}),n&&(0,a.jsx)(hp,{ref:T,editor:n,readOnly:i,isOpen:O,onClose:z,clearPositioning:R,rootStyles:L,isDark:en})]})},h2=()=>{let e=(0,U.TL)(),t=(0,U.CG)(uZ.GX),n=(0,el.iq)({base:!1,lg:!0})||!1,[i,r]=(0,f.useState)(!1),[s,o]=(0,f.useState)(!1),l=(0,f.useCallback)(()=>{e((0,uZ.dQ)({isOpen:!1})),e((0,uZ.Mt)()),o(!0)},[e]),a=(0,f.useCallback)(()=>{n||r(!0),e((0,uZ.dQ)({isOpen:!0}))},[n,e]),c=!n&&i;return(0,f.useEffect)(()=>{let t=!n&&!i,r=n&&!s;t?e((0,uZ.dQ)({isOpen:!1})):r&&e((0,uZ.dQ)({isOpen:!0}))},[e,n,i,s]),{onClose:l,onOpen:a,isOpen:t&&(n||!n&&c)}},h5=(0,lc.E)(ej.z),h3=(0,f.memo)(()=>{let{editor:e}=(0,tS._i)(),{isOpen:t,onClose:n,onOpen:i}=h2(),r=(0,n1.Br)("edit"),s=(0,U.CG)(F.hN),o=(0,eR.Yy)(),[l,d]=(0,f.useState)(!1),u=(0,f.useCallback)(()=>{d(!0),setTimeout(()=>{i()}),setTimeout(()=>{d(!1)},750)},[i]);return(0,f.useEffect)(()=>ug.F7.on("keydown","FILMSTRIP",e=>!!(0,nM.ZP)("Mod+\\")(e)&&(t?n():u(),!0)),[t,n,u]),(0,a.jsx)(uI,{children:(0,a.jsx)(eC.Wk,{isDark:o,children:(0,a.jsx)(ld.M,{children:t?(0,a.jsx)(h1,{onClose:n,editor:e,readOnly:!r||!s},"filmstrip"):(0,a.jsx)(eC.kH,{placement:"top-end",label:(0,a.jsx)(h.cC,{id:"7ShgZt"}),isDisabled:l,shortcut:"Mod+\\",children:(0,a.jsxs)(h5,{initial:{opacity:0},animate:{opacity:1,transition:ub},exit:{opacity:0,transition:uC},zIndex:uj,css:{"--trigger-height":"var(--chakra-sizes-14)"},tabIndex:-1,position:"fixed",left:2,top:"calc(50% - (var(--trigger-height) / 2) + var(--chakra-sizes-5))",borderRadius:"xl","data-guider-highlight":"filmstrip",h:"var(--trigger-height)",w:8,onClick:u,children:[(0,a.jsx)(uf.TX,{children:(0,a.jsx)(h.cC,{id:"7ShgZt"})}),l?(0,a.jsx)(c.k,{children:(0,a.jsx)(tA.$,{size:"sm"})}):(0,a.jsx)(O.G,{icon:T.CjD})]},"filmstrip-opener")})})})})});h3.displayName="Filmstrip";var h4=n(3181),h6=n(13272),h8=n(41098),h9=n(7715),h7=n(6510),xe=n(79385);let xt=e=>{let{hideExtraLines:t}=e;return(0,a.jsxs)(tI.K,{w:"100%",py:2,px:2.5,children:[(0,a.jsx)(d.xu,{w:20,h:1.5,bg:"gray.200"}),(0,a.jsxs)(eg.U,{flex:"1",alignItems:"flex-start",children:[(0,a.jsx)(lB.o,{ratio:4/3,color:"gray.600",w:12,bg:"gray.200",children:(0,a.jsx)(d.xu,{fontSize:"lg",children:(0,a.jsx)(O.G,{icon:T.VmB})})}),(0,a.jsxs)(tI.K,{flex:"1",spacing:"1",children:[(0,a.jsx)(d.xu,{h:1,bg:"gray.200"}),(0,a.jsx)(d.xu,{h:1,bg:"gray.200"}),(0,a.jsx)(d.xu,{h:1,bg:"gray.200"}),(0,a.jsx)(d.xu,{w:t?"80%":"100%",h:1,bg:"gray.200"}),!t&&(0,a.jsx)(d.xu,{w:"80%",h:1,bg:"gray.200"})]})]})]})},xn=e=>{let{cardDimensions:t,showBackdrop:n,isWide:i,label:r,scaleCardUp:s,alignment:o}=e,l={boxShadow:"".concat(n?"sm":""),w:"".concat(i?"85%":"65%"),mx:"auto",borderRadius:"sm",bg:"white",transform:"".concat(s?"scale(1.15)":"none")};return(0,a.jsxs)(tI.K,{flex:"1",alignItems:"center",sx:{"*":{transition:"all 0.2s ease"}},spacing:1.5,maxW:"50%",mx:"auto",children:[(0,a.jsx)(c.k,{bg:n?"gray.200":"white",borderWidth:"1px",borderColor:"gray.200",width:"100%",minH:32,borderRadius:"sm",alignItems:"center",py:2,overflow:"hidden",children:t.aspectRatio?(0,a.jsx)(lB.o,{...l,ratio:t.aspectRatio,children:(0,a.jsx)(d.xu,{display:"flex",alignItems:o,style:{alignItems:o},children:(0,a.jsx)(xt,{hideExtraLines:i})})}):(0,a.jsx)(tI.K,{...l,children:(0,a.jsx)(xt,{hideExtraLines:i})})}),(0,a.jsx)(e3.x,{fontSize:"xs",color:"gray.700",children:r})]})},xi=e=>{let{updateDocSetting:t,editor:n}=e,{animationsEnabled:i,defaultFullBleed:r,defaultContentWidth:s,presentBackdrop:o,cardDimensions:l,verticalAlign:c}=(0,U.CG)(F.US),d=(0,xe.l)(l),u=c||d.defaultVerticalAlign;return(0,a.jsxs)(tI.K,{spacing:5,mt:4,divider:(0,a.jsx)(rz.i,{}),children:[(0,a.jsx)(xr,{title:x.ag._({id:"jBvtuq"}),description:x.ag._({id:"Q3Qdcd"}),icon:T.qnl,control:(0,a.jsx)(xe.Ft,{cardDimensions:l,updateCardDimensions:e=>t("cardDimensions",e)})}),(0,a.jsx)(xr,{title:x.ag._({id:"lklIf1"}),description:x.ag._({id:"aJ+ISV"}),icon:T.dH7,value:"lg"===s,onChange:e=>{t("defaultContentWidth",e?"lg":void 0),n.commands.resetCardSettings({container:{width:void 0}})}}),(0,a.jsx)(xr,{title:x.ag._({id:"vUBA/H"}),description:x.ag._({id:"n68eVZ"}),icon:T.elf,children:(0,a.jsx)(h7.e,{alignment:u,setAlignment:e=>{t("verticalAlign",e)}})}),(0,a.jsx)(xr,{title:x.ag._({id:"lsVq2Z"}),description:x.ag._({id:"u/0NJZ"}),icon:T.r9b,value:"full"===r,onChange:e=>{t("defaultFullBleed",e?"full":void 0),n.commands.resetCardSettings({cardSize:"default"})}}),(0,a.jsx)(xr,{title:x.ag._({id:"7VfbQM"}),description:x.ag._({id:"XZHPlI"}),icon:T.UHQ,value:o,onChange:e=>t("presentBackdrop",e)}),(0,a.jsx)(xr,{title:x.ag._({id:"HgWdP3"}),description:x.ag._({id:"X3TlS6"}),icon:T.kq2,value:(0,h9.C)({animationsEnabled:i}),onChange:e=>{t("animationsEnabled",e)}}),(0,a.jsxs)(tI.K,{children:[(0,a.jsx)(e3.x,{fontSize:"xs",color:"gray.600",children:(0,a.jsx)(h.cC,{id:"ymPKi7"})}),(0,a.jsxs)(eg.U,{alignItems:"flex-start",spacing:"4",children:[(0,a.jsx)(xn,{label:x.ag._({id:"wl99H6"}),alignment:u,cardDimensions:d,isWide:"lg"===s,showBackdrop:"full"!==r,scaleCardUp:!1}),(0,a.jsx)(xn,{label:x.ag._({id:"GWjDlt"}),alignment:u,cardDimensions:d,isWide:"lg"===s,showBackdrop:o&&"full"!==r,scaleCardUp:!o||"full"===r})]})]})]})},xr=e=>{let{title:t,description:n,icon:i,children:r,helpDescription:s,value:o,onChange:l,control:c,direction:d="row"}=e;return(0,a.jsxs)(tI.K,{alignItems:"flex-start",spacing:2,direction:d,children:[i&&(0,a.jsx)(e3.x,{fontSize:"lg",width:8,maxW:8,children:(0,a.jsx)(O.G,{icon:i,fixedWidth:!0})}),(0,a.jsx)(tI.K,{spacing:4,flex:1,children:(0,a.jsxs)(tI.K,{spacing:1,children:[(0,a.jsxs)(nm.X,{size:"sm",fontWeight:"semibold",children:[t," ",s?(0,a.jsx)(eC.Yq,{label:s,ml:1}):null]}),(0,a.jsx)(e3.x,{fontSize:"xs",color:"gray.600",children:n}),c]})}),r,l&&(0,a.jsx)(h8.r,{isChecked:o,onChange:e=>l(e.target.checked)})]})},xs=[{key:"sm",name:()=>x.ag._({id:"4Revpc"}),buttonText:()=>x.ag._({id:"ZQA8ce"}),description:()=>x.ag._({id:"N0rIpR"})},{key:"md",name:()=>x.ag._({id:"agPptk"}),buttonText:()=>x.ag._({id:"Tmu3kA"}),description:()=>x.ag._({id:"3JV7Yt"})},{key:"lg",name:()=>x.ag._({id:"k7rCa/"}),buttonText:()=>x.ag._({id:"SMwD6s"}),description:()=>x.ag._({id:"edeEjW"})}],xo=e=>{let{fontSize:t,setFontSize:n}=e;return(0,a.jsx)(ev.h,{isAttached:!0,size:"sm",display:"flex",children:xs.map(e=>{let i=e.key===t?"trueblue.100":void 0;return(0,a.jsx)(eC.kH,{label:(0,a.jsx)(eC.X,{label:e.name(),description:e.description()}),placement:"top",children:(0,a.jsx)(ej.z,{"aria-label":e.name(),px:"2.5",boxShadow:"none",variant:"plain",bg:i,onClick:()=>{n(e.key)},children:e.buttonText()})},e.key)})})};var xl=n(11457),xa=n(61652),xc=n(19783);let xd=e=>{let{title:t,description:n,icon:i,children:r,value:s,onChange:o}=e;return(0,a.jsxs)(eg.U,{spacing:4,children:[i&&(0,a.jsx)(O.G,{icon:i,fixedWidth:!0}),(0,a.jsx)(e3.x,{children:t}),n&&(0,a.jsx)(xc.u,{label:n,placement:"top",children:(0,a.jsx)(e3.x,{fontSize:"sm",cursor:"help",color:"gray.400",ml:-2,children:(0,a.jsx)(O.G,{icon:T.sqG})})}),(0,a.jsx)(e4.L,{}),r,o&&(0,a.jsx)(h8.r,{isChecked:s,onChange:e=>o(e.target.checked)})]})},xu=e=>{let{updateDocSetting:t,cardDimensionsKey:n,verticalAlign:i,defaultFullBleed:r,defaultContentWidth:s}=e,o="fluid"===n;return(0,a.jsxs)(tI.K,{spacing:5,my:3,children:[(0,a.jsx)(xd,{title:x.ag._({id:"jBvtuq"}),description:x.ag._({id:"Q3Qdcd"}),icon:T.qnl,children:(0,a.jsx)(xe.Ft,{cardDimensions:n,updateCardDimensions:e=>t("cardDimensions",e)})}),o?(0,a.jsx)(xd,{title:x.ag._({id:"vUBA/H"}),description:x.ag._({id:"n68eVZ"}),icon:T.elf,children:(0,a.jsx)(h7.e,{alignment:i,setAlignment:e=>{t("verticalAlign",e)}})}):(0,a.jsx)(xd,{title:x.ag._({id:"cPp+Ef"}),icon:T.hz8,children:(0,a.jsx)(xl.p,{contentWidth:s,setWidth:e=>{t("defaultContentWidth",e)}})}),(0,a.jsx)(xd,{title:x.ag._({id:"lsVq2Z"}),description:x.ag._({id:"a1DIUk"}),icon:T.r9b,value:"full"===r,onChange:e=>{t("defaultFullBleed",e?"full":void 0)}})]})},xh=e=>{let{onClick:t,isSelected:n,icon:i,label:r,description:s,tooltip:o}=e,l=(0,a.jsxs)(tI.K,{cursor:"pointer",onClick:t,p:"1.5",px:"2",alignItems:"center",spacing:"0",bg:n?"trueblue.50":"gray.50",borderWidth:"1px",borderColor:n?"trueblue.500":"gray.200",color:n?"trueblue.500":"black",borderRadius:"md",minW:"100px",justifyContent:"center",children:[(0,a.jsx)(d.xu,{pb:"0",fontSize:"md",children:(0,a.jsx)(O.G,{icon:i})}),(0,a.jsx)(e3.x,{fontSize:"xs",w:"100%",textAlign:"center",noOfLines:1,children:r}),s&&(0,a.jsx)(e3.x,{fontSize:"xs",color:"blackAlpha.600",children:s})]});return o?(0,a.jsx)(xc.u,{label:o,placement:"top",children:l}):(0,a.jsx)(a.Fragment,{children:l})},xx=e=>{let{styleTemplateKeys:t,selectedStyleTemplateKey:n,onSelectNewStyle:i,onSelectCustomStyle:r}=e;return(0,a.jsxs)(a.Fragment,{children:[t.map(e=>{let t=xa.STYLE_TEMPLATES[e];return(0,a.jsx)(xh,{label:t.label(),icon:t.icon,isSelected:n===e,description:t.cardDimensionsDesc(),tooltip:t.recommendedFor(),onClick:()=>i(e)},e)}),(0,a.jsx)(xh,{label:x.ag._({id:"8Tg/JR"}),icon:T.cRF,isSelected:"custom"===n,onClick:r})]})},xp=e=>{let{selectedStyleTemplateKey:t,newTemplateKey:n,savedVerticalAlign:i,savedDefaultContentWidth:r,savedFontSize:s}=e,o=xa.STYLE_TEMPLATES[t],l=xa.STYLE_TEMPLATES[n],a=(null==o?void 0:o.docSettings.cardDimensions)==="fluid";return{...l.docSettings,verticalAlign:a?l.docSettings.verticalAlign:i,defaultContentWidth:a&&"custom"!==t?r:l.docSettings.defaultContentWidth,fontSize:null!=s?s:l.docSettings.fontSize}},xm=["cardDimensions","defaultFullBleed"],xf=e=>{let{updateDocAttribute:t,bulkUpdateDocSettings:n,updateDocSetting:i}=e,r=(0,U.CG)(F.US),{animationsEnabled:s,defaultContentWidth:o,verticalAlign:l,presentBackdrop:c,fontSize:u,cardDimensions:p,defaultFullBleed:m}=r,{format:f}=(0,U.CG)(F.Bk),g=(0,iQ.dy)(),j=f||"deck",v=(0,iQ.jr)(j),C=function(e,t){if("custom"===e.stylesDerivedFrom)return"custom";let n=Object.entries(xa.STYLE_TEMPLATES).find(n=>{let[i,r]=n;return xm.every(t=>e[t]===r.docSettings[t])&&r.formatType===t});return null==n?void 0:n[0]}(r,j)||"custom",b="fluid"===p,y="full"!==m||c,k=(0,xe.l)(p),w=l||k.defaultVerticalAlign;return(0,a.jsxs)(tI.K,{spacing:5,divider:(0,a.jsx)(rz.i,{}),children:[(0,a.jsxs)(d.xu,{w:"100%",children:[(0,a.jsxs)(ol.l,{children:[(0,a.jsx)(h.cC,{id:"oIhFvf"})," ",(0,a.jsx)(os.C,{colorScheme:"green",size:"sm",children:(0,a.jsx)(h.cC,{id:"YBt9YP"})})]}),(0,a.jsxs)(tI.K,{spacing:4,children:[(0,a.jsxs)(ny.v,{children:[(0,a.jsx)(nk.j,{textAlign:"left",as:ej.z,variant:"plain",size:"md",boxShadow:"none",minW:"120px",rightIcon:(0,a.jsx)(O.G,{icon:T.gc2}),leftIcon:(0,a.jsx)(O.G,{icon:v.icon}),w:"100%",children:v.name()}),(0,a.jsx)(nw.q,{children:(0,a.jsx)(nS._,{title:"Format",children:g.map(e=>(0,a.jsxs)(rh.s,{onClick:()=>{t("format",e.formatType);let i=e.styleTemplates[0],r=xa.STYLE_TEMPLATES[i].docSettings;n({styleTemplate:e.styleTemplates[0],...r})},children:[(0,a.jsx)(O.G,{icon:e.icon,fixedWidth:!0}),(0,a.jsx)(d.xu,{flex:1,ml:2,children:(0,a.jsx)(e3.x,{children:e.name()})}),e.formatType===j&&(0,a.jsx)(O.G,{icon:T.LEp})]},e.formatType))})})]}),(0,a.jsx)(rq.E,{children:(0,a.jsx)(xx,{styleTemplateKeys:v.styleTemplates,onSelectNewStyle:function(e){n(xp({selectedStyleTemplateKey:C,newTemplateKey:e,savedVerticalAlign:l,savedDefaultContentWidth:o,savedFontSize:u}))},onSelectCustomStyle:function(){i("stylesDerivedFrom","custom")},selectedStyleTemplateKey:C})}),"custom"===C&&(0,a.jsx)(xu,{cardDimensionsKey:p,verticalAlign:l,defaultFullBleed:m,updateDocSetting:i,defaultContentWidth:o}),(0,a.jsx)(rz.i,{})]}),(0,a.jsxs)(tI.K,{spacing:5,mt:5,children:[b?(0,a.jsx)(xd,{title:x.ag._({id:"cPp+Ef"}),icon:T.hz8,children:(0,a.jsx)(xl.p,{contentWidth:o,setWidth:e=>{i("defaultContentWidth",e)},allowedWidths:["md","lg"]})}):(0,a.jsx)(xd,{title:x.ag._({id:"vUBA/H"}),description:x.ag._({id:"n68eVZ"}),icon:T.elf,children:(0,a.jsx)(h7.e,{alignment:l,setAlignment:e=>{i("verticalAlign",e)}})}),(0,a.jsx)(xd,{title:x.ag._({id:"q3il6U"}),icon:T.nUG,children:(0,a.jsx)(xo,{fontSize:u,setFontSize:e=>{i("fontSize",e)}})}),y&&(0,a.jsx)(xd,{title:x.ag._({id:"7VfbQM"}),description:x.ag._({id:"XZHPlI"}),icon:T.UHQ,children:(0,a.jsx)(h8.r,{isChecked:c,onChange:e=>i("presentBackdrop",e.target.checked)})}),(0,a.jsxs)(xd,{title:x.ag._({id:"HgWdP3"}),description:x.ag._({id:"X3TlS6"}),icon:T.kq2,children:[(0,a.jsx)(h8.r,{isChecked:(0,h9.C)({animationsEnabled:s}),onChange:e=>i("animationsEnabled",e.target.checked)}),"value="]})]})]}),(0,a.jsxs)(tI.K,{children:[(0,a.jsx)(e3.x,{fontSize:"xs",color:"gray.600",children:(0,a.jsx)(h.cC,{id:"ymPKi7"})}),(0,a.jsxs)(eg.U,{alignItems:"flex-start",spacing:"4",children:[(0,a.jsx)(xn,{label:x.ag._({id:"wl99H6"}),alignment:w,cardDimensions:k,isWide:"lg"===o,showBackdrop:"full"!==m,scaleCardUp:!1}),(0,a.jsx)(xn,{label:x.ag._({id:"GWjDlt"}),alignment:w,cardDimensions:k,isWide:"lg"===o,showBackdrop:c&&"full"!==m,scaleCardUp:!c||"full"===m})]})]})]})};var xg=n(47055),xj=n(51088);let xv=e=>{let{editor:t}=e,n=(0,U.CG)(F.Pu),i=(0,U.CG)(F.XV),r=(0,f.useCallback)(e=>{null==t||t.commands.updateNestedAttributesAtPos(0,e)},[t]);return(0,a.jsx)(xj.o,{editor:t,background:i,updateNestedAttributes:r,defaultMessage:(0,a.jsxs)(nV.b,{children:[(0,a.jsx)(rW.z,{}),(0,a.jsx)(h.cC,{id:"dyXYfJ"})]}),isDark:(0,t2.wj)(n),isValidSource:xg.Rr})},xC=e=>{let{closePanel:t}=e,[n,i]=(0,f.useState)(0),{editor:r}=(0,e1._)(),s=(0,U.CG)(F.ke),o=(0,e0.ye)("cardPageStyles"),l=(0,ou.A)(r),u=(0,f.useCallback)((e,t)=>{null==r||r.commands.updateAttributesAtPos(0,{[e]:t})},[r]),x=(0,f.useCallback)((e,t)=>{null==r||r.commands.updateNestedAttributesAtPos(0,{settings:{[e]:t}})},[r]),p=(0,f.useCallback)(e=>{null==r||r.commands.updateNestedAttributesAtPos(0,{settings:e})},[r]),m=(0,lk.S)({base:"calc(100% - 1rem)",lg:"auto"});return r?(0,a.jsx)(eC.Wk,{isDark:!1,children:(0,a.jsx)(e9.s,{bgColor:"white",w:"100%","data-panelid":"page-setup",pt:4,"data-page-setup":!0,children:(0,a.jsxs)(c.k,{direction:"column","data-testid":"page-setup-drawer",onKeyDown:l,h:m,overflowX:"hidden",w:"100%",children:[(0,a.jsxs)(c.k,{position:"relative",pb:4,px:6,children:[(0,a.jsx)(c.k,{flex:1,children:(0,a.jsx)(e7.V,{children:(0,a.jsx)(e3.x,{children:(0,a.jsx)(h.cC,{id:"fvaOtb"})})})}),(0,a.jsx)(e2.P,{onClick:t})]}),(0,a.jsx)(c.k,{overflowY:"auto",direction:"column",h:"100%",flex:1,pt:5,children:(0,a.jsxs)(lw.m,{variant:"soft-rounded",size:"sm",isFitted:!0,isLazy:!0,index:n,onChange:i,px:6,children:[(0,a.jsxs)(ly.t,{children:[(0,a.jsxs)(lb.O,{children:[(0,a.jsx)(d.xu,{mr:2,children:(0,a.jsx)(O.G,{icon:T.s2})}),(0,a.jsx)(h.cC,{id:"Ccpbzh"})]}),(0,a.jsxs)(lb.O,{children:[(0,a.jsx)(d.xu,{mr:2,children:(0,a.jsx)(O.G,{icon:T.UHQ})}),(0,a.jsx)(h.cC,{id:"GtJbUa"})]}),(0,a.jsxs)(lb.O,{children:[(0,a.jsx)(d.xu,{mr:2,children:(0,a.jsx)(O.G,{icon:T.g4A})}),(0,a.jsx)(h.cC,{id:"rdUucN"})]})]}),(0,a.jsxs)(h4.n,{children:[(0,a.jsx)(h6.x,{p:2,mt:4,children:o?(0,a.jsx)(xf,{editor:r,updateDocSetting:x,bulkUpdateDocSettings:p,updateDocAttribute:u},s):(0,a.jsx)(xi,{editor:r,updateDocSetting:x},s)}),(0,a.jsx)(h6.x,{p:2,mt:4,children:(0,a.jsx)(xv,{editor:r,updateDocSetting:x},s)}),(0,a.jsx)(h6.x,{p:2,mt:4,children:(0,a.jsx)(lQ,{},s)})]})]})})]})})}):null};xC.panelPosition="right",xC.panelName="page-setup";let xb=()=>{let{togglePanel:e,isPanelOpen:t}=en(xC);return(0,f.useEffect)(()=>{let t=()=>{e({override:"open"})},n=oC.T.on("openPageSetup",t),i=nx.pw.on(nx.TI.OPEN_PAGE_SETUP,t);return()=>{n(),i()}},[e]),{togglePageSetupPanel:e,isPageSetupPanelOpen:t}};var xy=n(71355),xk=n(96236);let xw=(0,nM.ZP)("mod+S"),xS=(0,nM.ZP)("mod+shift+O"),xE=()=>{let e=(0,ir.p)();(0,f.useEffect)(()=>{let t=t=>{xw(t)&&(t.preventDefault(),e.isActive("save_toast")||e({id:"save_toast",title:(0,a.jsx)(h.cC,{id:"4ebE67"}),status:"success",duration:5e3,isClosable:!0}))},n=(0,eV.B$)({requiredCookie:"cardCollapseDebug=true"});return window.addEventListener("keydown",t),()=>{null==n||n(),window.removeEventListener("keydown",t)}},[e])},xI=()=>{let e=(0,U.qr)(),t=(0,U.TL)(),{editor:n}=(0,tS._i)();(0,f.useEffect)(()=>{if(!n)return;let i=i=>{if(!xS(i))return;i.preventDefault();let r=e.getState(),{cardIdMap:s,cardIds:o,memoState:{expandedCards:l}}=r.TipTap,a=(0,F.i2)(r),{total:c,expanded:d,cardIds:u}=o.reduce((e,t)=>{let n=!0===l[t],i=s.parents[t]||[],r=i.length>0,o=!a||i.includes(a);return r&&o&&(e.cardIds.push(t),e.total++,e.expanded+=n?1:0),e},{total:0,expanded:0,cardIds:[]});t((0,F.bj)({disable:!0})),setTimeout(()=>{t((0,F.bj)({disable:!1}))},100);let h=c===d;xA(n,100,!h),(0,rS.Nn)(u,h)};return window.addEventListener("keydown",i),()=>{window.removeEventListener("keydown",i)}},[t,e,n])},xA=(e,t,n)=>{let i;let r=(0,eq.cC)("editor");for(let t=200;t>0;t-=25){var s;let n;let o=(0,af.Je)(e,r.scrollSelector,t);(null===(s=o.pos)||void 0===s?void 0:s.pos)&&(e.state.doc.nodeAt(o.pos.pos)?n=o.pos.pos:e.state.doc.nodeAt(o.pos.inside)&&(n=o.pos.inside),n&&(!i||n>i)&&(i=n))}if(!i){console.warn("[pinPageDuringAnimation] No result for getTopCenterIshNode");return}let o=x_(e,i,n);if(!o){console.warn("[pinPageDuringAnimation] No element for getElementToPin");return}(0,eV.wO)({element:o,requiredCookie:"cardCollapseDebug=true"});let l=+new Date,a=r.scroller.scrollTop,c=(0,eV.LY)(o,r.scrollSelector),d=a-c,u=d<0?0:Math.max(d+200,0),h=()=>{if(!o)return;let e=(0,eV.LY)(o,r.scrollSelector);r.scroller.scroll({top:a+(e-c-u)}),+new Date-l<t&&requestAnimationFrame(h)};h()},x_=(e,t,n)=>{let i=e.state.doc.resolve(t),r=e.state.doc.nodeAt(t),s=(0,af.Sh)(e,t);if(!r){console.warn("[getElementToPin] nodeAt null for $pos",i);return}let o=(0,af.nv)(i,()=>!0).reverse();for(o.push({start:i.start(i.depth+1),pos:t,depth:i.depth,node:r});o.length;){let t=o.shift();if(!t)continue;let i=(0,eB.KH)(t.node),r=(0,xy.SA)(t.node),l=(0,xk.CU)(t.node),a=i||t.node.isAtom?t.pos:t.start;if(s=(0,af.Sh)(e,a),!n&&i&&t.depth>2||r||l)break}for(;(null==s?void 0:s.offsetParent)===null&&s.parentElement;)s=s.parentElement;return s};var xT=n(95993),xO=n(87920),xD=n(62216),xR=n(25756),xP=n(11310),xL=n(85418),xz=n(91492);class xG extends xT.GJ{constructor(e){super({transform:async(t,n)=>{var i;if("data"!==t.event){n.enqueue(t);return}let{content:r}=t.data,s=r.attrs.id,o=r.content.find(e=>"cardAccentLayoutItem"===e.type);o&&(!o.attrs.background||(null===(i=o.attrs.background)||void 0===i?void 0:i.type)===xz.E.NONE)&&(o.attrs.background=(0,cQ.Bv)(e,s),(0,cQ.Tm)(r)),n.enqueue(t)}})}}var xN=n(75173),xM=n(75325),xU=n(27003);class xF extends xT.GJ{async loadImage(e){let{editor:t,loadImageId:n,loadImageParams:i,cardIndex:r,cardId:s,node:o,theme:l,interactionId:a}=e,c=await (0,xN.B)({loadImageId:n,loadImageParams:i,context:{docId:t.gammaDocId,workspaceId:t.gammaOrgId,interactionId:a}});if(this.streamingCardIndex===r){this.loadedImageAttrs[n]=(0,xM.j6)(o,c),"cardAccentLayoutItem"===o.type.name&&"error"===c.loadImageStatus&&(this.loadedImageAttrs[n]={...o.attrs,background:(0,cQ.Bv)(l,s)});return}requestAnimationFrame(()=>{(0,c$.tf)({editor:t,loadImageId:n,newAttrs:c,node:o,theme:l,cardId:s})})}constructor({editor:e,theme:t,interactionId:n}){super({transform:async(i,r)=>{if("data"!==i.event){r.enqueue(i);return}let{index:s,id:o}=i.data;this.streamingCardIndex=s,(0,xU.N)(i.data.content,i=>{var r;if("text"===i.type)return;let l=t$.NB.fromJSON(e.schema,{type:i.type,attrs:i.attrs}),a=(0,xM.XU)(l);if(!a||"queued"!==a.loadImageStatus||!a.loadImageId||!a.loadImageParams)return;let{loadImageId:c,loadImageParams:d}=a;this.imageAttrs[c]||(this.imageAttrs[c]=l.attrs),this.loadImagePromises[c]||(this.loadImagePromises[c]=this.loadImage({editor:e,loadImageId:c,loadImageParams:d,cardIndex:s,cardId:o,theme:t,node:l,interactionId:n})),i.attrs=null!==(r=this.loadedImageAttrs[c])&&void 0!==r?r:this.imageAttrs[c]}),i.data.cardComplete&&this.streamingCardIndex++,r.enqueue(i)}}),this.streamingCardIndex=0,this.imageAttrs={},this.loadedImageAttrs={},this.loadImagePromises={}}}var xW=n(91760);let xH=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(0===t.length)throw Error("Cannot have empty path");let r=[...t],s={...e},o=s,l=0;for(;t.length>0;){if(!o.content)throw Error("Can't surround a node with children");let e=r.shift();if(0===r.length){let t=o.content.slice(0,e);t.push(n),o.content=t;break}if(l<i){let t=o.content.slice(0);t.splice(e,1,{...t[e]}),o.content=t,o=o.content[e]}else{let t=o.content.slice(0,e+1);t.splice(e,1,{...t[e]}),o.content=t,o=o.content[e]}l++}return s};class xq extends xT.GJ{constructor(e){super({transform:async(t,n)=>{if("done"===t.event||"cancel"===t.event){n.enqueue(t);return}let i=(0,U.bh)(),r=null;for(let s of function* e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if("text"===t.type){let e=t.text.split(" ");for(let t=0;t<e.length;t++){let s={type:"text",text:e.slice(0,t+1).join(" ")};yield xH(i,r,s,n)}return}if(!t.content){yield xH(i,r,t,n);return}let s=0;for(let o of t.content){for(let t of e(o,n,i,[...r,s]))yield t;s++}}(t.data.content,1)){if(!s)continue;r&&n.enqueue(r),r={id:t.id,event:"data",data:{...t.data,content:s,cardComplete:!1}};let o=(0,id.qn)(e)(i.getState());await xB(o)}r&&n.enqueue({...r,data:{...r.data,cardComplete:!0}})}}),this.index=0,this.startTime=performance.now()}}let xB=e=>new Promise(t=>xW.iK(t,e));var xV=n(56655);let xK=e=>{let{enabled:t,type:n}=e,i=(0,xV.As)(n),r=(0,f.useRef)(!0);(0,f.useEffect)(()=>{if(!t)return;let e=i.scroller;if(!e)return;let n=()=>{i.isAtBottom(40)?r.current=!0:r.current=!1},s=()=>{r.current=!1};return e.addEventListener("wheel",n,{passive:!0}),e.addEventListener("touchend",n,{passive:!0}),e.addEventListener("touchstart",s,{passive:!0}),e.addEventListener("touchmove",s,{passive:!0}),()=>{e.removeEventListener("wheel",n),e.removeEventListener("touchend",n),e.removeEventListener("touchstart",s),e.removeEventListener("touchmove",s)}},[i,t]);let s=(0,f.useCallback)(()=>{if(r.current){var e;null===(e=i.scroller)||void 0===e||e.scrollTo({top:i.scroller.scrollHeight,behavior:"auto"})}},[i]);return(0,hz.Z_)(s,100)};var xY=n(42557);let xZ="[CONTENT_FILTER]",xJ=()=>(0,a.jsxs)(nV.b,{status:"error",variant:"solid",children:[(0,a.jsx)(rW.z,{}),(0,a.jsx)(nY.X,{children:(0,a.jsxs)(tI.K,{children:[(0,a.jsx)("strong",{children:(0,a.jsx)(h.cC,{id:"7g5s/N"})}),(0,a.jsx)(e3.x,{children:(0,a.jsx)(h.cC,{id:"Xp43Ei"})})]})})]}),xX=()=>(0,a.jsxs)(nV.b,{variant:"light",children:[(0,a.jsx)(tA.$,{size:"sm",mr:2}),(0,a.jsxs)(nY.X,{children:[(0,a.jsx)("strong",{children:(0,a.jsx)(h.cC,{id:"n2cF1o"})})," ",(0,a.jsx)(h.cC,{id:"BFGwQA"})]})]}),xQ=e=>{let{editor:t,content:n,cardId:i,cardIndex:r,cardComplete:s}=e,o=(0,eF.N2)(t.state.doc,e=>(0,hD.KH)(e))[0],l=(0,eF.N2)(t.state.doc,e=>(0,hD.KH)(e)&&e.attrs.id===i)[0];if(!o)throw Error("Doc does not have a first card");let a=l?{from:l.pos,to:l.pos+l.node.nodeSize}:0===r?{from:o.pos,to:o.pos+o.node.nodeSize}:t.state.doc.nodeSize-3;try{if(t.commands.insertContentAt(a,n,{updateSelection:0===r}),s&&0===r){let e=(0,hl.t)(t.state.doc.resolve(o.pos));e&&t.commands.command(t=>{let{tr:n}=t;return n.setSelection(e),!0})}}catch(e){console.warn("[useCreateFromStream] ERROR updating card"),console.warn(e)}},x$=e=>{let{docId:t,aiOptions:n,store:i,generateInfo:r,editor:s,lazyImages:o}=e;if(!r.lastEventId||!r.streamId||!r.interactionId){console.error("Trying to resume stream for doc (id=".concat(t,") without lastEventId or streamId or interactionId"),{lastEventId:r.lastEventId,streamId:r.streamId,interactionId:r.interactionId});return}xR.a.trackRequestSent(i,{interface:"wizard",streaming:!0,interactionId:r.interactionId,isResuming:!0});let{stream:l}=(0,xD.pM)({interactionId:r.interactionId,lastEventId:r.lastEventId,streamId:r.streamId,retries:3}),a={preserveLayouts:!!n.preserveLayouts,imageOptions:n.imageOptions||{},docFormatKey:(0,iQ.hx)((0,iQ.VA)(s)).formatType,lazyImages:o,theme:(0,F.Pu)(i.getState())};return(0,xO.Nl)({stream:l,docId:t,interactionId:r.interactionId,lastCompletedCardId:r.lastCompletedCardId,lastCompletedCardIndex:r.lastCompletedCardIndex,options:a,store:i})},x0=(e,t)=>{let n=(0,U.CG)(F.Pu),i=(0,U.qr)(),r=(0,U.TL)(),s=(0,U.CG)(F.KV),o=(0,e0.ye)("streamResumingEnabled"),l=(0,e0.ye)("generatorLazyImages"),a=(0,f.useRef)(!1),c=(0,e0.ye)("generatorLazyImages"),{isStreaming:d,onStreamData:u,onStreamDone:h,onStreamError:x,onStreamStart:p,onAbortStream:m}=x1({docId:e}),g=xK({enabled:d,type:"editor"}),j=(0,f.useCallback)(async r=>{let s,o;if(!t)return;p({editor:t});let l=x2({streamResponse:r,editor:t,store:i,theme:n,docId:e}).getReader();try{for(;!(s=await l.read()).done;)if(s.value){if(a.current){console.log("[AIStream] has aborted -- no longer reading stream");break}o=s.value,"data"===o.event&&(u({value:o.data,editor:t,streamResponse:r}),g())}}catch(e){x({err:e,streamResponse:r,editor:t});return}a.current||(o&&"done"!==o.event&&console.error('[AIStream] incomplete stream: last message received is not `event="done"`',{lastMessage:o}),h({editor:t,streamResponse:r}))},[e,t,u,h,x,p,g,i,n]);(0,X.v)(()=>{if(!t||!s||d||!e)return;let n=(0,id.oH)(e)(i.getState()),r=(0,id.nl)(i.getState());if(n){"running"===n.status&&j(n);return}if(!o||r)return;let{generateInfo:l,generateStatus:a,aiOptions:u}=(0,iQ.VA)(t);if("streaming"!==a){if(new URLSearchParams(window.location.search).get("restream")){let n=x$({docId:e,aiOptions:u,generateInfo:{interactionId:l.interactionId,streamId:l.streamId,lastEventId:"0",lastCompletedCardId:null,lastCompletedCardIndex:null},editor:t,store:i,lazyImages:c});n&&j(n)}return}let h=(0,F.yx)(i.getState());if((null==h?void 0:h.createdTime)&&Date.now()-new Date(h.createdTime).getTime()>36e5){t.commands.updateAttributesAtPos(0,{generateStatus:"done"});return}let x=x$({docId:e,generateInfo:l,editor:t,store:i,aiOptions:u,lazyImages:c});x&&j(x)},[e,t,i,s,p,x,u,h,o,j,d,l,c],[t,s]),(0,f.useEffect)(()=>()=>{let n=(0,id.oH)(e)(i.getState());t&&n&&"running"===n.status&&(a.current=!0,m({editor:t,streamResponse:n}))},[r,e,m,t,i])},x1=e=>{let{docId:t}=e,n=(0,ir.p)(),i=(0,U.TL)(),r=(0,U.qr)(),s=(0,e0.ye)("aiWizardUploadImages"),[o,l]=(0,f.useState)(!1),c=(0,e0.ye)("debugLogging"),d=(0,f.useRef)(null);(0,f.useEffect)(()=>()=>{d.current&&(n.close(d.current),d.current=null)},[n]);let u=(0,f.useCallback)(()=>{d.current||(d.current=n({id:"ai-generating-toast",isClosable:!1,render:()=>xX(),position:"top",duration:null}))},[n]),x=(0,f.useCallback)(e=>{let{editor:t}=e;t&&(l(!0),t.commands.setAIGenerationRunning(!0),u())},[u]),p=(0,f.useCallback)(e=>{let{editor:t,value:n,streamResponse:i}=e;if(!i||!t)return;let{id:r,cardComplete:o,index:l,content:a}=n;xQ({editor:t,content:a,cardId:r,cardIndex:l,cardComplete:o}),o&&s&&(0,c$.g1)({editor:t,cardId:r})},[s]),m=(0,f.useCallback)(e=>{var t,s,o;let{editor:u,streamResponse:x}=e;if(!u||!x)return;let p=x.id,{aiOptions:m}=(0,iQ.VA)(u);l(!1),u.commands.setAIGenerationRunning(!1),u.commands.updateAttributesAtPos(0,{generateStatus:"done"});let f=(0,xL.NV)(),g=f.debugInfo();c&&console.log("[AIStream] ImageStore DEBUG",{imageStore:f,debug:g}),(0,xL.Uu)(),i((0,id.G0)({id:p,status:"complete"}));let j=(0,xY.R)(u),v=new TextEncoder().encode(JSON.stringify(u.state.doc.toJSON())),C=j?j/v.byteLength:void 0;xR.a.trackStreamComplete(r,p,{imageProvider:null===(t=m.imageOptions)||void 0===t?void 0:t.provider,numImageSearches:g.requests.length,imageSearches:g.requests,ydocToJsonRatio:C});let b=(0,F.yx)(r.getState());b&&(null===(s=b.docGenerateInput)||void 0===s?void 0:s.id)?(0,tx.d)((null===(o=m.imageOptions)||void 0===o?void 0:o.provider)==="aiGenerated"?"generateV2WithImages":"generateV2",b.organization,p):(0,tx.d)("wizardCreation",null==b?void 0:b.organization,p),d.current&&n.update(d.current,{title:(0,a.jsx)(h.cC,{id:"nm7VEQ",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}}),status:"success",position:"top",duration:3e3,isClosable:!0})},[i,c,r,n]);return{isStreaming:o,onStreamStart:x,onStreamData:p,onStreamError:(0,f.useCallback)(e=>{let{err:s,editor:o,streamResponse:u}=e,x=u.id,{errorMessage:p,errorCode:m}=(0,xP.uS)(s);console.error("StreamError: ",{interactionId:x,errorMessage:p,errorCode:m,stack:s.stack}),c&&console.log("StreamError: (".concat(m,") - ").concat(p),s.stack),l(!1),o.commands.setAIGenerationRunning(!1),o.commands.updateAttributesAtPos(0,{generateStatus:"done"}),(0,xL.Uu)(),i((0,id.G0)({id:x,status:"error"}));let f=(0,id.Sn)(x)(r.getState());if(f){let{latency:e,...n}=f;(0,tu.pQ)({...n,errorName:"StreamError",errorMessage:p,errorCode:m,outputMessage:"",latency:e||performance.now()-n.startTime,isResuming:u.isResuming,docId:t})}d.current&&(p===xZ?n.update(d.current,{render:xJ,position:"top",duration:null,isClosable:!0}):n.update(d.current,{title:(0,a.jsx)(h.cC,{id:"sbsGk/"}),status:"error",position:"top",duration:null,isClosable:!0}))},[i,t,c,r,n]),onStreamDone:m,onAbortStream:(0,f.useCallback)(e=>{let{editor:t,streamResponse:n}=e,s=n.id;l(!1),t.commands.setAIGenerationRunning(!1),xR.a.trackStreamAbort(r,{interactionId:s,abortReason:"leave-editor"}),i((0,id.Of)({id:s}))},[i,r])}},x2=e=>{let{streamResponse:t,editor:n,store:i,docId:r,theme:s}=e,{id:o,stream:l}=t,a=!0;return l.pipeThrough(new xG(s)).pipeThrough(new xq(t.id)).pipeThrough(new xF({editor:n,theme:s,interactionId:o})).pipeThrough(new xT.GJ({transform(e,t){if("done"===e.event&&"content_filter"===e.finishReason){t.error(Error(xZ));return}t.enqueue(e)}})).pipeThrough((0,xO.c1)(e=>{a&&"data"===e.event&&(xR.a.trackStreamStart(i,{interactionId:o,docId:r}),t.isResuming&&(n.commands.deleteCardsAfter(t.lastCompletedCardId||null),t.lastCompletedCardId&&(console.log("[AIStream] refetchLazyImages",t.lastCompletedCardId),(0,c$.JZ)({editor:n,lastCompletedCardId:t.lastCompletedCardId,theme:s}))),a=!1),"data"===e.event&&e.data.cardComplete&&n.commands.updateNestedAttributesAtPos(0,{generateInfo:{lastEventId:e.id,lastCompletedCardId:e.data.id,lastCompletedCardIndex:e.data.index}})}))},x5="doc_archived_warning",x3=(e,t)=>{let n=(0,ir.p)(),[i]=(0,tW.iX9)(),[r]=(0,tW.sJX)(),s=null==e?void 0:e.site;(0,f.useEffect)(()=>()=>{n.close(x5)},[]),(0,f.useEffect)(()=>{if(s&&!s.archived){n.close(x5);return}!e||e.site||e.archived||n.close(x5)});let o=(0,f.useCallback)(async()=>{if((null==s?void 0:s.id)&&await r({variables:{id:s.id},optimisticResponse:{unarchiveSite:{id:s.id,__typename:"Site"}}}),!(null==e?void 0:e.id))return;let t={id:e.id};await i({variables:t,optimisticResponse:{unarchiveDoc:{...t,archived:!1,__typename:"Doc"}}}),n({title:(0,a.jsx)(h.cC,{id:"o8va6N"}),status:"success",position:"top",isClosable:!0,duration:5e3})},[null==e?void 0:e.id,n,null==s?void 0:s.id,i,r]);(0,f.useEffect)(()=>{e&&t===tw.Z.COLLABORATIVE&&((null==s?void 0:s.archived)||(null==e?void 0:e.archived))&&!n.isActive(x5)&&n({id:x5,title:(0,a.jsxs)(e3.x,{"data-testid":"trash-confirmation-toast",children:[(0,a.jsx)(h.cC,{id:"fkHPZu"})," ",(0,a.jsx)(i4.r,{textDecoration:"underline",onClick:o,children:(0,a.jsx)(h.cC,{id:"7wfwc0"})})]}),status:"warning",position:"top",isClosable:!1,duration:null})},[e,t,o,s,n,i])},x4=()=>{let e=(0,e0.ye)("filmstrip"),t=(0,U.CG)(tF.fh),n=(0,n1.Br)("comment"),i=(0,U.CG)(F.gh),r=(0,U.CG)((0,$.SL)("left")),s=(0,U.CG)(ew.Lw);return e&&t===tw.Z.COLLABORATIVE&&n&&i===eK.q.DOC_VIEW&&!(0,ey.s2)()&&!r&&!s};var x6=n(27042),x8=n(1613);let x9=()=>{let e=ee(),t=et(),n=(0,el.iq)({base:!1,lg:!0,"3xl":!1}),i=(0,U.CG)(F.Hl),r=(0,U.CG)(uZ.GX),s=x4(),o=(0,uJ.WD)(),l=(0,x6.k)(),a=(0,lk.S)({base:"0px",[x8.K0]:nR.bk})||"0px",{width:c}=hy();return(0,f.useMemo)(()=>({"--doc-padding-left":r&&s&&n?"".concat(c,"px"):o.src&&"bottom-left"===o.position?"".concat(o.width+o.paddingX/2,"px"):"0px","--doc-padding-right":i?a:l?"60px":"0px","--present-padding-left":"".concat(e,"px"),"--present-padding-right":"".concat(t,"px"),"--comment-slide-margin":a}),[c,r,e,i,t,l,n,a,s,o])};var x7=n(5668),pe=n(82528),pt=n(76009);let pn=e=>{let{launchIntercomUI:t}=e;return function(e){let{onClose:n}=e;return(0,a.jsxs)(c.k,{p:4,color:"white",bg:"yellow.500",borderRadius:"md",alignItems:"center",position:"relative",children:[(0,a.jsx)(e2.P,{size:"sm",onClick:n,position:"absolute",insetEnd:1,top:1}),(0,a.jsx)(O.G,{icon:cB.xHz,size:"2x"}),(0,a.jsxs)(c.k,{direction:"column",ml:3,children:[(0,a.jsx)(d.xu,{children:(0,a.jsx)(e3.x,{lineHeight:6,fontSize:"sm",children:(0,a.jsx)(h.cC,{id:"4YARE9",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc},components:{0:(0,a.jsx)("b",{})}})})}),(0,a.jsx)(e3.x,{lineHeight:6,fontSize:"sm",pt:2,children:(0,a.jsx)(h.cC,{id:"Enj8Kw",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc},components:{0:(0,a.jsx)(ej.z,{as:i4.r,variant:"link",textDecoration:"underline",fontSize:"sm",onClick:()=>{t()},colorScheme:"white"})}})})]})]})}},pi="no-snapshot-warning",pr=(e,t)=>{let n=(0,pe.G)(),i=(0,ir.p)(),r=(0,pt.z$)(),s=null==e?void 0:e.id,o=t===tw.Z.COLLABORATIVE&&(null==e?void 0:e.currentSnapshotId)===null;(0,f.useEffect)(()=>{!o||i.isActive(pi)||(i({id:pi,render:pn({launchIntercomUI:n}),duration:null,position:"top",isClosable:!0}),null==r||r.track(eM.xW.NO_CURRENT_SNAPSHOT,{docId:s}))},[r,s,n,o,i])},ps=e=>{let t=(0,U.TL)(),n=(0,U.CG)(uZ.GX),i=(0,f.useRef)(!1);(0,f.useEffect)(()=>{!e||i.current||n||(i.current=!0,t((0,uZ.dQ)({isOpen:!0})))},[t,n,e])},po=e=>{let{togglePagesPanel:t,isPagesPanelOpen:n}=e,i=(0,U.TL)(),r=(0,U.qr)(),{asPath:s}=(0,eb.useRouter)(),o=(0,U.CG)(ew.tv),l=(0,f.useRef)(n),a=(0,eD.BZ)(s),c=(0,f.useRef)(t);c.current=t,(0,ry.r)(()=>{let e=(0,$.nm)("pages")(r.getState()),t=c.current;a&&e?(t({override:"closed",disableTransition:!1}),l.current=!0):a||t({override:l.current?"open":"closed",disableTransition:!1})},[a]),(0,f.useEffect)(()=>{let e=a?(0,ey.s2)()?"mobile":o||"desktop":null;i((0,ew.Tj)({previewSize:e}))},[i,a,o])};var pl=n(56675);let pa=e=>{let t=(0,pl.x)(),n=(0,U.CG)((0,lK.cn)(e));(0,f.useEffect)(()=>{n&&t.cache.updateQuery({query:iw.yE1,variables:{id:e}},e=>{if(!(null==e?void 0:e.doc))return e;let t=e.doc;return t.titleEdited?e:{doc:{...t,title:n}}})},[n,t,e])};var pc=n(21562);let pd=(e,t)=>{let{isUnauthorized:n}=(0,e1._)();(0,eM.If)(i=>{!0!==n&&void 0!==n&&(i.track(eM.AA.DOC_VIEWED,{doc_id:e}),t===tw.Z.EXAMPLE_STATIC&&i.track(eM.AA.EXAMPLE_VIEWED,{doc_id:e}))},[e,t,n]),(0,pc.d)();let i=(0,e0.ye)("realUserMetrics"),r=t===tw.Z.COLLABORATIVE&&i,s=(0,e0.ye)("rumKeystrokeSampleRate");(0,rw.lh)(r,s)},pu=e=>{let t=(0,g.I0)(),n=(0,eM.z$)();(0,f.useEffect)(()=>{let i;let r=()=>{let r=(0,U.bh)().getState();i=(0,F.Q5)(r),(0,rS.I7)(e),t((0,F.lx)({isEditingDisabled:!0})),null==n||n.trackDocEvent(eM.AA.DOC_PRINTED)},s=()=>{t((0,F.lx)({isEditingDisabled:!1})),t((0,F.xn)({expandedCardsMap:i}))};return window.addEventListener("beforeprint",r),window.addEventListener("afterprint",s),()=>{window.removeEventListener("beforeprint",r),window.removeEventListener("afterprint",s)}},[t,e,n])},ph="doc-root",px=(0,f.memo)(function(e){let{isConnected:t}=e;return(0,a.jsx)(c.k,{flex:1,alignItems:"center",justifyContent:"center",color:"gray.500",fontSize:"2xl",children:t?(0,a.jsx)(h.cC,{id:"svObPT",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}}):(0,a.jsx)(J.V,{isConnected:!1,description:(0,a.jsx)(h.cC,{id:"BBDdvg",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}}),size:"lg",bg:"none"})})}),pp=(0,f.memo)(function(){return(0,a.jsx)(c.k,{flex:1,alignItems:"center",justifyContent:"center",color:"gray.500",fontSize:"2xl",children:(0,a.jsx)(J.V,{isConnected:!1,description:(0,a.jsx)(h.cC,{id:"ZEayfu"}),size:"lg",bg:"none"})})}),pm=e=>{let{doc:t,user:n,docEditorType:i}=e,r=(0,C.$m)(t,n),s=(0,g.v9)(F.gh),o=i===tw.Z.COLLABORATIVE&&!r,l=o&&s===eK.q.SLIDE_VIEW;return i!==tw.Z.COLLABORATIVE||n?l?(0,a.jsx)(K,{}):o?(0,a.jsx)(k.C,{showTourReplay:!0}):null:(0,a.jsx)(rt.m,{docWorkspace:null==t?void 0:t.organization})},pf=(0,tS.eT)(e=>{let{docEditorType:t}=e,n=(0,U.TL)(),{docId:i,isUnauthorized:r,passwordRequired:s,setCollaborativeEditorInstance:o,editor:l}=(0,tS._i)(),h=(0,U.CG)(tF.yx),p=(0,U.CG)(e_.lH),k=(0,U.CG)(e_.$U),{isConnected:w,isInOfflineMode:S}=(0,v.$)(),E=(0,tB.mb)(null==h?void 0:h.id,k),[I,A]=(0,f.useState)(null),_=(0,U.CG)(ew.tv),T=null!==_,O=(0,g.v9)(F.gh),{user:D}=(0,eX.SE)();(0,b.F3)({isSite:!!(null==h?void 0:h.site)}),x3(h,t),pr(h,t),x0(i,I===i?l:void 0),pa(i),pd(i,t),eO(l,t===tw.Z.COLLABORATIVE),(0,x7.j)(),xE();let{editorAnimationsClass:R,editorAnimationsCSSVars:P}=(0,eL.k)({editor:l,scrollingParentSelector:".".concat(ph),disabledOverride:T});xI(),ag(l,".".concat(ph)),aw(l),tk(),pu(l),(0,C.DD)(h,t===tw.Z.COLLABORATIVE);let L=(0,f.useRef)(null),z=(0,eR.Yy)(),G=(0,f.useMemo)(()=>(0,ez.vu)(z),[z]),N=x4();ps(N),console.debug("%c[DocEditorComponent] RENDER - ".concat(i),"background-color: gold");let{toggleCommentsPanel:M,isCommentsPanelOpen:W}=nN(),{togglePagesPanel:H,isPagesPanelOpen:q}=ad(),{isDesignPartnerPanelOpen:B}=ie();xb(),tb(),(0,f.useEffect)(()=>()=>{n((0,$.qo)()),n((0,e_.mc)())},[n]),po({togglePagesPanel:H,isPagesPanelOpen:q});let V=(0,eD.Vr)(p)&&(null==p?void 0:p.navEnabled)&&!T&&O!==eK.q.SLIDE_VIEW,K=(0,f.useCallback)(()=>!!(l&&l.state.selection.empty),[l]),{leftPanelLifecycle:Y,rightPanelLifecycle:J,globalPanelLifecycle:X}=ei(),ee=(0,Z.dU)(null==h?void 0:h.organization),et=(0,y.U)(null==h?void 0:h.title,ee),en=x.ag._({id:"X6YCwz"}),er=x.ag._({id:"abr3hR"}),es=x9(),eo=(0,f.useMemo)(()=>{let e=V?{"--doc-padding-top":eG.ik}:void 0;return{...G,...es,...e}},[G,es,V]),el=(null==h?void 0:h.disabled)||(null==h?void 0:h.archived)||(null==p?void 0:p.archived)||T,ea=!(0,ek.LQ)(window.location.href),ec=T&&k?(0,a.jsx)(eS,{docId:i}):ea?(0,a.jsx)(dH,{isDark:z,scrollingParentSelector:".".concat(ph),editorWrapperEl:L.current,docEditorType:t,isPagesPanelOpen:q,togglePagesPanel:H,isCommentsPanelOpen:W,toggleCommentsPanel:M}):null,ed=(ec?49:0)+((null==h?void 0:h.disabled)?63:0);return(0,a.jsx)(tB.DN.Provider,{value:E,children:(0,a.jsx)(j.Sy,{children:(0,a.jsxs)(c.k,{direction:"column",h:"100%",children:[(0,a.jsx)(ii,{disabled:null==h?void 0:h.disabled,docId:i}),(0,a.jsx)("style",{id:"editorStyleOverride",children:"body {overflow: hidden;}"}),(0,a.jsx)(m(),{children:(0,a.jsx)("title",{children:et})}),(0,a.jsx)(nu,{doc:h,editor:l}),(0,a.jsx)(eE.sn,{isEnabledFn:K}),ec,s?(0,a.jsx)(am,{docId:i}):r?(0,a.jsx)(px,{isConnected:w}):S&&k?(0,a.jsx)(pp,{}):(0,a.jsxs)(c.k,{id:"doc-main",direction:"row",w:"100%",h:"calc(100% - ".concat(ed,"px)"),sx:{"--editor-padding-top":"".concat(ed,"px")},"data-testid":"doc-editor-root",ref:L,children:[(0,a.jsx)(em,{panelLifecycle:Y}),(0,a.jsx)(c.k,{flex:"1",direction:"column",position:"relative",minWidth:"0",h:"100%",children:(0,a.jsxs)(d.xu,{flex:"1",overflowY:"auto",overflowX:"hidden",pos:"relative",minWidth:"0",h:"100%",className:(0,u.cx)(ph,R,B&&"design-partner-panel-open"),style:{"--ai-editing-label":"'".concat(en,"'"),"--ai-generating-label":"'".concat(er,"'"),...P},sx:eo,children:[T&&(0,a.jsx)(tM,{loading:i!==I,docId:i,editor:l,previewSize:_},"".concat(i,"__preview-editor")),t===tw.Z.PUBLIC_STATIC?(0,a.jsx)(ay,{docId:i,snapshotId:null==h?void 0:h.currentSnapshotId,scrollingParentSelector:".".concat(ph),onCreate:o}):t===tw.Z.EXAMPLE_STATIC?(0,a.jsx)(rr,{docId:i,snapshotId:null==h?void 0:h.currentSnapshotId,scrollingParentSelector:".".concat(ph),onCreate:o}):(0,a.jsxs)(Q.Mn.Provider,{value:X,children:[(0,a.jsx)(eP.Ge,{doc:h,docId:i,readOnly:el,hideForPreview:T,onCreate:e=>{o(e),A(e.gammaDocId),e.on("destroy",()=>{A(null)})},scrollingParentSelector:".".concat(ph),animationsExtensionEnabled:!0},"".concat(i,"__collaborative-editor")),l&&(0,a.jsx)(eJ,{editor:l})]}),V&&(0,a.jsx)(tq,{}),!T&&(0,a.jsx)(i2,{editor:l},i)]})}),O===eK.q.SLIDE_VIEW&&(0,a.jsx)(um,{editor:l}),(0,a.jsx)(ep,{panelLifecycle:J}),(0,a.jsx)(eN.a,{editorId:"main",children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(pm,{doc:h,user:D,docEditorType:t}),N&&(0,a.jsx)(h3,{})]})})]})]})})})});var pg=n(69251),pj=n(11881),pv=n(45182);let pC=e=>{let{theme:t,onClick:n,isChecked:i,index:r,startIndex:s}=e;return(0,a.jsxs)(d.xu,{gridColumnStart:r+1-s,display:s>r?"none":"block",gridRow:1,as:pj.f,p:2,transition:"all 0.2s ease-in-out",bgColor:i?"trueblue.100":"linen.50",textAlign:"left",tabIndex:0,borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_focus:{boxShadow:i?void 0:"outline"},outline:"none",onClick:n,_hover:{bgColor:i?"trueblue.100":"gray.100"},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&n()},"data-theme-id":t.id,"data-testid":i?"current-theme-preview":void 0,cursor:"pointer",children:[(0,a.jsx)(pv.n,{theme:t}),(0,a.jsxs)(tI.K,{direction:"row",spacing:1,pt:1,children:[i&&(0,a.jsx)(ni.n,{w:3,h:"auto",mr:1,color:"trueblue.700"}),(0,a.jsx)(e3.x,{fontSize:"sm",noOfLines:1,"data-testid":"theme-name",color:i?"trueblue.700":void 0,children:t.name})]})]})};pC.displayName="DemoDocThemePreview";let pb="linen.50",py=e=>{let{templateTheme:t,setTheme:i,currentThemeId:r}=e,s=(0,g.v9)(F.gh)===eK.q.SLIDE_VIEW,[o,l]=(0,f.useState)([]),[d,u]=(0,f.useState)(!1),[x,p]=(0,f.useState)(0),m=(0,el.iq)({base:3,md:4,lg:5})||3;(0,f.useEffect)(()=>{n.e(7715).then(n.bind(n,67715)).then(e=>{l(e.GLOBAL_THEMES)})},[]);let j=[...t?[t]:[],...o.filter(e=>e.id!==(null==t?void 0:t.id))],v=(0,f.useCallback)(e=>{1===e?p(e=>e+1):p(e=>e-1)},[]);return s?(0,a.jsx)(a.Fragment,{}):(0,a.jsx)(ro.h,{children:(0,a.jsxs)(c.k,{w:"100%",position:"absolute",bottom:0,left:0,bgColor:pb,zIndex:"sticky",direction:"column",borderTop:"3px solid var(--chakra-colors-trueblue-500)",minH:12,p:2,justifyContent:"center",children:[(0,a.jsx)(c.k,{alignItems:"flex-end",justify:"flex-end",children:(0,a.jsx)(ej.z,{variant:"ghost",size:"sm",rightIcon:(0,a.jsx)(O.G,{icon:d?T.gc2:T.onQ}),onClick:()=>u(e=>!e),children:d?(0,a.jsx)(h.cC,{id:"yz7wBu"}):(0,a.jsx)(h.cC,{id:"x6tIe+"})})}),(0,a.jsx)(c.k,{justify:"flex-start",align:"flex-start",bgColor:pb,w:"100%",children:d&&(0,a.jsxs)(tI.K,{direction:"row",align:"center",justify:"center",w:"100%",children:[(0,a.jsx)(I.h,{"aria-label":"Left",onClick:()=>v(-1),variant:"ghost",isDisabled:0===x,icon:(0,a.jsx)(O.G,{icon:T.EyR})}),(0,a.jsx)(pg.r,{w:"100%",flex:1,overflow:"hidden",padding:2,transition:"all 0.2s ease-in-out",templateColumns:["repeat(".concat(m,", calc(100% / ").concat(m," - 1em))")],gap:"0 1em",bgColor:pb,children:j.map((e,t)=>(0,a.jsx)(pC,{index:t,startIndex:x,isChecked:e.id===r,theme:e,onClick:()=>{i(e)}},e.id))}),(0,a.jsx)(I.h,{"aria-label":"Right",variant:"ghost",isDisabled:x+m>j.length,onClick:()=>v(1),icon:(0,a.jsx)(O.G,{icon:T.yOZ})})]})})]})})};var pk=n(89833),pw=n(18922);let pS=[{description:(0,a.jsx)(h.cC,{id:"gtWy3j"}),shortcut:["←","→"]},{description:(0,a.jsx)(h.cC,{id:"UCxK2S"}),shortcut:["↑","↓"]},{description:(0,a.jsx)(h.cC,{id:"IkakN2"}),shortcut:"Esc"},{description:(0,a.jsx)(h.cC,{id:"CgmvBu"}),shortcut:"S"},{description:(0,a.jsx)(h.cC,{id:"rEj/lx"}),shortcut:"Enter"},{description:(0,a.jsx)(h.cC,{id:"dQU33K"}),shortcut:"Mod+Shift+O"},{description:(0,a.jsx)(h.cC,{id:"K0Oq/D"}),shortcut:"R"}],pE=e=>{let{editorWrapperEl:t,scrollingParentSelector:n}=e,{enterSlideView:i,exitSlideView:r,setExitedFullscreenByClick:s,isFullscreen:o,enterFullscreen:l,exitFullscreen:c}=rP({editorWrapperEl:t,scrollingParentSelector:n}),d=(0,U.CG)(F.gh),u=(0,f.useRef)(d);return(0,f.useEffect)(()=>{u.current=d},[d]),(0,a.jsxs)(eg.U,{children:[(0,a.jsxs)(ev.h,{isAttached:!0,size:"sm",children:[(0,a.jsx)(eC.kH,{label:d===eK.q.DOC_VIEW?(0,a.jsx)(h.cC,{id:"ek5OwP",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}}):(0,a.jsx)(h.cC,{id:"43JI0J",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}}),children:(0,a.jsx)(ej.z,{variant:d===eK.q.DOC_VIEW?"solid":"plain",cursor:d===eK.q.SLIDE_VIEW?"pointer":"auto",onClick:()=>{d===eK.q.SLIDE_VIEW&&r()},leftIcon:(0,a.jsx)(O.G,{icon:T.cwv}),children:(0,a.jsx)(h.cC,{id:"7Zdnlq"})})}),(0,a.jsx)(eC.kH,{label:d===eK.q.SLIDE_VIEW?(0,a.jsx)(h.cC,{id:"Zfr5aa",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}}):(0,a.jsx)(h.cC,{id:"rK6Cev",values:{GAMMA_ARTIFACT_PROPER_NOUN:Y.Yc}}),children:(0,a.jsx)(ej.z,{variant:d===eK.q.SLIDE_VIEW?"solid":"plain",cursor:d===eK.q.DOC_VIEW?"pointer":"auto",onClick:()=>{d===eK.q.DOC_VIEW&&i({fullscreen:!1})},leftIcon:(0,a.jsx)(O.G,{icon:T.bgy}),children:(0,a.jsx)(h.cC,{id:"FOoDGS"})})})]}),d===eK.q.SLIDE_VIEW&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(rz.i,{orientation:"vertical"}),(0,a.jsx)(eC.kH,{label:o?(0,a.jsx)(h.cC,{id:"IkOhTI"}):(0,a.jsx)(h.cC,{id:"q8ARHN"}),children:(0,a.jsx)(I.h,{size:"sm","aria-label":o?x.ag._({id:"IkOhTI"}):x.ag._({id:"q8ARHN"}),borderRadius:"md",icon:(0,a.jsx)(O.G,{icon:o?T.Qj4:T.TL5}),onClick:o?()=>{s(!0),c()}:l})}),(0,a.jsxs)(S.J,{children:[(0,a.jsx)(E.x,{children:(0,a.jsx)(ej.z,{size:"sm",variant:"plain",fontWeight:"normal",children:(0,a.jsx)(h.cC,{id:"77Emn0"})})}),(0,a.jsxs)(A.y,{border:"1px solid #eee !important",children:[(0,a.jsx)(ct.Q,{}),(0,a.jsx)(pk.u,{}),(0,a.jsx)(_.b,{children:(0,a.jsx)(pw.A,{list:pS})})]})]})]})]})},pI=(0,f.memo)(function(e){let{scrollingParentSelector:t,editorWrapperEl:n}=e;(0,U.CG)(tF.yx);let i=(0,f.useRef)(null);return(0,a.jsx)(c.k,{ref:i,bg:"white",borderBottom:"3px solid var(--chakra-colors-trueblue-600)",position:"absolute",zIndex:"overlay",top:0,left:0,right:0,p:2,alignItems:"flex-start",justifyContent:"flex-start",pr:6,children:(0,a.jsx)(c.k,{direction:"column",w:"100%",children:(0,a.jsx)(pE,{editorWrapperEl:n,scrollingParentSelector:t})})})});var pA=n(21164),p_=n(91148);let pT=e=>{let{toggleToCPanel:t,initializeToCPanel:n,isToCPanelOpen:i}=e,{breakpoints:{xl:r}}=(0,p_.F)(),s=(0,U.CG)(F.gh),[o,l]=(0,f.useState)(s!==eK.q.SLIDE_VIEW),[a,c]=(0,f.useState)(!1),d=(0,g.I0)();(0,tj.vm)(()=>{n()},[r,t,n,d],[]),(0,tj.vm)(()=>{s===eK.q.SLIDE_VIEW?(l(i),t({disableTransition:!1,override:"closed"})):a&&s===eK.q.DOC_VIEW&&t({disableTransition:!1,override:o?"open":"closed"})},[t,i,o,s,a],[s])},pO="doc-root",pD=(0,tS.eT)(e=>{var t;let{docEditorType:n=tw.Z.COLLABORATIVE}=e,{docId:i,setCollaborativeEditorInstance:r,editor:s}=(0,tS._i)(),o=(0,U.CG)(tF.yx);pd(i,n),(0,x7.j)(),xE(),xI(),ag(s,".".concat(pO)),aw(s),tk(),pu(s),(0,C.DD)(o,n===tw.Z.COLLABORATIVE);let l=(0,f.useRef)(null),u=null==o?void 0:o.theme,[h,x]=(0,f.useState)(()=>u),p=(0,U.TL)(),g=(0,f.useRef)(!1),{data:j}=(0,tW.EDv)({variables:{docId:i,snapshotId:null==o?void 0:o.currentSnapshotId},skip:!(null==o?void 0:o.currentSnapshotId)}),v=null==j?void 0:null===(t=j.snapshot)||void 0===t?void 0:t.content.default;console.debug("%c[DemoDocEditorComponent] RENDER - ".concat(i),"background-color: gold"),(0,f.useEffect)(()=>{u&&!g.current&&(x(u),g.current=!0)},[u]),(0,f.useEffect)(()=>{if(!s)return;let e=null==h?void 0:h.config.accentBackgrounds;if(!e||0===e.length){v&&s.commands.setContent(v);return}s.commands.updateThemeAccentImages(e)},[s,h,v]);let{togglePanel:b,isPanelOpen:y,initPanel:k}=en(pA.Q);pT({toggleToCPanel:b,isToCPanelOpen:y,initializeToCPanel:k}),(0,f.useEffect)(()=>()=>{p((0,$.qo)())},[p]);let{leftPanelLifecycle:w}=ei();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("style",{id:"editorStyleOverride",children:"body {overflow: hidden;}"}),(0,a.jsx)(m(),{children:(0,a.jsxs)("title",{children:["".concat(o?(0,og.$)(o.title)+" | ":""),"Gamma"]})}),(0,a.jsxs)(c.k,{id:"doc-main",direction:"row",w:"100%",h:"100%","data-testid":"doc-editor-root",ref:l,children:[(0,a.jsx)(em,{panelLifecycle:w}),(0,a.jsxs)(c.k,{flex:"1",direction:"column",position:"relative",minWidth:"0",h:"100%",children:[s&&(0,a.jsx)(pI,{scrollingParentSelector:".".concat(pO),editorWrapperEl:l.current,setTheme:x,currentThemeId:(null==h?void 0:h.id)||(null==u?void 0:u.id),templateTheme:u}),(0,a.jsxs)(d.xu,{flex:"1",overflowY:"auto",overflowX:"hidden",minWidth:"0",h:"100%",className:pO,children:[(0,a.jsx)(ay,{docId:i,snapshotId:null==o?void 0:o.currentSnapshotId,scrollingParentSelector:".".concat(pO),onCreate:r,theme:h,hideMadeWithGammaBadge:!0}),(0,a.jsx)(um,{editor:s,showNavigationControls:!0})]})]}),(0,a.jsx)(py,{setTheme:x,currentThemeId:(null==h?void 0:h.id)||(null==u?void 0:u.id),templateTheme:u})]})]})}),pR="body";var pP=n(69205);let pL=e=>{let t=(0,xV.As)(e),[n,i]=(0,f.useState)("up");return(0,f.useEffect)(()=>{let e=document.querySelector(t.scrollSelector);if(!e)return;let n=(null==e?void 0:e.scrollTop)||0,r=e=>Math.abs(e-n)>0,s=e=>e>n&&!(n>0&&0===e)&&!(e>0&&0===n),o=()=>{let t=(null==e?void 0:e.scrollTop)||0;r(t)&&(i(s(t)?"down":"up"),n=t>0?t:0)},l=L()(()=>window.requestAnimationFrame(o),500,{leading:!0});return null==e||e.addEventListener("scroll",l),()=>null==e?void 0:e.removeEventListener("scroll",l)},[t.scrollSelector]),n};var pz=n(80197);let pG=(0,f.memo)(()=>(0,a.jsx)(d.xu,{w:"100%",h:"1px",bg:"gray.200",my:2,mx:-2,_first:{display:"none"},_last:{display:"none"}}));pG.displayName="MenuDivider";let pN=(0,f.memo)(e=>{let{icon:t,children:n,...i}=e;return(0,a.jsx)(d.xu,{as:"button",w:"100%",textAlign:"left",px:2,py:2,fontWeight:"500",color:"gray.700",transition:"all 0.2s",_hover:{bg:"gray.100"},_focus:{outline:"none"},_active:{bg:"gray.200"},borderRadius:"md",...i,children:(0,a.jsxs)(eg.U,{children:[t&&(0,a.jsx)(d.xu,{children:t}),(0,a.jsx)(d.xu,{children:n})]})})});pN.displayName="MenuItem";let pM=e=>{var t,n;let{isOpen:i,onClose:r,doc:s,editingEnabled:o}=e,{user:l}=(0,eX.SE)(),{isConnected:d}=(0,tW.$gs)(),u=(0,i6.e)(),{editor:x}=(0,tS._i)(),p=(0,og.$)(null==s?void 0:s.title),m=(null==s?void 0:s.createdTime)&&(0,om.Z)((0,of.Z)(s.createdTime),"PPP"),g=null==s?void 0:s.id,{isOpen:j,onClose:v,onOpen:C}=(0,nd.M)({id:"analyticsPanelDisclosure"}),[b]=(0,tW.LT4)(),[y]=(0,tW.iX9)(),k=(0,eM.z$)(),w=(0,eX.py)("manage",s)&&!!l,S=(0,eX.py)("manage",s)&&!!l,E=!!(l&&0!==l.workspaceMemberships.length),I=!!l&&S,A=(0,f.useCallback)(async()=>{if(!x)return;let e=x.getJSON();await u({docId:g,initialContent:e,source:"editor_toolbar_doc_menu_duplicate",newWindow:!1}),r()},[g,u,x,r]),_=(0,f.useCallback)(()=>{null==k||k.track(eM.AA.DOC_ANALYTICS_VIEWED,{docId:g,source:"toolbar_doc_menu",type:"personal"}),C()},[k,g,C]),D=(0,f.useCallback)(e=>()=>{if(!g)return;let t={id:g};e?b({variables:t,optimisticResponse:{archiveDoc:{...t,archived:e,__typename:"Doc"}}}):y({variables:t,optimisticResponse:{unarchiveDoc:{...t,archived:e,__typename:"Doc"}}})},[b,g,y]);return(0,a.jsxs)(a.Fragment,{children:[s&&(0,a.jsx)(eC.Aj,{isOpen:i,onClose:r,children:(0,a.jsxs)(c.k,{w:"100%",h:i?"100%":void 0,direction:"column",children:[(0,a.jsxs)(eg.U,{align:"flex-start",p:6,children:[(0,a.jsxs)(tI.K,{spacing:0,children:[(0,a.jsx)(e3.x,{fontSize:"2xl",fontWeight:"bold",letterSpacing:"tight",noOfLines:6,children:p}),(0,a.jsx)(e3.x,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,a.jsx)(h.cC,{id:"jlWdji",values:{createdTime:m}})}),(0,a.jsx)(eC.kH,{label:null==s?void 0:null===(t=s.createdBy)||void 0===t?void 0:t.email,children:(0,a.jsx)(e3.x,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,a.jsx)(h.cC,{id:"t490IT",values:{0:null==s?void 0:null===(n=s.createdBy)||void 0===n?void 0:n.displayName}})})})]}),(0,a.jsx)(e4.L,{}),(0,a.jsx)(e2.P,{mt:-2,onClick:e=>{e.stopPropagation(),r()}})]}),(0,a.jsxs)(tI.K,{p:3,pt:0,children:[(0,a.jsx)(pG,{}),S&&(0,a.jsx)(pN,{icon:(0,a.jsx)(O.G,{icon:T.nNP,fixedWidth:!0}),onClick:()=>{r(),oC.T.emit("openSharePanel",{view:"invite"})},children:(0,a.jsx)(h.cC,{id:"iyga2M"})}),o&&(0,a.jsx)(pN,{icon:(0,a.jsx)(O.G,{icon:T.q2v,fixedWidth:!0}),onClick:()=>{r(),oC.T.emit("toggleThemeBlock",!0)},"data-testid":"mobile-theme-button",children:(0,a.jsx)(h.cC,{id:"W15e8B"})}),(0,a.jsx)(pG,{}),d&&(0,a.jsxs)(a.Fragment,{children:[I&&(0,a.jsx)(pN,{icon:(0,a.jsx)(O.G,{icon:T.Ma4,fixedWidth:!0}),onClick:()=>{r(),_()},children:(0,a.jsx)(h.cC,{id:"qcxxQS"})}),E&&(0,a.jsx)(pN,{icon:(0,a.jsx)(O.G,{icon:T.kZ_,fixedWidth:!0}),onClick:A,children:(0,a.jsx)(h.cC,{id:"euc6Ns"})}),w&&(0,a.jsx)(pN,{icon:(0,a.jsx)(O.G,{icon:T.kwI,fixedWidth:!0}),onClick:()=>{r(),oC.T.emit("openSharePanel",{view:"export"})},children:(0,a.jsx)(h.cC,{id:"U8WPSi"})}),S&&(0,a.jsx)(pG,{}),S?s.archived?(0,a.jsx)(pN,{icon:(0,a.jsx)(O.G,{icon:T.ZeM,fixedWidth:!0}),onClick:D(!1),children:(0,a.jsx)(h.cC,{id:"yKu/3Y"})}):(0,a.jsx)(pN,{"data-testid":"doc-menu-trash-button",color:"red.500",icon:(0,a.jsx)(O.G,{icon:T.XAH,fixedWidth:!0}),onClick:D(!0),children:(0,a.jsx)(h.cC,{id:"1C/Yjq"})}):null]})]})]})}),s&&j&&(0,a.jsx)(on,{doc:s,isAnalyticsPanelOpen:j,onAnalyticsPanelClose:v,mode:"full"}),o&&(0,a.jsx)(dL,{})]})},pU=e=>{var t;let{doc:n,editor:i,commentsEnabled:r,editingEnabled:s,onCommentFeedOpen:o,onTocOpen:l}=e,[c]=(0,aq.X)(H.H.lastHomeUrl,"/"),{user:d}=(0,eX.SE)(),u=(0,eX.py)("manage",n)||s,h=(null==n?void 0:null===(t=n.comments)||void 0===t?void 0:t.filter(e=>e.status===tW.Ux9.Open).length)||0,x=pL("editor"),p=(0,g.v9)(F.Pu),m=(0,pz.Jh)(p),j=(0,t2.wj)(p)?"white":"gray.800",v=(0,t2.wj)(p)?"trueblue.300":"trueblue.700",C=(0,f.useCallback)(()=>{i&&i.commands.undo()},[i]),{isOpen:b,onOpen:y,onClose:k}=(0,w.q)();return n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(pM,{doc:n,isOpen:b,onClose:k,editingEnabled:s}),(0,a.jsxs)(eg.U,{p:1,px:2,bg:"gray.50",shadow:"lg",position:"sticky",top:0,transitionProperty:"common",transitionDuration:"normal",transform:"up"==x?"translate(0px,0px)":"translate(0px,-100%)",opacity:"up"==x?1:0,zIndex:"sticky",sx:{...(0,pz.Oj)(m,p,!0),border:"none",filter:"none",borderRadius:0},color:j,children:[d&&(0,a.jsx)(nW(),{href:c,passHref:!0,legacyBehavior:!0,children:(0,a.jsx)(I.h,{as:i4.r,"aria-label":"Home",color:j,_hover:{bg:"transparent",color:v},icon:(0,a.jsx)(O.G,{icon:T.J9Y,size:"1x"}),variant:"ghost"})}),(0,a.jsx)(e3.x,{flex:1,fontSize:"sm",noOfLines:1,ml:2,color:j,children:null==n?void 0:n.title}),(0,a.jsxs)(ev.h,{variant:"ghost",children:[r&&(0,a.jsx)(ej.z,{color:j,_hover:{bg:"transparent",color:v},fontSize:"sm",onClick:o,leftIcon:(0,a.jsx)(O.G,{icon:T.Mzg}),children:h}),s&&(0,a.jsx)(I.h,{color:j,"aria-label":"Undo",onClick:C,_hover:{bg:"transparent",color:v},icon:(0,a.jsx)(O.G,{icon:T.X7o})}),!s&&(0,a.jsx)(I.h,{color:j,"aria-label":"Open table of contents",_hover:{bg:"transparent",color:v},onClick:l,icon:(0,a.jsx)(O.G,{icon:T.xiG})}),u&&(0,a.jsx)(I.h,{color:j,"aria-label":"Open toolbar",_hover:{bg:"transparent",color:v},onClick:y,icon:(0,a.jsx)(O.G,{icon:T.S6C})})]})]})]}):null},pF=e=>{let{doc:t,docEditorType:n,commentsEnabled:i=!0}=e,{docId:r,setCollaborativeEditorInstance:s,editor:o}=(0,tS._i)(),{isOpen:l,onOpen:d,onClose:u}=(0,w.q)({id:"mobile-comment-feed-panel-drawer"}),{isOpen:h,onOpen:x,onClose:p}=(0,w.q)({id:"mobile-toc-drawer"}),[m,g]=(0,f.useState)(null);console.debug("%c[MobileEditorWrapper] RENDER - ".concat(r),"background-color: gold");let v=(0,e0.ye)("mobileEditing"),C=(0,eX.py)("edit",t),b=v&&C;return(0,a.jsx)(j.Sy,{children:(0,a.jsxs)(c.k,{ref:(0,f.useCallback)(e=>g(e),[]),direction:"column",flex:1,children:[(0,a.jsx)(pU,{doc:t,editor:o,onCommentFeedOpen:d,commentsEnabled:!b&&i,editingEnabled:b,onTocOpen:x}),n===tw.Z.PUBLIC_STATIC?(0,a.jsx)(ay,{docId:r,snapshotId:null==t?void 0:t.currentSnapshotId,scrollingParentSelector:pR,onCreate:s}):n===tw.Z.EXAMPLE_STATIC?(0,a.jsx)(rr,{docId:r,snapshotId:null==t?void 0:t.currentSnapshotId,scrollingParentSelector:pR,onCreate:s}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eP.Ge,{doc:t,docId:r,readOnly:!b,onCreate:s,scrollingParentSelector:pR}),o&&(0,a.jsx)(eJ,{editor:o})]}),i&&l&&(0,a.jsx)(eC.Aj,{isOpen:l,onClose:u,drawerProps:{autoFocus:!1,returnFocusOnClose:!1},children:(0,a.jsx)(nz,{onClose:u,editor:o})}),h&&(0,a.jsx)(eC.Aj,{isOpen:h,onClose:p,drawerProps:{returnFocusOnClose:!1},children:(0,a.jsx)(pP.o,{rootElement:m,handleClose:p})}),(0,a.jsx)(dE,{doc:t,showButton:!1}),(0,a.jsx)(eN.a,{children:(0,a.jsx)(i2,{editor:o})})]})})},pW=(0,tS.eT)(e=>{let{docEditorType:t}=e,{docId:n,isUnauthorized:i,passwordRequired:r,editor:s}=(0,tS._i)();pd(n,t);let{editorAnimationsClass:o,editorAnimationsCSSVars:l}=(0,eL.k)({editor:s,scrollingParentSelector:pR});x0(n,s),(0,x7.j)();let d=(0,f.useRef)(null),u=(0,U.CG)(tF.yx);console.debug("%c[MobileDocViewerComponent] RENDER - ".concat(n),"background-color: gold");let h=t===tw.Z.COLLABORATIVE;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(m(),{children:[(0,a.jsxs)("title",{children:["".concat(u?(0,og.$)(u.title)+" | ":""),"Gamma"]}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, user-scalable=no"})]}),(0,a.jsx)(la.xB,{styles:{html:{overflowX:"hidden"},body:{overflow:"hidden scroll",WebkitOverflowScrolling:"touch"}}}),r?(0,a.jsx)(am,{docId:n}):i?(0,a.jsxs)(c.k,{flex:1,alignItems:"center",justifyContent:"center",color:"gray.500",fontSize:"2xl",p:6,textAlign:"center",children:["It looks like you don't have access to this"," ",Y.Yc,"."]}):(0,a.jsx)(c.k,{id:"doc-main",direction:"column",w:"100%",h:"100%","data-testid":"doc-editor-root",ref:d,flex:"1",className:o,style:{...l},children:(0,a.jsx)(pF,{doc:u,docEditorType:t,commentsEnabled:h})})]})})},31003:function(e){var t;t=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,(function(t){return e[t]}).bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){(function(t){e.exports=t.Phoenix=n(2)}).call(this,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,r=!1,s=void 0;try{for(var o,l=e[Symbol.iterator]();!(i=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,s=e}finally{try{i||null==l.return||l.return()}finally{if(r)throw s}}return n}}(e,t)||s(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function l(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}n.r(t),n.d(t,"Channel",function(){return E}),n.d(t,"Serializer",function(){return I}),n.d(t,"Socket",function(){return A}),n.d(t,"LongPoll",function(){return _}),n.d(t,"Ajax",function(){return T}),n.d(t,"Presence",function(){return O});var d="undefined"!=typeof window?window:null,u=("undefined"!=typeof self?self:null)||d||void 0,h="closed",x="errored",p="joined",m="joining",f="leaving",g="phx_close",j="phx_error",v="phx_join",C="phx_reply",b="phx_leave",y=[g,j,v,C,b],k="websocket",w=function(e){return"function"==typeof e?e:function(){return e}},S=function(){function e(t,n,i,r){l(this,e),this.channel=t,this.event=n,this.payload=i||function(){return{}},this.receivedResp=null,this.timeout=r,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}return c(e,[{key:"resend",value:function(e){this.timeout=e,this.reset(),this.send()}},{key:"send",value:function(){this.hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}},{key:"receive",value:function(e,t){return this.hasReceived(e)&&t(this.receivedResp.response),this.recHooks.push({status:e,callback:t}),this}},{key:"reset",value:function(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}},{key:"matchReceive",value:function(e){var t=e.status,n=e.response;e.ref,this.recHooks.filter(function(e){return e.status===t}).forEach(function(e){return e.callback(n)})}},{key:"cancelRefEvent",value:function(){this.refEvent&&this.channel.off(this.refEvent)}},{key:"cancelTimeout",value:function(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}},{key:"startTimeout",value:function(){var e=this;this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,function(t){e.cancelRefEvent(),e.cancelTimeout(),e.receivedResp=t,e.matchReceive(t)}),this.timeoutTimer=setTimeout(function(){e.trigger("timeout",{})},this.timeout)}},{key:"hasReceived",value:function(e){return this.receivedResp&&this.receivedResp.status===e}},{key:"trigger",value:function(e,t){this.channel.trigger(this.refEvent,{status:e,response:t})}}]),e}(),E=function(){function e(t,n,i){var r=this;l(this,e),this.state=h,this.topic=t,this.params=w(n||{}),this.socket=i,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new S(this,v,this.params,this.timeout),this.pushBuffer=[],this.stateChangeRefs=[],this.rejoinTimer=new D(function(){r.socket.isConnected()&&r.rejoin()},this.socket.rejoinAfterMs),this.stateChangeRefs.push(this.socket.onError(function(){return r.rejoinTimer.reset()})),this.stateChangeRefs.push(this.socket.onOpen(function(){r.rejoinTimer.reset(),r.isErrored()&&r.rejoin()})),this.joinPush.receive("ok",function(){r.state=p,r.rejoinTimer.reset(),r.pushBuffer.forEach(function(e){return e.send()}),r.pushBuffer=[]}),this.joinPush.receive("error",function(){r.state=x,r.socket.isConnected()&&r.rejoinTimer.scheduleTimeout()}),this.onClose(function(){r.rejoinTimer.reset(),r.socket.hasLogger()&&r.socket.log("channel","close ".concat(r.topic," ").concat(r.joinRef())),r.state=h,r.socket.remove(r)}),this.onError(function(e){r.socket.hasLogger()&&r.socket.log("channel","error ".concat(r.topic),e),r.isJoining()&&r.joinPush.reset(),r.state=x,r.socket.isConnected()&&r.rejoinTimer.scheduleTimeout()}),this.joinPush.receive("timeout",function(){r.socket.hasLogger()&&r.socket.log("channel","timeout ".concat(r.topic," (").concat(r.joinRef(),")"),r.joinPush.timeout),new S(r,b,w({}),r.timeout).send(),r.state=x,r.joinPush.reset(),r.socket.isConnected()&&r.rejoinTimer.scheduleTimeout()}),this.on(C,function(e,t){r.trigger(r.replyEventName(t),e)})}return c(e,[{key:"join",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;if(this.joinedOnce)throw Error("tried to join multiple times. 'join' can only be called a single time per channel instance");return this.timeout=e,this.joinedOnce=!0,this.rejoin(),this.joinPush}},{key:"onClose",value:function(e){this.on(g,e)}},{key:"onError",value:function(e){return this.on(j,function(t){return e(t)})}},{key:"on",value:function(e,t){var n=this.bindingRef++;return this.bindings.push({event:e,ref:n,callback:t}),n}},{key:"off",value:function(e,t){this.bindings=this.bindings.filter(function(n){return!(n.event===e&&(void 0===t||t===n.ref))})}},{key:"canPush",value:function(){return this.socket.isConnected()&&this.isJoined()}},{key:"push",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(t=t||{},!this.joinedOnce)throw Error("tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.join() before pushing events"));var i=new S(this,e,function(){return t},n);return this.canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}},{key:"leave",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=f;var n=function(){e.socket.hasLogger()&&e.socket.log("channel","leave ".concat(e.topic)),e.trigger(g,"leave")},i=new S(this,b,w({}),t);return i.receive("ok",function(){return n()}).receive("timeout",function(){return n()}),i.send(),this.canPush()||i.trigger("ok",{}),i}},{key:"onMessage",value:function(e,t,n){return t}},{key:"isLifecycleEvent",value:function(e){return y.indexOf(e)>=0}},{key:"isMember",value:function(e,t,n,i){return this.topic===e&&(!i||i===this.joinRef()||!this.isLifecycleEvent(t)||(this.socket.hasLogger()&&this.socket.log("channel","dropping outdated message",{topic:e,event:t,payload:n,joinRef:i}),!1))}},{key:"joinRef",value:function(){return this.joinPush.ref}},{key:"rejoin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.isLeaving()||(this.socket.leaveOpenTopic(this.topic),this.state=m,this.joinPush.resend(e))}},{key:"trigger",value:function(e,t,n,i){var r=this.onMessage(e,t,n,i);if(t&&!r)throw Error("channel onMessage callbacks must return the payload, modified or unmodified");for(var s=this.bindings.filter(function(t){return t.event===e}),o=0;o<s.length;o++)s[o].callback(r,n,i||this.joinRef())}},{key:"replyEventName",value:function(e){return"chan_reply_".concat(e)}},{key:"isClosed",value:function(){return this.state===h}},{key:"isErrored",value:function(){return this.state===x}},{key:"isJoined",value:function(){return this.state===p}},{key:"isJoining",value:function(){return this.state===m}},{key:"isLeaving",value:function(){return this.state===f}}]),e}(),I={HEADER_LENGTH:1,META_LENGTH:4,KINDS:{push:0,reply:1,broadcast:2},encode:function(e,t){return t(e.payload.constructor===ArrayBuffer?this.binaryEncode(e):JSON.stringify([e.join_ref,e.ref,e.topic,e.event,e.payload]))},decode:function(e,t){if(e.constructor===ArrayBuffer)return t(this.binaryDecode(e));var n=r(JSON.parse(e),5);return t({join_ref:n[0],ref:n[1],topic:n[2],event:n[3],payload:n[4]})},binaryEncode:function(e){var t=e.join_ref,n=e.ref,i=e.event,r=e.topic,s=e.payload,o=this.META_LENGTH+t.length+n.length+r.length+i.length,l=new ArrayBuffer(this.HEADER_LENGTH+o),a=new DataView(l),c=0;a.setUint8(c++,this.KINDS.push),a.setUint8(c++,t.length),a.setUint8(c++,n.length),a.setUint8(c++,r.length),a.setUint8(c++,i.length),Array.from(t,function(e){return a.setUint8(c++,e.charCodeAt(0))}),Array.from(n,function(e){return a.setUint8(c++,e.charCodeAt(0))}),Array.from(r,function(e){return a.setUint8(c++,e.charCodeAt(0))}),Array.from(i,function(e){return a.setUint8(c++,e.charCodeAt(0))});var d=new Uint8Array(l.byteLength+s.byteLength);return d.set(new Uint8Array(l),0),d.set(new Uint8Array(s),l.byteLength),d.buffer},binaryDecode:function(e){var t=new DataView(e),n=t.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.push:return this.decodePush(e,t,i);case this.KINDS.reply:return this.decodeReply(e,t,i);case this.KINDS.broadcast:return this.decodeBroadcast(e,t,i)}},decodePush:function(e,t,n){var i=t.getUint8(1),r=t.getUint8(2),s=t.getUint8(3),o=this.HEADER_LENGTH+this.META_LENGTH-1,l=n.decode(e.slice(o,o+i));o+=i;var a=n.decode(e.slice(o,o+r));o+=r;var c=n.decode(e.slice(o,o+s));return o+=s,{join_ref:l,ref:null,topic:a,event:c,payload:e.slice(o,e.byteLength)}},decodeReply:function(e,t,n){var i=t.getUint8(1),r=t.getUint8(2),s=t.getUint8(3),o=t.getUint8(4),l=this.HEADER_LENGTH+this.META_LENGTH,a=n.decode(e.slice(l,l+i));l+=i;var c=n.decode(e.slice(l,l+r));l+=r;var d=n.decode(e.slice(l,l+s));l+=s;var u=n.decode(e.slice(l,l+o));return l+=o,{join_ref:a,ref:c,topic:d,event:C,payload:{status:u,response:e.slice(l,e.byteLength)}}},decodeBroadcast:function(e,t,n){var i=t.getUint8(1),r=t.getUint8(2),s=this.HEADER_LENGTH+2,o=n.decode(e.slice(s,s+i));s+=i;var l=n.decode(e.slice(s,s+r));return s+=r,{join_ref:null,ref:null,topic:o,event:l,payload:e.slice(s,e.byteLength)}}},A=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(this,e),this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=i.timeout||1e4,this.transport=i.transport||u.WebSocket||_,this.defaultEncoder=I.encode.bind(I),this.defaultDecoder=I.decode.bind(I),this.closeWasClean=!1,this.unloaded=!1,this.binaryType=i.binaryType||"arraybuffer",this.transport!==_?(this.encode=i.encode||this.defaultEncoder,this.decode=i.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder),d&&d.addEventListener&&d.addEventListener("unload",function(e){n.conn&&(n.unloaded=!0,n.abnormalClose("unloaded"))}),this.heartbeatIntervalMs=i.heartbeatIntervalMs||3e4,this.rejoinAfterMs=function(e){return i.rejoinAfterMs?i.rejoinAfterMs(e):[1e3,2e3,5e3][e-1]||1e4},this.reconnectAfterMs=function(e){return n.unloaded?100:i.reconnectAfterMs?i.reconnectAfterMs(e):[10,50,100,150,200,250,500,1e3,2e3][e-1]||5e3},this.logger=i.logger||null,this.longpollerTimeout=i.longpollerTimeout||2e4,this.params=w(i.params||{}),this.endPoint="".concat(t,"/").concat(k),this.vsn=i.vsn||"2.0.0",this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new D(function(){n.teardown(function(){return n.connect()})},this.reconnectAfterMs)}return c(e,[{key:"protocol",value:function(){return location.protocol.match(/^https/)?"wss":"ws"}},{key:"endPointURL",value:function(){var e=T.appendParams(T.appendParams(this.endPoint,this.params()),{vsn:this.vsn});return"/"!==e.charAt(0)?e:"/"===e.charAt(1)?"".concat(this.protocol(),":").concat(e):"".concat(this.protocol(),"://").concat(location.host).concat(e)}},{key:"disconnect",value:function(e,t,n){this.closeWasClean=!0,this.reconnectTimer.reset(),this.teardown(e,t,n)}},{key:"connect",value:function(e){var t=this;e&&(console&&console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor"),this.params=w(e)),this.conn||(this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=function(){return t.onConnOpen()},this.conn.onerror=function(e){return t.onConnError(e)},this.conn.onmessage=function(e){return t.onConnMessage(e)},this.conn.onclose=function(e){return t.onConnClose(e)})}},{key:"log",value:function(e,t,n){this.logger(e,t,n)}},{key:"hasLogger",value:function(){return null!==this.logger}},{key:"onOpen",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.open.push([t,e]),t}},{key:"onClose",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.close.push([t,e]),t}},{key:"onError",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.error.push([t,e]),t}},{key:"onMessage",value:function(e){var t=this.makeRef();return this.stateChangeCallbacks.message.push([t,e]),t}},{key:"onConnOpen",value:function(){this.hasLogger()&&this.log("transport","connected to ".concat(this.endPointURL())),this.unloaded=!1,this.closeWasClean=!1,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach(function(e){return(0,r(e,2)[1])()})}},{key:"resetHeartbeat",value:function(){var e=this;this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(function(){return e.sendHeartbeat()},this.heartbeatIntervalMs))}},{key:"teardown",value:function(e,t,n){var i=this;if(!this.conn)return e&&e();this.waitForBufferDone(function(){i.conn&&(t?i.conn.close(t,n||""):i.conn.close()),i.waitForSocketClosed(function(){i.conn&&(i.conn.onclose=function(){},i.conn=null),e&&e()})})}},{key:"waitForBufferDone",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;5!==n&&this.conn&&this.conn.bufferedAmount?setTimeout(function(){t.waitForBufferDone(e,n+1)},150*n):e()}},{key:"waitForSocketClosed",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;5!==n&&this.conn&&3!==this.conn.readyState?setTimeout(function(){t.waitForSocketClosed(e,n+1)},150*n):e()}},{key:"onConnClose",value:function(e){this.hasLogger()&&this.log("transport","close",e),this.triggerChanError(),clearInterval(this.heartbeatTimer),this.closeWasClean||this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(function(t){return(0,r(t,2)[1])(e)})}},{key:"onConnError",value:function(e){this.hasLogger()&&this.log("transport",e),this.triggerChanError(),this.stateChangeCallbacks.error.forEach(function(t){return(0,r(t,2)[1])(e)})}},{key:"triggerChanError",value:function(){this.channels.forEach(function(e){e.isErrored()||e.isLeaving()||e.isClosed()||e.trigger(j)})}},{key:"connectionState",value:function(){switch(this.conn&&this.conn.readyState){case 0:return"connecting";case 1:return"open";case 2:return"closing";default:return"closed"}}},{key:"isConnected",value:function(){return"open"===this.connectionState()}},{key:"remove",value:function(e){this.off(e.stateChangeRefs),this.channels=this.channels.filter(function(t){return t.joinRef()!==e.joinRef()})}},{key:"off",value:function(e){for(var t in this.stateChangeCallbacks)this.stateChangeCallbacks[t]=this.stateChangeCallbacks[t].filter(function(t){var n=r(t,1)[0];return -1===e.indexOf(n)})}},{key:"channel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new E(e,t,this);return this.channels.push(n),n}},{key:"push",value:function(e){var t=this;if(this.hasLogger()){var n=e.topic,i=e.event,r=e.payload,s=e.ref,o=e.join_ref;this.log("push","".concat(n," ").concat(i," (").concat(o,", ").concat(s,")"),r)}this.isConnected()?this.encode(e,function(e){return t.conn.send(e)}):this.sendBuffer.push(function(){return t.encode(e,function(e){return t.conn.send(e)})})}},{key:"makeRef",value:function(){var e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}},{key:"sendHeartbeat",value:function(){if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.hasLogger()&&this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void this.abnormalClose("heartbeat timeout");this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef})}}},{key:"abnormalClose",value:function(e){this.closeWasClean=!1,1===this.conn.readyState&&this.conn.close(1e3,e)}},{key:"flushSendBuffer",value:function(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(function(e){return e()}),this.sendBuffer=[])}},{key:"onConnMessage",value:function(e){var t=this;this.decode(e.data,function(e){var n=e.topic,i=e.event,s=e.payload,o=e.ref,l=e.join_ref;o&&o===t.pendingHeartbeatRef&&(t.pendingHeartbeatRef=null),t.hasLogger()&&t.log("receive","".concat(s.status||""," ").concat(n," ").concat(i," ").concat(o&&"("+o+")"||""),s);for(var a=0;a<t.channels.length;a++){var c=t.channels[a];c.isMember(n,i,s,l)&&c.trigger(i,s,o,l)}for(var d=0;d<t.stateChangeCallbacks.message.length;d++)(0,r(t.stateChangeCallbacks.message[d],2)[1])(e)})}},{key:"leaveOpenTopic",value:function(e){var t=this.channels.find(function(t){return t.topic===e&&(t.isJoined()||t.isJoining())});t&&(this.hasLogger()&&this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.leave())}}]),e}(),_=function(){function e(t){l(this,e),this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(t),this.readyState=0,this.poll()}return c(e,[{key:"normalizeEndpoint",value:function(e){return e.replace("ws://","http://").replace("wss://","https://").replace(RegExp("(.*)/"+k),"$1/longpoll")}},{key:"endpointURL",value:function(){return T.appendParams(this.pollEndpoint,{token:this.token})}},{key:"closeAndRetry",value:function(){this.close(),this.readyState=0}},{key:"ontimeout",value:function(){this.onerror("timeout"),this.closeAndRetry()}},{key:"poll",value:function(){var e=this;1!==this.readyState&&0!==this.readyState||T.request("GET",this.endpointURL(),"application/json",null,this.timeout,this.ontimeout.bind(this),function(t){if(t){var n=t.status,i=t.token,r=t.messages;e.token=i}else n=0;switch(n){case 200:r.forEach(function(t){return e.onmessage({data:t})}),e.poll();break;case 204:e.poll();break;case 410:e.readyState=1,e.onopen(),e.poll();break;case 403:e.onerror(),e.close();break;case 0:case 500:e.onerror(),e.closeAndRetry();break;default:throw Error("unhandled poll status ".concat(n))}})}},{key:"send",value:function(e){var t=this;T.request("POST",this.endpointURL(),"application/json",e,this.timeout,this.onerror.bind(this,"timeout"),function(e){e&&200===e.status||(t.onerror(e&&e.status),t.closeAndRetry())})}},{key:"close",value:function(e,t){this.readyState=3,this.onclose()}}]),e}(),T=function(){function e(){l(this,e)}return c(e,null,[{key:"request",value:function(e,t,n,i,r,s,o){if(u.XDomainRequest){var l=new XDomainRequest;this.xdomainRequest(l,e,t,i,r,s,o)}else{var a=new u.XMLHttpRequest;this.xhrRequest(a,e,t,n,i,r,s,o)}}},{key:"xdomainRequest",value:function(e,t,n,i,r,s,o){var l=this;e.timeout=r,e.open(t,n),e.onload=function(){var t=l.parseJSON(e.responseText);o&&o(t)},s&&(e.ontimeout=s),e.onprogress=function(){},e.send(i)}},{key:"xhrRequest",value:function(e,t,n,i,r,s,o,l){var a=this;e.open(t,n,!0),e.timeout=s,e.setRequestHeader("Content-Type",i),e.onerror=function(){l&&l(null)},e.onreadystatechange=function(){e.readyState===a.states.complete&&l&&l(a.parseJSON(e.responseText))},o&&(e.ontimeout=o),e.send(r)}},{key:"parseJSON",value:function(e){if(!e||""===e)return null;try{return JSON.parse(e)}catch(t){return console&&console.log("failed to parse JSON response",e),null}}},{key:"serialize",value:function(e,t){var n=[];for(var r in e)if(e.hasOwnProperty(r)){var s=t?"".concat(t,"[").concat(r,"]"):r,o=e[r];"object"===i(o)?n.push(this.serialize(o,s)):n.push(encodeURIComponent(s)+"="+encodeURIComponent(o))}return n.join("&")}},{key:"appendParams",value:function(e,t){if(0===Object.keys(t).length)return e;var n=e.match(/\?/)?"&":"?";return"".concat(e).concat(n).concat(this.serialize(t))}}]),e}();T.states={complete:4};var O=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(this,e);var r=i.events||{state:"presence_state",diff:"presence_diff"};this.state={},this.pendingDiffs=[],this.channel=t,this.joinRef=null,this.caller={onJoin:function(){},onLeave:function(){},onSync:function(){}},this.channel.on(r.state,function(t){var i=n.caller,r=i.onJoin,s=i.onLeave,o=i.onSync;n.joinRef=n.channel.joinRef(),n.state=e.syncState(n.state,t,r,s),n.pendingDiffs.forEach(function(t){n.state=e.syncDiff(n.state,t,r,s)}),n.pendingDiffs=[],o()}),this.channel.on(r.diff,function(t){var i=n.caller,r=i.onJoin,s=i.onLeave,o=i.onSync;n.inPendingSyncState()?n.pendingDiffs.push(t):(n.state=e.syncDiff(n.state,t,r,s),o())})}return c(e,[{key:"onJoin",value:function(e){this.caller.onJoin=e}},{key:"onLeave",value:function(e){this.caller.onLeave=e}},{key:"onSync",value:function(e){this.caller.onSync=e}},{key:"list",value:function(t){return e.list(this.state,t)}},{key:"inPendingSyncState",value:function(){return!this.joinRef||this.joinRef!==this.channel.joinRef()}}],[{key:"syncState",value:function(e,t,n,i){var r=this,s=this.clone(e),o={},l={};return this.map(s,function(e,n){t[e]||(l[e]=n)}),this.map(t,function(e,t){var n=s[e];if(n){var i=t.metas.map(function(e){return e.phx_ref}),a=n.metas.map(function(e){return e.phx_ref}),c=t.metas.filter(function(e){return 0>a.indexOf(e.phx_ref)}),d=n.metas.filter(function(e){return 0>i.indexOf(e.phx_ref)});c.length>0&&(o[e]=t,o[e].metas=c),d.length>0&&(l[e]=r.clone(n),l[e].metas=d)}else o[e]=t}),this.syncDiff(s,{joins:o,leaves:l},n,i)}},{key:"syncDiff",value:function(e,t,n,i){var r=t.joins,l=t.leaves,a=this.clone(e);return n||(n=function(){}),i||(i=function(){}),this.map(r,function(e,t){var i=a[e];if(a[e]=t,i){var r,l=a[e].metas.map(function(e){return e.phx_ref}),c=i.metas.filter(function(e){return 0>l.indexOf(e.phx_ref)});(r=a[e].metas).unshift.apply(r,function(e){if(Array.isArray(e))return o(e)}(c)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(c)||s(c)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}n(e,i,t)}),this.map(l,function(e,t){var n=a[e];if(n){var r=t.metas.map(function(e){return e.phx_ref});n.metas=n.metas.filter(function(e){return 0>r.indexOf(e.phx_ref)}),i(e,n,t),0===n.metas.length&&delete a[e]}}),a}},{key:"list",value:function(e,t){return t||(t=function(e,t){return t}),this.map(e,function(e,n){return t(e,n)})}},{key:"map",value:function(e,t){return Object.getOwnPropertyNames(e).map(function(n){return t(n,e[n])})}},{key:"clone",value:function(e){return JSON.parse(JSON.stringify(e))}}]),e}(),D=function(){function e(t,n){l(this,e),this.callback=t,this.timerCalc=n,this.timer=null,this.tries=0}return c(e,[{key:"reset",value:function(){this.tries=0,clearTimeout(this.timer)}},{key:"scheduleTimeout",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout(function(){e.tries=e.tries+1,e.callback()},this.timerCalc(this.tries+1))}}]),e}()}])},e.exports=t()},75461:function(e,t,n){"use strict";n.d(t,{W:function(){return i},w:function(){return r}});var[i,r]=(0,n(9165).k)({name:"BreadcrumbStylesContext",errorMessage:"useBreadcrumbStyles returned is 'undefined'. Seems you forgot to wrap the components in \"<Breadcrumb />\" "})},25215:function(e,t,n){"use strict";n.d(t,{a:function(){return h}});var i=n(75461),r=n(31053),s=n(25578),o=n(29058),l=n(91982),a=n(84586),c=n(76801),d=n(2784),u=n(52322),h=(0,o.G)(function(e,t){let n=(0,l.jC)("Breadcrumb",e),{children:o,spacing:h="0.5rem",separator:x="/",className:p,listProps:m,...f}=(0,a.Lr)(e),g=(0,s.W)(o),j=g.length,v=g.map((e,t)=>(0,d.cloneElement)(e,{separator:x,spacing:h,isLastChild:j===t+1})),C=(0,r.cx)("chakra-breadcrumb",p);return(0,u.jsx)(c.m.nav,{ref:t,"aria-label":"breadcrumb",className:C,__css:n.container,...f,children:(0,u.jsx)(i.W,{value:n,children:(0,u.jsx)(c.m.ol,{className:"chakra-breadcrumb__list",...m,__css:{display:"flex",alignItems:"center",...n.list},children:v})})})});h.displayName="Breadcrumb"},58450:function(e,t,n){"use strict";n.d(t,{g:function(){return h}});var i=n(41421),r=n(75461),s=n(29058),o=n(76801),l=n(52322),a=(0,s.G)(function(e,t){let{spacing:n,...i}=e,s={mx:n,...(0,r.w)().separator};return(0,l.jsx)(o.m.span,{ref:t,role:"presentation",...i,__css:s})});a.displayName="BreadcrumbSeparator";var c=n(25578),d=n(31053),u=n(2784),h=(0,s.G)(function(e,t){let{isCurrentPage:n,separator:s,isLastChild:h,spacing:x,children:p,className:m,...f}=e,g=(0,c.W)(p).map(e=>e.type===i.A?(0,u.cloneElement)(e,{isCurrentPage:n}):e.type===a?(0,u.cloneElement)(e,{spacing:x,children:e.props.children||s}):e),j={display:"inline-flex",alignItems:"center",...(0,r.w)().item},v=(0,d.cx)("chakra-breadcrumb__list-item",m);return(0,l.jsxs)(o.m.li,{ref:t,className:v,...f,__css:j,children:[g,!h&&(0,l.jsx)(a,{spacing:x,children:s})]})});h.displayName="BreadcrumbItem"},41421:function(e,t,n){"use strict";n.d(t,{A:function(){return a}});var i=n(75461),r=n(29058),s=n(76801),o=n(31053),l=n(52322),a=(0,r.G)(function(e,t){let{isCurrentPage:n,as:r,className:a,href:c,...d}=e,u=(0,i.w)(),h={ref:t,as:r,className:(0,o.cx)("chakra-breadcrumb__link",a),...d};return n?(0,l.jsx)(s.m.span,{"aria-current":"page",__css:u.link,...h}):(0,l.jsx)(s.m.a,{__css:u.link,href:c,...h})});a.displayName="BreadcrumbLink"},75397:function(e,t,n){"use strict";n.d(t,{e:function(){return a}});var i=n(32388),r=n(31053),s=n(29058),o=n(76801),l=n(52322),a=(0,s.G)(function(e,t){let{className:n,...s}=e,a=(0,i.v)();return(0,l.jsx)(o.m.div,{ref:t,className:(0,r.cx)("chakra-card__body",n),__css:a.body,...s})})},32388:function(e,t,n){"use strict";n.d(t,{Y:function(){return i},v:function(){return r}});var[i,r]=(0,n(15706).eC)("Card")},56453:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=n(32388),r=n(31053),s=n(29058),o=n(84586),l=n(91982),a=n(76801),c=n(52322),d=(0,s.G)(function(e,t){let{className:n,children:s,direction:d="column",justify:u,align:h,...x}=(0,o.Lr)(e),p=(0,l.jC)("Card",e);return(0,c.jsx)(a.m.div,{ref:t,className:(0,r.cx)("chakra-card",n),__css:{display:"flex",flexDirection:d,justifyContent:u,alignItems:h,position:"relative",minWidth:0,wordWrap:"break-word",...p.container},...x,children:(0,c.jsx)(i.Y,{value:p,children:s})})})},19521:function(e){"use strict";e.exports=JSON.parse('{"name":"axios","version":"0.21.4","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://axios-http.com","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.14.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')}}]);
//# sourceMappingURL=239-7caf0db6dd2d1877.js.map